<TEI xmlns="http://www.tei-c.org/ns/1.0" xml:id="topic-modeling-y-mallet">
    <teiHeader>
        <fileDesc>
            <titleStmt>
                <title>Introducción a Topic Modeling y MALLET</title>
                <author role="original_author">
                    <persName>Shawn Graham</persName>
                    <persName>Scott Weingart</persName>
                    <persName>Ian Milligan</persName>
                </author>
                <editor role="reviewers">
                    <persName>John Fink</persName>
                    <persName>Alan MacEachern</persName>
                </editor>
                <author role="translators">Ulrike Henny-Krahmer</author>
                <editor role="translation-reviewers">
                    <persName>Joshua G. Ortiz Baco</persName>
                    <persName>Riva Quiroga</persName>
                </editor>
                <editor role="editors">Adam Crymble</editor>
            </titleStmt>
            <publicationStmt>
                <distributor>Programming Historian</distributor>
                <date type="translated">10/31/2018</date>
                <idno type="doi">10.46430/phes0040</idno>
                <date type="published">09/02/2012</date>
            </publicationStmt>
            <sourceDesc>
                <p>Born digital, in a markdown format. Original file: <ref type="original_file" target="#topic-modeling-and-mallet"/>.</p>
                <p>There are other translations: <ref target=""/>
                </p>
                <p>There are other translations: <ref target=""/>
                </p>
            </sourceDesc>
        </fileDesc>
        <profileDesc>
            <abstract>
                <p>Esta lección explica qué es *topic modeling* y por qué podrías querer utilizarlo en tus investigaciones. Luego aprenderás cómo instalar y trabajar con MALLET, una caja de herramientas para procesamiento de lenguajes naturales (PLN) con la que *topic modeling* se puede llevar a la práctica.</p>
            </abstract>
            <textClass>
                <keywords>
                    <term xml:lang="en">distant-reading</term>
                </keywords>
            </textClass>
        </profileDesc>
    </teiHeader>
    <text xml:lang="es">
        <body>
            <div type="2">
                <head>Nota del editor</head>
                <p>En esta lección es necesario utilizar la línea de comandos. Si no tienes experiencia previa utilizándola, consulta la lección <ref target="introduccion-a-bash">Introducción a la línea de comandos en Bash</ref> de <emph>Programming Historian</emph>.</p>
            </div>
            <div type="2">
                <head>Objetivos de la lección</head>
                <p>En esta lección, primero aprenderás qué es <emph>topic modeling</emph>
                    <ref type="footnotemark" target="#note_1"/> y por qué podrías querer utilizarlo en tus investigaciones. Luego aprenderás cómo instalar y trabajar con MALLET, una caja de herramientas para <emph>procesamiento de lenguajes naturales (PLN)</emph> que sirve para realizar este tipo de análisis. MALLET requiere que se modifique una <emph>variable de entorno</emph> (esto es, configurar un atajo para que la computadora sepa en todo momento dónde encontrar el programa MALLET) y que se trabaje con la <emph>línea de comandos</emph> (es decir, tecleando comandos manualmente en vez de hacer clic en íconos o menús).</p>
                <p>Aplicaremos el modelador de tópicos a algunos archivos de ejemplo y veremos los tipos de <emph>output</emph> que genera MALLET. Esto nos dará una buena idea de cómo se puede aplicar <emph>topic modeling</emph> a un corpus de textos para identificar tópicos o temas que se encuentran en los documentos, sin tener que leerlos individualmente.</p>
                <p>Por favor, remítete a la <ref target="http://mallet.cs.umass.edu/mailinglist.php">lista de discusión</ref> de los usuarios de MALLET para aprender más sobre todo lo que se pueda hacer con este programa.</p>
                <p>(Queremos agradecer a Robert Nelson y Elijah Meeks por consejos y sugerencias sobre cómo empezar a utilizar MALLET por primera vez y por sus ejemplos de lo que se puede hacer con esta herramienta.)</p>
            </div>
            <div type="2">
                <head>¿Qué es <emph>Topic Modeling</emph> y para quién es útil?</head>
                <p>Una herramienta de <emph>topic modeling</emph> toma un texto individual (o un corpus) y busca patrones en el uso de las palabras; es un intento de encontrar significado semántico en el vocabulario de ese texto (o corpus). Antes de empezar con <emph>topic modeling</emph> deberías preguntarte si es o no útil para tu proyecto. Para empezar a entender en qué circunstancias una técnica como esta es la más efectiva, te recomendamos <emph>
                        <ref target="http://www.cs.umbc.edu/~hillol/NGDM07/abstracts/talks/MKirschenbaum.pdf">Distant Reading</ref>
                    </emph> de Matthew Kirschenbaum (una charla dada en el simposio de la Fundación Nacional de Ciencias de los Estados Unidos en 2009, sobre la próxima generación de extracción de datos y descubrimiento cibernético para la inovación) y <emph>
                        <ref target="http://www.worldcat.org/title/reading-machines-toward-an-algorithmic-criticism/oclc/708761605&amp;referer=brief_results">Reading Machines</ref>
                    </emph> de Stephen Ramsay.</p>
                <p>Como toda herramienta, el hecho de que se pueda utilizar no significa que deberías hacerlo. Si trabajas con pocos documentos (o incluso con un solo documento) puede ser que cálculos de frecuencia sean suficientes, en cuyo caso algo como las <ref target="http://voyant-tools.org/">herramientas Voyant</ref> quizá serían convenientes. Si, en cambio, tienes cientos de documentos procedentes de un archivo y quieres comprender qué contiene el archivo, pero sin necesariamente leer cada documento, entonces <emph>topic modeling</emph> podría ser una buena opción.</p>
                <p>Los modelos de tópicos son una familia de programas informáticos que extraen <emph>tópicos</emph> de <emph>textos</emph>. Para la computadora, un <emph>tópico</emph> es una lista de palabras que se presenta de manera que sea estadísticamente significativa. Un <emph>texto</emph> puede ser un email, una entrada de blog, un capítulo de libro, un artículo periodístico, una entrada de diario – es decir, todo tipo de texto no estructurado. No estructurado quiere decir que no haya anotaciones legibles por la computadora que indiquen el significado semántico de las palabras del texto.</p>
                <p>Los programas de modelización de tópicos no saben nada sobre el significado de las palabras en un texto. En vez de eso, asumen que cada fragmento de texto está compuesto (por un autor(a)) a través de la selección de palabras desde posibles canastas de palabras, donde cada canasta corresponde a un tópico. Si eso es cierto, entonces es posible descomponer matemáticamente un texto  en las canastas desde las que con mayor probabilidad provienen las palabras que lo componen. La herramienta repite el proceso una y otra vez hasta que se establezca la distribución más probable de las palabras dentro de las canastas, que es lo que llamamos tópicos (o <emph>topics</emph>, en inglés).</p>
                <p>Hay muchos programas diferentes para <emph>topic modeling</emph>; esta lección utiliza uno que se llama MALLET. Si este método se aplicara, por ejemplo, a un conjunto de discursos políticos, se obtendría una lista de tópicos y las palabras clave que los constituyen. Cada una de esas listas es un tópico de acuerdo con el algoritmo. En el caso del ejemplo de discursos políticos, la lista podría verse así:</p>
                <list type="ordered">
                    <item>empleo empleos pérdida desempleo crecimiento</item>
                    <item>economía sector bolsa bancos</item>
                    <item>Afganistán guerra tropa Medio_Oriente taliban terror</item>
                    <item>elección adversario futuro presidente</item>
                    <item>
                        <emph>etc.</emph>
                    </item>
                </list>
                <p>Examinando las palabras clave podemos ver que el político que dio los discursos se refirió a la economía, los empleos, el Medio Oriente, las próximas elecciones, etc.</p>
                <p>Como advierte Scott Weingart, quienes utilizan <emph>topic modeling</emph> sin entenderlo completamente enfrentan muchos <ref target="http://www.scottbot.net/HIAL/?p=16713">peligros</ref>. Por ejemplo, podría interesarnos el uso de las palabras como un indicador para la ubicación en un espectro político. <emph>Topic modeling</emph> sin duda podría ayudar con eso, pero hay que recordar que el indicador no es en sí lo que queremos comprender - como lo muestra Andrew Gelman en su <ref target="http://arxiv.org/abs/1003.6087/">estudio de maqueta sobre zombis, utilizando Google Trends</ref>. Ted Underwood y Lisa Rhody (véase Lecturas adicionales) sostienen que para nosotros como historiadores sería mejor considerar estas categorías como discursos; sin embargo, para nuestros objetivos, continuaremos utilizando la palabra: tópico.</p>
                <p>Nota: En la bibliografía sobre <emph>topic modeling</emph>, a veces encontrarás el término "<emph>LDA</emph>". Muchas veces, LDA y <emph>topic modeling</emph> se usan como sinónimos, pero la técnica LDA es, en realidad, un caso especial de <emph>topic modeling</emph> desarrollado por <ref target="https://es.wikipedia.org/wiki/Latent_Dirichlet_Allocation">David Blei y amigos</ref> en 2002. No fue la primera técnica considerada como <emph>topic modeling</emph> pero es la más popular. Las innumerables variaciones de <emph>topic modeling</emph> han resultado en una sopa de letras de técnicas y programas para implementarlas, lo cual puede ser desconcertante o agobiante para los no iniciados en la materia y por esto no nos detendremos en ellos por ahora. Todos los algoritmos trabajan casi del mismo modo y MALLET en particular utiliza LDA.</p>
                <div type="3">
                    <head>Ejemplos de modelos de tópicos usados por historiadores:</head>
                    <list type="unordered">
                        <item>Rob Nelson, <emph>
                                <ref target="http://dsl.richmond.edu/dispatch/">Mining the Dispatch</ref>
                            </emph>
                        </item>
                        <item>Cameron Blevins, "<ref target="http://historying.org/2010/04/01/topic-modeling-martha-ballards-diary/">Topic Modeling Martha Ballard's Diary</ref>" <emph>Historying</emph>, April 1, 2010.</item>
                        <item>David J Newman y Sharon Block, "Probabilistic topic decomposition of an eighteenth century American newspaper," <emph>Journal of the American Society for Information Science and Technology</emph> vol. 57, no. 6 (April 1, 2006): 753-767.<ref type="footnotemark" target="#note_2"/>
                        </item>
                    </list>
                </div>
            </div>
            <div type="2">
                <head>Instalar MALLET</head>
                <p>Hay muchas herramientas que se podrían utilizar para crear modelos de tópicos, pero al momento de escribir estas líneas (en el verano de 2007) la herramienta más sencilla es MALLET.<ref type="footnotemark" target="#note_3"/>
                    <ref target="http://mallet.cs.umass.edu/index.php">MALLET</ref> utiliza una implementación del <ref target="https://es.wikipedia.org/wiki/Muestreo_de_Gibbs">
                        <emph>Muestreo de Gibbs</emph>
                    </ref>, una técnica estadística destinada a construir rápidamente una distribución de muestras, para luego crear los modelos de tópicos correspondientes. Para utilizar MALLET es necesario trabajar en la línea de comandos – hablaremos más de esto en un instante. Lo bueno es que normalmente los mismos comandos se usan repetidamente.</p>
                <p>Las instrucciones de instalación son diferentes para Windows y Mac. Sigue las instrucciones apropiadadas para ti:</p>
                <figure>
                    <desc/>
                    <graphic url="windows-150x150.png"/>
                </figure>
                <div type="3">
                    <head>Instrucciones para Windows</head>
                    <list type="ordered">
                        <item>Ve a la página del proyecto <ref target="http://mallet.cs.umass.edu/index.php">MALLET</ref>. Puedes <ref target="http://mallet.cs.umass.edu/download.php">descargar MALLET aquí</ref>.</item>
                        <item>También necesitarás el <ref target="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Kit de desarrollo de Java (JDK)</ref> - esto es, no el Java normal que se encuentra en cada computadora sino el que permite programar cosas. Instala este en tu computadora.</item>
                        <item>Descomprime MALLET en tu directorio <code rend="inline">C:</code>. Esto es importante: no puede ser en ningún otro lugar. Tendrás un directorio llamado <code rend="inline">C:\mallet-2.0.8</code> o parecido. Para simplificar, cambia el nombre simplemente a <code rend="inline">mallet</code>.</item>
                        <item>MALLET utiliza una <emph>variable de entorno</emph> para indicar a la computadora donde encontrar todos los componentes necesarios para sus procesos en el momento de ejecutarse. Es como un atajo para el programa. Un(a) programador(a) no puede saber exactamente donde cada usuario instala un programa. Por eso, él o ella crea una variable en el código que representa el lugar de instalación en cada momento. Por medio de la variable de entorno indicamos a la computadora donde se encuentra ese lugar. Si mueves el programa a otro lugar tendrás que cambiar esa variable.</item>
                    </list>
                    <p>Para crear una variable de entorno en Windows 10, ve a <code rend="inline">Este equipo</code>. <code rend="inline">Este equipo</code> se encuentra o como ícono en el escritorio o en el explorador de archivos que se puede abrir haciendo clic en el menú <code rend="inline">Inicio -&gt; Explorador de archivos</code>. Haz clic derecho en <code rend="inline">Este equipo</code> y selecciona <code rend="inline">Propiedades</code>. Se abre una nueva ventana. Selecciona la opción <code rend="inline">Configuración avanzada del sistema</code> (figuras 1, 2, 3). Haz clic en <code rend="inline">Nueva...</code> y escribe <code rend="inline">MALLET_HOME</code> en la casilla <code rend="inline">Nombre de la variable</code>. Tiene que ser así – todo en mayúsculas y con un guión bajo – porque ese es el atajo que el o la programador(a) ha incluido en el programa y todos sus subprogramas. Entonces escribe la ruta exacta (ubicación) de donde descomprimiste MALLET en la casilla <code rend="inline">Valor de la variable</code>, por ejemplo <code rend="inline">C:\mallet\</code>.</p>
                    <p>Para ver si lo lograste, por favor continúa leyendo el próximo apartado.</p>
                    <figure>
                        <desc>Figura 1: Configuración avanzada del sistema en Windows</desc>
                        <graphic url="fig1-configuracion-avanzada-del-sistema.png"/>
                    </figure>
                    <figure>
                        <desc>Figura 2: Lugar de las variables de entorno</desc>
                        <graphic url="fig2-lugar-variables-de-entorno.png"/>
                    </figure>
                    <figure>
                        <desc>Figura 3: Variable de entorno</desc>
                        <graphic url="fig3-variable-de-entorno.png"/>
                    </figure>
                    <div type="4">
                        <head>Ejecutar MALLET usando la línea de comandos</head>
                        <p>MALLET se ejecuta desde la línea de comandos, conocida también como <emph>Símbolo del sistema</emph> (figura 4). Si recuerdas MS-DOS o alguna vez has experimentado con un terminal de computadora Unix, ya reconocerás esto. En la línea de comandos puedes teclear comandos directamente en vez de hacer clic en íconos o menús.</p>
                        <figure>
                            <desc>Figura 4: Línea de comandos en Windows</desc>
                            <graphic url="fig4-ventana-linea-de-comandos.png"/>
                        </figure>
                        <list type="ordered">
                            <item>Haz clic en tu menú <code rend="inline">Inicio -&gt; Sistema de Windows -&gt; Símbolo del sistema</code>. Se abre la ventana de la línea de comandos que tendrá el cursor en <code rend="inline">C:\Users\User&gt;</code> (o parecido; véase figura 4).<ref type="footnotemark" target="#note_4"/>
                            </item>
                            <item>Teclea <code rend="inline">cd ..</code> (Es decir: cd-espacio-punto-punto) y presiona Entrar para <emph>cambiar directorio</emph>.<ref type="footnotemark" target="#note_5"/> Sigue haciendo esto hasta llegar a <code rend="inline">C:\</code> (como en la figura 5).</item>
                            <item>Luego escribe <code rend="inline">cd mallet</code> y estarás en el directorio de MALLET. Todo lo que escribas en la ventana de la línea de comandos es un <emph>comando</emph>. Hay comandos como <code rend="inline">cd</code> (cambiar directorio) o <code rend="inline">dir</code> (listar los contenidos del directorio) que la computatora entiende. Si quieres utilizar MALLET tienes que decirle de manera explícita 'esto es un comando de MALLET'. Para esto, se le especifica a la computadora que tiene que tomar sus instrucciones de la carpeta <emph>bin</emph>, un subdirectorio de MALLET que contiene las rutinas operacionales principales.</item>
                            <item>Teclea <code rend="inline">bin\mallet</code> como en la figura 6. Si todo ha ido bien deberías ver una lista de comandos de MALLET – ¡felicitaciones! Si recibes un mensaje de error comprueba lo que has escrito. ¿Utilizaste un tipo de barra equivocado? ¿Configuraste la variable de entorno correctamente?<ref type="footnotemark" target="#note_6"/> ¿Se encuentra MALLET en <code rend="inline">C:\mallet</code>?</item>
                        </list>
                        <figure>
                            <desc>Figura 5: Navegar al directorio C:\ en la línea de comandos</desc>
                            <graphic url="fig5-ventana-linea-de-comandos-llegar-a-c.png"/>
                        </figure>
                        <figure>
                            <desc>Figura 6: Línea de comandos: MALLET instalado</desc>
                            <graphic url="fig6-linea-de-comandos-mallet-instalado.png"/>
                        </figure>
                        <p>Ahora estás preparado para avanzar a la próxima sección.</p>
                        <figure>
                            <desc/>
                            <graphic url="apple-150x150.png"/>
                        </figure>
                    </div>
                </div>
                <div type="3">
                    <head>Instrucciones para Mac</head>
                    <p>Muchas de las instrucciones para la instalación en OS X se parecen a las instrucciones para Windows, con pocas excepciones. En realidad, es un poco más fácil ejecutar comandos de MALLET en Mac.</p>
                    <list type="ordered">
                        <item>Descarga e <ref target="http://mallet.cs.umass.edu/download.php">instala MALLET</ref>.</item>
                        <item>Descarga el <ref target="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Kit de desarrollo de Java (JDK)</ref>.</item>
                    </list>
                    <p>Descomprime MALLET en un directorio en tu sistema (para seguir esta lección con facilidad, escoge tu directorio <code rend="inline">/User/</code>, aunque otro lugar funcionará igualmente). Cuando esté descomprimido, abre tu ventana Terminal (dentro del directorio <code rend="inline">Aplicaciones</code> en tu Finder). Usando la Terminal, navega al directorio donde descomprimiste MALLET (será <code rend="inline">mallet-2.0.8</code> o <code rend="inline">mallet</code> si cambiaste el nombre de la carpeta para simplificarlo. Si descomprimiste MALLET en tu directorio <code rend="inline">/User/</code> como se sugiere en esta lección, puedes navegar al directorio correcto tecleando <code rend="inline">cd mallet-2.0.8</code> o bien <code rend="inline">cd mallet</code>). <code rend="inline">cd</code> es la abreviatura para "cambiar directorio" cuando se trabaja en la Terminal.</p>
                    <p>En adelante, los comandos de MALLET en Mac son casi idénticos a los de Windows, con excepción de la dirección de las barras (hay algunas otras diferencias menores que se señalarán cuando resulte necesario). Si el comando es <code rend="inline">\bin\mallet</code> en Windows, en Mac sería:</p>
                    <ab>
                        <code xml:id="code_topic-modeling-y-mallet_0" corresp="code_topic-modeling-y-mallet_0.txt" rend="block"/>
                    </ab>
                    <p>Debería aparecer una lista de comandos. De ser así, ¡felicitaciones – has instalado MALLET correctamente!</p>
                </div>
            </div>
            <div type="2">
                <head>Ejecutar comandos de MALLET</head>
                <p>Ahora que has instalado MALLET, es hora de aprender qué comandos se pueden ejecutar con el programa. Hay nueve comandos diferentes (véase figura 6 arriba). A veces puedes combinar varias instrucciones. Según tu sistema operativo, teclea en el Símbolo del sistema o la Terminal:</p>
                <ab>
                    <code xml:id="code_topic-modeling-y-mallet_1" corresp="code_topic-modeling-y-mallet_1.txt" rend="block"/>
                </ab>
                <p>Se te presentará un mensaje de error indicando que <code rend="inline">import-dir</code> no se reconoce como orden o comando. Eso es así porque olvidamos decir a la computadora que buscara el comando dentro de MALLET <code rend="inline">bin</code>. Inténtalo otra vez con</p>
                <ab>
                    <code xml:id="code_topic-modeling-y-mallet_2" corresp="code_topic-modeling-y-mallet_2.txt" rend="block"/>
                </ab>
                <p>Recuerda que la dirección de las barras es importante (tal como se ve en la figura 7 que muestra una transcripción completa de lo que hemos hecho en la lección hasta ahora). Al teclear <code rend="inline">bin\mallet</code>, comprobamos que MALLET está instalado. Luego generamos el error con <code rend="inline">import-dir</code> algunas líneas más adelante. Después de esto, conseguimos llamar al archivo de ayuda correctamente, el cual nos dijo lo que hace el comando <code rend="inline">import-dir</code> y qué tipo de <emph>parámetros</emph> se pueden fijar para esta herramienta.</p>
                <figure>
                    <desc>Figura 7: El menú de ayuda en MALLET</desc>
                    <graphic url="fig7-linea-de-comandos-teclear-ayuda.png"/>
                </figure>
                <p>Nota: en los comandos de MALLET hay una diferencia entre un guión simple y un guión doble. El guión simple es parte del nombre y sustituye un espacio (por ejemplo, <code rend="inline">import-dir</code> en vez de <code rend="inline">import dir</code>), porque los espacios tienen la función de separar diferentes comandos o parámetros. Mediante estos parámetros podemos ajustar el archivo que se crea cuando importamos nuestros textos a MALLET. Un guión doble (como por ejemplo <code rend="inline">--help</code> arriba) modifica o añade un subcomando, o bien especifica algún tipo de parámetro para el comando.</p>
                <p>Para usuarios de Windows, si recibes el mensaje de error <emph>'exception in thread "main"
java.lang.NoClassDefFoundError:'</emph> puede deberse a que instalaste MALLET en algún otro lugar que no sea el directorio <code rend="inline">C:\</code>. Por ejemplo, instalando MALLET en <code rend="inline">C:\Archivos de programa\mallet</code> producirá este mensaje de error. Lo segundo que se debe comprobar es si la variable de entorno está configurada correctamente. En cualquier caso, consulta las instrucciones de instalación en Windows y verifica que las seguiste correctamente.</p>
            </div>
            <div type="2">
                <head>Trabajar con datos</head>
                <p>MALLET exige datos en texto plano. Para ello, cada texto suele guardarse en un archivo <code rend="inline">.txt</code>. El conjunto de esos archivos conformará el corpus. Puedes descargar un corpus de muestra con textos en español <ref target="https://github.com/programminghistorian/ph-submissions/raw/gh-pages/assets/ensayos-jose-marti.zip">aquí</ref>
                    <ref type="footnotemark" target="#note_7"/>. Descomprime el archivo ZIP en algún lugar de tu computadora y recuerda este lugar. En esta lección lo guardamos en el escritorio del usuario para poder encontrarlo fácilmente.</p>
                <p>Para navegar al directorio del corpus teclea <code rend="inline">cd C:\Users\User\Desktop\ensayos-de-jose-marti</code> en la línea de comandos (o similar dependiendo de dónde guardaste la carpeta descomprimida en tu computadora). Escribe <code rend="inline">dir</code> (<code rend="inline">ls</code> para Mac) para que se te muestre la lista de los contenidos del directorio <code rend="inline">ensayos-de-jose-marti</code> (véase figura 8). Para abrir uno de los archivos de texto, escribe el nombre entero del archivo incluyendo la extensión al final.</p>
                <figure>
                    <desc>Figura 8: Navegar al corpus de textos</desc>
                    <graphic url="fig8-linea-de-comandos-corpus.png"/>
                </figure>
                <p>Ten en cuenta que ahora no puedes ejecutar ningún comando MALLET dentro de este directorio. Inténtalo:</p>
                <ab>
                    <code xml:id="code_topic-modeling-y-mallet_3" corresp="code_topic-modeling-y-mallet_3.txt" rend="block"/>
                </ab>
                <p>Si recibes un mensaje de error, tendrás que volver al directorio principal de MALLET para poder ejecutar los comandos (por ejemplo con <code rend="inline">cd C:\mallet\</code>). Esto se debe a la manera como están estructurados MALLET y sus componentes.</p>
            </div>
            <div type="2">
                <head>Importar datos</head>
                <p>En el directorio <code rend="inline">ensayos-de-jose-marti</code> se encuentran varios archivos <code rend="inline">.txt</code>. Cada uno de estos archivos es un documento individual, en este caso, el texto de un ensayo. El directorio entero se puede considerar un corpus de datos. Para trabajar con este corpus y descubrir cuáles son los tópicos (o temas) que componen los documentos individuales, necesitamos transformarlos desde varios archivos de texto individuales a un único archivo en formato MALLET. MALLET puede importar más de un archivo a la vez. Podemos importar todo el directorio de archivos de texto mediante el comando <code rend="inline">import</code>. Los comandos de más abajo importan el directorio, lo convierten a un archivo MALLET, mantienen los archivos originales en el orden en que estaban listados y eliminan <emph>stop words</emph> (esto es, palabras de función como <emph>y</emph>, <emph>el</emph>, <emph>la</emph>, <emph>pero</emph>, <emph>si</emph>, que ocurren en frecuencias tan altas que obstruyen el análisis).</p>
                <p>MALLET viene provisto de algunos diccionarios de palabras vacías, por ejemplo para inglés. Si se quiere utilizar el diccionario predeterminado, el parámetro <code rend="inline">--remove-stopwords</code> es suficiente.<ref type="footnotemark" target="#note_8"/> Como no hay ningún diccionario predeterminado para español, es necesario incluirlo a través del parámetro <code rend="inline">--stoplist-file</code>. Para la mayoría de los idiomas es fácil encontrar listas de <emph>stop words</emph> en la red. Por ejemplo, puedes descargar una <ref target="https://raw.githubusercontent.com/stopwords-iso/stopwords-es/master/stopwords-es.txt">lista de palabras vacías en español</ref> en GitHub. Guárdala en tu computadora e indica la ruta a este fichero en el comando tal como está arriba: <code rend="inline">--stoplist-file C:\Users\User\Desktop\stopwords-es.txt</code> (nombre del parámetro-espacio-ruta al fichero).</p>
                <ab>
                    <code xml:id="code_topic-modeling-y-mallet_4" corresp="code_topic-modeling-y-mallet_4.txt" rend="block"/>
                </ab>
                <p>El parámetro <code rend="inline">--output</code> junto con una ruta de fichero indica donde se guarda el corpus importado en formato MALLET, en este caso en el escritorio: <code rend="inline">C:\Users\User\Desktop\leccion.mallet</code>. (Si aparece un mensaje de error en el momento de ejecutar el comando, puedes usar la tecla de flecha arriba para recuperar el último comando que escribiste y checar si hay erratas). Ahora el fichero <code rend="inline">leccion.mallet</code> contiene todos los datos en un formato que MALLET reconoce.</p>
                <p>También podrías utilizar tus propios datos. Cambia <code rend="inline">C:\Users\User\Desktop\ensayos-jose-marti</code> a un directorio que contenga tus propios archivos de investigación. ¡Buena suerte!</p>
                <p>Si no estás seguro de cómo funcionan los directorios, te recomendamos la lección <ref target="introduccion-a-bash">Introducción a la línea de comandos en Bash</ref> de <emph>Programming Historian</emph>.</p>
                <div type="3">
                    <head>Para Mac</head>
                    <p>Las instrucciones para Mac son parecidas a las de Windows, con algunas diferencias que puedes notar en el siguiente ejemplo:</p>
                    <ab>
                        <code xml:id="code_topic-modeling-y-mallet_5" corresp="code_topic-modeling-y-mallet_5.txt" rend="block"/>
                    </ab>
                </div>
            </div>
            <div type="2">
                <head>Problemas con datos a gran escala</head>
                <p>Si trabajas con colecciones grandes de archivos – o también archivos muy grandes – puedes enfrentar problemas con tu <emph>heap space</emph>, la memoria de trabajo de tu computadora. Si es relevante, este asunto suele surgir al principo, durante el proceso de importación. Por defecto, MALLET permite trabajar con una memoria de 1 GB. Si recibes el siguiente mensaje de error, alcanzaste tu límite:</p>
                <ab>
                    <code xml:id="code_topic-modeling-y-mallet_6" corresp="code_topic-modeling-y-mallet_6.txt" rend="block"/>
                </ab>
                <p>Si tu sistema tiene más memoria, puedes tratar de aumentar la memoria asignada a tu <emph>máquina virtual Java</emph>. Para hacerlo, tienes que editar el código en el fichero <code rend="inline">mallet</code> que se encuentra en el subdirectorio <code rend="inline">bin</code> de tu carpeta MALLET. Abre el archivo <code rend="inline">Mallet.bat</code> (<code rend="inline">C:\Mallet\bin\mallet.bat</code>) si trabajas en Windows o el archivo <code rend="inline">mallet</code> (<code rend="inline">~/Mallet/bin/mallet</code>) si trabajas en Linux u OS X. Ábrelo con el programa Komodo Edit (véase <ref target="/es/lecciones/instalacion-mac">Mac</ref>, <ref target="/es/lecciones/instalacion-windows">Windows</ref>, <ref target="/es/lecciones/instalacion-linux">Linux</ref> para instrucciones de instalación).</p>
                <p>Encuentra la línea siguiente:</p>
                <p>
                    <code rend="inline">MEMORY=1g</code>
                </p>
                <p>Puedes aumentar el valor de 1g a 2g, 4g o aun más según la memoria de trabajo (<emph>RAM</emph>) que tenga tu sistema. Puedes encontrar esa información checando la información del sistema.</p>
                <p>Guarda los cambios. Ahora no debería aparecer el error. Si no, aumenta el valor otra vez.</p>
            </div>
            <div type="2">
                <head>Tu primer modelo de tópicos</head>
                <p>Escribe en la línea de comandos en el directorio MALLET:</p>
                <ab>
                    <code xml:id="code_topic-modeling-y-mallet_7" corresp="code_topic-modeling-y-mallet_7.txt" rend="block"/>
                </ab>
                <p>Este comando abre tu archivo <code rend="inline">leccion.mallet</code> y ejecuta la rutina de <emph>topic modeling</emph>, en este caso con la configuración predeterminada. La rutina se repite tratando de encontrar la mejor asignación de palabras a tópicos. Tu línea de comandos se llena con los resultados de cada iteración. Cuando concluya puedes desplazarte hacia arriba para ver lo que se imprimió (como en la figura 9).</p>
                <figure>
                    <desc>Figura 9: Resultados de un modelo de tópicos básico</desc>
                    <graphic url="fig9-resultados-topic-model-basico.png"/>
                </figure>
                <p>La computadora imprime las palabras clave, es decir, las palabras que ayudan a definir un tópico estadísticamente significativo, según la rutina. En la figura 9, el primer tópico que se imprime podría verse así (tus palabras clave podrían ser un poco diferentes):<ref type="footnotemark" target="#note_9"/>
                </p>
                <ab>
                    <code xml:id="code_topic-modeling-y-mallet_8" corresp="code_topic-modeling-y-mallet_8.txt" rend="block"/>
                </ab>
                <p>Reconocerás que muchas de las palabras se refieren a economía y política. De hecho, en el corpus hay un documento con el nombre <code rend="inline">el-congreso-de-Washington.txt</code> que contiene un ensayo de José Martí sobre un congreso que se celebró en Washington en 1889 y que fue parte de la primera conferencia panamericana. Es de suponer que este y algunos otros documentos del corpus contribuyeron a la lista de palabras clave del primer tópico.<ref type="footnotemark" target="#note_10"/> Más adelante explicaremos qué significan los números 0 y 0,5. Observa que MALLET incluye elementos aleatorios, así que las listas de palabras clave serán diferentes cada vez que el programa se ejecute, incluso cuando se utilice el mismo conjunto de datos.</p>
                <p>Vuelve al escritorio y teclea <code rend="inline">dir</code>. Verás que no hay ningún <emph>output</emph> nuevo. ¡Creamos un topic model con éxito pero no guardamos los resultados! Vuelve al directorio de MALLET y escribe en la línea de comandos:</p>
                <ab>
                    <code xml:id="code_topic-modeling-y-mallet_9" corresp="code_topic-modeling-y-mallet_9.txt" rend="block"/>
                </ab>
                <p>Aquí, le decimos a MALLET que cree un modelo de tópicos (<code rend="inline">train-topics</code>). Todo lo que empieza con guión doble después del comando principal sirve para configurar parámetros:</p>
                <p>Este comando</p>
                <list type="unordered">
                    <item>abre tu archivo <code rend="inline">leccion.mallet</code>
                    </item>
                    <item>prepara MALLET a encontrar 10 tópicos</item>
                    <item>imprime cada palabra de tu corpus y el tópico al que pertenece en un archivo comprimido (<code rend="inline">.gz</code>; véase <ref target="https://www.gzip.org/">gzip</ref> sobre cómo descomprimirlo)</item>
                    <item>produce un documento de texto que muestra cuáles son las palabras clave principales para cada tópico (<code rend="inline">leccion_topicos.txt</code>)</item>
                    <item>y produce un archivo de texto que indica el porcentaje de cada tópico en cada documento de texto que importaste (<code rend="inline">leccion_topicos_en_docs.txt</code>). (Para ver todos los parámetros del comando <code rend="inline">train-topics</code> que se pueden ajustar, teclea <code rend="inline">bin\mallet train-topics --help</code> en la línea de comandos.)</item>
                </list>
                <p>Teclea <code rend="inline">dir C:\Users\User\Desktop</code>. Tus <emph>outputs</emph> aparecerán en la lista de archivos y directorios dentro del directorio del escritorio. Abre <code rend="inline">leccion_topicos.txt</code> en un procesador de texto (figura 10). Puedes ver una serie de párrafos. El primer párrafo corresponde al tópico 0; el segundo párrafo al tópico 1; el tercero al tópico 2, etc. (En el <emph>output</emph>, la cuenta comienza en 0 y no 1; así que con 10 tópicos, la lista va desde 0 a 9). El segundo número en cada párrafo es el <emph>parámetro Dirichlet</emph> para el tópico. Ese parámetro está relacionado con una opción que no utilizamos, por lo que tiene el valor por defecto (por eso cada tópico en este fichero lleva el número 0,5).<ref type="footnotemark" target="#note_11"/>
                </p>
                <figure>
                    <desc>Figura 10: Palabras clave en un procesador de texto</desc>
                    <graphic url="fig10-palabras-clave-en-writer.png"/>
                </figure>
                <p>Si al ejecutar la rutina de <emph>topic modeling</emph> hubieras incluido</p>
                <ab>
                    <code xml:id="code_topic-modeling-y-mallet_10" corresp="code_topic-modeling-y-mallet_10.txt" rend="block"/>
                </ab>
                <p>como abajo</p>
                <ab>
                    <code xml:id="code_topic-modeling-y-mallet_11" corresp="code_topic-modeling-y-mallet_11.txt" rend="block"/>
                </ab>
                <p>la salida podría haber sido:</p>
                <ab>
                    <code xml:id="code_topic-modeling-y-mallet_12" corresp="code_topic-modeling-y-mallet_12.txt" rend="block"/>
                </ab>
                <p>El primer número es el tópico (topic 0) y el segundo número indica el <emph>peso</emph> de este tópico. Generalmente, los tópicos resultan mejores si se incluye el parámetro <code rend="inline">--optimize-interval</code>.</p>
                <div type="3">
                    <head>La composición de tus documentos</head>
                    <p>¿Qué tópicos componen tus documentos? La respuesta está en el archivo <code rend="inline">leccion_topicos_en_docs.txt</code>. Para mantener todo organizado, importa el archivo <code rend="inline">leccion_topicos_en_docs.txt</code> a una hoja de cálculo (en Excel, Open Office, etc.). Tendrás una tabla con las columnas <emph>número de documento, fuente, proporción del tópico</emph>. Todas las columnas subsiguientes son proporciones de los tópicos, como en la figura 11.<ref type="footnotemark" target="#note_12"/>
                    </p>
                    <figure>
                        <desc>Figura 11: Tópicos en documentos</desc>
                        <graphic url="fig11-topicos-en-docs.png"/>
                    </figure>
                    <p>Puede resultar difícil leer estos datos. Los tópicos comienzan en la tercera columna, en este caso en la columna C, y continúan hasta el último tópico en la columna L. Es así porque entrenamos 10 tópicos – si hubiéramos entrenado 20, por ejemplo, llegarían hasta la columna V.</p>
                    <p>A partir de esto, se puede ver que en el documento número 0 (es decir, el primer documento cargado en MALLET), <code rend="inline">a-aprender-en-las-haciendas.txt</code>, el tópico 0 tiene un porcentaje de 0.33% (columna C). Si buscamos el valor más alto en esta fila, podemos ver que el tópico 3 es el más importante en este documento, con un porcentaje de 69.24%. Dada la naturaleza de MALLET, tus propios tópicos pueden tener valores diferentes.</p>
                    <p>Si tienes un corpus de archivos de texto que están organizados en orden cronológico (por ejemplo que <code rend="inline">1.txt</code> sea anterior a <code rend="inline">2.txt</code>), podrías generar un gráfico en tu programa de hoja de cálculo y empezar a ver cambios con el tiempo, tal como lo hizo Robert Nelson en <ref target="http://dsl.richmond.edu/dispatch/">Mining the Dispatch</ref>.</p>
                    <p>¿Cómo puedes saber cuál es la cantidad adecuada de tópicos? ¿Hay una cantidad <emph>natural</emph> de tópicos? Hemos descubierto que hay que ejecutar <code rend="inline">train-topics</code> varias veces con distintas cantidades de tópicos para ver cómo la distribución de los tópicos en los documentos cambia. Si encontramos que la mayoría de los textos están dominados por muy pocos tópicos, lo interpretamos como una señal de necesitar aumentar la cantidad de tópicos; las preferencias fueron demasiado amplias. Hay maneras de buscar la mejor configuración automáticamente, por ejemplo mediante el comando <code rend="inline">hlda</code> de MALLET, pero para los lectores de esta lección probablemente es más rápido realizar algunas iteraciones (para más información consulta Griffiths, T. L., &amp; Steyvers, M. (2004). <emph>Finding scientific
topics.</emph> Proceedings of the National Academy of Science, 101, 5228-5235).</p>
                </div>
                <div type="3">
                    <head>Analizar tus propios textos con MALLET</head>
                    <p>La carpeta <code rend="inline">sample data</code> en el directorio de MALLET (<code rend="inline">C:\mallet\sample-data</code>) te puede servir como guía para saber cómo organizar tus textos. Pon todo lo que deseas en una sola carpeta, por ejemplo <code rend="inline">C:\mis-datos</code>. Tus archivos deben contener texto llano y estar en el formato <code rend="inline">.txt</code> (puedes crearlos en un procesador de textos como Notepad, <ref target="https://www.sublimetext.com/">Sublime Text</ref> o <ref target="https://atom.io/">Atom</ref>, por ejemplo, y guardarlos como <code rend="inline">Texto (*.txt)</code> o <code rend="inline">Texto sin formato</code>). Tienes que tomar algunas decisiones. ¿Quieres explorar los tópicos a nivel de párrafos? Entonces cada archivo <code rend="inline">.txt</code> debería contener solo un párrafo. En los nombres de los archivos puedes agregar información como el número de la página u otros identificadores, por ejemplo: <code rend="inline">pag32_parr1.txt</code>. Si trabajas con un diario, cada archivo de texto podría ser una entrada de diario, por ejemplo: <code rend="inline">abril_25_1887.txt</code>. (Nota que es importante no dejar espacios en los nombres de carpetas y archivos). Si los textos que te interesan están en la red, podrías <ref target="http://electricarchaeology.ca/2012/07/09/mining-a-day-of-archaeology/">automatizar</ref> este proceso.</p>
                </div>
                <div type="3">
                    <head>Lecturas adicionales sobre <emph>Topic Modeling</emph>
                    </head>
                    <p>Para ver un ejemplo desarrollado de <emph>topic modeling</emph> basado en materiales obtenidos de páginas web, véase <ref target="http://electricarchaeology.ca/2012/06/08/mining-the-open-web-with-looted-heritage-draft/">Mining the Open Web with Looted
Heritage Draft</ref>.</p>
                    <p>Puedes reutilizar los datos tomándolos de <ref target="https://ndownloader.figshare.com/files/90972">Figshare.com</ref> donde están incluidos algunos archivos <code rend="inline">.txt</code>. Cada uno de los ficheros <code rend="inline">.txt</code> contiene una noticia individual.</p>
                    <list type="unordered">
                        <item>Para amplia información adicional y una bibliografía sobre <emph>topic modeling</emph> podrías empezar con el <ref target="http://www.scottbot.net/HIAL/?p=19113">Guided Tour to Topic Modeling</ref> de Scott Weingart.</item>
                        <item>Una discusión importante sobre la interpretación del significado de los tópicos es '<ref target="http://tedunderwood.wordpress.com/2012/04/07/topic-modeling-made-just-simple-enough/">Topic modeling made just simple enough</ref>' de Ted Underwood.</item>
                        <item>El artículo de blog '<ref target="http://web.archive.org/web/20160704150726/http://www.lisarhody.com:80/some-assembly-required/">Some Assembly Required</ref>' <emph>Lisa @ Work</emph> 22 de agosto de 2012 escrito por Lisa Rhody también es muy revelador.</item>
                        <item>Clay Templeton, '<ref target="http://mith.umd.edu/topic-modeling-in-the-humanities-an-overview/">Topic Modeling in the Humanities: An Overview</ref>', Maryland Institute for Technology in the Humanities, n.d.</item>
                        <item>David Blei, Andrew Ng, and Michael Jordan, '<ref target="http://dl.acm.org/citation.cfm?id=944937">Latent dirichlet allocation</ref>', The Journal of Machine Learning Research 3 (2003).</item>
                        <item>Finalmente, te recomendamos que consultes la <ref target="http://mimno.infosci.cornell.edu/topics.html">bibliografía de artículos sobre <emph>topic modeling</emph>
                            </ref> de David Mimno. Están clasificados por temas para facilitar encontrar el artículo más adecuado para una aplicación determinada. También puedes echar un vistazo a su reciente artículo sobre <ref target="http://www.perseus.tufts.edu/publications/02-jocch-mimno.pdf">Historiografía Computacional</ref> en la revista <emph>ACM Transactions on Computational Logic</emph> en el que analiza revistas científicas de los Clásicos a lo largo de cien años para aprender algo sobre este campo. Mientras el artículo debe leerse como un buen ejemplo de <emph>topic modeling</emph>, su sección sobre 'métodos' es especialmente relevante porque incluye una discusión sobre cómo preparar los textos para un análisis de ese tipo.<ref type="footnotemark" target="#note_13"/>
                        </item>
                    </list>
                </div>
            </div>
            <div type="2">
                <head>Notas de traducción</head>
                <p>
                    <ref type="footnotemark" target="#note_1"/> : En esta traducción se utiliza la expresión <emph>topic modeling</emph> en inglés porque en la literatura publicada sobre el tema en español es lo más común. Por supuesto sería posible traducir <emph>topic modeling</emph> por modelaje de tópicos o algo parecido, pero hasta ahora no es habitual. Por otro lado, se ha optado por traducir todas las demás palabras relacionadas al método para estimular su uso en español, por ejemplo <emph>topic</emph> por tópico o <emph>topic model</emph> por modelo de tópicos.
<ref type="footnotemark" target="#note_2"/> : También hay algunos ejemplos de modelos de tópicos creados a partir de textos (literarios) en español. Por ejemplo: Borja Navarro-Colorado, <emph>
                        <ref target="https://www.frontiersin.org/articles/10.3389/fdigh.2018.00015/full">On Poetic Topic Modeling: Extracting Themes and Motifs From a Corpus of Spanish Poetry</ref>
                    </emph>, frontiers in Digital Humanities, 20 de junio de 2018, <ref target="https://doi.org/10.3389/fdigh.2018.00015">https://doi.org/10.3389/fdigh.2018.00015</ref>; Borja Navarro-Colorado y David Tomás, <emph>
                        <ref target="https://www.dlsi.ua.es//~borja/NavarroTomas_PosterSEPLN2015.pdf">A fully unsupervised Topic Modeling approach to metaphor identification / Una aproximación no supervisada a la detección de metáforas basada en Topic Modeling</ref>
                    </emph>, Actas del XXXI Congreso de la Sociedad Española para el Procesamiento del Lenguaje Natural, 2015; Christof Schöch, Ulrike Henny, José Calvo Tello, Daniel Schlör, Stefanie Popp, <emph>
                        <ref target="https://web.archive.org/web/20180828160609/http://www.dhd2016.de/abstracts/vortr%C3%A4ge-055.html">Topic, Genre, Text. Topics im Textverlauf von Untergattungen des spanischen und hispanoamerikanischen Romans (1880-1930)</ref>
                    </emph>, DHd 2016. Modellierung, Vernetzung, Visualisierung. Die Digital Humanities als fächerübergreifendes Forschungsparadigma. Universität Leipzig, 7.-12. März 2016.
<ref type="footnotemark" target="#note_3"/> : En esta traducción, las instrucciones para la instalación de MALLET fueron actualizadas para ajustarse a Windows 10. En el original inglés las instrucciones se refieren a Windows 7. Las capturas de pantalla fueron sustituidas para que el idioma de la pantalla sea español.
<ref type="footnotemark" target="#note_4"/> : En todos los ejemplos de esta lección en los que aparece la palabra <code rend="inline">User</code>, deberás sustituirla con tu propio nombre de usuario.
<ref type="footnotemark" target="#note_5"/> : Al final de un comando escrito en la línea de comandos siempre se teclea Entrar para confirmar el comando y ejecutarlo. En adelante no lo mencionaremos más.
<ref type="footnotemark" target="#note_6"/> : Puede ser necesario reiniciar el sistema operativo para que se reconozca la nueva variable de entorno.
<ref type="footnotemark" target="#note_7"/> : En la versión inglesa de esta lección se utilizan datos de muestra incluidos en MALLET, pero actualmente, estos solo existen en inglés y alemán. Por eso se trabaja con otros datos en esta versión española y el contenido de la lección difiere del original en este aspecto. Los datos de muestra consisten en 19 ensayos escritos por José Martí. La fuente de los textos es <ref target="https://es.wikisource.org/wiki/Categor%C3%ADa:Ensayos_de_Jos%C3%A9_Mart%C3%AD">Wikisource</ref>.
<ref type="footnotemark" target="#note_8"/> : En la versión original de esta lección se utilizó el diccionario por defecto que está en inglés.
<ref type="footnotemark" target="#note_9"/> : Si las palabras con acento o ñ no salen correctamente en tu línea de comandos es porque la codificación de caracteres no es la misma en los ficheros, en MALLET y en la línea de comandos. Los ficheros de muestra incluidos en esta lección están codificadas en UTF-8. La codificación en MALLET también es UTF-8 por defecto. Entonces es necesario cambiar la codificación de caracteres de la línea de comandos para evitar esos errores. Si utilizas Windows, teclea <code rend="inline">chcp 65001</code> en la línea de comandos  para definir la codificación como UTF-8 antes de ejecutar los comandos de MALLET. En Mac, la codificación por defecto suele ser UTF-8.
<ref type="footnotemark" target="#note_10"/> : Nótese que MALLET no reconoce palabras compuestas como <code rend="inline">New York</code> y las trata como dos palabras separadas. Para evitar eso, sería necesario preprocesar el texto y conectar las varias partes de la palabra compuesta con un símbolo, por ejemplo una barra baja (<code rend="inline">New_York</code>) para que MALLET las reconozca como tales.
<ref type="footnotemark" target="#note_11"/> : Si comparas los tópicos en la figura 10 con los de la figura 9, puedes ver el efecto del elemento aleatorio del <emph>topic modeling</emph>. Esas dos listas de tópicos son los resultados de dos pasadas diferentes y aunque los tópicos se parezcan no son exactamente iguales.
<ref type="footnotemark" target="#note_12"/> : Como en la línea de comandos, también en el programa de hoja de cálculo puede ser necesario cambiar la codificación de caracteres a UTF-8 para que las letras con acento o ñ salgan correctamente. Esto se puede hacer durante el proceso de importar los datos o ajustando las preferencias del programa.
<ref type="footnotemark" target="#note_13"/> : Para introducciones a <emph>topic modeling</emph> escritas en español, véanse la entrada de blog de José Calvo Tello <emph>
                        <ref target="http://www.morethanbooks.eu/topic-modeling-introduccion/">Topic modeling: ¿qué, cómo, cuándo?</ref>
                    </emph> y la presentación <emph>
                        <ref target="https://web.archive.org/web/20180831094856/http://www.dlsi.ua.es/~borja/riilua/6.TopicModeling_v02.pdf">Text Mining con Topic Modeling</ref>
                    </emph> de Borja Navarro-Colorado.</p>
            </div>
        </body>
    </text>
</TEI>
