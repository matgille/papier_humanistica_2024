<TEI xmlns="https://tei-c.org/ns/1-0/">
  <metadata>
  <title>No&#231;&#245;es b&#225;sicas de R com dados tabulares</title>
  <layout>lesson</layout>
  <slug>nocoes-basicas-R-dados-tabulares</slug>
  <date>2016-09-05</date>
  <translation_date>2021-08-28</translation_date>
  <authors>Taryn Dewar</authors>
  <reviewers>James Baker,John Russell</reviewers>
  <editors>Adam Crymble</editors>
  <translator>Diana Rebelo Rodriguez</translator>
  <translation-editor>Jimmy Medeiros</translation-editor>
  <translation-reviewer>Ivo Veiga,Romulo Predes</translation-reviewer>
  <difficulty>1</difficulty>
  <activity>transforming</activity>
  <topics>data-manipulation,r</topics>
  <abstract>Esta li&#231;&#227;o ensina uma maneira de analisar rapidamente grandes volumes de dados tabulares, tornando a pesquisa mais r&#225;pida e eficaz.</abstract>
  <review-ticket>https://github.com/programminghistorian/ph-submissions/issues/398</review-ticket>
  <original>r-basics-with-tabular-data</original>
  <avatar_alt>Letra R ornamentada e ilustrada</avatar_alt>
  <doi>10.46430/phpt0015</doi>
</metadata>
  <text>
    <body>
      <div n="1"><head>Objetivos da li&#231;&#227;o</head>
<p>&#192; medida que mais e mais registros hist&#243;ricos s&#227;o digitalizados, ter uma maneira de analisar rapidamente grandes volumes de dados tabulares torna a pesquisa mais r&#225;pida e eficaz.</p>
<p><link target="https://pt.wikipedia.org/wiki/R_%28linguagem_de_programa%C3%A7%C3%A3o%29">R</link> &#233; uma linguagem de programa&#231;&#227;o com pontos fortes nas an&#225;lises estat&#237;sticas. Como tal, ela pode ser usada para realizar an&#225;lises quantitativas sobre fontes hist&#243;ricas, incluindo, mas n&#227;o se limitando, a testes estat&#237;sticos. Como &#233; poss&#237;vel executar repetidamente o mesmo c&#243;digo nas mesmas fontes, R permite analisar dados rapidamente e produz resultados que podem ser replicados. Al&#233;m disso, como &#233; poss&#237;vel salvar o c&#243;digo, R permite que se redirecionem ou revejam fun&#231;&#245;es para projectos futuros, tornando-o uma parte flex&#237;vel de sua caixa de ferramentas.</p>
<p>Este tutorial n&#227;o pressup&#245;e nenhum conhecimento pr&#233;vio do R. Ele percorrer&#225; algumas das fun&#231;&#245;es b&#225;sicas do R e servir&#225; como uma introdu&#231;&#227;o &#224; linguagem. Ele aborda o processo de instala&#231;&#227;o, explica algumas das ferramentas que se podem usar no R, bem como explica como trabalhar com conjuntos de dados enquanto se faz pesquisa. O tutorial far&#225; isso atrav&#233;s de uma s&#233;rie de mini-li&#231;&#245;es que mostrar&#227;o os tipos de fontes com as quais o R funciona bem e exemplos de como fazer c&#225;lculos para encontrar informa&#231;&#245;es que possam ser relevantes &#224; pesquisa hist&#243;rica. A li&#231;&#227;o tamb&#233;m abordar&#225; diferentes m&#233;todos de entrada de dados para R, tais como matrizes e o uso de ficheiros CSV.</p>
</div>
      <div n="1"><head>Para quem isto &#233; &#250;til?</head>
<p>R &#233; ideal para analisar conjuntos de dados de grande dimens&#227;o que levariam muito tempo para serem processados manualmente. Depois de entendida a forma como se escrevem algumas fun&#231;&#245;es b&#225;sicas e como importar ficheiros de dados pr&#243;prios, &#233; poss&#237;vel analisar e visualizar os dados de forma r&#225;pida e eficiente.</p>
<p>Embora R seja uma &#243;tima ferramenta para dados tabulares, pode-se achar mais &#250;til utilizar outras abordagens para analisar fontes n&#227;o tabulares (tais como transcri&#231;&#245;es de jornais). Caso possua interesse em estudar estes tipos de fontes, d&#234; uma olhada em algumas das outras grandes li&#231;&#245;es do <link target="/pt/">The Programming Historian</link>.</p>
</div>
      <div n="1"><head>Instalar R</head>
<p>R &#233; uma linguagem de programa&#231;&#227;o e um ambiente para trabalhar com dados. Ele pode ser executado utilizando o console de R, bem como no <link target="/en/lessons/intro-to-bash">command-line</link> (linha de comandos) ou na interface <link target="https://www.rstudio.com/">R Studio</link>. Este tutorial ir&#225; focar no uso do console de R. Para come&#231;ar com o R, baixe o programa do <link target="https://cran.r-project.org/">The Comprehensive R Archive Network</link>. R &#233; compat&#237;vel com Linux, Mac e Windows.</p>
<p>Quando se abre o console de R pela primeira vez, a janela aberta se parece com essa:
<img src="/images/r-basics-with-tabular-data/Intro-to-R-1.png" alt="O console R no Mac."/></p>
</div>
      <div n="1"><head>Usar o console de R</head>
<p>O console R &#233; um &#243;timo lugar para come&#231;ar a trabalhar se quando se &#233; inexperiente em R, porque ele foi projetado especificamente para esta linguagem e tem fun&#231;&#245;es espec&#237;ficas para o R.</p>
<p>O console &#233; onde se digitam os comandos. Para limpar a tela inicial, v&#225; para 'Edit' (editar) na barra de menu e selecione 'Clean Console&#8217; (limpar console). Isto iniciar&#225; R com uma nova p&#225;gina. Tamb&#233;m &#233; poss&#237;vel mudar a apar&#234;ncia do console clicando na roda colorida no topo do console em um Mac, ou selecionando 'GUI Preferences' (prefer&#234;ncias da Interface Gr&#225;fica do Usu&#225;rio) no menu 'Edit' em um PC. Al&#233;m disso, tamb&#233;m &#233; poss&#237;vel ajustar a cor da tela de fundo e as cores da fonte para as fun&#231;&#245;es.</p>
</div>
      <div n="1"><head>Usar conjuntos de dados</head>
<p>Antes de trabalhar com dados pr&#243;prios, usar os conjuntos de dados j&#225; incorporados ajuda a ter uma no&#231;&#227;o de como R funciona. &#201; poss&#237;vel pesquisar nos conjuntos de dados inserindo <code class="highlighter-rouge" type="inline">data()</code> no console. Isto mostrar&#225; a lista de todos os conjuntos de dados dispon&#237;veis em uma janela separada. Essa lista inclui os t&#237;tulos de todos os diferentes conjuntos de dados, bem como uma breve descri&#231;&#227;o sobre as informa&#231;&#245;es em cada um deles.</p>
<p>No exemplo abaixo iremos primeiro carregar o conjunto de dados <code class="highlighter-rouge" type="inline">AirPassengers</code> na sua sess&#227;o R digitando <code class="highlighter-rouge" type="inline">data(AirPassengers)</code> na pr&#243;xima linha do console^[1] e pressionando Enter. Para visualizar o conjunto de dados, digite apenas <code class="highlighter-rouge" type="inline">AirPassengers</code> na pr&#243;xima linha e pressione Enter novamente. Isso imprimir&#225; uma tabela mostrando o n&#250;mero de passageiros que voaram em companhias a&#233;reas internacionais entre janeiro de 1949 e dezembro de 1960, em milhares. Dever&#225; aparecer o seguinte:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_0" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_0.txt"></code></pre>
<p>Agora, &#233; poss&#237;vel usar R para responder a uma s&#233;rie de perguntas com base nestes dados. Por exemplo, quais foram os meses mais populares para voar? Houve um aumento nas viagens internacionais ao longo do tempo? Provavelmente poder&#237;amos encontrar as respostas a tais perguntas simplesmente escaneando esta tabela, mas n&#227;o t&#227;o rapidamente quanto o computador. E se houvesse muito mais dados?</p>
</div>
      <div n="1"><head>Fun&#231;&#245;es b&#225;sicas</head>
<p>R pode ser usado para calcular uma s&#233;rie de valores que podem ser &#250;teis enquanto se faz pesquisa em um conjunto de dados. Por exemplo, &#233; poss&#237;vel encontrar a <link target="https://pt.wikipedia.org/wiki/M%C3%A9dia">m&#233;dia</link>, a <link target="https://pt.wikipedia.org/wiki/Mediana_%28estat%C3%ADstica%29">mediana</link> e os valores m&#237;nimos e m&#225;ximos. Para encontrar a m&#233;dia e a mediana no conjunto de dados, insere-se, respectivamente, <code class="highlighter-rouge" type="inline">mean(AirPassengers)</code> e <code class="highlighter-rouge" type="inline">median(AirPassengers)</code> no console. E se quisermos calcular mais de um valor de cada vez? Para produzir um resumo dos dados, digite <code class="highlighter-rouge" type="inline">summary(AirPassengers)</code> (resumo) no console. Isto dar&#225; os valores m&#237;nimo e m&#225;ximo dos dados, assim como a m&#233;dia, a mediana e os valores do primeiro e terceiro quartil.</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_1" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_1.txt"></code></pre>
<p>Um resumo nos mostra que o n&#250;mero m&#237;nimo de passageiros entre janeiro de 1949 e dezembro de 1960 foi de 104.000 e que o n&#250;mero m&#225;ximo de passageiros foi de 622.000. O valor m&#233;dio nos mostra que aproximadamente 280.300 pessoas viajavam por m&#234;s durante o per&#237;odo de coleta dos dados. Estes valores podem ser &#250;teis para ver o grau de varia&#231;&#227;o no n&#250;mero de passageiros ao longo do tempo.</p>
<p>Usar a fun&#231;&#227;o <code class="highlighter-rouge" type="inline">summary()</code> &#233; uma boa maneira de se obter uma vis&#227;o geral de todo o conjunto de dados. No entanto, e se quisermos analisar um subconjunto de dados, como um determinado ano ou alguns meses? &#201; poss&#237;vel selecionar diferentes pontos de dados (como um determinado m&#234;s) e intervalos (como um determinado ano) em R para calcular muitos valores diferentes. Por exemplo, pode-se adicionar o n&#250;mero de passageiros durante dois meses para determinar o n&#250;mero total de passageiros durante esse per&#237;odo de tempo.</p>
<p>Tente adicionar os dois primeiros valores dos dados <code class="highlighter-rouge" type="inline">AirPassengers</code> no console e, em seguida, pressione 'Enter'. Devem aparecer duas linhas assim: </p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_2" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_2.txt"></code></pre>
<p>Isto lhe daria o n&#250;mero total de passageiros (em centenas de milhares) que voaram em janeiro e fevereiro de 1949.</p>
<p>R pode fazer muito mais do que simples aritm&#233;tica. &#201; poss&#237;vel criar objetos, ou <link target="https://pt.wikipedia.org/wiki/Vari%C3%A1vel_%28programa%C3%A7%C3%A3o%29">vari&#225;veis</link>, para representar n&#250;meros e <link target="https://pt.wikipedia.org/wiki/Express%C3%A3o_%28computa%C3%A7%C3%A3o%29">express&#245;es</link>. Por exemplo, pode-se nomear o valor de janeiro de 1949 como vari&#225;vel <code class="highlighter-rouge" type="inline">Jan1949</code>. Digite<code class="highlighter-rouge" type="inline">Jan1949 &lt;- 112</code> no console e, em seguida, <code class="highlighter-rouge" type="inline">Jan1949</code> na linha seguinte. A nota&#231;&#227;o <code class="highlighter-rouge" type="inline">&lt;-</code> atribui o valor <code class="highlighter-rouge" type="inline">112</code> &#224; vari&#225;vel <code class="highlighter-rouge" type="inline">Jan1949</code>. O que deve aparecer &#233;:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_3" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_3.txt"></code></pre>
<p>R &#233; sens&#237;vel a mai&#250;sculas e min&#250;sculas, portanto tenha cuidado para usar a mesma nota&#231;&#227;o quando usar as vari&#225;veis que foram atribu&#237;das (ou nomeadas) em outras a&#231;&#245;es. Veja o artigo de Rasmus B&#229;&#229;th, <link target="https://journal.r-project.org/archive/2012-2/RJournal_2012-2_Baaaath.pdf">The State of Naming Conventions in R</link> (em ingl&#234;s), para mais informa&#231;&#245;es sobre como nomear melhor as vari&#225;veis.</p>
<p>Para remover uma vari&#225;vel do console, digite <code class="highlighter-rouge" type="inline">rm()</code> (<emph>remove</emph> ou apagar) com a vari&#225;vel da qual se deseja apagar dos par&#234;nteses, e pressione Enter. Para ver todas as vari&#225;veis atribu&#237;das, digite <code class="highlighter-rouge" type="inline">ls()</code> (<emph>list objects</emph> ou lista de objetos) no console e pressione Enter. Isto pode ajudar a evitar o uso do mesmo nome para m&#250;ltiplas vari&#225;veis. Isto tamb&#233;m &#233; importante porque R armazena todos os objetos que s&#227;o criados em sua mem&#243;ria, portanto, mesmo que n&#227;o se consiga ver uma vari&#225;vel nomeada <code class="highlighter-rouge" type="inline">x</code> no console, ela pode ter sido criada antes e acidentalmente poderia sobrescrev&#234;-la ao atribuir outra vari&#225;vel.</p>
<p>Aqui est&#225; a lista de vari&#225;veis que criamos at&#233; agora:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_4" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_4.txt"></code></pre>
<p>Temos as vari&#225;veis <code class="highlighter-rouge" type="inline">AirPassengers</code> e <code class="highlighter-rouge" type="inline">Jan1949</code>. Se removermos a vari&#225;vel <code class="highlighter-rouge" type="inline">Jan1949</code> e digitarmos novamente <code class="highlighter-rouge" type="inline">ls()</code>, veremos:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_5" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_5.txt"></code></pre>
<p>Se a qualquer momento n&#227;o conseguir corrigir um erro ou ficar preso a uma fun&#231;&#227;o, digite <code class="highlighter-rouge" type="inline">help()</code> no console para abrir a p&#225;gina de ajuda. Tamb&#233;m &#233; poss&#237;vel encontrar ajuda geral usando o menu &#8216;Help&#8217; na parte superior do console. Se quiser mudar algo no c&#243;digo que j&#225; escreveu, pode-se digitar novamente o c&#243;digo em uma nova linha. Para economizar tempo, tamb&#233;m &#233; poss&#237;vel usar as setas do teclado para rolar para cima e para baixo no console para encontrar a linha de c&#243;digo que se deseja mudar.</p>
<p>&#201; poss&#237;vel usar letras como vari&#225;veis, mas quando come&#231;ar a trabalhar com seus pr&#243;prios dados, pode ser mais f&#225;cil atribuir nomes que sejam mais representativos desses dados. Mesmo com os dados <code class="highlighter-rouge" type="inline">AirPassengers</code>, atribuir vari&#225;veis que se correlacionam com meses ou anos espec&#237;ficos tornaria mais f&#225;cil saber exatamente com quais valores se est&#225; trabalhando.</p>
<div n="2"><head>Pr&#225;tica</head>
<p>A. Atribuir os valores de janeiro de 1950 e janeiro de 1960 dos dados de <code class="highlighter-rouge" type="inline">AirPassengers()</code> em dois objetos novos. Em seguida, somar os valores dos dois objetos criados em uma nova linha de c&#243;digo.</p>
<p>B. Usar os dois objetos criadas para encontrar a diferen&#231;a entre os viajantes a&#233;reos de janeiro de 1960 e de 1950.</p>
</div><div n="2"><head>Solu&#231;&#245;es</head>
<p>A. Atribuir vari&#225;veis para os pontos de janeiro de 1950 e janeiro de 1960 dos dados de <code class="highlighter-rouge" type="inline">AirPassengers()</code>. Adicionar as duas vari&#225;veis juntas na linha seguinte.</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_6" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_6.txt"></code></pre>
<p>Isto significa que 532.000 pessoas viajaram em voos internacionais em janeiro de 1950 e janeiro de 1960.</p>
<p>B. Usar as vari&#225;veis que foram criadas para encontrar a diferen&#231;a entre os viajantes a&#233;reos de 1960 e 1950.</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_7" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_7.txt"></code></pre>
<p>Isto significa que, em janeiro de 1960, mais 302.000 pessoas viajaram em voos internacionais do que em janeiro de 1950.</p>
<p>Definir vari&#225;veis para pontos de dados individuais pode ser entediante, especialmente se os nomes atribu&#237;dos s&#227;o bastante longos. Entretanto, o processo &#233; semelhante para atribuir um intervalo de valores a uma vari&#225;vel, como todos os pontos de dados durante um ano. Fazemos isso criando listas chamadas &#8216;vetores&#8217; usando o comando <code class="highlighter-rouge" type="inline">c</code>. <code class="highlighter-rouge" type="inline">c</code> significa &#8216;combinar&#8217; e nos permite vincular n&#250;meros em uma vari&#225;vel comum. Por exemplo, pode-se criar um vetor para os dados <code class="highlighter-rouge" type="inline">AirPassengers()</code> de 1949 nomeado <code class="highlighter-rouge" type="inline">Air49</code>:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_8" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_8.txt"></code></pre>
<p>Cada item &#233; acess&#237;vel usando o nome da vari&#225;vel e sua posi&#231;&#227;o no &#237;ndice (a partir de 1). Neste caso, <code class="highlighter-rouge" type="inline">Air49[2]</code> cont&#233;m o valor que corresponde a fevereiro de 1949 - <code class="highlighter-rouge" type="inline">118</code>.</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_9" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_9.txt"></code></pre>
<p>&#201; poss&#237;vel criar uma lista de valores consecutivos usando dois pontos. Por exemplo:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_10" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_10.txt"></code></pre>
<p>Usando este conhecimento, podemos usar a seguinte express&#227;o para definir uma vari&#225;vel para os dados <code class="highlighter-rouge" type="inline">AirPassengers</code> de 1949.</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_11" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_11.txt"></code></pre>
<p><code class="highlighter-rouge" type="inline">Air49[2]</code> selecionou os primeiros doze termos no conjunto de dados <code class="highlighter-rouge" type="inline">AirPassengers</code>. Isto d&#225; o mesmo resultado que acima, mas leva menos tempo e tamb&#233;m reduz a chance de que um valor seja transcrito incorretamente.</p>
<p>Para obter o n&#250;mero total de passageiros para 1949, &#233; poss&#237;vel somar todos os termos no vetor, usando a fun&#231;&#227;o <code class="highlighter-rouge" type="inline">sum()</code> (somar).</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_12" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_12.txt"></code></pre>
<p>Portanto, o n&#250;mero total de passageiros em 1949 era de aproximadamente 1.520.000.</p>
<p>Finalmente, a fun&#231;&#227;o <code class="highlighter-rouge" type="inline">length()</code> (comprimento) torna poss&#237;vel saber o n&#250;mero de objetos em um vetor:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_13" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_13.txt"></code></pre>
</div><div n="2"><head>Pr&#225;tica</head>
<ol>
<li>Criar uma vari&#225;vel para os dados <code class="highlighter-rouge" type="inline">AirPassengers</code> de 1950.</li>
<li>Imprimir ou apresentar o segundo objeto da s&#233;rie de 1950.</li>
<li>Qual &#233; o tamanho (<emph>length</emph>) da sequ&#234;ncia na pergunta 2?</li>
<li>Quantos passageiros voaram no total em 1950?</li>
</ol>
</div><div n="2"><head>Solu&#231;&#245;es</head>
<ol>
<li>
</li>
</ol>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_14" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_14.txt"></code></pre>
<ol start="2">
<li>
</li>
</ol>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_15" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_15.txt"></code></pre>
<ol start="3">
<li>
</li>
</ol>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_16" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_16.txt"></code></pre>
<ol start="4">
<li>
</li>
</ol>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_17" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_17.txt"></code></pre>
<p>Caso se quisesse criar vari&#225;veis para todos os anos no conjunto de dados, seria poss&#237;vel ent&#227;o usar algumas das ferramentas que examinamos para determinar o n&#250;mero de pessoas que viajam de avi&#227;o ao longo do tempo. Aqui est&#225; uma lista de vari&#225;veis para 1949 a 1960, seguida pelo n&#250;mero total de passageiros para cada ano:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_18" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_18.txt"></code></pre>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_19" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_19.txt"></code></pre>
<p>A partir destas informa&#231;&#245;es, podemos ver que o n&#250;mero de passageiros aumenta a cada ano. &#201; poss&#237;vel ir mais longe com estes dados para determinar se havia um interesse crescente em f&#233;rias em certos per&#237;odos do ano, ou mesmo o aumento percentual de passageiros ao longo do tempo.</p>
</div></div>
      <div n="1"><head>Trabalhar com bases de dados maiores</head>
<p>Note que o exemplo acima n&#227;o &#233; bem adequado para conjuntos de dados de grande dimens&#227;o: contar pontos de dados para encontrar os corretos seria muito entediante. Pense no que aconteceria se procur&#225;ssemos informa&#231;&#245;es do ano 96 em um conjunto de dados com 150 anos de dados coletados.</p>
<p>&#201; poss&#237;vel selecionar linhas e colunas espec&#237;ficas de dados se o conjunto de dados estiver em um formato particular. Carregue os dados de <code class="highlighter-rouge" type="inline">mtcars</code> em seu console:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_20" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_20.txt"></code></pre>
<p>Este <link target="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html">conjunto de dados</link> fornece uma vis&#227;o geral dos <emph>Motor Trend Car Road Tests</emph> de autom&#243;veis da revista Motor Trend de 1974<ref type="footnotemark" target="#2"/>. Ele cont&#233;m informa&#231;&#245;es sobre quantas milhas por gal&#227;o ou quil&#244;metros por litro um carro poderia percorrer<ref type="footnotemark" target="#3"/>, o n&#250;mero de cilindros do motor em cada carro, pot&#234;ncia, rela&#231;&#227;o do eixo traseiro, peso, e outras caracter&#237;sticas de cada modelo. Os dados poder&#227;o ser usados para descobrir qual destas caracter&#237;sticas tornou cada tipo de carro mais ou menos seguro para os passageiros ao longo do tempo.</p>
<p>&#201; poss&#237;vel selecionar colunas inserindo o nome do conjunto de dados seguido por colchetes e o n&#250;mero da linha ou coluna de dados que lhe interessa. Para ordenar as linhas e colunas, pense no <code class="highlighter-rouge" type="inline">dataset[x,y]</code>, sendo <code class="highlighter-rouge" type="inline">dataset</code> o conjunto de dados com o qual se est&#225; trabalhando, <code class="highlighter-rouge" type="inline">x</code> a linha e <code class="highlighter-rouge" type="inline">y</code> a coluna.</p>
<p>Se estivesse interessado na primeira linha de informa&#231;&#245;es no conjunto <code class="highlighter-rouge" type="inline">mtcars</code>, deveria executar o seguinte em seu console:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_21" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_21.txt"></code></pre>
<p>Para ver uma coluna dos dados, podemos digitar:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_22" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_22.txt"></code></pre>
<p>Isto mostra todos os valores sob a categoria <code class="highlighter-rouge" type="inline">cyl</code> (cilindrada). A maioria dos modelos de carros tem motores de 4, 6 ou 8 cilindros. Tamb&#233;m &#233; poss&#237;vel selecionar pontos de dados individuais inserindo valores tanto para <code class="highlighter-rouge" type="inline">x</code> (linha) quanto para <code class="highlighter-rouge" type="inline">y</code> (coluna):</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_23" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_23.txt"></code></pre>
<p>Isto retorna o valor na primeira linha, segunda coluna. A partir daqui, seria poss&#237;vel executar um resumo em uma linha ou coluna de dados sem ter que contar o n&#250;mero de termos no conjunto de dados. Por exemplo, digitar <code class="highlighter-rouge" type="inline">summary(mtcars[,1])</code> no console e pressionar 'Enter' daria o resumo para as milhas por gal&#227;o que os diferentes carros no conjunto de dados <code class="highlighter-rouge" type="inline">mtcars</code> usam:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_24" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_24.txt"></code></pre>
<p>O resumo indica que a efici&#234;ncia m&#225;xima de combust&#237;vel foi de 33,9 milhas por gal&#227;o ou 54.5 quil&#244;metros por 3.78 litros, do Toyota Corolla e o menos eficiente foi o Lincoln Continental, que s&#243; conseguiu 10,4 milhas por gal&#227;o, ou seja, 16.7 quil&#244;metros por 3.78 litros. Podemos encontrar os carros que correspondem aos pontos de valor olhando de volta para a tabela. &#201; muito mais f&#225;cil encontrar um valor espec&#237;fico do que tentar fazer as contas em sua cabe&#231;a ou pesquisar atrav&#233;s de uma planilha.</p>
</div>
      <div n="1"><head>Matrizes</head>
<p>Agora que temos uma melhor compreens&#227;o de como algumas das fun&#231;&#245;es b&#225;sicas em R funcionam, podemos analisar maneiras de usar essas fun&#231;&#245;es em nossos pr&#243;prios dados. Isto inclui a constru&#231;&#227;o de <link target="https://pt.wikipedia.org/wiki/Matriz_%28matem%C3%A1tica%29">matrizes</link> usando pequenos conjuntos de dados. O benef&#237;cio de saber como construir matrizes em R &#233; que se tivermos apenas alguns pontos de dados para trabalhar, poder&#237;amos simplesmente criar uma matriz em vez de um CSV que precisaria ser depois importado. Uma das maneiras mais simples de construir uma matriz &#233; criar pelo menos duas vari&#225;veis ou vetores e depois lig&#225;-los entre si. Por exemplo, vejamos alguns dados do <link target="https://pt.wikipedia.org/wiki/Old_Bailey">Old Bailey</link> (o Tribunal Penal Central da Inglaterra e do Pa&#237;s de Gales):</p>
<p><img src="/images/r-basics-with-tabular-data/Intro-to-R-2.png" alt="Conjunto de dados criminais do The Old Bailey nas d&#233;cadas entre 1670 e 1800."/></p>
<p>O Old Bailey cont&#233;m estat&#237;sticas e informa&#231;&#245;es sobre casos criminais entre 1674 e 1913 que foram mantidos pelo Tribunal Penal Central de Londres. Se quis&#233;ssemos analisar o n&#250;mero total de crimes de roubo e furto violento entre 1670 e 1710, poder&#237;amos colocar esses n&#250;meros em uma matriz.</p>
<p>Para isso, vamos criar as vari&#225;veis <code class="highlighter-rouge" type="inline">Roubos</code> e <code class="highlighter-rouge" type="inline">RoubosViolentos</code> usando os totais de cada d&#233;cada como pontos de dados:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_25" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_25.txt"></code></pre>
<p>Para criar uma matriz podemos usar a fun&#231;&#227;o <code class="highlighter-rouge" type="inline">cbind()</code> (<emph>column bind</emph> ou uni&#227;o de colunas). Isto une <code class="highlighter-rouge" type="inline">Roubos</code> e <code class="highlighter-rouge" type="inline">RoubosViolentos</code> em colunas, representadas como <code class="highlighter-rouge" type="inline">Crime</code> aqui:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_26" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_26.txt"></code></pre>
<p>Tamb&#233;m &#233; poss&#237;vel estabelecer uma matriz usando <code class="highlighter-rouge" type="inline">rbind()</code>. <code class="highlighter-rouge" type="inline">rbind()</code> une os dados em fileiras (<emph>row bind</emph> ou uni&#227;o de fileiras). Observe a diferen&#231;a entren<code class="highlighter-rouge" type="inline">Crime</code> e <code class="highlighter-rouge" type="inline">Crime2</code>:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_27" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_27.txt"></code></pre>
<p>A segunda matriz tamb&#233;m pode ser criada usando a express&#227;o <code class="highlighter-rouge" type="inline">t(Crime)</code> (matriz transposta), que gera o inverso de <code class="highlighter-rouge" type="inline">Crime</code>.</p>
<p>Tamb&#233;m &#233; poss&#237;vel construir uma matriz utilizando <code class="highlighter-rouge" type="inline">matrix()</code>. Isto permite transformar uma sequ&#234;ncia de n&#250;meros, como o n&#250;mero de roubos e roubos violentos cometidos, em uma matriz se n&#227;o tiver criado vari&#225;veis separadas para estes valores:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_28" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_28.txt"></code></pre>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_29" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_29.txt"></code></pre>
<p>A primeira parte da fun&#231;&#227;o &#233; a lista de n&#250;meros. Depois disso, &#233; poss&#237;vel determinar quantas linhas (<code class="highlighter-rouge" type="inline">nrow=</code>) (n&#250;mero de linhas) ou colunas (<code class="highlighter-rouge" type="inline">ncol=</code>) (n&#250;mero de colunas) a matriz ter&#225;.</p>
<p>A fun&#231;&#227;o <code class="highlighter-rouge" type="inline">apply()</code> permite executar a mesma fun&#231;&#227;o em cada linha ou coluna de uma matriz. Existem tr&#234;s partes da fun&#231;&#227;o <code class="highlighter-rouge" type="inline">apply()</code>, nas quais &#233; preciso selecionar: a matriz que est&#225; sendo utilizada, os termos que se deseja usar e a fun&#231;&#227;o que se deseja executar na matriz:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_30" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_30.txt"></code></pre>
<p>Este exemplo mostra a fun&#231;&#227;o <code class="highlighter-rouge" type="inline">apply</code> utilizada na matriz <code class="highlighter-rouge" type="inline">Crime</code> para calcular a m&#233;dia (<emph>mean</emph>) de cada linha e, portanto, o n&#250;mero m&#233;dio de roubos e assaltos combinados que foram cometidos em cada d&#233;cada. Se quiser saber a m&#233;dia de cada coluna, use um <code class="highlighter-rouge" type="inline">2</code> em vez de um <code class="highlighter-rouge" type="inline">1</code> dentro da fun&#231;&#227;o:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_31" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_31.txt"></code></pre>
<p>Isto mostra o n&#250;mero m&#233;dio de roubos e assaltos entre as d&#233;cadas.</p>
<div n="2"><head>Pr&#225;tica</head>
<ol>
<li>
<p>Criar uma matriz de duas colunas usando os seguintes dados de Quebra da Paz (<emph>Breaking Peace</emph>) e Assassinatos (<emph>Killing</emph>) de 1710 a 1730 da tabela acima do Old Bailey: <code class="highlighter-rouge" type="inline">c(2,3,3,44,51,17)</code></p>
</li>
<li>
<p>Usar a fun&#231;&#227;o <code class="highlighter-rouge" type="inline">cbind()</code> para juntar <code class="highlighter-rouge" type="inline">QuebraPaz &lt;- c(2,3,3)</code> e <code class="highlighter-rouge" type="inline">Assassinatos &lt;- c(44,51,17)</code>.</p>
</li>
<li>
<p>Calcular a m&#233;dia de cada coluna para a matriz acima usando a fun&#231;&#227;o <code class="highlighter-rouge" type="inline">apply()</code>.</p>
</li>
</ol>
</div><div n="2"><head>Solu&#231;&#245;es</head>
<ol>
<li>
</li>
</ol>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_32" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_32.txt"></code></pre>
<ol start="2">
<li>
</li>
</ol>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_33" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_33.txt"></code></pre>
<ol start="3">
<li>
</li>
</ol>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_34" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_34.txt"></code></pre>
<p>Matrizes podem ser &#250;teis quando se est&#225; trabalhando com pequenas quantidades de dados. No entanto, nem sempre &#233; a melhor op&#231;&#227;o, porque uma matriz pode ser dif&#237;cil de ler. &#192;s vezes &#233; mais f&#225;cil criar seu pr&#243;prio ficheiro usando um programa de planilhas como <link target="https://pt.wikipedia.org/wiki/Microsoft_Excel">Excel</link> ou <link target="https://www.openoffice.org/pt/">Open Office</link> para garantir que todas as informa&#231;&#245;es que deseja estudar estejam organizadas e importar esse ficheiro para o R.</p>
</div></div>
      <div n="1"><head>Carregar seu pr&#243;prio conjunto de dados em R</head>
<p>Agora que j&#225; praticou com dados simples, pode trabalhar com seus pr&#243;prios dados. Como trabalhar com esses dados em R? H&#225; v&#225;rias maneiras de se fazer isso. A primeira &#233; carregar a planilha diretamente em R. Outra maneira &#233; importar um ficheiro CSV (<emph>comma-separated values</emph> ou valores separados por v&#237;rgula) ou TXT (de texto) para R.</p>
<p>Para carregar um ficheiro Excel diretamente no console R, &#233; necess&#225;rio primeiro instalar o pacote <code class="highlighter-rouge" type="inline">readxl</code> (ler o ficheiro Excel). Para fazer isto, digite <code class="highlighter-rouge" type="inline">install.packages("readxl")</code> no console e pressione Enter. Pode ser que seja necess&#225;rio verificar se o pacote foi instalado no console clicando na guia &#8220;Packages&amp;Data&#8221; (pacotes e dados) no menu, selecionando &#8220;Package Manager&#8221; (gerenciador de pacotes) e depois clicando na caixa ao lado do pacote <code class="highlighter-rouge" type="inline">readxl</code>. A partir daqui, &#233; poss&#237;vel selecionar um ficheiro e carreg&#225;-lo em R. Abaixo est&#225; um exemplo de como pode parecer carregar um simples ficheiro Excel:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_35" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_35.txt"></code></pre>
<p>Ap&#243;s o comando <code class="highlighter-rouge" type="inline">read_excel</code> insere-se o nome do ficheiro que est&#225; sendo selecionado. Os n&#250;meros embaixo correspondem aos dados da planilha de amostra que utilizei. Observe como as linhas est&#227;o numeradas e as colunas est&#227;o etiquetadas como eram na planilha original.</p>
<p>Quando estiver carregando dados em R, certifique-se de que o ficheiro que est&#225; sendo acessado esteja dentro do diret&#243;rio em seu computador de onde se est&#225; trabalhando. Para verificar isso, digite <code class="highlighter-rouge" type="inline">dir()</code> (diret&#243;rio) ou <code class="highlighter-rouge" type="inline">getwd()</code> (mostrar o caminho do diret&#243;rio de trabalho) no console. &#201; poss&#237;vel mudar o diret&#243;rio, se necess&#225;rio, indo para a aba &#8220;Miscellaneous&#8221; (diversos) na barra de t&#237;tulo em sua tela e, em seguida, selecionando o que se quer definir como diret&#243;rio para R. Se n&#227;o fizer isso, R n&#227;o ser&#225; capaz de encontrar o ficheiro corretamente.</p>
<p>Outra maneira de carregar dados em R &#233; usar um ficheiro CSV. Um ficheiro <link target="https://pt.wikipedia.org/wiki/Comma-separated_values">CSV</link> exibe valores em filas e colunas, separados por v&#237;rgulas. &#201; poss&#237;vel salvar qualquer documento criado no Excel como um ficheiro .csv e depois carreg&#225;-lo em R. Para usar um ficheiro CSV em R, nomeie o ficheiro usando o comando <code class="highlighter-rouge" type="inline">&lt;-</code> e depois digite <code class="highlighter-rouge" type="inline">read.csv(file="file-name.csv",header=TRUE,sep=",")</code> no console. <code class="highlighter-rouge" type="inline">file-name</code> indica ao R qual ficheiro selecionar, enquanto que definir o cabe&#231;alho ou <code class="highlighter-rouge" type="inline">header=</code> (o ficheiro equivale a), para <code class="highlighter-rouge" type="inline">TRUE</code> (verdadeiro) diz que a primeira linha s&#227;o cabe&#231;alhos e n&#227;o vari&#225;veis. <code class="highlighter-rouge" type="inline">sep</code> significa que h&#225; uma v&#237;rgula entre cada n&#250;mero e linha.</p>
<p>Normalmente, um CSV pode conter muitas informa&#231;&#245;es. Entretanto, para come&#231;ar, tente criar um ficheiro CSV em Excel usando os dados do <emph>Old Bailey</emph> que usamos para as matrizes. Defina as colunas para as datas entre 1710 e 1730, mais o n&#250;mero de viola&#231;&#245;es de crimes de paz e assassinatos para aquelas d&#233;cadas. Salve o ficheiro como "OldBailey.csv" e tente carreg&#225;-lo em R usando os passos acima. Veremos que:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_36" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_36.txt"></code></pre>
<p>Agora poder&#237;amos acessar os dados em R e fazer quaisquer c&#225;lculos para ajud&#225;-lo a estudar os dados. Os ficheiros CSV tamb&#233;m podem ser muito mais complexos do que este exemplo, portanto, qualquer conjunto de dados com os quais trabalhamos em estudos pr&#243;prios tamb&#233;m poderia ser aberto em R.</p>
<p>TXT (ou ficheiros de texto) podem ser importados para R de maneira semelhante. Usando o comando <code class="highlighter-rouge" type="inline">read.table()</code>, &#233; poss&#237;vel carregar ficheiros de texto em R, seguindo a mesma sintaxe que no exemplo acima.</p>
</div>
      <div n="1"><head>Salvar dados en R</head>
<p>Agora que carregamos dados em R e conhecemos algumas maneiras de trabalhar com os dados, o que acontece se quisermos salv&#225;-los em outro formato? A fun&#231;&#227;o <code class="highlighter-rouge" type="inline">write.xlsx()</code> permite que se fa&#231;a exatamente isso - pegar os dados de R e salv&#225;-los em um ficheiro Excel. Tente escrever o ficheiro do <emph>Old Bailey</emph> em um ficheiro Excel. Primeiro, ser&#225; necess&#225;rio carregar o pacote e depois ser&#225; poss&#237;vel criar o ficheiro ap&#243;s criar uma vari&#225;vel para os dados do <emph>Old Bailey</emph>:</p>
<pre><code xml:id="code_nocoes-basicas-R-dados-tabulares_37" type="block" corresp="code_nocoes-basicas-R-dados-tabulares_37.txt"></code></pre>
<p>Neste caso, e dentro do par&#234;ntese desta fun&#231;&#227;o <link target="https://www.rdocumentation.org/packages/xlsx/versions/0.6.5">write.xlsx</link>, estamos chamando para processar a vari&#225;vel "OldBailey" com o argumento <code class="highlighter-rouge" type="inline">x= </code>. Ao mesmo tempo, indicamos que o ficheiro salvo deve ser chamado &#8220;OldBailey&#8221; com a extens&#227;o &#8220;.xlsx&#8221; com o argumento <code class="highlighter-rouge" type="inline">file= </code>. Al&#233;m disso, damos o nome "OldBailey" &#224; planilha onde estar&#227;o os dados com <code class="highlighter-rouge" type="inline">sheetName= </code>. Finalmente, estabelecemos que queremos (TRUE ou verdadeiro) que os nomes da linha em nossa vari&#225;vel sejam salvos no novo ficheiro. [N. da T.]</p>
</div>
      <div n="1"><head>Resumo e passos seguintes</head>
<p>Este tutorial explorou as bases do uso de R para trabalhar com dados de pesquisa tabular. O R pode ser uma ferramenta muito &#250;til para a pesquisa em ci&#234;ncias humanas e sociais porque a an&#225;lise de dados &#233; reprodut&#237;vel e permite analisar dados rapidamente sem ter que montar um sistema complicado. Agora que conhece alguns dos conceitos b&#225;sicos do R, pode-se explorar algumas das outras fun&#231;&#245;es do programa, incluindo c&#225;lculos estat&#237;sticos, produ&#231;&#227;o de gr&#225;ficos e cria&#231;&#227;o de suas pr&#243;prias fun&#231;&#245;es.</p>
<p>Para mais informa&#231;&#245;es sobre o R, visite o <link target="https://cran.r-project.org/doc/manuals/r-release/R-intro.html">R Manual</link> (em ingl&#234;s).</p>
<p>H&#225; tamb&#233;m uma s&#233;rie de outros tutoriais de R online, inclusive:</p>
<ul>
<li>
<p><link target="https://web.archive.org/web/20191015004305/https://www.nceas.ucsb.edu/files/scicomp/Dloads/RProgramming/BestFirstRTutorial.pdf">R: A self-learn tutorial</link> (em ingl&#234;s) - este tutorial passa por uma s&#233;rie de fun&#231;&#245;es e fornece exerc&#237;cios para praticar compet&#234;ncias.</p>
</li>
<li>
<p><link target="https://www.datacamp.com/courses/free-introduction-to-r">DataCamp Introduction to R</link> - este &#233; um curso online gratuito que lhe d&#225; feedback sobre seu c&#243;digo para ajudar a identificar erros e aprender como escrever c&#243;digo de forma mais eficiente.</p>
</li>
</ul>
<p>Finalmente, um grande recurso para historiadores digitais &#233; o <link target="http://dh-r.lincolnmullen.com/">Lincoln Mullen&#8217;s Digital History Methods in R</link>. &#201; um rascunho de um livro escrito especificamente sobre como usar R para o trabalho de hist&#243;ria digital.</p>
</div>
      <div n="1"><head>Notas</head>
<p><note id="1"> Box, G. E. P., Jenkins, G. M. e Reinsel, G. C. (1976), Time Series Analysis, Forecasting and Control. Third Edition. Holden-Day. Series G.</note>
<note id="2"> Henderson e Velleman (1981), Building multiple regression models interactively. Biometrics, 37, 391&#208;411.</note>
<note id="3"> Nota da tradutora: Um gal&#227;o equivale a 3,78 litros e uma milha equivale a 1,6 quil&#244;metros.</note></p>
</div>
    </body>
  </text>
</TEI>
