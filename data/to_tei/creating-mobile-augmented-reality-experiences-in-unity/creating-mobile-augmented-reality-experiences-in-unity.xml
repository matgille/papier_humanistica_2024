<TEI xmlns="http://www.tei-c.org/ns/1.0" xml:id="creating-mobile-augmented-reality-experiences-in-unity">
    <teiHeader>
        <fileDesc>
            <titleStmt>
                <title>Creating Mobile Augmented Reality Experiences in Unity</title>
                <author role="original_author">Jacob W. Greene</author>
                <editor role="reviewers">
                    <persName>Brenta Blevins</persName>
                    <persName>Jason Crider</persName>
                    <persName>Fred Gibbs</persName>
                    <persName>Sean Morey</persName>
                    <persName>Anandi Silva Knuppel</persName>
                </editor>
                <editor role="editors">
                    <persName>Fred Gibbs</persName>
                    <persName>Brandon Walsh</persName>
                </editor>
            </titleStmt>
            <publicationStmt>
                <distributor>Programming Historian</distributor>
                <idno type="doi">10.46430/phen0073</idno>
                <date type="published">08/10/2018</date>
            </publicationStmt>
            <sourceDesc>
                <p>Born digital, in a markdown format. This lesson is original.</p>
            </sourceDesc>
        </fileDesc>
        <profileDesc>
            <abstract>
                <p>This lesson serves as an introduction to creating mobile augmented reality applications. Augmented reality (AR) can be defined as the overlaying of digital content (images, video, text, sound, etc.) onto physical objects or locations, and it is typically experienced by looking through the camera lens of an electronic device such as a smartphone, tablet, or optical head-mounted display.</p>
            </abstract>
            <textClass>
                <keywords>
                    <term xml:lang="en">website</term>
                    <term xml:lang="en">mapping</term>
                </keywords>
            </textClass>
        </profileDesc>
    </teiHeader>
    <text xml:lang="en">
        <body>
            <p>This lesson serves as an introduction to creating mobile augmented reality applications in the Unity game engine. Augmented reality (AR) can be defined as the overlaying of digital content (images, video, text, sound, etc.) onto physical objects or locations, and it is typically experienced by looking through the camera lens of an electronic device such as a smartphone, tablet, or optical head-mounted display (e.g. Microsoft Hololens). Although AR is a cutting-edge, complex technology, there are a number of user-friendly platforms that allow people with no previous coding experience to create compelling augmented reality experiences.</p>
            <div type="2">
                <head>Lesson Goals</head>
                <p>This lesson was written using Unity 2017.2 and Vuforia 7. To access this version of Unity and the integrated Vuforia AR development software, visit the <ref target="https://unity3d.com/get-unity/download/archive">Unity download archive</ref>. In this introductory tutorial, you will learn how to:</p>
                <list type="unordered">
                    <item>setup the Unity game engine for augmented reality development</item>
                    <item>convert images to trackable data sets</item>
                    <item>add overlays to trigger images</item>
                    <item>modify C# scripts in the Unity editor</item>
                    <item>build standalone augmented reality applications to Android and iOS devices</item>
                </list>
            </div>
            <div type="2">
                <head>Software Requirements</head>
                <p>For this lesson, you will need to download the following software applications and SDKs (software development kits). Several of the applications used in this tutorial (Unity and Android SDK) are very large and will take some time to download and install. You might want to complete the downloads section of this tutorial while working on something else. All of the steps in this lesson can be completed using either the free or paid versions of the software. This lesson was written using Unity 2017.2.</p>
                <list type="unordered">
                    <item>Unity 2017.2</item>
                    <item>Vuforia 7</item>
                    <item>Java Development Kit 8</item>
                    <item>Android SDK Tools 3.1.2 (if testing on an Android device)</item>
                    <item>Xcode 9 (if testing on an iOS device)</item>
                </list>
                <p>In addition to the above software requirements, you will also need to make sure that your computer aligns with <ref target="https://docs.unity3d.com/2017.2/Documentation/Manual/RenderTech-HardwareRequirements.html">the minimum hardware requirements for Unity development.</ref>
                </p>
            </div>
            <div type="2">
                <head>How can Humanists use Augmented Reality?</head>
                <p>Novel applications of AR continue to surface  within a variety of industries: <ref target="https://www.youtube.com/watch?v=gx_UQxx54lo">museums</ref> are integrating AR content into their displays, <ref target="http://www.gizmag.com/ikea-augmented-reality-catalog-app/28703/">companies</ref> are promoting AR apps in lieu of print or even web-based catalogs, and <ref target="https://www.youtube.com/watch?v=bXqe2zSepQ4">engineering firms</ref> are creating AR applications showcasing their efforts to promote sustainability. <ref target="https://www.statista.com/statistics/786821/ar-device-and-services-revenue-worldwide/">Predicted to grow</ref> into a multi-billion industry by 2020, augmented reality is an exciting new medium that humanists cannot afford to ignore. Indeed, many scholars within the growing field of digital humanities are beginning to explore how AR can be utilized as a viable medium of scholarly engagement within public spaces, objects, images, and texts.</p>
                <figure>
                    <desc>Augmented reality can be used to overlay digital information onto existing texts such as historical markers. This modified image is based on a photograph by Nicholas Henderson. 2015.</desc>
                    <graphic url="ar-dev-1.png"/>
                </figure>
                <p>Since at least 2010, <ref target="https://manifestarblog.wordpress.com/about/">digital artists</ref> have been creating AR applications for social advocacy and cultural intervention. For example, Tamiko Thiel's AR project <ref target="https://perma.cc/6NLX-AJBH">Clouding Green</ref> reveals the carbon footprint of specific technology companies. More recently, a group of New York artists created a <ref target="https://techcrunch.com/2017/10/08/jeff-koons-augmented-reality-snapchat-artwork-gets-vandalized/">"vandalized" version of Jeff Koon's Snapchat sculptures</ref> as a way of protesting the digital takeover of public AR spaces.</p>
                <p>At the <ref target="http://web.archive.org/web/20180421163517/http://english.ufl.edu/trace_arcs/">Trace Initiative</ref>, a digital humanities organization in the University of Florida English Department, we seek to build upon the work of these artists by promoting the creation and circulation of humanities-focused mobile AR applications. We released our first AR application <ref target="https://web.archive.org/web/20210421123810/http://trace-arcs.english.ufl.edu/projects/scramble.html">to the Google Play store</ref> in spring 2016.</p>
                <p>The augmented reality software used in this tutorial relies on image-recognition technology, meaning that it requires some kind of visual trigger (a logo, painting, etc.) to know when to display digital content. In the example application depicted in the image above, the application is programmed to only display the digital image of John C. Calhoun if the camera "recognizes" the specific historical marker with which it is associated. For this lesson, you will augment the cover of a physical book with a digital overlay that displays a picture of the author. You could use the technical skills gained throughout this tutorial to create digital overlays for a variety of texts such as historical documents or signs. For example, you might create an application that allows readers to scan the pages of a book or document and access historical context or critique related to that specific page. Humanities scholars could also use this tutorial to create site-specific AR applications to educate visitors about cultural aspects of a location that have been excluded from its historical presentation.</p>
            </div>
            <head>A Note About AR Creation Platforms</head>
            <p>Unity is a very powerful and complex application used to create desktop, console, and mobile games. It is not designed exclusively for augmented reality development. As a result, this lesson has many detailed, albeit necessary, steps for navigating and operating the Unity interface. Although some of the steps might not be directly related to augmented reality development, they are certainly transferrable to other tutorials on Programming Historian or elsewhere that utilize Unity. If you would prefer to gain some familiarity with the Unity Editor prior to completing this lesson, I would suggest consulting <ref target="https://learn.unity.com/tutorial/live-sessions-on-unity-interface-and-essentials">Unity's beginner tutorial videos</ref> and the online <ref target="https://docs.unity3d.com/2017.2/Documentation/Manual/index.html">Unity manual</ref>.</p>
            <p>However, before you decide to dive into AR development in the Unity interface, it is important to understand that there are other (much simpler) AR creation platforms available, such as <ref target="https://www.hpreveal.com/">HP Reveal</ref>. HP Reveal is a simple, drag-and-drop AR creation studio that allows users to augment images with digital content.</p>
            <p>HP Reveal is a fantastic AR creation platform that can be learned fairly quickly. I would highly recommend it for classroom usage and for smaller projects with simple multimedia overlays such as images or short videos. However, online creation platforms like HP Reveal have their limitations. When you create an overlay in HP Reveal, users can only access it through the HP Reveal application. This leaves the AR creator with no control over the design of the application interface. Moreover, HP Reveal requires that users have internet acess when using the application, which makes it difficult to create site-specific AR applications in places where there is little to no internet connectivity. With Vuforia, however, you can create stand-alone AR applications that can be downloaded and stored in the mobile device's memory and thus do not require that users to have internet access. Consult the table below to help you decide which platform is best suited for your AR development needs.</p>
            <table>
                <row>
                    <cell role="label"/>
                    <cell role="label">HP Reveal</cell>
                    <cell role="label">Unity/Vuforia</cell>
                </row>
                <row>
                    <cell>
                        <hi rend="bold">Type</hi>
                    </cell>
                    <cell>online platform</cell>
                    <cell>computer program</cell>
                </row>
                <row>
                    <cell>
                        <hi rend="bold">Use</hi>
                    </cell>
                    <cell>small projects with simple overlays</cell>
                    <cell>large projects with complex overlays, site-specific applications</cell>
                </row>
                <row>
                    <cell>
                        <hi rend="bold">Pros</hi>
                    </cell>
                    <cell>users can instantly access overlays, no coding required</cell>
                    <cell>create standalone applications, more control over interface design, overlays load quickly</cell>
                </row>
                <row>
                    <cell>
                        <hi rend="bold">Cons</hi>
                    </cell>
                    <cell>file size limits for overlays, requires internet connection</cell>
                    <cell>steeper learning curve, must upload completed application files to Google Play or Apple Store for others to access</cell>
                </row>
                <row>
                    <cell>
                        <hi rend="bold">Access</hi>
                    </cell>
                    <cell>
                        <ref target="https://www.hpreveal.com/">HP Reveal Studio</ref>
                    </cell>
                    <cell>
                        <ref target="https://unity3d.com/get-unity/download/archive">Unity</ref>
                        <ref target="https://developer.vuforia.com">Vuforia</ref>
                    </cell>
                </row>
                <row>
                    <cell>
                        <hi rend="bold">Minumum Hardware Needed</hi>
                    </cell>
                    <cell>iOS or Android Mobile Device</cell>
                    <cell>Laptop/Desktop and iOS or Android Mobile Device</cell>
                </row>
            </table>
            <div type="3">
                <head>Installing Unity and Vuforia</head>
                <p>Since the release of Unity 2017.2, the Vuforia SDK is integrated into the Unity Editor. The <ref target="https://developer.vuforia.com/">Vuforia SDK</ref> is a suite of assets and code snippets that work alonside Unity to make it easier to quickly develop and build AR content for a variety of platforms. If you are unable to download Unity 2017.2 or later, <ref target="/lessons/intro-to-augmented-reality-with-unity">consult this archived lesson for earlier versions of Unity</ref>. To download Unity and Vuforia, go to the <ref target="https://unity3d.com/get-unity/download/archive">Unity website</ref> and download Unity 2017.2. In the Components dialog box, select Vuforia Augmented Reality Support in addition to either Android Build Support and/or iOS Build Support, depending on your target mobile device platform. Once the download completes, start Unity and follow the setup prompts. If Unity asks if you are creating a personal or professional account, choose personal account.</p>
            </div>
            <div type="3">
                <head>Java Development Kit</head>
                <p>Download and install the <ref target="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">Java Development Kit 8</ref> for your operating system. At this time, Unity is incompatible with JDK 10.</p>
                <p>Click the file once it has finished downloading, and follow the installation guide.</p>
            </div>
            <div type="3">
                <head>Android SDK Tools (only if testing on an Android device)</head>
                <p>Go to the <ref target="https://developer.Android.com/studio/index.html">Android Studio website</ref> and choose Standard install. Android Studio is the official IDE (integrated development environment) for creating Android applications. Download and install Android Studio and follow the instructions below. Keep in mind that Android Studio is a large program that will take time to download.</p>
                <list type="ordered">
                    <item>Start the SDK manager after installation by choosing the Configure option on the first splash screen. Install any packages that are automatically selected, but make sure that the Android SDK Platform-tools and Android SDK Build-tools options are both selected.</item>
                    <item>Scroll down to the folder labelled Extras and select the Android Support Repository and Google USB Driver. The Google USB Driver is only available for Windows.</item>
                    <item>Click Install packages.</item>
                    <item>If you are trying to install the Android packages but keep getting an error about temp folders not being created, close the manager and go to the Android-sdk folder on your computer. Right click the "SDK Manager" application file and select "Run as administrator."</item>
                </list>
            </div>
            <div type="3">
                <head>Xcode</head>
                <p>To build iOS applications with Unity, you need:</p>
                <list type="ordered">
                    <item>An apple device (iPhone, iPad, etc.) running iOS 9 or later</item>
                    <item>A Mac running OS X 10.10.5 or later. If you meet these technical requirements, download <ref target="https://itunes.apple.com/us/app/xcode/id497799835?ls=1&amp;mt=12">Xcode</ref> from the Apple app store.</item>
                </list>
                <p>The remaining steps in this lesson are completed with a Windows 10 operating system.</p>
            </div>
            <div type="2">
                <head>Connect the Android SDK and Java Development Kit to Unity</head>
                <p>In Unity, go to Edit &gt; Preferences &gt; External Tools (or Unity &gt; Preferences &gt; External Tools on a Mac) and point Unity to the file locations for the Android Tools (Android SDK) and Java Development Kit (JDK) you just installed. If you do not see options for adding the Android SDK and Java SDK, then you will need to close Unity and restart the Unity Download Assistant and make sure that "Android Build Support" is selected on the Components dialog box.</p>
                <p>{% include figure.html filename="ar-dev-2.png" caption=" Components dialog box for Unity 2017.2. Check the Android Build Support option. Check the iOS Build Support option if you working on a Mac."%}</p>
                <p>Unity should automatically detect the location of the Java Development Kit once it has finished installing. If you are working on Windows machine and Unity is not detecting the JDK,</p>
                <list type="ordered">
                    <item>Restart Unity and go to Edit &gt; Preferences.</item>
                    <item>Navigate to External Tools and ensure that the <emph>JDK</emph> field is pointing to the Java Development Kit.</item>
                    <item>Click the Browse button next to the JDK field and select the <emph>jdk[version number]</emph> folder in the C:/Program Files/Java folder. Leave the <emph>NDK</emph> field blank.</item>
                    <item>Click the Browse button next to the SDK field and point it to the Android-sdk folder on your computer. This folder should be located in the C:/Program Files/Android folder. If it is not in this folder, then look for it in C:/Users/[your username]/AppData/Local/Android.</item>
                </list>
                <figure>
                    <desc>Connect the Android SDK Tools and the Java Development Kit to your Unity project.</desc>
                    <graphic url="ar-dev-3.png"/>
                </figure>
                <p>If you do not see the "AppData" folder, open your file explorer and select the "View" option in the top menu. Select the box labelled "Hidden items."</p>
                <figure>
                    <desc>Check the 'Hidden items' box in your file explorer View options.</desc>
                    <graphic url="ar-dev-4.png"/>
                </figure>
            </div>
            <div type="2">
                <head>Navigating Unity</head>
                <p>This section covers some of the basic knowledge you will need while working with the Unity Editor. If you are already familiar with the Unity Interface, feel free to skip down to "<hi rend="bold">Setting up Unity for AR Development</hi>."</p>
                <list type="ordered">
                    <item>Open Unity and create a new 3D project.</item>
                    <item>Select the "Window" option in the top menu and go to "Layouts".</item>
                    <item>Select the "Default" layout option.</item>
                    <item>Starting from the upper left and moving clockwise, you should see four panels labelled "Hierarchy," "Scene," "Inspector," and "Project."</item>
                </list>
                <figure>
                    <desc>Default layout of the Unity interface.</desc>
                    <graphic url="ar-dev-5.png"/>
                </figure>
                <div type="3">
                    <head>Hierarchy Panel</head>
                    <p>Navigate to the Hierarchy panel in the upper left. If this menu is closed, click the small black arrow in the dropdown menu to expand. The Hierarchy panel should have a Main Camera and Directional Light included by default. Items that appear in the Hierarchy panel are referred to as game objects, and any game objects listed in the Hierarchy panel are visually represented in the scene panel. Notice how the Directional Light game object appears in the scene panel as a sun and camera icon. To locate the position of a game object within your scene, select it in the Hierarchy panel, place your cursor within the scene panel, and then strike the "F" key on your keyboard to find the game object.</p>
                    <figure>
                        <desc>The game objects in the Hierarchy panel are represented visually in the scene panel.</desc>
                        <graphic url="ar-dev-6.png"/>
                    </figure>
                </div>
                <div type="3">
                    <head>Inspector Panel</head>
                    <p>In Unity, game objects are containers for different components that can be added and modified in the inspector panel. Select the Directional Light game object in the Hierarchy panel. You should now see the properties of the Directional Light in the inspector panel on the far right. The inspector panel contains all of the components attached to a game object. The Directional Light game object has two components: Transform and Light. You can add and modify components to change the appearance and functionality of your game objects. You will not need the Main Camera or Directional Light game objects for AR development. Navigate back to the Hierarchy panel and right click (or Ctrl click) on each game object and select "Delete."</p>
                    <figure>
                        <desc>Use the inspector panel to modify the components of individual game objects.</desc>
                        <graphic url="ar-dev-7.png"/>
                    </figure>
                </div>
                <div type="3">
                    <head>Project Panel</head>
                    <p>Navigate to the bottom of the Unity interface where you will find a panel labelled Project. The project panel gives you easy access to the entire file structure of your Unity project. You can access all of the media, scenes, and scripts for your project through this panel. If you use Unity to create more complex applications, you will want to organize your project with different folders to hold all of your images, scenes, sound files, etc. You should also see a Console tab located next to the Project panel. The console panel will display any errors or warnings in your project build.</p>
                </div>
            </div>
            <div type="2">
                <head>Setting up Unity for AR Development</head>
                <p>Next, you need to setup unity for AR development.</p>
                <list type="ordered">
                    <item>Navigate to the GameObject dropdown menu and select "Vuforia &gt; AR Camera." If a dialog box appears requesting that you import additional assets, select "Import."</item>
                    <item>Select "Vuforia &gt; Image" in the GameObject dropdown menu to add an Image Target to your scene.</item>
                    <item>Locate the directional widget in the top right corner of your scene panel. Click the green y-axis option of your directional widget. This will make the green arrow disappear and shift your perspective in the scene panel to a y-axis birds-eye view of your project.</item>
                </list>
                <figure>
                    <desc>Click the green y-axis option of your directional widget.</desc>
                    <graphic url="ar-dev-8.png"/>
                </figure>
                <p>Select the ImageTarget game object in the Hierarchy panel and strike the "F" key while your cursor is within the scene view window. This should bring your ImageTarget game object within the viewport of your scene panel. If you still can't see your ImageTarget in the scene view, make sure that the "2D" option is deselected in the scene view options menu.</p>
                <p>Go to the <ref target="https://developer.vuforia.com/">Vuforia developer portal</ref> to create your free Vuforia account and generate a development license key for your application.</p>
                <list type="ordered">
                    <item>Select "Register" in the upper right corner.</item>
                    <item>Once your account is setup, select "Develop" in the menu panel and then "License Manager."</item>
                    <item>Select "Get Development Key" on the License Manager page.</item>
                    <item>On the "Add a free Development License Key" page, give your application a name and agree to the terms.</item>
                    <item>To access your license key, return to the "License Manager" page in the Vuforia developer portal and click the application name you just created. Copy the alphanumeric string on the right.</item>
                    <item>Return to Unity and File &gt; Build Setting and click the "Player Settings" button in the bottom of the pop up window.</item>
                    <item>Navigate back to the Inspector panel and click the "XR Settings" option located at the bottom of the accordion menu. Select "Vuforia Augmented Reality Support." Accept the Vuforia license in Unity.</item>
                    <item>Select ARCamera in the Hierarchy pane. In the inspector panel, click the "Open Vuforia Configuration" button in the Vuforia Behavious (Script)" component. Copy and paste your license key in the App License Key text field.</item>
                    <item>Navigate to "File &gt; Save Scene as..." and give your scene a name. By default, Unity will save your scenes to the "Assets" folder of your project.</item>
                </list>
            </div>
            <div type="2">
                <head>Convert your Image Target to a Dataset</head>
                <p>For this section of the lesson, you will need a .jpg or .png image of the cover of a book. You can either take a picture of a book cover around your house or office or you can do an image search for the book cover online. In either case, make sure that you have access to a physical copy of the book.</p>
                <p>When selecting a book cover to augment, make sure that it has stark color contrasts and a variety of complex shapes. Using a visually complex image makes it easier for your device's camera to track the Image Target for your application.</p>
                <figure>
                    <desc>This cover of John Steinbeck's *Of Mice and Men* will work well as an Image Target.</desc>
                    <graphic url="ar-dev-9.png"/>
                </figure>
                <p>This cover of <emph>Of Mice and Men</emph> has sufficient visual complexity; however, it is not unique, and if it is used as an image target, then any copy of the book will work as an image target. Of course, this ubiquitous quality of the image might be desirable. For instance, digital artist Mark Skwarek augmented the British Petroleum logo to critique BP's complicity in the Gulf oil spill. Because the digital overlay is accessible wherever a BP logo can be scanned, Skwarek's project operates as a ubiquitous reminder of our dependence on fossil fuels.</p>
                <figure>
                    <desc>Photo courtesy of Mark Skwarek.</desc>
                    <graphic url="ar-dev-10.png"/>
                </figure>
                <p>If you are taking a picture of your book cover, make sure that there are no extraneous features present in the image. In the case of the <emph>Of Mice and Men</emph> image above, this would be anything beyond the edge of the cover. If your image contains such extraneous features, either take another picture or open it in a photo editor such as <ref target="http://www.gimp.org/">Gimp</ref> and crop out these features. <ref target="https://www.gimp.org/docs/">Consult the latest Gimp documentation</ref> for help on cropping and resizing images. Make sure that your image file is under 2.5 mb and that it is a .jpg or .png file.</p>
                <figure>
                    <desc>Crop out the area around the book.</desc>
                    <graphic url="ar-dev-11.png"/>
                </figure>
                <p>Next, you will need to upload your book cover to Vuforia in order to code it with tracking information.</p>
                <list type="ordered">
                    <item>Go to the <ref target="https://developer.vuforia.com/">Vuforia developer portal</ref> and click "Develop" in the top menu and then select "Target Manager."</item>
                    <item>Click the "Add Database" button on the Target Manager page. In the dialog box that appears, give your database a name and select the device option. Click "Create."</item>
                    <item>Once your database has been created, return to the Target Manager page and click your database. Select "Add Target," choose "Single Image" as the type, add the width and height of your image, and upload by clicking on the "Browse" button.</item>
                </list>
                <p>Tip: To determine the width of your image, right-click the image file and choose Properties. Select the Details tab in the dialog box that appears and scroll down to the "Image" section to find the width of the image. If you're using a Mac, Ctrl click and select "Get Info." The first number is the image's width in Dimensions.</p>
                <p>Vuforia assigns target images a feature tracking rating on a scale of 1 to 5 stars. Navigate to the Image Targets database in the Vuforia Developer Portal and select the image you just uploaded. click the Show Features link to reveal the image's trackable features.</p>
                <figure>
                    <desc>Vuforia's augmentability rating for the book cover.</desc>
                    <graphic url="ar-dev-12.png"/>
                </figure>
                <p>The yellow markers represent the areas in the image that your application will use to determine if it is looking at the proper image target. If you notice that Vuforia is tracking unstable elements in your image (e.g. shadow, person, etc.), then you will need to re-edit or choose a different image.</p>
                <p>If your image is given a good augmentability rating (anything between 3-5 stars should work), access the Target Manager page, then select your image and click "Download Database." If you were creating an AR application with multiple Image Targets, you would want to convert all of your images through Vuforia's developer portal before downloading them as a Unity package.</p>
                <figure>
                    <desc>Select the 'Download Database' button in the top right.</desc>
                    <graphic url="ar-dev-13.png"/>
                </figure>
                <p>Select Unity Editor and download the package. An Import dialog box will appear in Unity; click "Import" to finish.</p>
            </div>
            <div type="2">
                <head>Import the Image Target</head>
                <p>Select the ImageTarget GameObject in the project Hierarchy panel. Navigate to the inspector panel and select the drop-down menu of the Database parameter in the Image Target Behaviour. Select the name of the database you created earlier. The ImageTarget game object should now be associated with your book cover.</p>
                <p>Zoom into your Image Target game object by selecting it in the Hierarchy panel and striking the "F" key with your cursor hovering over the scene panel. Click the green y-axis in the directional widget of your scene panel to snap to a bird's-eye view of the Image Target.</p>
            </div>
            <div type="2">
                <head>Add an Image Overlay</head>
                <p>You will need to add an overlay to test if your AR camera is tracking the image. The overlay is the multimedia content that your application will superimpose onto your trigger image. In Unity, you can add images, videos, audio files, and animated 3D models as overlays. For this lesson, however, we will only be covering image overlays.</p>
                <p>First, find an image that you want to use as an overlay. If your application is augmenting a book, then you might download an image of the author but feel free to use a different image. In either case, drag the image into the "Assets" folder in the project panel at the bottom of the editor. Once the image has finished importing, select it and change its Texture Type to "Sprite (2D and UI)" in the inspector panel. Click "Apply."</p>
                <figure>
                    <desc>Convert overlay image to a sprite</desc>
                    <graphic url="ar-dev-14.png"/>
                </figure>
                <p>Next, drag the sprite you just imported onto your "Image Target" game object in the project Hierarchy.</p>
                <figure>
                    <desc>Attach your author image as a child of your ImageTarget game object.</desc>
                    <graphic url="ar-dev-15.gif"/>
                </figure>
                <p>The sprite is now a "child" of the Image Target game object and will only appear if the ARCamera recognizes the Image Target.</p>
                <p>The position of your image overlay (the author image) in the scene view is the same position that it will appear when scanned with a mobile device camera. For example, if you place the author image at the top of the book then it will also appear at the top of the book cover when your user scans it.</p>
                <p>Next, you will need to adjust the size and position of your author image to center it on your book cover using the translate, scale, and rotate tools located in the upper left of the Unity editor interface. Use the instructions for each of these tools below until your author image is positioned on top of your book cover. Remember to use the "F" key to locate your overlay or image target within the scene view.</p>
                <p>To move the author image,</p>
                <list type="ordered">
                    <item>Select the "translate" tool from the button-menu directly above the Hierarchy panel.</item>
                    <item>Select the author image in the Hierarchy panel. You can now move your author image in the x, y, or z axis by clicking on dragging on the red, blue, or green arrows.</item>
                    <item>Use the green y-axis arrow to position your author image slightly above the book cover. Your overlay should have a slightly higher y-axis value (only about .1 or .2) than your Image Target. You can check these values in the Transform &gt; Position component in your inspector panel.</item>
                </list>
                <figure>
                    <desc>Use the Translate tool to move game objects in your scene view.</desc>
                    <graphic url="ar-dev-16.gif"/>
                </figure>
                <p>To resize the author image, select the scale tool and adjust the width and height proportionally by clicking and dragging on the white cube in the center of the image.</p>
                <figure>
                    <desc>Use the scale tool to resize game objects in your scene view.</desc>
                    <graphic url="ar-dev-17.gif"/>
                </figure>
                <p>To rotate the author image, select the "rotate" tool and adjust the image by clicking and dragging on the red, blue, or green circle. Alternatively, you can set the "x" axis to "90" in the image's "Transform" component to the right.</p>
                <figure>
                    <desc>Use the Rotate tool to rotate game objects in your scene view.</desc>
                    <graphic url="ar-dev-18.gif"/>
                </figure>
                <p>To adjust your perspective in 3D space, hold the Alt button (Option on Mac) on your keyboard and click and drag in the scene view. Then, select the translate tool and position your author image so it is in front of the book cover.</p>
                <figure>
                    <desc>Position your author image on top of the book cover.</desc>
                    <graphic url="ar-dev-19.gif"/>
                </figure>
                <p>Because Unity is optimized for 3D environments, it is sometimes difficult to work with 2D game objects such as images. If you are new to Unity, do not be alarmed if you cannot find your images or if you feel disoriented while manipulating them in your scene view. If you want to learn more about using Unity's transform tools, I would suggest checking out <ref target="https://www.youtube.com/watch?v=2Ariq8vc5Vc">this short video tutorial by Info Gamer</ref> and reading up on <ref target="https://docs.unity3d.com/2017.2/Documentation/Manual/Transforms.html">Transforms in the Unity Manual</ref>.</p>
                <p>Try the following steps if you cannot find your author image in the scene view:</p>
                <list type="ordered">
                    <item>Select the author image in the Hierarchy panel and navigate to its "Transform" component in the inspector panel. click the small cog icon in the upper right corner of the "Transform" component and select "Reset."</item>
                    <item>Use the "F" key to search for any game object. Make sure the game object you are searching for is selected in the Hierarchy panel and that your cursor is within the bounds of the scene view.</item>
                    <item>Select the hand tool (left-most option) in the transform menu and adjust your perspective in the scene view. Hold the Alt/Option button on your keyboard to adjust your perspective in 3D space.</item>
                    <item>Use the translate, scale, and rotate tools described above to reposition your author image on top of the book cover.</item>
                </list>
            </div>
            <div type="2">
                <head>Create a Simple User Interface</head>
                <p>It is helpful to create a simple user interface (UI) that directs the user to the correct book cover they need to scan. To do this, you will first need to import a .jpg or .png file of your target image into your Assets folder. You can do this by simply clicking and dragging the image file from its current file location into the Unity Assets folder. Once the image is imported, convert it to "Sprite (2D and UI)" in the inspector panel like you did for the author image overlay.</p>
                <p>Next, navigate to the Hierarchy panel and select "Create &gt; UI &gt; Image." Select the "2D" option in your scene view menu and center the image you just added by selecting it and clicking "F" on your keyboard. Click and drag the blue corners to center the image in your Canvas frame. Then, drag your book cover into the "Source Image" parameter in the inspector panel.</p>
                <figure>
                    <desc>Select the 2D view in your scene menu and expand the Canvas image.</desc>
                    <graphic url="ar-dev-20.gif"/>
                </figure>
                <p>Next, add some instructions to your UI by</p>
                <list type="ordered">
                    <item>Selecting "Create &gt; UI &gt; Text."</item>
                    <item>In the inspector panel, write some instructions in the text field, such as "Scan this Image."</item>
                    <item>Position your text box directly below your book cover and modify the font and color accordingly.</item>
                </list>
                <figure>
                    <desc>Position the UI instructions directly below the book cover.</desc>
                    <graphic url="ar-dev-21.gif"/>
                </figure>
                <p>Before you can add functionality to the UI, you will need to combine your Canvas elements into a single game object.</p>
                <list type="ordered">
                    <item>Select "Create &gt; Create Empty." This will add an empty GameObject to your project Hierarchy.</item>
                    <item>Rename this GameObject "Finder" and make it a child of the Canvas by dragging it into the Canvas game object.</item>
                    <item>Drag the Image and Text game objects and make them children of your new "Finder" game object.</item>
                </list>
                <figure>
                    <desc>Create a Finder game object to hold your Image and Text game objects.</desc>
                    <graphic url="ar-dev-22.gif"/>
                </figure>
                <p>For this next step of the UI design, you will need to modify Vuforia's "Default Trackable Event Handler" so that your "Finder" game object disappears from the user's view once the Image Target has been found by the application.</p>
                <p>Go to the search bar within your project Hierarchy panel and search for "DefaultTrackableEventHandler" C# script. Double-click to open in Unity's Monodevelop. To create a public game object to store the "Finder" game object you just created, navigate to the section of the script labelled "#region PRIVATE_MEMBER_VARIABLES" (or "#region PROTECTED_MEMBER_VARIABLES") and add the following script within this region. Save your changes:</p>
                <!--not javascript but markdown doesn't appear to have highlighting enabled for C#-->
                <ab>
                    <code lang="language-javascript" xml:id="code_creating-mobile-augmented-reality-experiences-in-unity_0" corresp="code_creating-mobile-augmented-reality-experiences-in-unity_0.txt" rend="block"/>
                </ab>
                <p>Return to Unity. In the Hierarchy panel, select the ImageTarget. In the Inspector panel, locate the Finder field (under DefaultTrackableEventHandler). From the Hierarchy panel, drag the Finder object to the Inspector panel’s Finder object.</p>
                <p>Within your C# script, press control (or command) "F" and search for "protected virtual void OnTrackingFound()." At the end of the "OnTrackingFound" method, add the following script:</p>
                <ab>
                    <code lang="language-javascript" xml:id="code_creating-mobile-augmented-reality-experiences-in-unity_1" corresp="code_creating-mobile-augmented-reality-experiences-in-unity_1.txt" rend="block"/>
                </ab>
                <p>Scroll down to the "OnTrackingLost" method and add the following script:</p>
                <ab>
                    <code lang="language-javascript" xml:id="code_creating-mobile-augmented-reality-experiences-in-unity_2" corresp="code_creating-mobile-augmented-reality-experiences-in-unity_2.txt" rend="block"/>
                </ab>
                <p>These lines of code tell the application to disable the Finder game object if the target image is found and to enable the Finder game object if the target image is lost.</p>
            </div>
            <div type="2">
                <head>Test Your Scene</head>
                <p>If you do not have a webcam on your computer, skip to the section "Building Your Application to a Mobile Device."</p>
                <p>To test your application,</p>
                <list type="ordered">
                    <item>Save your scene and press the play icon in the menu above the scene view.</item>
                    <item>Give Unity permission to access your webcam, and return to the scene view by clicking on the Scene tab to the left of the Game tab.</item>
                    <item>Hold your book cover in front of your webcam. You should see your UI overlaid onto the camera view. Place your book cover into the camera view and the author image should appear overlaid on top of it.</item>
                </list>
                <figure>
                    <desc>Place your book cover within the webcam view while in play mode.</desc>
                    <graphic url="ar-dev-23.gif"/>
                </figure>
                <p>Vuforia 7.2 should automatically load and activate your Image Target Database. However, if you happen to be operating with an older version of Vuforia, ensure that the "load" and "activate" parameters are both selected for your database in the Image Target inspection panel.</p>
            </div>
            <div type="2">
                <head>Building Your Application to a Mobile Device</head>
                <p>Return to Unity to setup your application for an Android or iOS build:</p>
                <list type="ordered">
                    <item>Go to File &gt; Build Settings. In the Platform section of the dialog box, select Android or iOS and click Switch Platform.</item>
                    <item>Select Add Open Scenes.</item>
                    <item>click Player Settings and navigate to the inspector panel.</item>
                    <item>Change the Product Name to the name you want to use for your app (e.g. "Programming Historian Demo").</item>
                    <item>Scroll down in the inspector panel and select the Other Settings tab. Change the "Bundle Identifier" settings from com.Company.ProductName to a name that will be unique to your application, such as com.Demo.Steinbeck.</item>
                </list>
                <div type="3">
                    <head>Android</head>
                    <p>To install your own applications on your Android device,</p>
                    <list type="ordered">
                        <item>
                            <ref target="http://developer.Android.com/tools/device.html">Enable USB debugging</ref> by going to Setting &gt; About Device.</item>
                        <item>Tap the Build number seven times.</item>
                        <item>Return to the previous screen and you should now see a Developer Options tab. Click it and make sure the option for USB debugging is checked.</item>
                    </list>
                    <figure>
                        <desc>Tap the 'Build Number' seven times.</desc>
                        <graphic url="ar-dev-24.png"/>
                    </figure>
                    <figure>
                        <desc>Make sure that 'USB Debugging' is enabled.</desc>
                        <graphic url="ar-dev-25.png"/>
                    </figure>
                    <figure>
                        <desc>Change the 'Bundle Identifier' of your application in the Inspector Panel</desc>
                        <graphic url="ar-dev-26.png"/>
                    </figure>
                    <p>You are now ready to build your application to your mobile device. Connect your device to your computer with a USB cable. Depending on your operating system, your computer might need to download additional drivers in order to interact with your mobile device. Your computer should do this automatically. If the computer is not recognizing your device, follow the first step in the troubleshooting guide below.</p>
                    <p>In the Build Settings window, make sure your scene is listed and click Build and Run. Unity will create a ".apk" (Android Application Package) file for your project. By default, your .apk file will be saved to the root folder of your Unity project. This is the file type that will be uploaded to the Google Play store once your application is complete.</p>
                    <p>When the application is finished building, you should be able to view and test your application on your Android device.</p>
                    <figure>
                        <desc>Testing the application on an Android device.</desc>
                        <graphic url="ar-dev-27.png"/>
                    </figure>
                    <p>With Android, it is very easy to share and test your completed application with other Android users without uploading it to the Google Play store. To share your application, simply send the .apk file as an email attachment to anyone with an Android device. However, before other users can download and install the .apk file, they will need to allow their Android device to install .apk files from non-Google Play sources by navigating to Settings &gt; Security on their Android device and checking the box labelled "Unknown sources."</p>
                </div>
                <div type="3">
                    <head>Troubleshooting Android Builds</head>
                    <p>During the build, if you get an error from Unity saying that it cannot locate your Android device, try the following in order:</p>
                    <list type="ordered">
                        <item>Open the device manager on your computer and right click the Android phone attached as a device. Select "Update Driver Software."</item>
                        <item>(Windows only) Open the Android SDK manager and ensure that the "Google USB Driver" is installed.</item>
                        <item>Unplug your device from the computer. Open the "Developer Options" in the system setting of your Android device. Select the option to "Revoke USB Debugging Authorization." Plug your device back into your computer.</item>
                        <item>Save your scene and close Unity.</item>
                        <item>Open your file explorer and go into the "Android-sdk/platform-tools" folder. Hold shift and right-click. Select the option to "Open command window here." For Mac, open a Terminal and drag the "platform-tools" folder into the window.</item>
                        <item>Type the following commands and press "Enter" after each. As you enter each command, check your Android device and authorize your computer when prompted.</item>
                    </list>
                    <ab>
                        <code xml:id="code_creating-mobile-augmented-reality-experiences-in-unity_3" corresp="code_creating-mobile-augmented-reality-experiences-in-unity_3.txt" rend="block"/>
                    </ab>
                    <list type="ordered">
                        <item>(Mac only) If adb devices command returns an empty list, you may need to unload EasyTetherUSBEthernet from the command line. To do this, use the following command:</item>
                    </list>
                    <ab>
                        <code xml:id="code_creating-mobile-augmented-reality-experiences-in-unity_4" corresp="code_creating-mobile-augmented-reality-experiences-in-unity_4.txt" rend="block"/>
                    </ab>
                    <figure>
                        <desc>Once your device is authorized, the command prompt should display 'List of devices attached' along with an alpha-numeric string that represents your Android device.</desc>
                        <graphic url="ar-dev-28.png"/>
                    </figure>
                    <p>If you are getting errors that your "Android Build Tools are out of date," open the Android SDK manager and make sure that the Android SDK Platform-tools and "Android SDK Build-tools" options are both installed. If you get an error saying that "Unity cannot install the APK!" go to your player settings and set the install Location to "Automatic."</p>
                </div>
                <div type="3">
                    <head>iOS</head>
                    <p>Unity cannot create iOS apps. Instead, it builds Xcode projects, which can then be opened in Xcode and built out to an iOS device. iOS applications also require a camera usage description and minimum iOS version to be set for all apps. To do these,</p>
                    <list type="ordered">
                        <item>Click "Player Settings..." and expand the option labelled "Other Settings."</item>
                        <item>Add a description in the text field labelled "Camera Usage Description" (e.g. "This application requires access to your device camera.").</item>
                        <item>Next, set the "Target Minimum iOS Version" to 9.0. Scroll to XR Settings and check "Vuforia Augmented Reality."</item>
                        <item>Click "Build" and name the project "ProgrammingHistorianLessonXcodeBuild."</item>
                        <item>Open your project in Xcode. If Xcode asks if you would like to update your project to the recommended settings, select "perform changes" and wait for the project to update.</item>
                        <item>Connect an iOS device to your computer with a USB cable.  You might have to wait a few minutes while Xcode prepares your device for app development.</item>
                        <item>Link your apple account to Xcode by selecting Xcode &gt; Preferences and choosing the Accounts tab. Sign in using the same Apple ID associated with the iOS device you will be building the app to.</item>
                        <item>Switch over to the "Unity-iPhone" targets menu and click the tab labelled "General." Make sure that "Automatically manage signing" is selected and switch your Team to the Apple ID account you just added.</item>
                        <item>In "Deployment Info" select either iPhone or iPad depending on your target build device.</item>
                        <item>Select "Product &gt; Run" in the top menu and wait for your app to build to your iOS device.</item>
                    </list>
                    <p>Once the app has finished building, you will need to authorize your Apple ID as a trusted developer. Go to the settings on your iOS device and click "General &gt; Device Management" and choose the option for "Trust [Your Apple ID username]." Start the application by clicking on the application icon on your app home screen.</p>
                </div>
            </div>
            <div type="2">
                <head>Extending the Tutorial</head>
                <p>You should now have a fairly good grasp of how the Unity game engine can be used to create a simple augmented reality application. In future tutorials, we will cover more advanced topics that will provide you with the necessary technical skills to create more robust mobile AR applications with dynamic, interactive overlays.</p>
            </div>
        </body>
    </text>
</TEI>
