<TEI xmlns="http://www.tei-c.org/ns/1.0" xml:id="nettoyer-ses-donnees-avec-openrefine" type="translation">
    <teiHeader>
        <fileDesc>
            <titleStmt>
                <title>Nettoyer ses données avec OpenRefine</title>
                <author role="original_author">
                    <persName>Seth van Hooland</persName>
                    <persName>Ruben Verborgh</persName>
                    <persName>Max De Wilde</persName>
                </author>
                <editor role="reviewers">
                    <persName>Patrick Burns</persName>
                    <persName>Nora McGregor</persName>
                </editor>
                <author role="translators">Sybille Clochet</author>
                <editor role="translation-reviewers">
                    <persName>François Dominic Laramée</persName>
                    <persName>Marie Puren</persName>
                </editor>
                <editor role="editors">Adam Crymble</editor>
            </titleStmt>
            <publicationStmt>
                <distributor>Programming Historian</distributor>
                <date type="translated">04/10/2019</date>
                <idno type="doi">10.46430/phfr0004</idno>
                <date type="published">08/05/2013</date>
            </publicationStmt>
            <sourceDesc>
                <p>Born digital, in a markdown format. Original file: <ref type="original_file" target="#cleaning-data-with-openrefine"/>.</p>
                <p>There are other translations: <ref target="#limpieza-de-datos-con-OpenRefine #limpar-dados-openrefine"/>
                </p>
            </sourceDesc>
        </fileDesc>
        <profileDesc>
            <abstract>
                <p>Ce tutoriel se concentre sur la façon dont les chercheurs et chercheuses peuvent évaluer et agir sur l'exactitude des données.</p>
            </abstract>
            <textClass>
                <keywords>
                    <term xml:lang="en">data-manipulation</term>
                </keywords>
            </textClass>
        </profileDesc>
    </teiHeader>
    <text xml:lang="fr">
        <body>
            <div type="2">
                <head>Objectifs du cours</head>
                <p>
                    <emph>Ne faites pas confiance à vos données</emph> : c'est le message-clé de ce tutoriel qui se concentre sur la façon dont les chercheurs et chercheuses peuvent évaluer et agir sur l'exactitude des données. Dans ce cours, vous apprendrez les principes et la pratique du nettoyage de données, ainsi que la façon dont <ref target="http://openrefine.org">
                        <emph>OpenRefine</emph>
                    </ref> peut être utilisé pour effectuer quatre tâches essentielles qui vous aideront à nettoyer ces données :</p>
                <list type="unordered">
                    <item>supprimer les doublons ;</item>
                    <item>séparer plusieurs valeurs contenues dans un même champ ;</item>
                    <item>analyser la distribution des valeurs dans un ensemble de données ;</item>
                    <item>regrouper différentes représentations de la même réalité.</item>
                </list>
                <p>Ces étapes sont illustrées à l'aide d'une série d'exercices basés sur une collection de métadonnées du <ref target="https://powerhouse.com.au/">Powerhouse museum</ref>, démontrant comment les méthodes (semi-) automatisées peuvent vous aider à corriger les erreurs dans vos données.</p>
            </div>
            <div type="2">
                <head>Pourquoi les historiens et les historiennes devraient-ils se préoccuper de la qualité de leurs données ?</head>
                <p>Les doublons, les valeurs vides et les formats incohérents sont des phénomènes auxquels nous devrions être prêt(e)s à faire face lorsque nous utilisons des ensembles de données historiques. Ce cours vous apprendra à détecter les incohérences dans les données contenues dans une feuille de calcul ou une base de données. L'accroissement des pratiques de partage, de regroupement et de réutilisation de données, par ailleurs de plus en plus nombreuses sur le Web, obligent les historiens et les historiennes à agir face aux problèmes inévitables de qualité des données. Grâce à l'utilisation d'<emph>OpenRefine</emph>, vous pourrez facilement identifier les erreurs récurrentes telles que des cellules vides, des doublons, des incohérences orthographiques, etc. <emph>OpenRefine</emph> vous permet non seulement d'avoir un diagnostic rapide sur la qualité de vos données, mais aussi d'agir sur certaines erreurs de manière automatisée.</p>
            </div>
            <div type="2">
                <head>Description de l'outil OpenRefine</head>
                <p>Dans le passé, les historiens et les historiennes devaient compter sur des spécialistes des technologies de l'information pour avoir un diagnostic sur la qualité des données et exécuter des tâches de nettoyage. Cela nécessitait la création de programmes informatiques sur mesure lorsque vous travailliez avec des ensembles de données importants. Heureusement, l'avènement des outils de transformation interactive de données permet désormais de réaliser des opérations rapides et peu coûteuses sur de grandes quantités de données, même effectuées par des professionnel(le)s sans compétences informatiques approfondies.</p>
                <p>Les outils de transformation interactive de données ressemblent aux tableurs de bureau que nous connaissons tous, et partagent avec eux certaines fonctionnalités. Vous pouvez par exemple utiliser une application telle que <emph>Microsoft Excel</emph> pour trier vos données en fonction de filtres numériques, alphabétiques ou personnalisés, ce qui vous permet de détecter plus facilement les erreurs. La configuration de ces filtres dans une feuille de calcul peut être fastidieuse, car il s'agit d'une fonctionnalité secondaire. Sur un plan plus général, nous pourrions dire que les tableurs sont conçus pour fonctionner sur des lignes et des cellules individuelles, alors que les outils de transformation interactive de données fonctionnent sur de grandes plages de données à la fois. Ces « tableurs surpuissants » offrent une interface intégrée et conviviale à travers laquelle les utilisateurs finaux peuvent détecter et corriger les erreurs.</p>
                <p>Plusieurs outils généralistes pour la transformation interactive des données ont été développés ces dernières années, tels que <ref target="http://control.cs.berkeley.edu/abc/">
                        <emph>Potter’s Wheel ABC</emph>
                    </ref> et <ref target="http://vis.stanford.edu/papers/wrangler/">
                        <emph>Wrangler</emph>
                    </ref>. Ici, nous voulons nous concentrer spécifiquement sur <ref target="http://openrefine.org">
                        <emph>OpenRefine</emph>
                    </ref> (anciennement <emph>Freebase Gridworks</emph> et <emph>Google Refine</emph>) car, de l'avis des auteurs, c'est l'outil le plus convivial pour traiter et nettoyer efficacement de grandes quantités de données au travers d'une interface basée sur un navigateur.</p>
                <p>En plus des opérations de <ref target="https://fr.wikipedia.org/wiki/Data_profiling">profilage</ref> et de nettoyage des données, des extensions <emph>OpenRefine</emph> permettent aux utilisateurs et utilisatrices d'identifier des objets textuels dans du texte non structuré, un processus appelé <ref target="https://fr.wikipedia.org/wiki/Reconnaissance_d%27entit%C3%A9s_nomm%C3%A9es">reconnaissance d'entités nommées</ref>, et peuvent également lier leurs propres données avec des bases de connaissances existantes. Ce faisant, <emph>OpenRefine</emph> peut être un outil pratique pour lier des données avec des objets et des autorités qui ont déjà été déclarés sur le Web par des organisations telles que la <ref target="http://www.loc.gov/index.html">Bibliothèque du Congrès</ref> ou l'<ref target="https://www.oclc.org/fr/home.html">OCLC</ref>. Le nettoyage des données est une condition préalable à ces étapes ; le taux de réussite de la reconnaissance d’entités nommées et un processus de croisement productif de vos données avec les autorités externes dépendent de votre capacité à rendre vos données aussi cohérentes que possible.</p>
            </div>
            <div type="2">
                <head>Description de l'exercice : Powerhouse Museum</head>
                <p>Le <emph>Powerhouse Museum</emph> de Sydney a mis à disposition sur son <ref target="https://api.maas.museum/docs">site web</ref> un ensemble de métadonnées sur sa collection librement utilisable (<emph>NDLR: le jeu de données, téléchargé à l'origine en 2013, peut ne plus être disponible à l'adresse indiquée, il est néanmoins fourni ci-dessous</emph>). Le musée est l'un des plus grands musées de science et de technologie au monde, offrant un accès à près de 90 000 objets, des machines à vapeur à la verrerie fine en passant par la haute couture et les puces informatiques.</p>
                <p>Le <emph>Powerhouse Museum</emph> a rendu sa collection largement disponible en ligne et la plupart de ses données étaient librement accessibles. Sur le site web du musée, il était possible de télécharger un fichier texte séparé par des tabulations appelé <code rend="inline">phm-collection.tsv</code> sous la forme d'une feuille de calcul. Le fichier décompressé (58 Mo) contient des métadonnées de base (17 champs) pour 75 823 objets, publiées sous <ref target="https://creativecommons.org/licenses/by-sa/4.0/deed.fr">licence Creative Commons Attribution - Partage dans les Mêmes Conditions</ref>. Dans ce tutoriel, nous utiliserons une copie des données que nous avons archivées pour vous permettre de les télécharger (dans la suite de la leçon). Cela garantit que si le <emph>Powerhouse Museum</emph> met à jour les données, vous serez toujours en mesure de suivre le cours.</p>
                <p>Tout au long du processus de profilage et de nettoyage des données, l'étude de cas se concentrera spécifiquement sur le champ <code rend="inline">Categories</code> (Catégories), qui contient les termes du thésaurus des noms d'objets du <emph>Powerhouse Museum</emph>. Ce thésaurus reconnaît l'usage des mots et l'orthographe australiens et reflète de manière très directe les points forts de la collection. Dans celle-ci, vous trouverez davantage de représentations de l'histoire sociale et des arts décoratifs que de noms d'objets relatifs aux beaux-arts et à l'histoire naturelle.</p>
                <p>Les termes du champ <hi rend="bold">Categories</hi> comprennent ce que nous appelons un <ref target="https://fr.wikipedia.org/wiki/Vocabulaire_contr%C3%B4l%C3%A9">vocabulaire contrôlé</ref>. Un vocabulaire contrôlé consiste en des mots-clés décrivant le contenu d'une collection en utilisant un nombre limité de termes, et constitue souvent un point d'entrée crucial dans les ensembles de données utilisés par les historiens et les historiennes dans les bibliothèques, les archives et les musées. C'est pourquoi nous accorderons une attention particulière à ce champ. Une fois les données nettoyées, il devrait être possible de réutiliser les termes du vocabulaire contrôlé pour trouver des informations supplémentaires sur les termes utilisés ailleurs en ligne, ce qui s'appelle « créer des <ref target="https://fr.wikipedia.org/wiki/Web_des_donn%C3%A9es">données liées</ref> ».</p>
                <div type="3">
                    <head>Pour commencer : installer OpenRefine et importer des données</head>
                    <p>
                        <ref target="https://openrefine.org/download">Téléchargez OpenRefine</ref> et suivez les instructions d'installation. <emph>OpenRefine</emph> fonctionne sur toutes les plateformes : Windows, Mac et Linux. <emph>OpenRefine</emph> s'ouvrira dans votre navigateur, mais il est important de réaliser que l'application s’exécute localement et que vos données ne seront pas stockées en ligne. Les fichiers de données sont disponibles sur notre <ref target="http://data.freeyourmetadata.org/powerhouse-museum/">site FreeYourMetadata</ref>, lequel sera utilisé tout au long de ce tutoriel. Veuillez télécharger le fichier <emph>phm-collection.tsv</emph> avant de continuer (également archivé sur le site web du <emph>Programming Historian</emph> : comme <ref target="/assets/phm-collection.tsv">phm-collection</ref>).</p>
                    <p>Sur la page de démarrage d'<emph>OpenRefine</emph>, créez un nouveau projet en utilisant le fichier de données téléchargé et cliquez sur <hi rend="bold">Suivant</hi>. Par défaut, la première ligne sera correctement analysée comme étant l’en-tête des colonnes, mais vous devez décocher la case <hi rend="bold">Utiliser le caractère " pour fermer les cellules contenant les séparateurs de colonnes</hi>, car les citations dans le fichier n'ont aucune signification pour <emph>OpenRefine</emph>. En outre, cochez la case <hi rend="bold">Analyser le texte des cellules comme nombres</hi> pour permettre à <emph>OpenRefine</emph> de détecter automatiquement les nombres. Maintenant, cliquez sur <hi rend="bold">Créer un projet</hi>. Si tout se passe bien, vous verrez 75 814 lignes. Vous pouvez également télécharger directement le <ref target="http://data.freeyourmetadata.org/powerhouse-museum/phm-collection.google-refine.tar.gz">projet OpenRefine initial</ref>.</p>
                    <p>L'ensemble de données du <emph>Powerhouse Museum</emph> comprend des métadonnées détaillées sur tous les objets de la collection, y compris le titre, la description, plusieurs catégories auxquelles l'objet appartient, des informations sur la provenance et un lien pérenne vers l'objet sur le site Web du musée. Pour avoir une idée de l'objet correspondant aux métadonnées, cliquez simplement sur le lien et le site Web s'ouvrira.</p>
                    <figure>
                        <desc>Figure 1: Capture d'écran d'un objet échantillon en provenance du site web du Powerhouse Museum</desc>
                        <graphic url="en-or-cleaning-data-with-openrefine-01.png"/>
                    </figure>
                </div>
                <div type="3">
                    <head>Apprendre à connaître ses données</head>
                    <p>La première chose à faire est de faire le tour de vos données et d'apprendre à les connaître. Vous pouvez inspecter les différentes valeurs de données en les affichant dans des <code rend="inline">facettes</code>. Vous pouvez considérer une <ref target="https://fr.wikipedia.org/wiki/Recherche_%C3%A0_facettes">facette</ref> comme une lentille à travers laquelle vous visualisez un sous-ensemble spécifique de données, en fonction d'un critère de votre choix. Cliquez sur le triangle situé devant le nom de la colonne, sélectionnez <hi rend="bold">Facette</hi> et créez-en une. Par exemple, essayez une facette textuelle ou une facette numérique, selon la nature des valeurs contenues dans les champs (les valeurs numériques sont en vert). Sachez, cependant, que les facettes textuelles sont mieux utilisées sur des champs avec des valeurs récurrentes (<hi rend="bold">Categories</hi> par exemple) ; si vous rencontrez une erreur « trop nombreux à afficher », vous pouvez choisir d'augmenter la limite du nombre de choix au-dessus des 2 000 par défaut, mais une limite trop élevée peut ralentir l'application (5 000 est généralement un choix sûr). Les facettes numériques n'ont pas cette restriction. Pour plus d'options, sélectionnez <hi rend="bold">Facettes personnalisées</hi> : la facette <hi rend="bold">par valeur vide</hi>, par exemple, est pratique pour savoir combien de valeurs ont été remplies pour chaque champ. Nous les explorerons plus en détail dans les exercices suivants.</p>
                </div>
                <div type="3">
                    <head>Supprimer les lignes vides</head>
                    <p>Une chose que vous remarquez lors de la création d'une facette numérique pour la colonne <hi rend="bold">Record ID</hi>, est que trois lignes sont vides. Vous pouvez les trouver en désélectionnant la case <hi rend="bold">Numérique</hi>, en ne laissant que les valeurs non numériques. En fait, ces valeurs ne sont pas vraiment vides mais contiennent un seul caractère d'espace, ce qui peut être constaté en déplaçant votre curseur à l'endroit où la valeur aurait dû être, et en cliquant sur le bouton <hi rend="bold">Éditer</hi> qui apparaît. Pour supprimer ces lignes, cliquez sur le triangle situé devant la première colonne appelée <hi rend="bold">Toutes</hi>, sélectionnez <hi rend="bold">Éditer les lignes</hi>, puis <hi rend="bold">Supprimer toutes les lignes correspondantes</hi>. Fermez la facette numérique pour voir les 75 811 lignes restantes.</p>
                </div>
                <div type="3">
                    <head>Supprimer les doublons</head>
                    <p>Une deuxième étape consiste à détecter et supprimer les doublons. Ceux-ci peuvent être repérés en les triant par une valeur unique, telle que l'ID d'enregistrement (Record ID). Dans ce cas, nous supposons que l'ID d'enregistrement est unique pour chaque entrée. L'opération peut être effectuée en cliquant sur le triangle à gauche de <hi rend="bold">Record ID</hi>, puis en choisissant <hi rend="bold">Trier...</hi> et en sélectionnant la puce <hi rend="bold">Nombres</hi>. Dans <emph>OpenRefine</emph>, le tri n'est qu'une aide visuelle, à moins que vous ne rendiez le réordonnancement permanent. Pour ce faire, cliquez sur le menu <hi rend="bold">Sort</hi> (attention, cet élément de l'interface, qui signifie "trier", n'est pas traduit de l'anglais) qui vient d'apparaître en haut et choisissez <hi rend="bold">Retrier les lignes de façon permanente</hi>. Si vous oubliez de le faire, vous obtiendrez des résultats imprévisibles plus tard dans ce tutoriel.</p>
                    <p>Les lignes identiques sont maintenant adjacentes les unes aux autres. Ensuite, effacez l'ID d'enregistrement des lignes ayant le même ID d'enregistrement que la ligne située au-dessus d'elles, en les marquant en double. Pour ce faire, cliquez sur le triangle <hi rend="bold">Record ID</hi>, choisissez <hi rend="bold">Éditer les cellules</hi>&gt; <hi rend="bold">Vider</hi>. Le statut vous indique que 84 colonnes ont été affectées (si vous avez oublié de réordonner les rangées de façon permanente, vous n'en obtiendrez que 19, si c'est le cas, annulez l'opération dans l'onglet <hi rend="bold">Annuler / Rétablir</hi> et revenez au paragraphe précédent ; assurez-vous que les lignes sont réorganisées et non simplement triées). Éliminez ces lignes en créant une facette sur les <hi rend="bold">cellules vides</hi> dans la colonne <hi rend="bold">Record ID</hi> (<hi rend="bold">Facette</hi>&gt; <hi rend="bold">Facettes personnalisées</hi>&gt; <hi rend="bold">Facette par valeur vide (valeurs nulles ou chaîne vide)</hi>), puis sélectionnez les 84 lignes vides en cliquant sur <hi rend="bold">true</hi>, et supprimez-les en utilisant le triangle <hi rend="bold">Toutes</hi> (<hi rend="bold">Éditer les lignes</hi>&gt; <hi rend="bold">Supprimer toutes les lignes correspondantes</hi>). À la fermeture de la facette, vous voyez 75 727 lignes uniques.</p>
                    <p>Une vigilance particulière est nécessaire lors de l'élimination des doublons. Dans l'étape mentionnée ci-dessus, nous supposons que le jeu de données comporte un champ avec des valeurs uniques, indiquant que la ligne entière représente un doublon. Ce n'est pas nécessairement le cas, et il faut être très prudent pour vérifier manuellement si la ligne entière représente un doublon ou non.</p>
                </div>
                <div type="3">
                    <head>Fractionner les données</head>
                    <p>| Une fois les doublons supprimés, nous pouvons regarder de plus près le champ <hi rend="bold">Categories</hi>. En moyenne, chaque objet a reçu 2,25 catégories. Ces catégories sont contenues dans le même champ, séparées par le caractère <hi rend="bold">pipe</hi>
                        <code rend="inline">|</code>. Le dossier 9, par exemple, en contient trois : <hi rend="bold">Mineral Samples | Specimens | Mineral Samples-Geological</hi>. Afin d'analyser en détail l'utilisation des mots-clés, les valeurs du champ <hi rend="bold">Categories</hi> doivent être fractionnées en cellules individuelles sur la base du caractère <hi rend="bold">pipe</hi>, en développant les 75 727 entrées en 170 167 lignes. Choisissez <hi rend="bold">Éditer les cellules</hi>, <hi rend="bold">Diviser les cellules multivaluées</hi>, et en entrant <code rend="inline">|</code> comme séparateur de valeurs. <emph>OpenRefine</emph> vous informe que vous avez maintenant 170 167 lignes. |</p>
                    <p>Il est important de bien comprendre le concept des lignes / entrées. Rendez la colonne <hi rend="bold">Record ID</hi> visible pour voir ce qui se passe ( pour cela, il suffit de cliquer sur le triangle puis sur <hi rend="bold">Aperçu</hi> et ensuite sur <hi rend="bold">Masquer les autres colonnes</hi>). Vous pouvez basculer entre les vues <hi rend="bold">lignes</hi> et <hi rend="bold">entrées</hi> en cliquant sur les liens ainsi étiquetés juste au-dessus des en-têtes de colonnes. Dans la vue des lignes, chaque ligne représente deux ID d'enregistrement (Record ID) et une seule catégorie, ce qui permet de les manipuler individuellement. La vue des entrées a une entrée pour chaque ID d'enregistrement (Record ID), qui peut avoir différentes catégories sur des lignes différentes (regroupées en gris ou en blanc), mais chaque enregistrement est manipulé dans son ensemble. Concrètement, il y a maintenant 170 167 affectations de catégories (lignes) réparties sur 75 736 éléments de collection (entrées). Vous avez peut-être remarqué que nous avons 9 entrées de plus que les 75 727 d’origine, mais ne vous inquiétez pas pour le moment, nous reviendrons à cette petite différence plus tard.</p>
                </div>
                <div type="3">
                    <head>Appliquer une facette et regrouper des valeurs proches</head>
                    <p>Une fois que le contenu d'un champ a été correctement fractionné, les filtres, les facettes et les regroupements de valeurs proches peuvent être appliqués pour donner un aperçu rapide et simple des problèmes de métadonnées classiques. En appliquant la facette personnalisée <hi rend="bold">Facette par valeur vide</hi>, on peut immédiatement identifier les 461 entrées qui n'ont pas de catégorie, et qui représentent 0,6% de la collection. L'application d'une facette textuelle au champ <hi rend="bold">Categories</hi> permet d'avoir un aperçu des 4 934 catégories différentes utilisées dans la collection (la limite par défaut étant de 2 000, vous pouvez cliquer sur <hi rend="bold">Définir la limite du nombre de choix</hi> pour la porter à 5 000). Les titres peuvent être triés par ordre alphabétique ou par fréquence (<hi rend="bold">compte</hi>), donnant une liste des termes les plus utilisés pour indexer la collection. Les trois principales rubriques sont <hi rend="bold">Numismatics</hi> (Numismatique) (8 041), <hi rend="bold">Ceramics</hi> (Céramique) (7 390) et <hi rend="bold">Clothing and dress</hi> (Vêtements et habillement) (7 279).</p>
                    <p>Après l'application d'une facette, <emph>OpenRefine</emph> propose de regrouper les choix de facettes en fonction de diverses méthodes de similarité. Comme l'illustre la figure 2, le regroupement des valeurs proches vous permet de résoudre des problèmes concernant les incohérences d'occurrences, l'utilisation incohérente de la forme singulière ou plurielle et les fautes d'orthographe simples. <emph>OpenRefine</emph> présente les valeurs proches et propose une fusion dans la valeur la plus utilisée. Sélectionnez les valeurs que vous souhaitez regrouper en sélectionnant leurs cases individuellement ou en cliquant sur <hi rend="bold">Sélectionner tout</hi> en bas, puis choisissez <hi rend="bold">Fusionner la sélection et regrouper</hi>.</p>
                    <figure>
                        <desc>Figure 2 : Vue de valeurs regroupées</desc>
                        <graphic url="vueRegroupementValeurs.png"/>
                    </figure>
                    <p>La méthode de regroupement par défaut est assez basique, elle ne trouve donc pas encore tous les regroupements possibles. Expérimentez différentes méthodes pour voir quels résultats elles donnent. Soyez prudent cependant : certaines méthodes sont trop poussées, vous pourriez donc finir par regrouper des valeurs qui ne sont pas équivalentes. Maintenant que les valeurs ont été regroupées individuellement, nous pouvons les regrouper dans une seule cellule. Cliquez sur le triangle <hi rend="bold">Categories</hi> et choisissez <hi rend="bold">Éditer les cellules</hi>&gt; <hi rend="bold">Joindre les cellules multivaluées</hi>&gt; <hi rend="bold">OK</hi>. Choisissez le caractère <hi rend="bold">pipe</hi> (<code rend="inline">|</code>) comme séparateur. Les lignes ressemblent maintenant à ce que nous avions avant, avec un champ <hi rend="bold">Categories</hi> à plusieurs valeurs.</p>
                </div>
                <div type="3">
                    <head>Appliquer des transformations ad hoc à l'aide d'expressions GREL</head>
                    <p>Vous vous souvenez peut-être qu'il y a eu une augmentation du nombre d'entrées après le processus de fractionnement : neuf entrées sont soudainement apparues. Afin de trouver la cause de cette disparité, nous devons remonter dans le temps, avant l'opération de fractionnement des catégories en lignes séparées. Pour ce faire, activez l'onglet <hi rend="bold">Défaire / Refaire</hi> à droite de l'onglet <hi rend="bold">Facette / Filtre</hi>, et vous obtiendrez un historique de toutes les actions que vous avez effectuées depuis la création du projet. Sélectionnez l'étape juste avant <hi rend="bold">Split multi-valued cells in column Categories</hi> (Fractionner les cellules à valeurs multiples dans la colonne Categories). Si vous avez suivi notre exemple, cela devrait être <hi rend="bold">Remove 84 rows</hi> (Supprimer 84 lignes). Puis revenez à l'onglet <hi rend="bold">Facette / Filtre</hi>.</p>
                    <p>| Le problème est survenu lors de l'opération de séparation sur le caractère <hi rend="bold">pipe</hi>, il y a donc de fortes chances que tout ce qui s'est mal passé soit lié à ce caractère. Appliquons un filtre dans la colonne <hi rend="bold">Categories</hi> en sélectionnant <hi rend="bold">Filtrer le texte</hi> dans le menu. Entrez tout d'abord un seul <code rend="inline">|</code> dans le champ de gauche : <emph>OpenRefine</emph> vous informe qu'il y a 71 064 entrées correspondantes (c'est-à-dire des entrées contenant un <hi rend="bold">pipe</hi>) sur un total de 75 727. Les cellules qui ne contiennent pas de <hi rend="bold">pipe</hi> peuvent être des cellules vides, mais aussi des cellules contenant une seule catégorie sans séparateur, comme l'enregistrement 29 qui n'a que des "Scientific instruments" (« instruments scientifiques»). |
Maintenant, entrez un second <code rend="inline">|</code> après le premier de sorte à obtenir <code rend="inline"> || </code> (double <hi rend="bold">pipe</hi>) : vous pouvez voir que 9 entrées correspondent à ce modèle. Ce sont probablement les 9 entrées responsables de notre discordance : lorsque <emph>OpenRefine</emph> les sépare, le double <hi rend="bold">pipe</hi> est interprété comme une rupture entre deux entrées au lieu d'un double séparateur sans signification. Maintenant, comment pouvons-nous corriger ces valeurs ? Allez dans le menu du champ <hi rend="bold">Categories</hi> et choisissez <hi rend="bold">Éditer les cellules</hi>&gt; <hi rend="bold">Transformer...</hi>. Bienvenue dans l'interface de conversion de texte personnalisée, une fonctionnalité puissante d'<emph>OpenRefine</emph> utilisant le langage GREL (spécifique d'<emph>OpenRefine</emph>).</p>
                    <p>Le mot « valeur » dans le champ texte représente la valeur actuelle de chaque cellule, que vous pouvez voir ci-dessous. Nous pouvons modifier cette valeur en lui appliquant des fonctions (voir la <ref target="https://github.com/OpenRefine/OpenRefine/wiki/GREL-Functions">documentation GREL</ref> pour une liste complète). Dans ce cas, nous voulons remplacer les doubles <hi rend="bold">pipes</hi> par un seul <hi rend="bold">pipe</hi>. Cela peut être réalisé en entrant l'expression GREL suivante (assurez-vous de ne pas oublier les guillemets) :</p>
                    <p>| <code rend="inline">value.replace('||', '|')</code> |</p>
                    <p>Sous le champ texte <hi rend="bold">Expression</hi>, vous obtenez un aperçu des valeurs modifiées, avec les doubles <hi rend="bold">pipes</hi> supprimés. Cliquez sur <hi rend="bold">OK</hi> et réessayez de fractionner les catégories avec <hi rend="bold">Modifier les cellules</hi>&gt; <hi rend="bold">Diviser les cellules multivaluées</hi> : le nombre d'entrées restera à 75 727 (cliquez sur le lien <hi rend="bold">entrées</hi> pour vérifier une nouvelle fois).</p>
                    <p>Un autre problème qui peut être résolu avec l'aide de GREL est celui des entrées pour lesquelles la même catégorie est listée deux fois. Prenez par exemple le cas 41, dont les catégories sont <hi rend="bold">Models | Botanical specimens | Botanical Specimens | Didactic Displays | Models</hi>. La catégorie <hi rend="bold">Models</hi> apparaît deux fois sans raison valable, nous voulons donc supprimer ce doublon. Cliquez sur le triangle <hi rend="bold">Categories</hi> et choisissez <hi rend="bold">Éditer les cellules</hi>&gt; <hi rend="bold">Joindre les cellules multivaluées</hi>&gt; <hi rend="bold">OK</hi>. Choisissez le caractère <hi rend="bold">pipe</hi> comme séparateur. Maintenant, les catégories sont listées comme avant. Sélectionnez ensuite <hi rend="bold">Éditer les cellules</hi>&gt; <hi rend="bold">Transformer</hi>, également dans la colonne des catégories. En utilisant GREL, nous pouvons diviser successivement les catégories sur le caractère <hi rend="bold">pipe</hi>, rechercher des catégories uniques et les joindre à nouveau. Pour ce faire, tapez simplement l'expression suivante :</p>
                    <p>| <code rend="inline">value.split('|').uniques().join('|')</code> |</p>
                    <p>Vous remarquerez que 33 008 cellules sont concernées, soit plus de la moitié de la collection.</p>
                </div>
                <div type="3">
                    <head>Exporter vos données nettoyées</head>
                    <p>Depuis que vous avez chargé vos données dans <emph>OpenRefine</emph>, toutes les opérations de nettoyage ont été effectuées dans la mémoire du logiciel, laissant votre jeu de données d'origine intact. Si vous voulez enregistrer les données que vous avez nettoyées, vous devez les exporter en cliquant sur le menu <hi rend="bold">Exporter</hi> en haut à droite de l'écran. <emph>OpenRefine</emph> prend en charge une grande variété de formats, tels que <ref target="https://fr.wikipedia.org/wiki/Comma-separated_values">CSV</ref>, HTML ou Excel : sélectionnez ce qui vous convient le mieux ou ajoutez votre propre modèle d'exportation en cliquant sur <hi rend="bold">Templating</hi>. Vous pouvez également exporter votre projet au format <emph>OpenRefine</emph> interne afin de le partager avec d'autres utilisateurs.</p>
                </div>
                <div type="3">
                    <head>Pour aller plus loin avec vos données nettoyées</head>
                    <p>Une fois vos données nettoyées, vous pouvez passer à l'étape suivante et explorer d'autres fonctionnalités intéressantes d'<emph>OpenRefine</emph>. La communauté d'utilisateurs d'<emph>OpenRefine</emph> a développé deux extensions particulièrement utiles qui vous permettent de lier vos données à des données déjà publiées sur le Web. L'<ref target="https://github.com/AtesComp/rdf-transform#rdf-transform">extension RDF Transform</ref> transforme les mots-clés en texte brut en URL. L'<ref target="https://github.com/stkenny/Refine-NER-Extension">extension NER</ref> vous permet d'appliquer la reconnaissance des entités nommées, qui identifie les mots-clés dans un texte et leur donne une URL.</p>
                </div>
            </div>
            <div type="2">
                <head>Conclusion</head>
                <p>Si vous devez vous souvenir d'une seule chose de ce cours, ce doit être celle-ci : <emph>toutes les données sont sales, mais vous pouvez y faire quelque chose</emph>. Comme nous l'avons montré ici, il y a déjà beaucoup de choses que vous pouvez faire par vous-mêmes pour améliorer la qualité de vos données.
Vous avez ainsi appris comment avoir un rapide aperçu du nombre de valeurs vides que contient votre jeu de données et à quelle fréquence une valeur particulière (par exemple un mot-clé) est utilisée dans une collection. Ces cours vous ont également montré comment résoudre des problèmes récurrents tels que les doublons et les incohérences orthographiques de manière automatisée à l'aide d'<emph>OpenRefine</emph>.</p>
            </div>
        </body>
    </text>
</TEI>
