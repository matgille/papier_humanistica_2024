<TEI xmlns="http://www.tei-c.org/ns/1.0" xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="extracting-illustrated-pages" type="original">
    <teiHeader>
        <fileDesc>
            <titleStmt>
                <title>Extracting Illustrated Pages from Digital Libraries with Python</title>
                <author role="original_author">Stephen Krewson</author>
                <editor role="reviewers">
                    <persName>Catherine DeRose</persName>
                    <persName>Taylor Arnold</persName>
                </editor>
                <editor role="editors">Anandi Silva Knuppel</editor>
            </titleStmt>
            <publicationStmt>
                <distributor>Programming Historian</distributor>
                <idno type="doi">10.46430/phen0084</idno>
                <date type="published">01/14/2019</date>
            </publicationStmt>
            <sourceDesc>
                <p>Born digital, in a markdown format. This lesson is original. Available translations are the following:<ref type="translations" target="#extrair-paginas-ilustradas-com-python"/>
                </p>
            </sourceDesc>
        </fileDesc>
        <profileDesc>
            <abstract>
                <p>Machine learning and API extensions by HathiTrust and Internet Archive are making it easier to extract page regions of visual interest from digitized volumes. This lesson shows how to efficiently extract those regions and, in doing so, prompt new, visual research questions.</p>
            </abstract>
            <textClass>
                <keywords>
                    <term xml:lang="en">api</term>
                </keywords>
            </textClass>
        </profileDesc>
    </teiHeader>
    <text xml:lang="en">
        <body><div type="2" n="1"><head><s xml:id="s_hHYqzE" corresp="{'extrair-paginas-ilustradas-com-python': ['s_DAovX6']}"><w>Overview</w></s></head><p><s xml:id="s_DrAqz6" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Wszefg']}"><w>What</w><w>if</w><w>you</w><w>only</w><w>wanted</w><w>to</w><w>look</w><w>at</w><w>the</w><w>pictures</w><w>in</w><w>a</w><w>book</w><pc>?</pc></s><s xml:id="s_b9vUcK" corresp="{'extrair-paginas-ilustradas-com-python': ['s_tF59KY']}"><w>This</w><w>is</w><w>a</w><w>thought</w><w>that</w><w>has</w><w>occurred</w><w>to</w><w>young</w><w>children</w><w>and</w><w>adult</w><w>researchers</w><w>alike</w><pc>.</pc></s><s xml:id="s_blcXrA" corresp="{'extrair-paginas-ilustradas-com-python': ['s_UGnLGv']}"><w>If</w><w>you</w><w>knew</w><w>that</w><w>the</w><w>book</w><w>was</w><w>available</w><w>through</w><w>a</w><w>digital</w><w>library</w><w>,</w><w>it</w><w>would</w><w>be</w><w>nice</w><w>to</w><w>download</w><w>only</w><w>those</w><w>pages</w><w>with</w><w>pictures</w><w>and</w><w>ignore</w><w>the</w><w>rest</w><pc>.</pc></s></p><p><s xml:id="s_rFRZoZ" corresp="{'extrair-paginas-ilustradas-com-python': ['s_M6kwkP']}"><w>Here</w><w>are</w><w>the</w><w>page</w><w>thumbnails</w><w>for</w><w>a</w><w>HathiTrust</w><w>volume</w><w>with</w><w>unique</w><w>identifier</w><code rend="inline"><w>osu.32435078698222</w></code><pc>.</pc></s><s xml:id="s_wLHOvh" corresp="{'extrair-paginas-ilustradas-com-python': ['s_CvGBr2']}"><w>After</w><w>the</w><w>process</w><w>described</w><w>in</w><w>this</w><w>lesson</w><w>,</w><w>only</w><w>those</w><w>pages</w><w>with</w><w>pictures</w><w>(</w><w>31</w><w>in</w><w>total</w><w>)</w><w>have</w><w>been</w><w>downloaded</w><w>as</w><w>JPEGs</w><w>to</w><w>a</w><w>folder</w><pc>.</pc></s></p><figure><desc><s xml:id="s_NfblmI" corresp="{'extrair-paginas-ilustradas-com-python': ['s_sY7B4E']}"><w>View</w><w>of</w><w>volume</w><w>for</w><w>which</w><w>only</w><w>pages</w><w>with</w><w>pictures</w><w>have</w><w>been</w><w>downloaded</w><pc>.</pc></s></desc><graphic url="file-explorer-example.png"/></figure><p><s xml:id="s_CUAwbC" corresp="{'extrair-paginas-ilustradas-com-python': ['s_cE378i', 's_851SU5']}"><w>To</w><w>see</w><w>how</w><w>many</w><emph><w>unillustrated</w></emph><w>pages</w><w>have</w><w>been</w><w>filtered</w><w>out</w><w>,</w><w>compare</w><w>against</w><w>the</w><ref target="https://babel.hathitrust.org/cgi/pt?id=osu.32435078698222%3Bview=thumb%3Bseq=1"><w>full</w><w>set</w><w>of</w><w>thumbnails</w></ref><w>for</w><w>all</w><w>148</w><w>pages</w><w>in</w><w>this</w><w>revised</w><w>1845</w><w>edition</w><w>of</w><w>Samuel</w><w>Griswold</w><w>Goodrich</w><w>'s</w><w>bestselling</w><w>children</w><w>'s</w><w>book</w><emph><w>Tales</w><w>of</w><w>Peter</w><w>Parley</w><w>about</w><w>America</w></emph><w>(</w><w>1827</w><w>)</w><pc>.</pc></s></p><figure><desc><s xml:id="s_PTvvZx" corresp="{'extrair-paginas-ilustradas-com-python': ['s_QoTUS6']}"><w>View</w><w>of</w><w>HathiTrust</w><w>thumbnails</w><w>for</w><w>all</w><w>pages</w><pc>.</pc></s></desc><graphic url="parley-full-thumbnails.png"/></figure><p><s xml:id="s_m1mLjC" corresp="{'extrair-paginas-ilustradas-com-python': ['s_7Y2WbO', 's_myvHwC']}"><w>This</w><w>lesson</w><w>shows</w><w>how</w><w>complete</w><w>these</w><w>filtering</w><w>and</w><w>downloading</w><w>steps</w><w>for</w><w>public-domain</w><w>text</w><w>volumes</w><w>held</w><w>by</w><w>HathiTrust</w><w>(</w><w>HT</w><w>)</w><w>and</w><w>Internet</w><w>Archive</w><w>(</w><w>IA</w><w>)</w><w>,</w><w>two</w><w>of</w><w>the</w><w>largest</w><w>digital</w><w>libraries</w><w>in</w><w>the</w><w>world</w><pc>.</pc></s><s xml:id="s_THzxmt" corresp="{'extrair-paginas-ilustradas-com-python': ['s_WvuijR']}"><w>It</w><w>will</w><w>be</w><w>of</w><w>interest</w><w>to</w><w>anyone</w><w>who</w><w>wants</w><w>to</w><w>create</w><w>image</w><w>corpora</w><w>in</w><w>order</w><w>to</w><w>learn</w><w>about</w><w>the</w><w>history</w><w>of</w><w>illustration</w><w>and</w><w>the</w><w>layout</w><w>(</w><emph><w>mise</w><w>en</w><w>page</w></emph><w>)</w><w>of</w><w>books</w><pc>.</pc></s><s xml:id="s_QNX2sS" corresp="{'extrair-paginas-ilustradas-com-python': ['s_SA0vun']}"><w>Visual</w><w>approaches</w><w>to</w><w>digital</w><w>bibliography</w><w>are</w><w>becoming</w><w>popular</w><w>,</w><w>following</w><w>the</w><w>pioneering</w><w>efforts</w><w>of</w><ref target="https://ebba.english.ucsb.edu/"><w>EBBA</w></ref><w>and</w><ref target="http://projectaida.org/"><w>AIDA</w></ref><pc>.</pc></s><s xml:id="s_WuwoTI" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Sb0e9y']}"><w>Recently</w><w>completed</w><w>or</w><w>funded</w><w>projects</w><w>explore</w><w>ways</w><w>to</w><ref target="https://web.archive.org/web/20190526050917/http://culturalanalytics.org/2018/12/detecting-footnotes-in-32-million-pages-of-ecco/"><w>identify</w><w>footnotes</w></ref><w>and</w><ref target="http://www.ccs.neu.edu/home/dasmith/ichneumon-proposal.pdf"><w>track</w><w>marginalia</w></ref><w>,</w><w>to</w><w>give</w><w>just</w><w>two</w><ref target="https://www.neh.gov/divisions/odh/grant-news/announcing-new-2017-odh-grant-awards"><w>examples</w></ref><pc>.</pc></s></p><p><s xml:id="s_eUws5c" corresp="{'extrair-paginas-ilustradas-com-python': ['s_EiVEVL']}"><w>My</w><w>own</w><w>research</w><w>tries</w><w>to</w><w>answer</w><w>empirical</w><w>questions</w><w>about</w><w>changes</w><w>in</w><w>the</w><w>frequency</w><w>and</w><w>mode</w><w>of</w><w>illustration</w><w>in</w><w>nineteenth-century</w><w>medical</w><w>and</w><w>educational</w><w>texts</w><pc>.</pc></s><s xml:id="s_VrPDYm" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Sxok7r']}"><w>This</w><w>involves</w><w>aggregating</w><w>counts</w><w>of</w><w>pictures</w><w>per</w><w>book</w><w>and</w><w>trying</w><w>to</w><w>estimate</w><w>what</w><w>printing</w><w>process</w><w>was</w><w>used</w><w>to</w><w>make</w><w>those</w><w>pictures</w><pc>.</pc></s><s xml:id="s_rVPrZa" corresp="{'extrair-paginas-ilustradas-com-python': ['s_EhFxu5']}"><w>A</w><w>more</w><w>targeted</w><w>use</w><w>case</w><w>for</w><w>extracting</w><w>picture</w><w>pages</w><w>might</w><w>be</w><w>the</w><w>collation</w><w>of</w><w>illustrations</w><w>across</w><ref target="https://www.cambridge.org/core/books/cambridge-companion-to-robinson-crusoe/iconic-crusoe-illustrations-and-images-of-robinson-crusoe/B83352C33FB1A9929A856FFA8E2D0CD0/core-reader"><w>different</w><w>editions</w></ref><w>of</w><w>the</w><w>same</w><w>book</w><pc>.</pc></s><s xml:id="s_R1ufgP" corresp="{'extrair-paginas-ilustradas-com-python': ['s_aXQl58']}"><w>Future</w><w>work</w><w>might</w><w>profitably</w><w>investigate</w><w>the</w><w>visual</w><w>characteristics</w><w>and</w><emph><w>meaning</w></emph><w>of</w><w>the</w><w>extracted</w><w>pictures</w><w>:</w><w>their</w><w>color</w><w>,</w><w>size</w><w>,</w><w>theme</w><w>,</w><w>genre</w><w>,</w><w>number</w><w>of</w><w>figures</w><w>,</w><w>and</w><w>so</w><w>on</w><pc>.</pc></s></p><p><s xml:id="s_Tk7okU" corresp="{'extrair-paginas-ilustradas-com-python': ['s_XE3n1U']}"><w>How</w><w>to</w><w>get</w><emph><w>localized</w></emph><w>information</w><w>about</w><w>visual</w><w>regions</w><w>of</w><w>interest</w><w>is</w><w>beyond</w><w>the</w><w>scope</w><w>of</w><w>this</w><w>lesson</w><w>since</w><w>the</w><w>process</w><w>involves</w><w>quite</w><w>a</w><w>bit</w><w>of</w><w>machine</w><w>learning</w><pc>.</pc></s><s xml:id="s_kzfosF" corresp="{'extrair-paginas-ilustradas-com-python': ['s_sYm3Ow']}"><w>However</w><w>,</w><w>the</w><w>yes/no</w><w>classification</w><w>of</w><w>pages</w><w>with</w><w>(</w><w>or</w><w>without</w><w>)</w><w>pictures</w><w>is</w><w>a</w><w>practical</w><w>first</w><w>step</w><w>to</w><w>shrink</w><w>the</w><w>huge</w><w>space</w><w>of</w><emph><w>all</w></emph><w>pages</w><w>for</w><w>each</w><w>book</w><w>in</w><w>a</w><w>target</w><w>collection</w><w>and</w><w>,</w><w>thereby</w><w>making</w><w>illustration</w><w>localization</w><w>feasible</w><pc>.</pc></s><s xml:id="s_Slp116" corresp="{'extrair-paginas-ilustradas-com-python': ['s_pS0dAJ']}"><w>To</w><w>give</w><w>a</w><w>reference</w><w>point</w><w>,</w><w>nineteenth-century</w><w>medical</w><w>texts</w><w>contain</w><w>(</w><w>on</w><w>average</w><w>)</w><w>illustrations</w><w>on</w><w>1-3</w><w>%</w><w>of</w><w>their</w><w>pages</w><pc>.</pc></s><s xml:id="s_pmconX" corresp="{'extrair-paginas-ilustradas-com-python': ['s_vgjW7u']}"><w>If</w><w>you</w><w>are</w><w>trying</w><w>to</w><w>study</w><w>illustration</w><w>within</w><w>a</w><w>digital-library</w><w>corpus</w><w>about</w><w>which</w><w>you</w><w>do</w><w>not</w><w>have</w><w>any</w><w>preexisting</w><w>information</w><w>,</w><w>it</w><w>is</w><w>thus</w><w>reasonable</w><w>to</w><w>assume</w><w>that</w><w>90+</w><w>%</w><w>of</w><w>the</w><w>pages</w><w>in</w><w>that</w><w>corpus</w><w>will</w><w>NOT</w><w>be</w><w>illustrated</w><pc>.</pc></s></p><p><s xml:id="s_hzdNkn" corresp="{'extrair-paginas-ilustradas-com-python': ['s_DZnkLk']}"><w>HT</w><w>and</w><w>IA</w><w>allow</w><w>the</w><w>pictures/no</w><w>pictures</w><w>question</w><w>to</w><w>be</w><w>answered</w><w>indirectly</w><w>through</w><w>parsing</w><w>the</w><w>data</w><w>generated</w><w>by</w><w>optical</w><w>character</w><w>recognition</w><w>software</w><w>(</w><w>OCR</w><w>is</w><w>applied</w><w>after</w><w>a</w><w>physical</w><w>volume</w><w>is</w><w>scanned</w><w>in</w><w>order</w><w>to</w><w>generate</w><w>an</w><w>often-noisy</w><w>transcription</w><w>of</w><w>the</w><w>text</w><w>)</w><pc>.</pc></s><s xml:id="s_xFxrRh" corresp="{'extrair-paginas-ilustradas-com-python': ['s_K8Mpgr']}"><w>Leveraging</w><w>OCR</w><w>output</w><w>to</w><w>find</w><w>illustrated</w><w>pages</w><w>was</w><w>first</w><w>proposed</w><w>by</w><w>Kalev</w><w>Leetaru</w><w>in</w><w>a</w><ref target="https://blog.gdeltproject.org/500-years-of-the-images-of-the-worlds-books-now-on-flickr/"><w>2014</w><w>collaboration</w></ref><w>with</w><w>Internet</w><w>Archive</w><w>and</w><w>Flickr</w><pc>.</pc></s><s xml:id="s_XRLHXP" corresp="{'extrair-paginas-ilustradas-com-python': ['s_GPrpYF']}"><w>This</w><w>lesson</w><w>ports</w><w>Leetaru</w><w>'s</w><w>approach</w><w>to</w><w>HathiTrust</w><w>and</w><w>takes</w><w>advantage</w><w>of</w><w>faster</w><w>XML-processing</w><w>libraries</w><w>in</w><w>Python</w><w>as</w><w>well</w><w>as</w><w>IA</w><w>'s</w><w>newly-extended</w><w>range</w><w>of</w><w>image</w><w>file</w><w>formats</w><pc>.</pc></s></p><p><s xml:id="s_OT6RpW" corresp="{'extrair-paginas-ilustradas-com-python': ['s_RTf3Dm']}"><w>Since</w><w>HT</w><w>and</w><w>IA</w><w>expose</w><w>their</w><w>OCR-derived</w><w>information</w><w>in</w><w>slightly</w><w>different</w><w>ways</w><w>,</w><w>I</w><w>will</w><w>postpone</w><w>the</w><w>details</w><w>of</w><w>each</w><w>library</w><w>'s</w><w>``</w><w>visual</w><w>features</w><w>''</w><w>to</w><w>their</w><w>respective</w><w>sections</w><pc>.</pc></s></p></div><div type="2" n="2"><head><s xml:id="s_QB5lxv" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Hkjccu']}"><w>Goals</w></s></head><p><s xml:id="s_9KuVkN" corresp="{'extrair-paginas-ilustradas-com-python': ['s_RrkrJQ']}"><w>By</w><w>the</w><w>end</w><w>of</w><w>the</w><w>lesson</w><w>you</w><w>will</w><w>be</w><w>able</w><w>to</w><w>:</w></s></p><list type="unordered"><item><s xml:id="s_0azk8K" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Jva51g']}"><w>Set</w><w>up</w><w>the</w><w>``</w><w>minimal</w><w>''</w><w>Anaconda</w><w>Python</w><w>distribution</w><w>(</w><w>Miniconda</w><w>)</w><w>and</w><w>create</w><w>an</w><w>environment</w></s></item><item><s xml:id="s_hFxANB" corresp="{'extrair-paginas-ilustradas-com-python': ['s_LIEWR7']}"><w>Save</w><w>and</w><w>iterate</w><w>over</w><w>a</w><w>list</w><w>of</w><w>HT</w><w>or</w><w>IA</w><w>volumes</w><w>IDs</w><w>generated</w><w>by</w><w>a</w><w>search</w></s></item><item><s xml:id="s_xgMPcu" corresp="{'extrair-paginas-ilustradas-com-python': ['s_2UKAzP']}"><w>Access</w><w>the</w><w>HT</w><w>and</w><w>IA</w><w>data</w><w>application</w><w>programmer</w><w>interfaces</w><w>(</w><w>APIs</w><w>)</w><w>through</w><w>Python</w><w>libraries</w></s></item><item><s xml:id="s_CJrwxW" corresp="{'extrair-paginas-ilustradas-com-python': ['s_7VBrFi']}"><w>Find</w><w>page-level</w><w>visual</w><w>features</w></s></item><item><s xml:id="s_hnlAEe" corresp="{'extrair-paginas-ilustradas-com-python': ['s_zBhCQM']}"><w>Download</w><w>page</w><w>JPEGs</w><w>programmatically</w></s></item></list><p><s xml:id="s_njfs1G" corresp="{'extrair-paginas-ilustradas-com-python': ['s_8b25cQ']}"><w>The</w><w>big-picture</w><w>goal</w><w>is</w><w>to</w><w>strengthen</w><w>data</w><w>collection</w><w>and</w><w>exploration</w><w>skills</w><w>by</w><w>creating</w><w>a</w><w>historical</w><w>illustration</w><w>corpus</w><pc>.</pc></s><s xml:id="s_WPkYmN" corresp="{'extrair-paginas-ilustradas-com-python': ['s_eEzktb']}"><w>Combining</w><w>image</w><w>data</w><w>with</w><w>volume</w><w>metadata</w><w>allows</w><w>the</w><w>formulation</w><w>of</w><w>promising</w><w>research</w><w>questions</w><w>about</w><w>visual</w><w>change</w><w>over</w><w>time</w><pc>.</pc></s></p></div><div type="2" n="3"><head><s xml:id="s_VkhXZO" corresp="{'extrair-paginas-ilustradas-com-python': ['s_P16Ftd']}"><w>Requirements</w></s></head><p><s xml:id="s_yX2y44" corresp="{'extrair-paginas-ilustradas-com-python': ['s_VRUIKb']}"><w>This</w><w>lesson</w><w>'s</w><w>software</w><w>requirements</w><w>are</w><w>minimal</w><w>:</w><w>access</w><w>to</w><w>a</w><w>machine</w><w>running</w><w>a</w><w>standard</w><w>operating</w><w>system</w><w>and</w><w>a</w><w>web</w><w>browser</w><pc>.</pc></s><s xml:id="s_37DUw1" corresp="{'extrair-paginas-ilustradas-com-python': ['s_VDmNRO']}"><w>Miniconda</w><w>is</w><w>available</w><w>in</w><w>both</w><w>32-</w><w>and</w><w>64-bit</w><w>versions</w><w>for</w><w>Windows</w><w>,</w><w>macOS</w><w>,</w><w>and</w><w>Linux</w><pc>.</pc></s><s xml:id="s_JHORIv" corresp="{'extrair-paginas-ilustradas-com-python': ['s_2XPvJX']}"><w>Python</w><w>3</w><w>is</w><w>the</w><w>current</w><w>stable</w><w>release</w><w>of</w><w>the</w><w>language</w><w>and</w><w>will</w><w>be</w><w>supported</w><w>indefinitely</w><pc>.</pc></s></p><p><s xml:id="s_HpcLk0" corresp="{'extrair-paginas-ilustradas-com-python': ['s_fILMxY']}"><w>This</w><w>tutorial</w><w>assumes</w><w>basic</w><w>knowledge</w><w>of</w><w>the</w><w>command</w><w>line</w><w>and</w><w>the</w><w>Python</w><w>programming</w><w>language</w><pc>.</pc></s><s xml:id="s_erL3Di" corresp="{'extrair-paginas-ilustradas-com-python': ['s_3P6VvR']}"><w>You</w><w>should</w><w>understand</w><w>the</w><w>conventions</w><w>for</w><w>comments</w><w>and</w><w>commands</w><w>in</w><w>a</w><w>shell-based</w><w>tutorial</w><pc>.</pc></s><s xml:id="s_W5QeWC" corresp="{'extrair-paginas-ilustradas-com-python': ['s_cd33bU']}"><w>I</w><w>recommend</w><w>Ian</w><w>Milligan</w><w>and</w><w>James</w><w>Baker</w><w>'s</w><ref target="/en/lessons/intro-to-bash"><w>Introduction</w><w>to</w><w>the</w><w>Bash</w><w>Command</w><w>Line</w></ref><w>for</w><w>learning</w><w>or</w><w>brushing</w><w>up</w><w>on</w><w>your</w><w>command</w><w>line</w><w>skills</w><pc>.</pc></s></p></div><div type="2" n="4"><head><s xml:id="s_G6ucy1" corresp="{'extrair-paginas-ilustradas-com-python': ['s_EelMU8']}"><w>Setup</w></s></head><div type="3" n="4.1"><head><s xml:id="s_d3dV36" corresp="{'extrair-paginas-ilustradas-com-python': ['s_2oONQp']}"><w>Dependencies</w></s></head><p><s xml:id="s_LlUIko" corresp="{'extrair-paginas-ilustradas-com-python': ['s_QqtlWR']}"><w>More</w><w>experienced</w><w>readers</w><w>may</w><w>wish</w><w>to</w><w>simply</w><w>install</w><w>the</w><w>dependencies</w><w>and</w><w>run</w><w>the</w><w>notebooks</w><w>in</w><w>their</w><w>environment</w><w>of</w><w>choice</w><pc>.</pc></s><s xml:id="s_HsjOgc" corresp="{'extrair-paginas-ilustradas-com-python': ['s_kTpmdU']}"><w>Further</w><w>information</w><w>on</w><w>my</w><w>own</w><w>Miniconda</w><w>setup</w><w>(</w><w>and</w><w>some</w><w>Windows/</w><w>*</w><w>nix</w><w>differences</w><w>)</w><w>is</w><w>provided</w><pc>.</pc></s></p><list type="unordered"><item><s xml:id="s_fSmmxK" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Iw9cZv', 's_0LY8MU']}"><code rend="inline"><w>hathitrust-api</w></code><w>(</w><ref target="https://github.com/rlmv/hathitrust-api"><w>Install</w><w>docs</w></ref><w>)</w></s></item><item><s xml:id="s_eMVyfp" corresp="{'extrair-paginas-ilustradas-com-python': ['s_qL2jGj']}"><code rend="inline"><w>internetarchive</w></code><w>(</w><ref target="https://archive.org/services/docs/api/internetarchive/"><w>Install</w><w>docs</w></ref><w>)</w></s></item><item><s xml:id="s_OPwit8" corresp="{'extrair-paginas-ilustradas-com-python': ['s_fBdw2l']}"><code rend="inline"><w>jupyter</w></code><w>(</w><ref target="https://jupyter.org/install"><w>Install</w><w>docs</w></ref><w>)</w></s></item><item><s xml:id="s_IWZoMD" corresp="{'extrair-paginas-ilustradas-com-python': ['s_ji6giP']}"><code rend="inline"><w>requests</w></code><w>(</w><ref target="https://requests.readthedocs.io/en/latest/user/install/#install"><w>Install</w><w>docs</w></ref><w>)</w><w>[</w><w>creator</w><w>recommends</w><code rend="inline"><w>pipenv</w></code><w>installation</w><w>;</w><w>for</w><code rend="inline"><w>pip</w></code><w>install</w><w>see</w><ref target="https://pypi.org/project/requests2/"><w>PyPI</w></ref><w>]</w></s></item></list></div><div type="3" n="4.2"><head><s xml:id="s_gU58z1" corresp="{'extrair-paginas-ilustradas-com-python': ['s_H9VFpX']}"><w>Lesson</w><w>Files</w></s></head><p><s xml:id="s_6CwaEI" corresp="{'extrair-paginas-ilustradas-com-python': ['s_OdT7Uz']}"><w>Download</w><w>this</w><w>compressed</w><ref target="/assets/extracting-illustrated-pages/lesson-files.zip"><w>folder</w></ref><w>that</w><w>contains</w><w>two</w><w>Jupyter</w><w>notebooks</w><w>,</w><w>one</w><w>for</w><w>each</w><w>of</w><w>the</w><w>digital</w><w>libraries</w><pc>.</pc></s><s xml:id="s_ziZPgB" corresp="{'extrair-paginas-ilustradas-com-python': ['s_ee5YVo']}"><w>The</w><w>folder</w><w>also</w><w>contains</w><w>a</w><w>sample</w><w>JSON</w><w>metadata</w><w>file</w><w>describing</w><w>a</w><w>HathiTrust</w><w>collection</w><pc>.</pc></s><s xml:id="s_3jdrC3" corresp="{'extrair-paginas-ilustradas-com-python': ['s_jzVX5z']}"><w>Unzip</w><w>and</w><w>check</w><w>that</w><w>the</w><w>following</w><w>files</w><w>are</w><w>present</w><w>:</w><code rend="inline"><w>554050894-1535834127.json</w></code><w>,</w><code rend="inline"><w>hathitrust.ipynb</w></code><w>,</w><code rend="inline"><w>internetarchive.ipynb</w></code><pc>.</pc></s></p><p style="alert alert-warning"><s xml:id="s_Bp7s8q" corresp="{'extrair-paginas-ilustradas-com-python': ['s_bCaR5n']}"><w>All</w><w>subsequent</w><w>commands</w><w>assume</w><w>that</w><w>your</w><w>current</w><w>working</w><w>directory</w><w>is</w><w>the</w><w>folder</w><w>containing</w><w>the</w><w>lesson</w><w>files</w><pc>.</pc></s></p><div type="4" n="4.2.1"><head><s xml:id="s_TmYm3L" corresp="{'extrair-paginas-ilustradas-com-python': ['s_H65u3L']}"><w>Download</w><w>Destination</w></s></head><p><s xml:id="s_Ku9CzA" corresp="{'extrair-paginas-ilustradas-com-python': ['s_93Zott']}"><w>Here</w><w>is</w><w>the</w><w>default</w><w>directory</w><w>that</w><w>will</w><w>be</w><w>created</w><w>once</w><w>all</w><w>the</w><w>cells</w><w>in</w><w>both</w><w>notebooks</w><w>have</w><w>been</w><w>run</w><w>(</w><w>as</w><w>provided</w><w>)</w><pc>.</pc></s><s xml:id="s_Rlv6oo" corresp="{'extrair-paginas-ilustradas-com-python': ['s_ye4vxO']}"><w>After</w><w>getting</w><w>a</w><w>list</w><w>of</w><w>which</w><w>pages</w><w>in</w><w>a</w><w>volume</w><w>contain</w><w>pictures</w><w>,</w><w>the</w><w>HT</w><w>and</w><w>IA</w><w>download</w><w>functions</w><w>request</w><w>those</w><w>pages</w><w>as</w><w>JPEGs</w><w>(</w><w>named</w><w>by</w><w>page</w><w>number</w><w>)</w><w>and</w><w>store</w><w>them</w><w>in</w><w>sub-directories</w><w>(</w><w>named</w><w>by</w><w>item</w><w>ID</w><w>)</w><pc>.</pc></s><s xml:id="s_625x9n" corresp="{'extrair-paginas-ilustradas-com-python': ['s_s2IFBB']}"><w>You</w><w>can</w><w>of</w><w>course</w><w>use</w><w>different</w><w>volume</w><w>lists</w><w>or</w><w>change</w><w>the</w><code rend="inline"><w>out_dir</w></code><w>destination</w><w>to</w><w>something</w><w>other</w><w>than</w><code rend="inline"><w>items</w></code><pc>.</pc></s></p><ab><code xml:id="code_extracting-illustrated-pages_0" corresp="code_extracting-illustrated-pages_0.txt" rend="block"/></ab><p><s xml:id="s_gB496e" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Z0muZr']}"><w>The</w><w>download</w><w>functions</w><w>are</w><w>lazy</w><w>;</w><w>if</w><w>you</w><w>run</w><w>the</w><w>notebooks</w><w>again</w><w>,</w><w>with</w><w>the</w><code rend="inline"><w>items</w></code><w>directory</w><w>looking</w><w>as</w><w>it</w><w>does</w><w>above</w><w>,</w><w>any</w><w>item</w><w>that</w><w>already</w><w>has</w><w>its</w><w>own</w><w>sub-folder</w><w>will</w><w>be</w><w>skipped</w><pc>.</pc></s></p></div></div><div type="3" n="4.3"><head><s xml:id="s_tlLA5q" corresp="{'extrair-paginas-ilustradas-com-python': ['s_q9kjJQ']}"><w>Anaconda</w><w>(</w><w>optional</w><w>)</w></s></head><p><s xml:id="s_cEFbgV" corresp="{'extrair-paginas-ilustradas-com-python': ['s_rWi9xJ']}"><w>Anaconda</w><w>is</w><w>the</w><w>leading</w><w>scientific</w><w>Python</w><w>distribution</w><pc>.</pc></s><s xml:id="s_piTc6K" corresp="{'extrair-paginas-ilustradas-com-python': ['s_sD77EB']}"><w>Its</w><code rend="inline"><w>conda</w></code><w>package</w><w>manager</w><w>allows</w><w>you</w><w>to</w><w>install</w><w>libraries</w><w>such</w><w>as</w><code rend="inline"><w>numpy</w></code><w>and</w><code rend="inline"><w>tensorflow</w></code><w>with</w><w>ease</w><pc>.</pc></s><s xml:id="s_WeouAA" corresp="{'extrair-paginas-ilustradas-com-python': ['s_WQt0GY']}"><w>The</w><w>``</w><w>Miniconda</w><w>''</w><w>version</w><w>does</w><w>not</w><w>come</w><w>with</w><w>any</w><w>superfluous</w><w>packages</w><w>preinstalled</w><w>,</w><w>which</w><w>encourages</w><w>you</w><w>to</w><w>keep</w><w>your</w><w>base</w><w>environment</w><w>clean</w><w>and</w><w>only</w><w>install</w><w>what</w><w>you</w><w>need</w><w>for</w><w>a</w><w>project</w><w>within</w><w>a</w><w>named</w><w>environment</w><pc>.</pc></s></p><p><s xml:id="s_eNih0x" corresp="{'extrair-paginas-ilustradas-com-python': ['s_UUZjhj']}"><w>Download</w><w>and</w><w>install</w><ref target="https://conda.io/miniconda.html"><w>Miniconda</w></ref><pc>.</pc></s><s xml:id="s_19Emq3" corresp="{'extrair-paginas-ilustradas-com-python': ['s_1wQ8Xu']}"><w>Choose</w><w>the</w><w>latest</w><w>stable</w><w>release</w><w>of</w><w>Python</w><w>3</w><pc>.</pc></s><s xml:id="s_IqG11n" corresp="{'extrair-paginas-ilustradas-com-python': ['s_U5ARla']}"><w>If</w><w>everything</w><w>goes</w><w>well</w><w>,</w><w>you</w><w>should</w><w>be</w><w>able</w><w>to</w><w>run</w><code rend="inline"><w>which</w><w>conda</w></code><w>(</w><w>linux/macOS</w><w>)</w><w>or</w><code rend="inline"><w>where</w><w>conda</w></code><w>(</w><w>Windows</w><w>)</w><w>in</w><w>your</w><w>shell</w><w>and</w><w>see</w><w>the</w><w>location</w><w>of</w><w>the</w><w>executable</w><w>program</w><w>in</w><w>the</w><w>output</w><pc>.</pc></s></p><p><s xml:id="s_RsNvTX" corresp="{'extrair-paginas-ilustradas-com-python': ['s_aUz8cg']}"><w>Anaconda</w><w>has</w><w>a</w><w>handy</w><ref target="http://web.archive.org/web/20190115051900/https://conda.io/docs/_downloads/conda-cheatsheet.pdf"><w>cheat</w><w>sheet</w></ref><w>for</w><w>frequently</w><w>used</w><w>commands</w><pc>.</pc></s></p><div type="4" n="4.3.1"><head><s xml:id="s_dChgCa" corresp="{'extrair-paginas-ilustradas-com-python': ['s_gxY09o']}"><w>Create</w><w>an</w><w>Environment</w></s></head><p><s xml:id="s_NjebeB" corresp="{'extrair-paginas-ilustradas-com-python': ['s_sTSHV5']}"><w>Environments</w><w>,</w><w>among</w><w>other</w><w>things</w><w>,</w><w>help</w><w>control</w><w>the</w><w>complexity</w><w>associated</w><w>with</w><w>using</w><w>multiple</w><w>package</w><w>managers</w><w>in</w><w>tandem</w><pc>.</pc></s><s xml:id="s_AIOZis" corresp="{'extrair-paginas-ilustradas-com-python': ['s_MxWpAF']}"><w>Not</w><w>all</w><w>Python</w><w>libraries</w><w>can</w><w>be</w><w>installed</w><w>through</w><code rend="inline"><w>conda</w></code><pc>.</pc></s><s xml:id="s_Q44RQr" corresp="{'extrair-paginas-ilustradas-com-python': ['s_NENaJ7']}"><w>In</w><w>some</w><w>cases</w><w>we</w><w>will</w><w>fall</w><w>back</w><w>to</w><w>the</w><w>standard</w><w>Python</w><w>package</w><w>manager</w><w>,</w><code rend="inline"><w>pip</w></code><w>(</w><w>or</w><w>planned</w><w>replacements</w><w>like</w><code rend="inline"><w>pipenv</w></code><w>)</w><pc>.</pc></s><s xml:id="s_djn1Bk" corresp="{'extrair-paginas-ilustradas-com-python': ['s_tM0IAI']}"><w>However</w><w>,</w><w>when</w><w>we</w><w>do</w><w>so</w><w>,</w><w>we</w><w>will</w><w>use</w><w>a</w><w>version</w><w>of</w><code rend="inline"><w>pip</w></code><w>installed</w><w>by</w><code rend="inline"><w>conda</w></code><pc>.</pc></s><s xml:id="s_YfVAQ0" corresp="{'extrair-paginas-ilustradas-com-python': ['s_8JP9Xm']}"><w>This</w><w>keeps</w><w>all</w><w>the</w><w>packages</w><w>we</w><w>need</w><w>for</w><w>the</w><w>project</w><w>in</w><w>the</w><w>same</w><w>virtual</w><w>sandbox</w><pc>.</pc></s></p><ab><code lang="language-bash" xml:id="code_extracting-illustrated-pages_1" corresp="code_extracting-illustrated-pages_1.txt" rend="block"/></ab><p><s xml:id="s_17QBOV" corresp="{'extrair-paginas-ilustradas-com-python': ['s_niIRtR']}"><w>Now</w><w>we</w><w>create</w><w>a</w><w>named</w><w>environment</w><w>,</w><w>set</w><w>it</w><w>to</w><w>use</w><w>Python</w><w>3</w><w>,</w><w>and</w><w>activate</w><w>it</w><pc>.</pc></s></p><ab><code lang="language-bash" xml:id="code_extracting-illustrated-pages_2" corresp="code_extracting-illustrated-pages_2.txt" rend="block"/></ab><ab><code lang="language-bash" xml:id="code_extracting-illustrated-pages_3" corresp="code_extracting-illustrated-pages_3.txt" rend="block"/></ab><p><s xml:id="s_aGfvoM" corresp="{'extrair-paginas-ilustradas-com-python': ['s_TZ8ydA']}"><w>To</w><w>exit</w><w>an</w><w>environment</w><w>,</w><w>run</w><code rend="inline"><w>source</w><w>deactivate</w></code><w>on</w><w>macOS/Linux</w><w>or</w><code rend="inline"><w>deactivate</w></code><w>on</w><w>Windows</w><pc>.</pc></s><s xml:id="s_fuocbh" corresp="{'extrair-paginas-ilustradas-com-python': ['s_ko1I6w']}"><w>But</w><w>make</w><w>sure</w><w>to</w><w>stay</w><w>in</w><w>the</w><code rend="inline"><w>extract-pages</w></code><w>environment</w><w>for</w><w>the</w><w>duration</w><w>of</w><w>the</w><w>lesson</w><pc>!</pc></s></p></div><div type="4" n="4.3.2"><head><s xml:id="s_T2vF1e" corresp="{'extrair-paginas-ilustradas-com-python': ['s_VtrWHD']}"><w>Install</w><w>Conda</w><w>Packages</w></s></head><p><s xml:id="s_57jI3O" corresp="{'extrair-paginas-ilustradas-com-python': ['s_wWYEzq']}"><w>We</w><w>can</w><w>use</w><code rend="inline"><w>conda</w></code><w>to</w><w>install</w><w>our</w><w>first</w><w>couple</w><w>of</w><w>packages</w><pc>.</pc></s><s xml:id="s_FWr4Dm" corresp="{'extrair-paginas-ilustradas-com-python': ['s_rn4Lwv']}"><w>All</w><w>the</w><w>other</w><w>required</w><w>packages</w><w>(</w><w>gzip</w><w>,</w><w>json</w><w>,</w><w>os</w><w>,</w><w>sys</w><w>,</w><w>and</w><w>time</w><w>)</w><w>are</w><w>part</w><w>of</w><w>the</w><ref target="https://docs.python.org/3/library/"><w>standard</w><w>Python</w><w>library</w></ref><pc>.</pc></s><s xml:id="s_InUHOc" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Kte6MQ']}"><w>Note</w><w>how</w><w>we</w><w>need</w><w>to</w><w>specify</w><w>a</w><w>channel</w><w>in</w><w>some</w><w>cases</w><pc>.</pc></s><s xml:id="s_B5019q" corresp="{'extrair-paginas-ilustradas-com-python': ['s_52bskz']}"><w>You</w><w>can</w><w>search</w><w>for</w><w>packages</w><w>on</w><ref target="https://anaconda.org/"><w>Anaconda</w><w>Cloud</w></ref><pc>.</pc></s></p><ab><code lang="language-bash" xml:id="code_extracting-illustrated-pages_4" corresp="code_extracting-illustrated-pages_4.txt" rend="block"/></ab><p><s xml:id="s_zi9hHi" corresp="{'extrair-paginas-ilustradas-com-python': ['s_OmPVss']}"><w>Jupyter</w><w>has</w><w>many</w><w>dependencies</w><w>(</w><w>other</w><w>packages</w><w>on</w><w>which</w><w>it</w><w>relies</w><w>)</w><w>,</w><w>so</w><w>this</w><w>step</w><w>may</w><w>take</w><w>a</w><w>few</w><w>minutes</w><pc>.</pc></s><s xml:id="s_vXuwtH" corresp="{'extrair-paginas-ilustradas-com-python': ['s_tuRpk7']}"><w>Remember</w><w>that</w><w>when</w><code rend="inline"><w>conda</w></code><w>prompts</w><w>you</w><w>with</w><code rend="inline"><w>Proceed</w><w>(</w><w>[</w><w>y</w><w>]</w><w>/n</w><w>)</w><pc>?</pc></code><w>you</w><w>should</w><w>type</w><w>a</w><code rend="inline"><w>y</w></code><w>or</w><code rend="inline"><w>yes</w></code><w>and</w><w>then</w><w>press</w><w>Enter</w><w>to</w><w>accept</w><w>the</w><w>package</w><w>plan</w><pc>.</pc></s></p><p style="alert alert-warning"><s xml:id="s_82pYuA" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Ox2Jk0']}"><w>Behind</w><w>the</w><w>scenes</w><w>,</w><code rend="inline"><w>conda</w></code><w>is</w><w>working</w><w>to</w><w>make</w><w>sure</w><w>all</w><w>the</w><w>required</w><w>packages</w><w>and</w><w>dependencies</w><w>will</w><w>be</w><w>installed</w><w>in</w><w>a</w><w>compatible</w><w>way</w><pc>.</pc></s></p></div><div type="4" n="4.3.3"><head><s xml:id="s_yFSNpp" corresp="{'extrair-paginas-ilustradas-com-python': ['s_D9Mtce']}"><w>Install</w><w>Pip</w><w>Packages</w></s></head><p><s xml:id="s_Q1vbLM" corresp="{'extrair-paginas-ilustradas-com-python': ['s_yKYbi2']}"><w>If</w><w>you</w><w>are</w><w>using</w><w>a</w><code rend="inline"><w>conda</w></code><w>environment</w><w>,</w><w>it</w><w>'s</w><w>best</w><w>to</w><w>use</w><w>the</w><w>local</w><w>version</w><w>of</w><code rend="inline"><w>pip</w></code><pc>.</pc></s><s xml:id="s_T0mNEY" corresp="{'extrair-paginas-ilustradas-com-python': ['s_B4DuuR']}"><w>Check</w><w>that</w><w>the</w><w>following</w><w>commands</w><w>output</w><w>a</w><w>program</w><w>whose</w><w>absolute</w><w>path</w><w>contains</w><w>something</w><w>like</w><code rend="inline"><w>/Miniconda/envs/extract-pages/Scripts/pip</w></code><pc>.</pc></s></p><ab><code lang="language-bash" xml:id="code_extracting-illustrated-pages_5" corresp="code_extracting-illustrated-pages_5.txt" rend="block"/></ab><ab><code lang="language-bash" xml:id="code_extracting-illustrated-pages_6" corresp="code_extracting-illustrated-pages_6.txt" rend="block"/></ab><p><s xml:id="s_bZoHpH" corresp="{'extrair-paginas-ilustradas-com-python': ['s_eNAU8M']}"><w>If</w><w>you</w><w>see</w><w>two</w><w>versions</w><w>of</w><code rend="inline"><w>pip</w></code><w>in</w><w>the</w><w>output</w><w>above</w><w>,</w><w>make</w><w>sure</w><w>to</w><w>type</w><w>the</w><w>full</w><w>path</w><w>to</w><w>the</w><emph><w>local</w></emph><w>environment</w><w>version</w><w>when</w><w>installing</w><w>the</w><w>API</w><w>wrapper</w><w>libraries</w><w>:</w></s></p><ab><code lang="language-bash" xml:id="code_extracting-illustrated-pages_7" corresp="code_extracting-illustrated-pages_7.txt" rend="block"/></ab><ab><code lang="language-bash" xml:id="code_extracting-illustrated-pages_8" corresp="code_extracting-illustrated-pages_8.txt" rend="block"/></ab></div></div><div type="3" n="4.4"><head><s xml:id="s_mWSKiB" corresp="{'extrair-paginas-ilustradas-com-python': ['s_YoUCkg']}"><w>Jupyter</w><w>Notebooks</w></s></head><p><s xml:id="s_GrsPJx"><w>Peter</w><w>Organisciak</w><w>and</w><w>Boris</w><w>Capitanu</w><w>'s</w><ref target="/en/lessons/text-mining-with-extracted-features#start-a-notebook"><w>Text</w><w>Mining</w><w>in</w><w>Python</w><w>through</w><w>the</w><w>HTRC</w><w>Feature</w><w>Reader</w></ref><w>explains</w><w>the</w><w>benefits</w><w>of</w><w>notebooks</w><w>for</w><w>development</w><w>and</w><w>data</w><w>exploration</w><pc>.</pc></s><s xml:id="s_3PcD2p" corresp="{'extrair-paginas-ilustradas-com-python': ['s_E1z5hz']}"><w>It</w><w>also</w><w>contains</w><w>helpful</w><w>information</w><w>on</w><w>how</w><w>to</w><w>effectively</w><w>run</w><w>cells</w><pc>.</pc></s><s xml:id="s_ymrtn7" corresp="{'extrair-paginas-ilustradas-com-python': ['s_FJJcNH']}"><w>Since</w><w>we</w><w>installed</w><w>the</w><w>minimalist</w><w>version</w><w>of</w><w>Anaconda</w><w>,</w><w>we</w><w>need</w><w>to</w><w>launch</w><w>Jupyter</w><w>from</w><w>the</w><w>command</w><w>line</w><pc>.</pc></s><s xml:id="s_kNQg2f" corresp="{'extrair-paginas-ilustradas-com-python': ['s_LFOX3L']}"><w>In</w><w>your</w><w>shell</w><w>(</w><w>from</w><w>inside</w><w>the</w><w>folder</w><w>containing</w><w>the</w><w>lesson</w><w>files</w><w>)</w><w>run</w><code rend="inline"><w>jupyter</w><w>notebook</w></code><pc>.</pc></s></p><p><s xml:id="s_wcrqpQ" corresp="{'extrair-paginas-ilustradas-com-python': ['s_4NZgo3']}"><w>This</w><w>will</w><w>run</w><w>the</w><w>notebook</w><w>server</w><w>in</w><w>your</w><w>shell</w><w>and</w><w>launch</w><w>your</w><w>default</w><w>browser</w><w>with</w><w>the</w><w>Jupyter</w><w>homepage</w><pc>.</pc></s><s xml:id="s_5fxiZ3" corresp="{'extrair-paginas-ilustradas-com-python': ['s_FP5U2k']}"><w>The</w><w>homepage</w><w>shows</w><w>all</w><w>the</w><w>files</w><w>in</w><w>the</w><w>current</w><w>working</w><w>directory</w><pc>.</pc></s></p><figure><desc><s xml:id="s_xpjw6N" corresp="{'extrair-paginas-ilustradas-com-python': ['s_5onn3s', 's_jUSVCP']}"><w>Jupyter</w><w>homepage</w><w>showing</w><w>lesson</w><w>files</w><pc>.</pc></s></desc><graphic url="jupyter-home.png"/></figure><p style="alert alert-warning"><s xml:id="s_7CDkDu" corresp="{'extrair-paginas-ilustradas-com-python': ['s_B9Yhp5']}"><w>In</w><w>your</w><w>shell</w><w>,</w><w>make</w><w>sure</w><w>you</w><w>have</w><code rend="inline"><w>cd</w></code><w>-ed</w><w>into</w><w>the</w><w>unzipped</w><code rend="inline"><w>lesson-files</w></code><w>directory</w><pc>.</pc></s></p><p><s xml:id="s_jEyzgS" corresp="{'extrair-paginas-ilustradas-com-python': ['s_YRETB5']}"><w>Click</w><w>on</w><w>the</w><code rend="inline"><w>hathitrust.ipynb</w></code><w>and</w><code rend="inline"><w>internetarchive.ipynb</w></code><w>notebooks</w><w>to</w><w>open</w><w>them</w><w>in</w><w>new</w><w>browser</w><w>tabs</w><pc>.</pc></s><s xml:id="s_4Em9wV" corresp="{'extrair-paginas-ilustradas-com-python': ['s_nFKetO']}"><w>From</w><w>now</w><w>on</w><w>,</w><w>we</w><w>do</w><w>n't</w><w>need</w><w>to</w><w>run</w><w>any</w><w>commands</w><w>in</w><w>the</w><w>shell</w><pc>.</pc></s><s xml:id="s_dSseF6" corresp="{'extrair-paginas-ilustradas-com-python': ['s_m0PosC']}"><w>The</w><w>notebooks</w><w>allow</w><w>us</w><w>to</w><w>execute</w><w>Python</w><w>code</w><w>and</w><w>have</w><w>full</w><w>access</w><w>to</w><w>the</w><w>computer</w><w>'s</w><w>file</w><w>system</w><pc>.</pc></s><s xml:id="s_r8Wy7T" corresp="{'extrair-paginas-ilustradas-com-python': ['s_qX90wa']}"><w>When</w><w>you</w><w>are</w><w>finished</w><w>,</w><w>you</w><w>can</w><w>stop</w><w>the</w><w>notebook</w><w>server</w><w>by</w><w>clicking</w><w>``</w><w>Quit</w><w>''</w><w>on</w><w>the</w><w>Jupyter</w><w>homepage</w><w>or</w><w>executing</w><code rend="inline"><w>ctrl+c</w></code><w>in</w><w>the</w><w>shell</w><pc>.</pc></s></p></div></div><div type="2" n="5"><head><s xml:id="s_ENwW6u" corresp="{'extrair-paginas-ilustradas-com-python': ['s_zRDXAD']}"><w>HathiTrust</w></s></head><div type="3" n="5.1"><head><s xml:id="s_ZShPSo" corresp="{'extrair-paginas-ilustradas-com-python': ['s_2vL26u']}"><w>API</w><w>Access</w></s></head><p><s xml:id="s_p94E6l" corresp="{'extrair-paginas-ilustradas-com-python': ['s_e1LYMT']}"><w>You</w><w>need</w><w>to</w><w>register</w><w>with</w><w>HathiTrust</w><w>before</w><w>using</w><w>the</w><w>Data</w><w>API</w><pc>.</pc></s><s xml:id="s_b0qMPo" corresp="{'extrair-paginas-ilustradas-com-python': ['s_EE06QV']}"><w>Head</w><w>over</w><w>to</w><w>the</w><ref target="https://babel.hathitrust.org/cgi/kgs/request"><w>registration</w><w>portal</w></ref><w>and</w><w>fill</w><w>out</w><w>your</w><w>name</w><w>,</w><w>organization</w><w>,</w><w>and</w><w>email</w><w>to</w><w>request</w><w>access</w><w>keys</w><pc>.</pc></s><s xml:id="s_a5wW0g" corresp="{'extrair-paginas-ilustradas-com-python': ['s_bYhVzq']}"><w>You</w><w>should</w><w>receive</w><w>an</w><w>email</w><w>response</w><w>within</w><w>a</w><w>minute</w><w>or</w><w>so</w><pc>.</pc></s><s xml:id="s_k94619" corresp="{'extrair-paginas-ilustradas-com-python': ['s_altgt2', 's_e5cTvW']}"><w>Click</w><w>the</w><w>link</w><w>,</w><w>which</w><w>will</w><w>take</w><w>you</w><w>to</w><w>a</w><w>one-time</w><w>page</w><w>with</w><w>both</w><w>keys</w><w>displayed</w><pc>.</pc></s></p><p><s xml:id="s_VLs3d9" corresp="{'extrair-paginas-ilustradas-com-python': ['s_50U4I0']}"><w>In</w><w>the</w><code rend="inline"><w>hathitrust.ipynb</w></code><w>notebook</w><w>,</w><w>examine</w><w>the</w><w>very</w><w>first</w><w>cell</w><w>(</w><w>shown</w><w>below</w><w>)</w><pc>.</pc></s><s xml:id="s_k6yPHJ" corresp="{'extrair-paginas-ilustradas-com-python': ['s_4GnlV4']}"><w>Fill</w><w>in</w><w>your</w><w>API</w><w>tokens</w><w>as</w><w>directed</w><pc>.</pc></s><s xml:id="s_G9PHWd" corresp="{'extrair-paginas-ilustradas-com-python': ['s_vJuU56']}"><w>Then</w><w>run</w><w>the</w><w>cell</w><w>by</w><w>clicking</w><w>``</w><w>Run</w><w>''</w><w>in</w><w>the</w><w>notebook</w><w>navbar</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_extracting-illustrated-pages_9" corresp="code_extracting-illustrated-pages_9.txt" rend="block"/></ab><p style="alert alert-warning"><s xml:id="s_zxO8y2" corresp="{'extrair-paginas-ilustradas-com-python': ['s_2kaU7V']}"><w>Careful</w><pc>!</pc></s><s xml:id="s_rwcljG" corresp="{'extrair-paginas-ilustradas-com-python': ['s_nAXOro']}"><w>Do</w><w>not</w><w>expose</w><w>your</w><w>access</w><w>tokens</w><w>through</w><w>a</w><w>public</w><w>repo</w><w>on</w><w>GitHub</w><w>(</w><w>or</w><w>other</w><w>version</w><w>control</w><w>host</w><w>)</w><pc>.</pc></s><s xml:id="s_oWgQi3" corresp="{'extrair-paginas-ilustradas-com-python': ['s_aq9zXX']}"><w>They</w><w>will</w><w>be</w><w>searchable</w><w>by</w><w>just</w><w>about</w><w>anyone</w><pc>.</pc></s><s xml:id="s_LH7luS" corresp="{'extrair-paginas-ilustradas-com-python': ['s_06IHHF']}"><w>One</w><w>good</w><w>practice</w><w>for</w><w>a</w><w>Python</w><w>project</w><w>is</w><w>to</w><w>either</w><w>store</w><w>your</w><w>tokens</w><w>as</w><w>environment</w><w>variables</w><w>or</w><w>save</w><w>them</w><w>in</w><w>a</w><w>file</w><w>that</w><w>is</w><w>not</w><w>versioned</w><pc>.</pc></s></p></div><div type="3" n="5.2"><head><s xml:id="s_xDbCt2" corresp="{'extrair-paginas-ilustradas-com-python': ['s_IsOOFI']}"><w>Create</w><w>Volume</w><w>List</w></s></head><p><s xml:id="s_bAdKrF" corresp="{'extrair-paginas-ilustradas-com-python': ['s_3yQAiQ']}"><w>HT</w><w>allows</w><w>anyone</w><w>to</w><w>make</w><w>a</w><w>collection</w><w>of</w><w>items—you</w><w>do</w><w>n't</w><w>even</w><w>have</w><w>to</w><w>be</w><w>logged</w><w>in</w><pc>!</pc></s><s xml:id="s_lWQnHX" corresp="{'extrair-paginas-ilustradas-com-python': ['s_VFM6fR']}"><w>You</w><w>should</w><w>register</w><w>for</w><w>an</w><w>account</w><w>,</w><w>however</w><w>,</w><w>if</w><w>you</w><w>want</w><w>to</w><w>save</w><w>your</w><w>list</w><w>of</w><w>volumes</w><pc>.</pc></s><s xml:id="s_aBCjDl" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Fi6Hcm']}"><w>Follow</w><w>the</w><ref target="https://babel.hathitrust.org/cgi/mb?colltype=updated"><w>instructions</w></ref><w>to</w><w>do</w><w>some</w><w>full-text</w><w>searches</w><w>and</w><w>then</w><w>add</w><w>selected</w><w>results</w><w>to</w><w>a</w><w>collection</w><pc>.</pc></s><s xml:id="s_3Jsnv5" corresp="{'extrair-paginas-ilustradas-com-python': ['s_VQiqGV']}"><w>Currently</w><w>,</w><w>HathiTrust</w><w>does</w><w>not</w><w>have</w><w>a</w><w>public</w><w>search</w><w>API</w><w>for</w><w>acquiring</w><w>volumes</w><w>programmatically</w><w>;</w><w>you</w><w>need</w><w>to</w><w>search</w><w>through</w><w>their</w><w>web</w><w>interface</w><pc>.</pc></s></p><p><s xml:id="s_948cY1" corresp="{'extrair-paginas-ilustradas-com-python': ['s_xY4vjD']}"><w>As</w><w>you</w><w>update</w><w>a</w><w>collection</w><w>,</w><w>HT</w><w>keeps</w><w>track</w><w>of</w><w>the</w><w>associated</w><w>metadata</w><w>for</w><w>each</w><w>item</w><w>in</w><w>it</w><pc>.</pc></s><s xml:id="s_7PhsqK" corresp="{'extrair-paginas-ilustradas-com-python': ['s_TUzdfz']}"><w>I</w><w>have</w><w>included</w><w>in</w><w>the</w><w>lesson</w><w>files</w><w>the</w><w>metadata</w><w>for</w><w>a</w><w>sample</w><w>lesson</w><w>in</w><w>JSON</w><w>format</w><pc>.</pc></s><s xml:id="s_JP69qx" corresp="{'extrair-paginas-ilustradas-com-python': ['s_YcM8oP']}"><w>If</w><w>you</w><w>wanted</w><w>to</w><w>use</w><w>the</w><w>file</w><w>from</w><w>your</w><w>own</w><w>HT</w><w>collection</w><w>,</w><w>you</w><w>would</w><w>navigate</w><w>to</w><w>your</w><w>collections</w><w>page</w><w>and</w><w>hover</w><w>on</w><w>the</w><w>metadata</w><w>link</w><w>on</w><w>the</w><w>left</w><w>to</w><w>bring</w><w>up</w><w>the</w><w>option</w><w>to</w><w>download</w><w>as</w><w>JSON</w><w>as</w><w>seen</w><w>in</w><w>the</w><w>following</w><w>screenshot</w><pc>.</pc></s></p><figure><desc><s xml:id="s_RJIgcP" corresp="{'extrair-paginas-ilustradas-com-python': ['s_eZG5Ah']}"><w>Screenshot</w><w>of</w><w>how</w><w>to</w><w>download</w><w>collection</w><w>metadata</w><w>in</w><w>JSON</w><w>format</w><pc>.</pc></s></desc><graphic url="download-ht-json.png"/></figure><p><s xml:id="s_2QcsJp" corresp="{'extrair-paginas-ilustradas-com-python': ['s_oF7dmB', 's_wXUwpF']}"><w>When</w><w>you</w><w>have</w><w>downloaded</w><w>the</w><w>JSON</w><w>file</w><w>,</w><w>simply</w><w>move</w><w>it</w><w>to</w><w>the</w><w>directory</w><w>where</w><w>you</w><w>placed</w><w>the</w><w>Jupyter</w><w>notebooks</w><pc>.</pc></s><s xml:id="s_4jOEsJ" corresp="{'extrair-paginas-ilustradas-com-python': ['s_laezeR']}"><w>Replace</w><w>the</w><w>name</w><w>of</w><w>the</w><w>JSON</w><w>file</w><w>in</w><w>the</w><w>HT</w><w>notebook</w><w>with</w><w>the</w><w>name</w><w>of</w><w>your</w><w>collection</w><w>'s</w><w>file</w><pc>.</pc></s></p><p><s xml:id="s_cfesWd" corresp="{'extrair-paginas-ilustradas-com-python': ['s_XtOTvr']}"><w>The</w><w>notebook</w><w>shows</w><w>how</w><w>to</w><w>use</w><w>a</w><w>list</w><w>comprehension</w><w>to</w><w>get</w><w>all</w><w>the</w><code rend="inline"><w>htitem_id</w></code><w>strings</w><w>within</w><w>the</w><code rend="inline"><w>gathers</w></code><w>object</w><w>that</w><w>contains</w><w>all</w><w>the</w><w>collection</w><w>information</w><pc>.</pc></s></p><ab><code lang="language-Python" xml:id="code_extracting-illustrated-pages_10" corresp="code_extracting-illustrated-pages_10.txt" rend="block"/></ab><p style="alert alert-warning"><s xml:id="s_FDAu2k" corresp="{'extrair-paginas-ilustradas-com-python': ['s_4rh0FV']}"><w>Tutorials</w><w>often</w><w>show</w><w>you</w><w>how</w><w>to</w><w>process</w><w>one</w><w>example</w><w>item</w><w>(</w><w>often</w><w>of</w><w>a</w><w>trivial</w><w>size</w><w>or</w><w>complexity</w><w>)</w><pc>.</pc></s><s xml:id="s_X0V68j" corresp="{'extrair-paginas-ilustradas-com-python': ['s_JNsbWv']}"><w>This</w><w>is</w><w>pedagogically</w><w>convenient</w><w>,</w><w>but</w><w>it</w><w>means</w><w>you</w><w>are</w><w>less</w><w>equipped</w><w>to</w><w>apply</w><w>that</w><w>code</w><w>to</w><w>multiple</w><w>items—by</w><w>far</w><w>the</w><w>more</w><w>common</w><w>use</w><w>case</w><pc>.</pc></s><s xml:id="s_3bCwmK" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Qe3LTn']}"><w>In</w><w>the</w><w>notebooks</w><w>you</w><w>will</w><w>see</w><w>how</w><w>to</w><w>encapsulate</w><w>transformations</w><w>applied</w><w>to</w><w>one</w><w>item</w><w>into</w><emph><w>functions</w></emph><w>that</w><w>can</w><w>be</w><w>called</w><w>within</w><w>a</w><w>loop</w><w>over</w><w>a</w><w>collection</w><w>of</w><w>items</w><pc>.</pc></s></p></div><div type="3" n="5.3"><head><s xml:id="s_ZptqVP" corresp="{'extrair-paginas-ilustradas-com-python': ['s_b3lg4k']}"><w>Visual</w><w>Feature</w><w>:</w><w>IMAGE_ON_PAGE</w></s></head><p><s xml:id="s_fu685q" corresp="{'extrair-paginas-ilustradas-com-python': ['s_2PdkSx']}"><w>Given</w><w>a</w><w>list</w><w>of</w><w>volumes</w><w>,</w><w>we</w><w>want</w><w>to</w><w>explore</w><w>what</w><w>visual</w><w>features</w><w>they</w><w>have</w><w>at</w><w>the</w><w>page</w><w>level</w><pc>.</pc></s><s xml:id="s_aUsPi7" corresp="{'extrair-paginas-ilustradas-com-python': ['s_KTu6kL']}"><w>The</w><ref target="https://www.hathitrust.org/documents/hathitrust-data-api-v2_20150526.pdf"><w>most</w><w>recent</w><w>documentation</w></ref><w>(</w><w>2015</w><w>)</w><w>for</w><w>the</w><w>Data</w><w>API</w><w>describes</w><w>a</w><w>metadata</w><w>object</w><w>called</w><code rend="inline"><w>htd</w><w>:</w><w>pfeat</w></code><w>on</w><w>pages</w><w>9-10</w><pc>.</pc></s><s xml:id="s_Bgd1EN" corresp="{'extrair-paginas-ilustradas-com-python': ['s_SqrxRU']}"><code rend="inline"><w>htd</w><w>:</w><w>pfeat</w></code><w>is</w><w>shorthand</w><w>for</w><w>``</w><w>HathiTrust</w><w>Data</w><w>API</w><w>:</w><w>Page</w><w>Features</w><pc>.</pc></s><s xml:id="s_8YkoUc"><w>''</w></s></p><quote><list type="unordered"><item><s xml:id="s_EoghsS" corresp="{'extrair-paginas-ilustradas-com-python': ['s_K9SVIa']}"><code rend="inline"><w>htd</w><w>:</w><w>pfeat</w></code><w>­</w><w>-</w><w>the</w><w>page</w><w>feature</w><w>key</w><w>(</w><w>if</w><w>available</w><w>)</w><w>:</w><list type="unordered"><item><s xml:id="s_QY6Q8O" corresp="{'extrair-paginas-ilustradas-com-python': ['s_5eViYr']}"><w>CHAPTER_START</w></s></item><item><s xml:id="s_Tpzb2A" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Qjfm64']}"><w>COPYRIGHT</w></s></item><item><s xml:id="s_b88siS" corresp="{'extrair-paginas-ilustradas-com-python': ['s_caWAwu']}"><w>FIRST_CONTENT_CHAPTER_START</w></s></item><item><s xml:id="s_Pd783o" corresp="{'extrair-paginas-ilustradas-com-python': ['s_oI01Mr']}"><w>FRONT_COVER</w></s></item><item><s xml:id="s_izU5Pv" corresp="{'extrair-paginas-ilustradas-com-python': ['s_bl0RYz']}"><w>INDEX</w></s></item><item><s xml:id="s_0uKS2h" corresp="{'extrair-paginas-ilustradas-com-python': ['s_SagJZg']}"><w>REFERENCES</w></s></item><item><s xml:id="s_YcRlcU" corresp="{'extrair-paginas-ilustradas-com-python': ['s_hjumoz']}"><w>TABLE_OF_CONTENTS</w></s></item><item><s xml:id="s_bRp7Jm" corresp="{'extrair-paginas-ilustradas-com-python': ['s_caPBbY']}"><w>TITLE</w></s></item></list></s></item></list></quote><p><s xml:id="s_C8Pj6U" corresp="{'extrair-paginas-ilustradas-com-python': ['s_EgPkKx']}"><w>What</w><w>the</w><code rend="inline"><w>hathitrust-api</w></code><w>wrapper</w><w>does</w><w>is</w><w>make</w><w>the</w><w>full</w><w>metadata</w><w>for</w><w>a</w><w>HT</w><w>volume</w><w>available</w><w>as</w><w>a</w><w>Python</w><w>object</w><pc>.</pc></s><s xml:id="s_4teXUo" corresp="{'extrair-paginas-ilustradas-com-python': ['s_ws7BKJ']}"><w>Given</w><w>a</w><w>volume</w><w>'s</w><w>identifier</w><w>,</w><w>we</w><w>can</w><w>request</w><w>its</w><w>metadata</w><w>and</w><w>then</w><w>drill</w><w>down</w><w>through</w><w>the</w><w>page</w><emph><w>sequence</w></emph><w>into</w><w>page-level</w><w>information</w><pc>.</pc></s><s xml:id="s_UhIsaw" corresp="{'extrair-paginas-ilustradas-com-python': ['s_6gU6iW']}"><w>The</w><code rend="inline"><w>htd</w><w>:</w><w>pfeat</w></code><emph><w>list</w></emph><w>is</w><w>associated</w><w>with</w><w>each</w><w>page</w><w>in</w><w>a</w><w>volume</w><w>and</w><w>in</w><w>theory</w><w>contains</w><w>all</w><w>features</w><w>that</w><w>apply</w><w>to</w><w>that</w><w>page</w><pc>.</pc></s><s xml:id="s_cc0MTs" corresp="{'extrair-paginas-ilustradas-com-python': ['s_PMy3tQ']}"><w>In</w><w>practice</w><w>,</w><w>there</w><w>a</w><w>quite</w><w>a</w><w>few</w><w>more</w><w>feature</w><w>tags</w><w>than</w><w>the</w><w>eight</w><w>listed</w><w>above</w><pc>.</pc></s><s xml:id="s_Rqfbtd" corresp="{'extrair-paginas-ilustradas-com-python': ['s_4L2VAQ']}"><w>The</w><w>one</w><w>we</w><w>will</w><w>be</w><w>working</w><w>with</w><w>is</w><w>called</w><code rend="inline"><w>IMAGE_ON_PAGE</w></code><w>and</w><w>is</w><w>more</w><w>abstractly</w><w>visual</w><w>than</w><w>structural</w><w>tags</w><w>such</w><w>as</w><code rend="inline"><w>CHAPTER_START</w></code><pc>.</pc></s></p><p><s xml:id="s_WOcxxP" corresp="{'extrair-paginas-ilustradas-com-python': ['s_d4acdZ']}"><w>Tom</w><w>Burton-West</w><w>,</w><w>a</w><w>research</w><w>librarian</w><w>at</w><w>the</w><w>University</w><w>of</w><w>Michigan</w><w>Library</w><w>,</w><w>works</w><w>closely</w><w>with</w><w>HathiTrust</w><w>and</w><w>HTRC</w><w>,</w><w>HathiTrust</w><w>'s</w><w>Research</w><w>Center</w><pc>.</pc></s><s xml:id="s_T7hesc" corresp="{'extrair-paginas-ilustradas-com-python': ['s_fG93HB']}"><w>Tom</w><w>told</w><w>me</w><w>over</w><w>email</w><w>that</w><w>HathiTrust</w><w>is</w><w>provided</w><w>the</w><code rend="inline"><w>htd</w><w>:</w><w>pfeat</w></code><w>information</w><w>by</w><w>Google</w><w>,</w><w>with</w><w>whom</w><w>they</w><w>have</w><w>worked</w><w>closely</w><w>since</w><w>HT</w><w>'s</w><w>founding</w><w>in</w><w>2008</w><pc>.</pc></s><s xml:id="s_jwRUit" corresp="{'extrair-paginas-ilustradas-com-python': ['s_rYyTDl']}"><w>A</w><w>contact</w><w>at</w><w>Google</w><w>gave</w><w>Tom</w><w>permission</w><w>to</w><w>share</w><w>the</w><w>following</w><w>:</w></s></p><quote><p><s xml:id="s_XQUmke" corresp="{'extrair-paginas-ilustradas-com-python': ['s_nCUWgS']}"><w>These</w><w>tags</w><w>are</w><w>derived</w><w>from</w><w>a</w><w>combination</w><w>of</w><w>heuristics</w><w>,</w><w>machine</w><w>learning</w><w>,</w><w>and</w><w>human</w><w>tagging</w><pc>.</pc></s></p></quote><p><s xml:id="s_8QziBZ" corresp="{'extrair-paginas-ilustradas-com-python': ['s_qBDGqC']}"><w>An</w><w>example</w><w>heuristic</w><w>might</w><w>be</w><w>that</w><w>the</w><w>first</w><w>element</w><w>in</w><w>the</w><w>volume</w><w>page</w><w>sequence</w><w>is</w><w>almost</w><w>always</w><w>the</w><code rend="inline"><w>FRONT_COVER</w></code><pc>.</pc></s><s xml:id="s_4gQJ45" corresp="{'extrair-paginas-ilustradas-com-python': ['s_kCxQ7x']}"><w>Machine</w><w>learning</w><w>could</w><w>be</w><w>used</w><w>to</w><w>train</w><w>models</w><w>to</w><w>discriminate</w><w>,</w><w>say</w><w>,</w><w>between</w><w>image</w><w>data</w><w>that</w><w>is</w><w>more</w><w>typical</w><w>of</w><w>lines</w><w>of</w><w>prose</w><w>in</w><w>a</w><w>Western</w><w>script</w><w>or</w><w>of</w><w>the</w><w>lines</w><w>in</w><w>an</w><w>engraving</w><pc>.</pc></s><s xml:id="s_6Tk6CF" corresp="{'extrair-paginas-ilustradas-com-python': ['s_XXxE2R']}"><w>Human</w><w>tagging</w><w>is</w><w>the</w><w>manual</w><w>assignment</w><w>of</w><w>labels</w><w>to</w><w>images</w><pc>.</pc></s><s xml:id="s_KLVpu7" corresp="{'extrair-paginas-ilustradas-com-python': ['s_T4dpVd']}"><w>The</w><w>ability</w><w>to</w><w>view</w><w>a</w><w>volume</w><w>'s</w><w>illustrations</w><w>in</w><w>the</w><w>EEBO</w><w>and</w><w>ECCO</w><w>databases</w><w>is</w><w>an</w><w>example</w><w>of</w><w>human</w><w>tagging</w><pc>.</pc></s></p><p><s xml:id="s_M6YUuG" corresp="{'extrair-paginas-ilustradas-com-python': ['s_o24ySc']}"><w>The</w><w>use</w><w>of</w><w>``</w><w>machine</w><w>learning</w><w>''</w><w>by</w><w>Google</w><w>sounds</w><w>somewhat</w><w>mysterious</w><pc>.</pc></s><s xml:id="s_K5dG8R" corresp="{'extrair-paginas-ilustradas-com-python': ['s_eCN8iX']}"><w>Until</w><w>Google</w><w>publicizes</w><w>their</w><w>methods</w><w>,</w><w>it</w><w>is</w><w>impossible</w><w>to</w><w>know</w><w>all</w><w>the</w><w>details</w><pc>.</pc></s><s xml:id="s_XRby0C" corresp="{'extrair-paginas-ilustradas-com-python': ['s_PybbkQ']}"><w>However</w><w>,</w><w>it</w><w>'s</w><w>likely</w><w>that</w><w>the</w><code rend="inline"><w>IMAGE_ON_PAGE</w></code><w>tags</w><w>were</w><w>first</w><w>proposed</w><w>by</w><w>detecting</w><w>``</w><w>Picture</w><w>''</w><w>blocks</w><w>in</w><w>the</w><w>OCR</w><w>output</w><w>files</w><w>(</w><w>a</w><w>process</w><w>discussed</w><w>below</w><w>in</w><w>the</w><w>Internet</w><w>Archive</w><w>section</w><w>)</w><pc>.</pc></s><s xml:id="s_UDRyF7" corresp="{'extrair-paginas-ilustradas-com-python': ['s_uHoNCh']}"><w>Further</w><w>filtering</w><w>may</w><w>then</w><w>be</w><w>applied</w><pc>.</pc></s></p></div><div type="3" n="5.4"><head><s xml:id="s_g2DDap" corresp="{'extrair-paginas-ilustradas-com-python': ['s_R5Fp8Y']}"><w>Code</w><w>Walk-through</w></s></head><div type="4" n="5.4.1"><head><s xml:id="s_7K0NYq" corresp="{'extrair-paginas-ilustradas-com-python': ['s_2X52sk']}"><w>Find</w><w>Pictures</w></s></head><p><s xml:id="s_QAY4tp" corresp="{'extrair-paginas-ilustradas-com-python': ['s_VVFqTh']}"><w>We</w><w>have</w><w>seen</w><w>how</w><w>to</w><w>create</w><w>a</w><w>list</w><w>of</w><w>volumes</w><w>and</w><w>observed</w><w>that</w><w>the</w><w>Data</w><w>API</w><w>can</w><w>be</w><w>used</w><w>to</w><w>get</w><w>metadata</w><w>objects</w><w>containing</w><w>page-level</w><w>experimental</w><w>features</w><pc>.</pc></s><s xml:id="s_TZIKYK" corresp="{'extrair-paginas-ilustradas-com-python': ['s_6hB57k']}"><w>The</w><w>core</w><w>function</w><w>in</w><w>the</w><w>HT</w><w>notebook</w><w>has</w><w>the</w><w>signature</w><code rend="inline"><w>ht_picture_download</w><w>(</w><w>item_id</w><w>,</w><w>out_dir=None</w><w>)</w></code><pc>.</pc></s><s xml:id="s_MH7SXN" corresp="{'extrair-paginas-ilustradas-com-python': ['s_8Y0obR']}"><w>Given</w><w>a</w><w>unique</w><w>identifier</w><w>and</w><w>an</w><w>optional</w><w>destination</w><w>directory</w><w>,</w><w>this</w><w>function</w><w>will</w><w>first</w><w>get</w><w>the</w><w>volume</w><w>'s</w><w>metadata</w><w>from</w><w>the</w><w>API</w><w>and</w><w>convert</w><w>it</w><w>into</w><w>JSON</w><w>format</w><pc>.</pc></s><s xml:id="s_1g3lCH" corresp="{'extrair-paginas-ilustradas-com-python': ['s_y4Yi2w']}"><w>Then</w><w>it</w><w>loops</w><w>over</w><w>the</w><w>page</w><w>sequence</w><w>and</w><w>checks</w><w>if</w><w>the</w><w>tag</w><code rend="inline"><w>IMAGE_ON_PAGE</w></code><w>is</w><w>in</w><w>the</w><code rend="inline"><w>htd</w><w>:</w><w>pfeat</w></code><w>list</w><w>(</w><w>if</w><w>it</w><w>exists</w><w>)</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_extracting-illustrated-pages_11" corresp="code_extracting-illustrated-pages_11.txt" rend="block"/></ab><p><s xml:id="s_XAcVvN" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Sa8K8R']}"><w>Notice</w><w>that</w><w>we</w><w>need</w><w>to</w><w>drill</w><w>down</w><w>several</w><w>levels</w><w>into</w><w>the</w><w>top-level</w><w>object</w><w>to</w><w>get</w><w>the</w><code rend="inline"><w>htd</w><w>:</w><w>seq</w></code><w>object</w><w>,</w><w>which</w><w>we</w><w>can</w><w>iterate</w><w>over</w><pc>.</pc></s></p><p><s xml:id="s_rZET8P" corresp="{'extrair-paginas-ilustradas-com-python': ['s_PsLME2']}"><w>The</w><w>two</w><w>exceptions</w><w>I</w><w>want</w><w>to</w><w>catch</w><w>are</w><code rend="inline"><w>KeyError</w></code><w>,</w><w>which</w><w>occurs</w><w>when</w><w>the</w><w>page</w><w>does</w><w>not</w><w>have</w><w>an</w><w>page-level</w><w>features</w><w>associated</w><w>with</w><w>it</w><w>and</w><code rend="inline"><w>TypeError</w></code><w>,</w><w>which</w><w>occurs</w><w>when</w><w>the</w><code rend="inline"><w>pseq</w></code><w>field</w><w>for</w><w>the</w><w>page</w><w>is</w><w>for</w><w>some</w><w>reason</w><w>non-numeric</w><w>and</w><w>thus</w><w>can</w><w>not</w><w>be</w><w>cast</w><w>to</w><w>an</w><code rend="inline"><w>int</w></code><pc>.</pc></s><s xml:id="s_Uzuo9W" corresp="{'extrair-paginas-ilustradas-com-python': ['s_2Ve3UQ']}"><w>If</w><w>something</w><w>goes</w><w>wrong</w><w>with</w><w>a</w><w>page</w><w>,</w><w>we</w><w>just</w><code rend="inline"><w>continue</w></code><w>on</w><w>to</w><w>the</w><w>next</w><w>one</w><pc>.</pc></s><s xml:id="s_UfeVRY" corresp="{'extrair-paginas-ilustradas-com-python': ['s_yAfon6', 's_dDB7gb']}"><w>The</w><w>idea</w><w>is</w><w>to</w><w>get</w><w>all</w><w>the</w><w>good</w><w>data</w><w>we</w><w>can.</w><w>Not</w><w>to</w><w>clean</w><w>up</w><w>inconsistencies</w><w>or</w><w>gaps</w><w>in</w><w>the</w><w>item</w><w>metadata</w><pc>.</pc></s></p></div><div type="4" n="5.4.2"><head><s xml:id="s_9oBOqb" corresp="{'extrair-paginas-ilustradas-com-python': ['s_9phePQ']}"><w>Download</w><w>Images</w></s></head><p><s xml:id="s_wMgm7g" corresp="{'extrair-paginas-ilustradas-com-python': ['s_oqXMHX']}"><w>Once</w><code rend="inline"><w>img_pages</w></code><w>contains</w><w>the</w><w>complete</w><w>list</w><w>of</w><w>pages</w><w>tagged</w><w>with</w><code rend="inline"><w>IMAGE_ON_PAGE</w></code><w>,</w><w>we</w><w>can</w><w>download</w><w>those</w><w>pages</w><pc>.</pc></s><s xml:id="s_xvNvo2" corresp="{'extrair-paginas-ilustradas-com-python': ['s_4T4iKS']}"><w>Note</w><w>that</w><w>if</w><w>no</w><code rend="inline"><w>out_dir</w></code><w>is</w><w>supplied</w><w>to</w><code rend="inline"><w>ht_picture_download</w><w>(</w><w>)</w></code><w>,</w><w>then</w><w>the</w><w>function</w><w>simply</w><w>returns</w><w>the</w><code rend="inline"><w>img_pages</w></code><w>list</w><w>and</w><w>does</w><w>NOT</w><w>download</w><w>anything</w><pc>.</pc></s></p><p><s xml:id="s_2rsmSA" corresp="{'extrair-paginas-ilustradas-com-python': ['s_1uzZWC']}"><w>The</w><code rend="inline"><w>getpageimage</w><w>(</w><w>)</w></code><w>API</w><w>call</w><w>returns</w><w>a</w><w>JPEG</w><w>by</w><w>default</w><pc>.</pc></s><s xml:id="s_KhbXIO" corresp="{'extrair-paginas-ilustradas-com-python': ['s_isCS6U']}"><w>We</w><w>simply</w><w>write</w><w>out</w><w>the</w><w>JPEG</w><w>bytes</w><w>to</w><w>a</w><w>file</w><w>in</w><w>the</w><w>normal</w><w>way</w><pc>.</pc></s><s xml:id="s_RwPRBq" corresp="{'extrair-paginas-ilustradas-com-python': ['s_hmv1PH']}"><w>Within</w><w>the</w><w>volume</w><w>sub-folder</w><w>(</w><w>itself</w><w>inside</w><code rend="inline"><w>out_dir</w></code><w>)</w><w>,</w><w>the</w><w>pages</w><w>will</w><w>be</w><w>named</w><code rend="inline"><w>1.jpg</w></code><w>for</w><w>page</w><w>1</w><w>and</w><w>so</w><w>forth</w><pc>.</pc></s></p><p><s xml:id="s_jCzi1V" corresp="{'extrair-paginas-ilustradas-com-python': ['s_CNAHam']}"><w>One</w><w>thing</w><w>to</w><w>consider</w><w>is</w><w>our</w><w>usage</w><w>rate</w><w>of</w><w>the</w><w>API</w><pc>.</pc></s><s xml:id="s_uOXsoc" corresp="{'extrair-paginas-ilustradas-com-python': ['s_zzgtoj']}"><w>We</w><w>do</w><w>n't</w><w>want</w><w>to</w><w>abuse</w><w>our</w><w>access</w><w>by</w><w>making</w><w>hundreds</w><w>of</w><w>requests</w><w>per</w><w>minute</w><pc>.</pc></s><s xml:id="s_0t63id" corresp="{'extrair-paginas-ilustradas-com-python': ['s_DhsDmW']}"><w>To</w><w>be</w><w>safe</w><w>,</w><w>especially</w><w>if</w><w>we</w><w>intend</w><w>to</w><w>run</w><w>big</w><w>jobs</w><w>,</w><w>we</w><w>wait</w><w>two</w><w>seconds</w><w>before</w><w>making</w><w>each</w><w>page</w><w>request</w><pc>.</pc></s><s xml:id="s_UyJhv3" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Z2hocL']}"><w>This</w><w>may</w><w>be</w><w>frustrating</w><w>in</w><w>the</w><w>short</w><w>term</w><w>,</w><w>but</w><w>it</w><w>helps</w><w>avoid</w><w>API</w><w>throttling</w><w>or</w><w>banning</w><pc>.</pc></s></p><ab><code lang="language-Python" xml:id="code_extracting-illustrated-pages_12" corresp="code_extracting-illustrated-pages_12.txt" rend="block"/></ab></div></div></div><div type="2" n="6"><head><s xml:id="s_wihECu" corresp="{'extrair-paginas-ilustradas-com-python': ['s_e8HiEP']}"><w>Internet</w><w>Archive</w></s></head><div type="3" n="6.1"><head><s xml:id="s_zwwUkN" corresp="{'extrair-paginas-ilustradas-com-python': ['s_cP92qT']}"><w>API</w><w>Access</w></s></head><p><s xml:id="s_TDlOJu" corresp="{'extrair-paginas-ilustradas-com-python': ['s_82JX60']}"><w>We</w><w>connect</w><w>to</w><w>the</w><w>Python</w><w>API</w><w>library</w><w>using</w><w>an</w><w>Archive.org</w><w>account</w><w>email</w><w>and</w><w>password</w><w>rather</w><w>than</w><w>API</w><w>tokens</w><pc>.</pc></s><s xml:id="s_hOOjlz" corresp="{'extrair-paginas-ilustradas-com-python': ['s_QiYRQb']}"><w>This</w><w>is</w><w>discussed</w><w>in</w><w>the</w><ref target="https://archive.org/services/docs/api/internetarchive/quickstart.html"><w>Quickstart</w><w>Guide</w></ref><pc>.</pc></s><s xml:id="s_UAldmE" corresp="{'extrair-paginas-ilustradas-com-python': ['s_cIdiMO']}"><w>If</w><w>you</w><w>do</w><w>not</w><w>have</w><w>an</w><w>account</w><w>,</w><ref target="https://archive.org/account/login.createaccount.php"><w>register</w></ref><w>for</w><w>your</w><w>``</w><w>Virtual</w><w>Library</w><w>Card</w><pc>.</pc></s><s xml:id="s_bgP7st"><w>''</w></s></p><p><s xml:id="s_H2T0n4" corresp="{'extrair-paginas-ilustradas-com-python': ['s_9yeF1t']}"><w>In</w><w>the</w><w>first</w><w>cell</w><w>of</w><w>the</w><code rend="inline"><w>internetarchive.ipynb</w></code><w>notebook</w><w>,</w><w>enter</w><w>your</w><w>credentials</w><w>as</w><w>directed</w><pc>.</pc></s><s xml:id="s_YON2Qg" corresp="{'extrair-paginas-ilustradas-com-python': ['s_pSSWax']}"><w>Run</w><w>the</w><w>cell</w><w>to</w><w>authenticate</w><w>to</w><w>the</w><w>API</w><pc>.</pc></s></p></div><div type="3" n="6.2"><head><s xml:id="s_h9U0A6" corresp="{'extrair-paginas-ilustradas-com-python': ['s_fs2Nyb']}"><w>Create</w><w>Volume</w><w>List</w></s></head><p><s xml:id="s_SfE1fv" corresp="{'extrair-paginas-ilustradas-com-python': ['s_33sCe5']}"><w>The</w><w>IA</w><w>Python</w><w>library</w><w>allows</w><w>you</w><w>to</w><w>submit</w><w>query</w><w>strings</w><w>and</w><w>receive</w><w>a</w><w>list</w><w>of</w><w>matching</w><w>key-value</w><w>pairs</w><w>where</w><w>the</w><w>word</w><w>``</w><w>identifier</w><w>''</w><w>is</w><w>the</w><w>key</w><w>and</w><w>the</w><w>actual</w><w>identifier</w><w>is</w><w>the</w><w>value</w><pc>.</pc></s><s xml:id="s_HLDZdD" corresp="{'extrair-paginas-ilustradas-com-python': ['s_MogSGo']}"><w>The</w><w>syntax</w><w>for</w><w>a</w><w>query</w><w>is</w><w>explained</w><w>on</w><w>the</w><ref target="https://archive.org/advancedsearch.php"><w>Advanced</w><w>Search</w><w>page</w></ref><w>for</w><w>IA</w><pc>.</pc></s><s xml:id="s_rNmSNm" corresp="{'extrair-paginas-ilustradas-com-python': ['s_1O0z6d']}"><w>You</w><w>can</w><w>specify</w><w>parameters</w><w>by</w><w>using</w><w>a</w><w>keyword</w><w>like</w><w>``</w><w>date</w><w>''</w><w>or</w><w>``</w><w>mediatype</w><w>''</w><w>followed</w><w>by</w><w>a</w><w>colon</w><w>and</w><w>the</w><w>value</w><w>you</w><w>want</w><w>to</w><w>assign</w><w>that</w><w>parameter</w><pc>.</pc></s><s xml:id="s_YrvU1C" corresp="{'extrair-paginas-ilustradas-com-python': ['s_ExC25w']}"><w>For</w><w>instance</w><w>,</w><w>I</w><w>only</w><w>want</w><w>results</w><w>that</w><w>are</w><emph><w>texts</w></emph><w>(</w><w>as</w><w>opposed</w><w>to</w><w>video</w><w>,</w><w>etc.</w><w>)</w><pc>.</pc></s><s xml:id="s_nOEiFR" corresp="{'extrair-paginas-ilustradas-com-python': ['s_CWxdtI']}"><w>Make</w><w>sure</w><w>the</w><w>parameters</w><w>and</w><w>options</w><w>you</w><w>are</w><w>trying</w><w>to</w><w>use</w><w>are</w><w>supported</w><w>by</w><w>IA</w><w>'s</w><w>search</w><w>functionality</w><pc>.</pc></s><s xml:id="s_zeTCGj" corresp="{'extrair-paginas-ilustradas-com-python': ['s_JxryxL']}"><w>Otherwise</w><w>you</w><w>may</w><w>get</w><w>missing</w><w>or</w><w>weird</w><w>results</w><w>and</w><w>not</w><w>know</w><w>why</w><pc>.</pc></s></p><p><s xml:id="s_Py9M4o" corresp="{'extrair-paginas-ilustradas-com-python': ['s_jgjsra']}"><w>In</w><w>the</w><w>notebook</w><w>,</w><w>I</w><w>generate</w><w>a</w><w>list</w><w>of</w><w>IA</w><w>ids</w><w>with</w><w>the</w><w>following</w><w>code</w><w>:</w></s></p><ab><code lang="language-Python" xml:id="code_extracting-illustrated-pages_13" corresp="code_extracting-illustrated-pages_13.txt" rend="block"/></ab></div><div type="3" n="6.3"><head><s xml:id="s_hPCTSg" corresp="{'extrair-paginas-ilustradas-com-python': ['s_18MFde']}"><w>Visual</w><w>Feature</w><w>:</w><w>Picture</w><w>Blocks</w></s></head><p><s xml:id="s_jHMajy" corresp="{'extrair-paginas-ilustradas-com-python': ['s_E15lwP']}"><w>Internet</w><w>Archive</w><w>does</w><w>not</w><w>release</w><w>any</w><w>page-level</w><w>features</w><pc>.</pc></s><s xml:id="s_ZOLyTd" corresp="{'extrair-paginas-ilustradas-com-python': ['s_P2ohtc']}"><w>Instead</w><w>,</w><w>it</w><w>makes</w><w>a</w><w>number</w><w>of</w><w>raw</w><w>files</w><w>from</w><w>the</w><w>digitization</w><w>process</w><w>available</w><w>to</w><w>users</w><pc>.</pc></s><s xml:id="s_kgzGEO" corresp="{'extrair-paginas-ilustradas-com-python': ['s_bNwvww']}"><w>The</w><w>most</w><w>important</w><w>of</w><w>these</w><w>for</w><w>our</w><w>purposes</w><w>is</w><w>the</w><w>Abbyy</w><w>XML</w><w>file</w><pc>.</pc></s><s xml:id="s_rBvx6d" corresp="{'extrair-paginas-ilustradas-com-python': ['s_LZiMcu']}"><w>Abbyy</w><w>is</w><w>a</w><w>Russian</w><w>company</w><w>whose</w><w>FineReader</w><w>software</w><w>dominates</w><w>the</w><w>OCR</w><w>market</w><pc>.</pc></s></p><p><s xml:id="s_3aDB6s" corresp="{'extrair-paginas-ilustradas-com-python': ['s_QpsfB1']}"><w>All</w><w>recent</w><w>versions</w><w>of</w><w>FineReader</w><w>produce</w><w>an</w><ref target="https://en.wikipedia.org/wiki/XML"><w>XML</w><w>document</w></ref><w>that</w><w>associates</w><w>different</w><w>``</w><w>blocks</w><w>''</w><w>with</w><w>each</w><w>page</w><w>in</w><w>the</w><w>scanned</w><w>document</w><pc>.</pc></s><s xml:id="s_hZijrs" corresp="{'extrair-paginas-ilustradas-com-python': ['s_bXXHtS']}"><w>The</w><w>most</w><w>common</w><w>type</w><w>of</w><w>block</w><w>is</w><code rend="inline"><w>Text</w></code><w>but</w><w>there</w><w>are</w><code rend="inline"><w>Picture</w></code><w>blocks</w><w>as</w><w>well</w><pc>.</pc></s><s xml:id="s_USMkxm" corresp="{'extrair-paginas-ilustradas-com-python': ['s_M0i8Ls']}"><w>Here</w><w>is</w><w>an</w><w>example</w><w>block</w><w>taken</w><w>from</w><w>an</w><w>IA</w><w>Abbyy</w><w>XML</w><w>file</w><pc>.</pc></s><s xml:id="s_Z4V85b" corresp="{'extrair-paginas-ilustradas-com-python': ['s_v0jaeQ']}"><w>The</w><w>top-left</w><w>(</w><w>``</w><w>t</w><w>''</w><w>and</w><w>``</w><w>l</w><w>''</w><w>)</w><w>and</w><w>bottom-right</w><w>(</w><w>``</w><w>b</w><w>''</w><w>and</w><w>``</w><w>r</w><w>''</w><w>)</w><w>corners</w><w>are</w><w>enough</w><w>to</w><w>identify</w><w>the</w><w>rectangular</w><w>block</w><w>region</w><pc>.</pc></s></p><ab><code lang="language-xml" xml:id="code_extracting-illustrated-pages_14" corresp="code_extracting-illustrated-pages_14.txt" rend="block"/></ab><p><s xml:id="s_fsgf6x" corresp="{'extrair-paginas-ilustradas-com-python': ['s_fCEZow']}"><w>The</w><w>IA</w><w>equivalent</w><w>to</w><w>looking</w><w>for</w><code rend="inline"><w>IMAGE_ON_PAGE</w></code><w>tags</w><w>in</w><w>HT</w><w>is</w><w>parsing</w><w>the</w><w>Abbyy</w><w>XML</w><w>file</w><w>and</w><w>iterating</w><w>over</w><w>each</w><w>page</w><pc>.</pc></s><s xml:id="s_xwzsDS" corresp="{'extrair-paginas-ilustradas-com-python': ['s_mO6FHx']}"><w>If</w><w>there</w><w>is</w><w>at</w><w>least</w><w>one</w><code rend="inline"><w>Picture</w></code><w>block</w><w>on</w><w>that</w><w>page</w><w>,</w><w>the</w><w>page</w><w>is</w><w>flagged</w><w>as</w><w>possibly</w><w>containing</w><w>an</w><w>image</w><pc>.</pc></s></p><p><s xml:id="s_8wf6Qx" corresp="{'extrair-paginas-ilustradas-com-python': ['s_SyjfDz']}"><w>While</w><w>HT</w><w>'s</w><code rend="inline"><w>IMAGE_ON_PAGE</w></code><w>feature</w><w>contains</w><w>no</w><w>information</w><w>about</w><w>the</w><emph><w>location</w></emph><w>of</w><w>that</w><w>image</w><w>,</w><w>the</w><code rend="inline"><w>Picture</w></code><w>blocks</w><w>in</w><w>the</w><w>XML</w><w>file</w><w>are</w><w>associated</w><w>with</w><w>a</w><w>rectangular</w><w>region</w><w>on</w><w>the</w><w>page</w><pc>.</pc></s><s xml:id="s_MdRaS1" corresp="{'extrair-paginas-ilustradas-com-python': ['s_9nX2Ak']}"><w>However</w><w>,</w><w>since</w><w>FineReader</w><w>specializes</w><w>in</w><w>recognizing</w><w>letters</w><w>from</w><w>Western</w><w>character</w><w>sets</w><w>,</w><w>it</w><w>is</w><w>much</w><w>less</w><w>accurate</w><w>at</w><w>identifying</w><w>image</w><w>regions</w><pc>.</pc></s><s xml:id="s_QVM4FA" corresp="{'extrair-paginas-ilustradas-com-python': ['s_XnDzWL']}"><w>Leetaru</w><w>'s</w><w>project</w><w>(</w><w>see</w><w>Overview</w><w>)</w><w>used</w><w>the</w><w>region</w><w>coordinates</w><w>to</w><w>crop</w><w>pictures</w><w>,</w><w>but</w><w>in</w><w>this</w><w>lesson</w><w>we</w><w>will</w><w>simply</w><w>download</w><w>the</w><w>whole</w><w>page</w><pc>.</pc></s></p><p><s xml:id="s_NOjpLz" corresp="{'extrair-paginas-ilustradas-com-python': ['s_0fMzth']}"><w>Part</w><w>of</w><w>the</w><w>intellectual</w><w>fun</w><w>of</w><w>this</w><w>lesson</w><w>is</w><w>using</w><w>a</w><w>noisy</w><w>dataset</w><w>(</w><w>OCR</w><w>block</w><w>tags</w><w>)</w><w>for</w><w>a</w><w>largely</w><w>unintended</w><w>purpose</w><w>:</w><w>identifying</w><w>pictures</w><w>and</w><w>not</w><w>words</w><pc>.</pc></s><s xml:id="s_mEyK5t" corresp="{'extrair-paginas-ilustradas-com-python': ['s_nmdLuN']}"><w>At</w><w>some</w><w>point</w><w>,</w><w>it</w><w>will</w><w>become</w><w>computationally</w><w>feasible</w><w>to</w><w>run</w><w>deep</w><w>learning</w><w>models</w><w>on</w><w>every</w><w>raw</w><w>page</w><w>image</w><w>in</w><w>a</w><w>volume</w><w>and</w><w>pick</w><w>out</w><w>the</w><w>desired</w><w>type</w><w>(</w><w>s</w><w>)</w><w>of</w><w>picture</w><w>(</w><w>s</w><w>)</w><pc>.</pc></s><s xml:id="s_gV6DOh" corresp="{'extrair-paginas-ilustradas-com-python': ['s_JQ62D1']}"><w>But</w><w>since</w><w>most</w><w>pages</w><w>in</w><w>most</w><w>volumes</w><w>are</w><w>unillustrated</w><w>,</w><w>that</w><w>is</w><w>an</w><w>expensive</w><w>task</w><pc>.</pc></s><s xml:id="s_E0odTD" corresp="{'extrair-paginas-ilustradas-com-python': ['s_2bSFKP']}"><w>For</w><w>now</w><w>,</w><w>it</w><w>makes</w><w>more</w><w>sense</w><w>to</w><w>leverage</w><w>the</w><w>existing</w><w>data</w><w>we</w><w>have</w><w>from</w><w>the</w><w>OCR</w><w>ingest</w><w>process</w><pc>.</pc></s></p><p><s xml:id="s_0M6J2p" corresp="{'extrair-paginas-ilustradas-com-python': ['s_HQV5hH']}"><w>For</w><w>more</w><w>information</w><w>on</w><w>how</w><w>OCR</w><w>itself</w><w>works</w><w>and</w><w>interacts</w><w>with</w><w>the</w><w>scan</w><w>process</w><w>,</w><w>please</w><w>see</w><w>Mila</w><w>Oiva</w><w>'s</w><w>PH</w><w>lesson</w><ref target="/en/lessons/retired/OCR-with-Tesseract-and-ScanTailor"><w>OCR</w><w>with</w><w>Tesseract</w><w>and</w><w>ScanTailor</w></ref><pc>.</pc></s><s xml:id="s_zqBwx7" corresp="{'extrair-paginas-ilustradas-com-python': ['s_aLLVxf']}"><w>Errors</w><w>can</w><w>crop</w><w>up</w><w>due</w><w>to</w><w>skewing</w><w>,</w><w>artefacts</w><w>,</w><w>and</w><w>many</w><w>other</w><w>problems</w><pc>.</pc></s><s xml:id="s_wuCUxT" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Xyl4Ad']}"><w>These</w><w>errors</w><w>end</w><w>up</w><w>affecting</w><w>the</w><w>reliability</w><w>and</w><w>precision</w><w>of</w><w>the</w><w>``</w><w>Picture</w><w>''</w><w>blocks</w><pc>.</pc></s><s xml:id="s_mfYTXj" corresp="{'extrair-paginas-ilustradas-com-python': ['s_viaIQk']}"><w>In</w><w>many</w><w>cases</w><w>,</w><w>Abbyy</w><w>will</w><w>estimate</w><w>that</w><w>blank</w><w>or</w><w>discolored</w><w>pages</w><w>are</w><w>actually</w><w>pictures</w><pc>.</pc></s><s xml:id="s_EA6hB0" corresp="{'extrair-paginas-ilustradas-com-python': ['s_xyzzRx']}"><w>These</w><w>incorrect</w><w>block</w><w>tags</w><w>,</w><w>while</w><w>undesirable</w><w>,</w><w>can</w><w>be</w><w>dealt</w><w>with</w><w>using</w><w>retrained</w><w>convolutional</w><w>neural</w><w>networks</w><pc>.</pc></s><s xml:id="s_uA8sLU" corresp="{'extrair-paginas-ilustradas-com-python': ['s_MfWTi5']}"><w>Think</w><w>of</w><w>the</w><w>page</w><w>images</w><w>downloaded</w><w>in</w><w>this</w><w>lesson</w><w>as</w><w>a</w><w>first</w><w>pass</w><w>in</w><w>a</w><w>longer</w><w>process</w><w>of</w><w>obtaining</w><w>a</w><w>clean</w><w>and</w><w>usable</w><w>dataset</w><w>of</w><w>historical</w><w>illustrations</w><pc>.</pc></s></p></div><div type="3" n="6.4"><head><s xml:id="s_tgGKbN" corresp="{'extrair-paginas-ilustradas-com-python': ['s_uM7Qe1']}"><w>Code</w><w>Walk-through</w></s></head><div type="4" n="6.4.1"><head><s xml:id="s_WENs3j" corresp="{'extrair-paginas-ilustradas-com-python': ['s_6qbFWY']}"><w>Find</w><w>Pictures</w></s></head><p><s xml:id="s_p5w47o" corresp="{'extrair-paginas-ilustradas-com-python': ['s_bQPFgj']}"><w>Just</w><w>as</w><w>with</w><w>HT</w><w>,</w><w>the</w><w>core</w><w>function</w><w>for</w><w>IA</w><w>is</w><code rend="inline"><w>ia_picture_download</w><w>(</w><w>item_id</w><w>,</w><w>out_dir=None</w><w>)</w></code><pc>.</pc></s></p><p><s xml:id="s_owUdSs" corresp="{'extrair-paginas-ilustradas-com-python': ['s_OY1Nrf']}"><w>Since</w><w>it</w><w>involves</w><w>file</w><w>I/O</w><w>,</w><w>the</w><w>process</w><w>for</w><w>geting</w><w>the</w><code rend="inline"><w>img_pages</w></code><w>list</w><w>is</w><w>more</w><w>complicated</w><w>than</w><w>that</w><w>for</w><w>HT</w><pc>.</pc></s><s xml:id="s_MRvxWn" corresp="{'extrair-paginas-ilustradas-com-python': ['s_JOeHG8']}"><w>Using</w><w>the</w><w>command</w><w>line</w><w>utility</w><code rend="inline"><w>ia</w></code><w>(</w><w>which</w><w>is</w><w>installed</w><w>with</w><w>the</w><w>library</w><w>)</w><w>,</w><w>you</w><w>can</w><w>get</w><w>a</w><w>sense</w><w>of</w><w>the</w><w>available</w><w>metadata</w><w>files</w><w>for</w><w>a</w><w>volume</w><pc>.</pc></s><s xml:id="s_GxdnyI" corresp="{'extrair-paginas-ilustradas-com-python': ['s_D9bUpQ']}"><w>With</w><w>very</w><w>few</w><w>exceptions</w><w>,</w><w>a</w><w>file</w><w>with</w><w>format</w><w>``</w><w>Abbyy</w><w>GZ</w><w>''</w><w>should</w><w>be</w><w>available</w><w>for</w><w>volumes</w><w>with</w><w>media</w><w>type</w><code rend="inline"><w>text</w></code><w>on</w><w>Internet</w><w>Archive</w><pc>.</pc></s></p><p><s xml:id="s_7wk2Qb" corresp="{'extrair-paginas-ilustradas-com-python': ['s_ftnhTv']}"><w>These</w><w>files</w><w>,</w><w>even</w><w>when</w><w>compressed</w><w>,</w><w>can</w><w>easily</w><w>be</w><w>hundreds</w><w>of</w><w>megabytes</w><w>in</w><w>size</w><pc>!</pc></s><s xml:id="s_nfpuSx" corresp="{'extrair-paginas-ilustradas-com-python': ['s_VlBAHG']}"><w>If</w><w>there</w><w>is</w><w>an</w><w>Abbyy</w><w>file</w><w>for</w><w>the</w><w>volume</w><w>,</w><w>we</w><w>get</w><w>its</w><w>name</w><w>and</w><w>then</w><w>download</w><w>it</w><pc>.</pc></s><s xml:id="s_kconpg" corresp="{'extrair-paginas-ilustradas-com-python': ['s_fRWCoW']}"><w>The</w><code rend="inline"><w>ia.download</w><w>(</w><w>)</w></code><w>call</w><w>uses</w><w>some</w><w>helpful</w><w>parameters</w><w>to</w><w>ignore</w><w>the</w><w>request</w><w>if</w><w>the</w><w>file</w><w>already</w><w>exists</w><w>and</w><w>,</w><w>if</w><w>not</w><w>,</w><w>download</w><w>it</w><w>without</w><w>creating</w><w>a</w><w>nested</w><w>directory</w><pc>.</pc></s><s xml:id="s_DLmQEo" corresp="{'extrair-paginas-ilustradas-com-python': ['s_mZmeTR']}"><w>To</w><w>save</w><w>space</w><w>,</w><w>we</w><w>delete</w><w>the</w><w>Abbyy</w><w>file</w><w>after</w><w>parsing</w><w>it</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_extracting-illustrated-pages_15" corresp="code_extracting-illustrated-pages_15.txt" rend="block"/></ab><p><s xml:id="s_hq8EYM" corresp="{'extrair-paginas-ilustradas-com-python': ['s_VsLyUc']}"><w>Once</w><w>we</w><w>have</w><w>the</w><w>file</w><w>,</w><w>we</w><w>need</w><w>to</w><w>parse</w><w>the</w><w>XML</w><w>using</w><w>the</w><w>standard</w><w>Python</w><w>library</w><pc>.</pc></s><s xml:id="s_2PdNny" corresp="{'extrair-paginas-ilustradas-com-python': ['s_VLRJJo']}"><w>We</w><w>take</w><w>advantage</w><w>of</w><w>the</w><w>fact</w><w>that</w><w>we</w><w>can</w><w>open</w><w>the</w><w>compressed</w><w>file</w><w>directly</w><w>with</w><w>the</w><code rend="inline"><w>gzip</w></code><w>library</w><pc>.</pc></s><s xml:id="s_jD2jzK" corresp="{'extrair-paginas-ilustradas-com-python': ['s_wf6SBB']}"><w>Abbyy</w><w>files</w><w>are</w><w>zero-indexed</w><w>so</w><w>the</w><w>first</w><w>page</w><w>in</w><w>the</w><w>scan</w><w>sequence</w><w>has</w><w>index</w><w>0</w><pc>.</pc></s><s xml:id="s_5GpC65" corresp="{'extrair-paginas-ilustradas-com-python': ['s_Oz9hBB']}"><w>However</w><w>,</w><w>we</w><w>have</w><w>to</w><w>filter</w><w>out</w><w>0</w><w>since</w><w>it</w><w>can</w><w>not</w><w>be</w><w>requested</w><w>from</w><w>IA</w><pc>.</pc></s><s xml:id="s_jrJHwZ" corresp="{'extrair-paginas-ilustradas-com-python': ['s_kWOqF2']}"><w>IA</w><w>'s</w><w>exclusion</w><w>of</w><w>index</w><w>0</w><w>is</w><w>not</w><w>documented</w><w>anywhere</w><w>;</w><w>rather</w><w>,</w><w>I</w><w>found</w><w>out</w><w>through</w><w>trial</w><w>and</w><w>error</w><pc>.</pc></s><s xml:id="s_ZE3acJ" corresp="{'extrair-paginas-ilustradas-com-python': ['s_JmNUZE']}"><w>If</w><w>you</w><w>see</w><w>a</w><w>hard-to-explain</w><w>error</w><w>message</w><w>,</w><w>try</w><w>to</w><w>track</w><w>down</w><w>the</w><w>source</w><w>and</w><w>do</w><w>n't</w><w>be</w><w>afraid</w><w>to</w><w>ask</w><w>for</w><w>help</w><w>,</w><w>whether</w><w>from</w><w>someone</w><w>with</w><w>relevant</w><w>experience</w><w>or</w><w>at</w><w>the</w><w>organization</w><w>itself</w><pc>.</pc></s></p><ab><code lang="language-Python" xml:id="code_extracting-illustrated-pages_16" corresp="code_extracting-illustrated-pages_16.txt" rend="block"/></ab></div><div type="4" n="6.4.2"><head><s xml:id="s_8WP5m1" corresp="{'extrair-paginas-ilustradas-com-python': ['s_ElXe0p']}"><w>Download</w><w>Images</w></s></head><p><s xml:id="s_eBiILl" corresp="{'extrair-paginas-ilustradas-com-python': ['s_BXVKle']}"><w>IA</w><w>'s</w><w>Python</w><w>wrapper</w><w>does</w><w>not</w><w>provide</w><w>a</w><w>single-page</w><w>download</w><w>function—only</w><w>bulk</w><pc>.</pc></s><s xml:id="s_M59CED" corresp="{'extrair-paginas-ilustradas-com-python': ['s_PAx7bV']}"><w>This</w><w>means</w><w>that</w><w>we</w><w>will</w><w>use</w><w>IA</w><w>'s</w><w>RESTful</w><w>API</w><w>to</w><w>get</w><w>specific</w><w>pages</w><pc>.</pc></s><s xml:id="s_2gQfOs" corresp="{'extrair-paginas-ilustradas-com-python': ['s_qCVuAK']}"><w>First</w><w>we</w><w>construct</w><w>a</w><w>URL</w><w>for</w><w>each</w><w>page</w><w>that</w><w>we</w><w>need</w><pc>.</pc></s><s xml:id="s_j9n4YO" corresp="{'extrair-paginas-ilustradas-com-python': ['s_gwkQ0N']}"><w>Then</w><w>we</w><w>use</w><w>the</w><code rend="inline"><w>requests</w></code><w>library</w><w>to</w><w>send</w><w>an</w><w>HTTP</w><code rend="inline"><w>GET</w></code><w>request</w><w>and</w><w>,</w><w>if</w><w>everything</w><w>goes</w><w>well</w><w>(</w><w>i.e</w><pc>.</pc></s><s xml:id="s_ekSfOT"><w>the</w><w>code</w><w>200</w><w>is</w><w>returned</w><w>in</w><w>the</w><w>response</w><w>)</w><w>,</w><w>we</w><w>write</w><w>out</w><w>the</w><w>contents</w><w>of</w><w>the</w><w>response</w><w>to</w><w>a</w><w>JPEG</w><w>file</w><pc>.</pc></s></p><p><s xml:id="s_U04oqM" corresp="{'extrair-paginas-ilustradas-com-python': ['s_0YzIJt']}"><w>IA</w><w>has</w><w>been</w><w>working</w><w>on</w><w>an</w><ref target="https://iiif.archivelab.org/iiif/documentation"><w>alpha</w><w>version</w></ref><w>of</w><w>an</w><w>API</w><w>for</w><w>image</w><w>cropping</w><w>and</w><w>resizing</w><w>that</w><w>conforms</w><w>to</w><w>the</w><w>standards</w><w>of</w><w>the</w><w>International</w><w>Image</w><w>Interoperability</w><w>Framework</w><w>(</w><ref target="https://iiif.io/"><w>IIIF</w></ref><w>)</w><pc>.</pc></s><s xml:id="s_sbU2Wh" corresp="{'extrair-paginas-ilustradas-com-python': ['s_ytldNc']}"><w>IIIF</w><w>represents</w><w>a</w><w>vast</w><w>improvement</w><w>on</w><w>the</w><w>old</w><w>method</w><w>for</w><w>single-page</w><w>downloads</w><w>which</w><w>required</w><w>downloading</w><w>JP2</w><w>files</w><w>,</w><w>a</w><w>largely</w><w>unsupported</w><w>archival</w><w>format</w><pc>.</pc></s><s xml:id="s_WLs1Y2" corresp="{'extrair-paginas-ilustradas-com-python': ['s_4jnRzM']}"><w>Now</w><w>it</w><w>'s</w><w>extremely</w><w>simple</w><w>to</w><w>get</w><w>a</w><w>single</w><w>page</w><w>JPEG</w><w>:</w></s></p><ab><code lang="language-Python" xml:id="code_extracting-illustrated-pages_17" corresp="code_extracting-illustrated-pages_17.txt" rend="block"/></ab></div></div></div><div type="2" n="7"><head><s xml:id="s_203Yvr" corresp="{'extrair-paginas-ilustradas-com-python': ['s_qei7Nc']}"><w>Next</w><w>Steps</w></s></head><p><s xml:id="s_Ag4OKy" corresp="{'extrair-paginas-ilustradas-com-python': ['s_X9gJIX']}"><w>Once</w><w>you</w><w>understand</w><w>the</w><w>main</w><w>functions</w><w>and</w><w>the</w><w>data</w><w>unpacking</w><w>code</w><w>in</w><w>the</w><w>notebooks</w><w>,</w><w>feel</w><w>free</w><w>to</w><w>run</w><w>the</w><w>cells</w><w>in</w><w>sequence</w><w>or</w><w>``</w><w>Run</w><w>All</w><w>''</w><w>and</w><w>watch</w><w>the</w><w>picture</w><w>pages</w><w>roll</w><w>in</w><pc>.</pc></s><s xml:id="s_RGBjAw" corresp="{'extrair-paginas-ilustradas-com-python': ['s_KRHQAE']}"><w>You</w><w>are</w><w>encouraged</w><w>to</w><w>adapt</w><w>these</w><w>scripts</w><w>and</w><w>functions</w><w>for</w><w>your</w><w>own</w><w>research</w><w>questions</w><pc>.</pc></s></p></div></body>
    </text>
</TEI>
