<TEI xmlns="http://www.tei-c.org/ns/1.0" xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="downloading-multiple-records-using-query-strings" type="original" xml:base="downloading-multiple-records-using-query-strings/downloading-multiple-records-using-query-strings/downloading-multiple-records-using-query-strings.xml">
    <teiHeader>
        <fileDesc>
            <titleStmt>
                <title>Downloading Multiple Records Using Query Strings</title>
                <author role="original_author">Adam Crymble</author>
                <editor role="reviewers">
                    <persName>Luke Bergmann</persName>
                    <persName>Sharon Howard</persName>
                    <persName>Frederik Elwert</persName>
                </editor>
                <editor role="editors">Fred Gibbs</editor>
            </titleStmt>
            <publicationStmt>
                <distributor>Programming Historian</distributor>
                <idno type="doi">10.46430/phen0005</idno>
                <date type="published">11/11/2012</date>
            </publicationStmt>
            <sourceDesc>
                <p>Born digital, in a markdown format. This lesson is original. Available translations are the following:<ref type="translations" target="#download-multiplos-registros-query-strings #descarga-multiples-registros-usando-cadenas-de-consulta"/>
                </p>
            </sourceDesc>
        </fileDesc>
        <profileDesc>
            <abstract>
                <p>Downloading a single record from a website is easy, but downloading many records at a time – an increasingly frequent need for a historian – is much more efficient using a programming language such as Python. In this lesson, we will write a program that will download a series of records from the Old Bailey Online using custom search criteria, and save them to a directory on our computer.</p>
            </abstract>
            <textClass>
                <keywords>
                    <term xml:lang="en">web-scraping</term>
                </keywords>
            </textClass>
        </profileDesc>
    </teiHeader>
    <text xml:lang="en">
        <body><div type="2" n="1"><head><s xml:id="s_qovZJJ"><w>Module</w><w>Goals</w></s></head><p><s xml:id="s_zJ4Fm3"><w>Downloading</w><w>a</w><w>single</w><w>record</w><w>from</w><w>a</w><w>website</w><w>is</w><w>easy</w><w>,</w><w>but</w><w>downloading</w><w>many</w><w>records</w><w>at</w><w>a</w><w>time</w><w>–</w><w>an</w><w>increasingly</w><w>frequent</w><w>need</w><w>for</w><w>a</w><w>historian</w><w>–</w><w>is</w><w>much</w><w>more</w><w>efficient</w><w>using</w><w>a</w><w>programming</w><w>language</w><w>such</w><w>as</w><w>Python</w><pc>.</pc></s><s xml:id="s_03LctB"><w>In</w><w>this</w><w>lesson</w><w>,</w><w>we</w><w>will</w><w>write</w><w>a</w><w>program</w><w>that</w><w>will</w><w>download</w><w>a</w><w>series</w><w>of</w><w>records</w><w>from</w><w>the</w><ref target="http://www.oldbaileyonline.org/"><w>Old</w><w>Bailey</w><w>Online</w></ref><w>using</w><w>custom</w><w>search</w><w>criteria</w><w>,</w><w>and</w><w>save</w><w>them</w><w>to</w><w>a</w><w>directory</w><w>on</w><w>our</w><w>computer</w><pc>.</pc></s><s xml:id="s_aPmWVp"><w>This</w><w>process</w><w>involves</w><w>interpreting</w><w>and</w><w>manipulating</w><w>URL</w><emph><w>Query</w><w>Strings</w></emph><pc>.</pc></s><s xml:id="s_XFc60X"><w>In</w><w>this</w><w>case</w><w>,</w><w>the</w><w>tutorial</w><w>will</w><w>seek</w><w>to</w><w>download</w><w>sources</w><w>that</w><w>contain</w><w>references</w><w>to</w><w>people</w><w>of</w><w>African</w><w>descent</w><w>that</w><w>were</w><w>published</w><w>in</w><w>the</w><emph><w>Old</w><w>Bailey</w><w>Proceedings</w></emph><w>between</w><w>1700</w><w>and</w><w>1750</w><pc>.</pc></s></p><p style="alert alert-warning"><s xml:id="s_laJ3tW"><w>The</w><w>examples</w><w>in</w><w>this</w><w>lesson</w><w>include</w><w>historic</w><w>racialized</w><w>language</w><w>that</w><w>readers</w><w>may</w><w>find</w><w>offensive</w><pc>.</pc></s><s xml:id="s_c1U4Fk"><w>The</w><w>author</w><w>does</w><w>not</w><w>condone</w><w>the</w><w>use</w><w>of</w><w>this</w><w>language</w><w>but</w><w>has</w><w>tried</w><w>to</w><w>use</w><w>it</w><w>in</w><w>its</w><w>historic</w><w>context</w><w>,</w><w>recognizing</w><w>that</w><w>it</w><w>is</w><w>otherwise</w><w>impossible</w><w>to</w><w>find</w><w>the</w><w>desired</w><w>materials</w><w>of</w><w>the</w><w>case</w><w>study</w><pc>.</pc></s><s xml:id="s_OuRud6"><w>Anyone</w><w>teaching</w><w>with</w><w>this</w><w>material</w><w>is</w><w>advised</w><w>to</w><w>take</w><w>a</w><w>sensitive</w><w>approach</w><w>towards</w><w>the</w><w>language</w><w>and</w><w>to</w><w>apply</w><w>best</w><w>practices</w><w>when</w><w>teaching</w><w>about</w><w>race</w><pc>.</pc></s><s xml:id="s_hDMNid"><w>The</w><w>author</w><w>recommends</w><w>the</w><w>many</w><w>resources</w><w>from</w><w>Teaching</w><w>Tolerance</w><w>(</w><w>https</w><w>:</w><w>//www.tolerance.org</w><w>)</w><w>;</w><w>Peggy</w><w>McIntosh</w><w>,</w><w>‘</w><w>White</w><w>Privilege</w><w>:</w><w>Unpacking</w><w>the</w><w>Invisible</w><w>Knapsack</w><w>’</w><w>*</w><w>Peace</w><w>and</w><w>Freedom</w><w>Magazine</w><w>*</w><w>,</w><w>(</w><w>1989</w><w>)</w><w>,</w><w>10-12</w><w>;</w><w>Binyavanga</w><w>Wainaina</w><w>,</w><w>‘</w><w>How</w><w>to</w><w>Write</w><w>About</w><w>Africa</w><w>’</w><w>,</w><w>*</w><w>Granta</w><w>*</w><w>(</w><w>92</w><w>)</w><w>:</w><w>2006</w><pc>.</pc></s></p></div><div type="2" n="2"><head><s xml:id="s_0Fumt1"><w>For</w><w>Whom</w><w>is</w><w>this</w><w>Useful</w><pc>?</pc></s></head><p><s xml:id="s_fG5wHu"><w>Automating</w><w>the</w><w>process</w><w>of</w><w>downloading</w><w>records</w><w>from</w><w>an</w><w>online</w><w>database</w><w>will</w><w>be</w><w>useful</w><w>for</w><w>anyone</w><w>who</w><w>works</w><w>with</w><w>historical</w><w>sources</w><w>that</w><w>are</w><w>stored</w><w>online</w><w>in</w><w>an</w><w>orderly</w><w>and</w><w>accessible</w><w>fashion</w><w>and</w><w>who</w><w>wishes</w><w>to</w><w>save</w><w>copies</w><w>of</w><w>those</w><w>sources</w><w>on</w><w>their</w><w>own</w><w>computer</w><pc>.</pc></s><s xml:id="s_BJzIXa"><w>It</w><w>is</w><w>particularly</w><w>useful</w><w>for</w><w>someone</w><w>who</w><w>wants</w><w>to</w><w>download</w><w>many</w><w>specific</w><w>records</w><w>,</w><w>rather</w><w>than</w><w>just</w><w>a</w><w>handful</w><pc>.</pc></s><s xml:id="s_TOfwnE"><w>If</w><w>you</w><w>want</w><w>to</w><w>download</w><emph><w>all</w></emph><w>or</w><emph><w>most</w></emph><w>of</w><w>the</w><w>records</w><w>in</w><w>a</w><w>particular</w><w>database</w><w>,</w><w>you</w><w>may</w><w>find</w><w>Ian</w><w>Milligan</w><w>’</w><w>s</w><w>tutorial</w><w>on</w><ref target="/lessons/automated-downloading-with-wget"><w>Automated</w><w>Downloading</w><w>with</w><w>WGET</w></ref><w>more</w><w>suitable</w><pc>.</pc></s></p><p><s xml:id="s_27wI6v"><w>The</w><w>present</w><w>tutorial</w><w>will</w><w>allow</w><w>you</w><w>to</w><w>download</w><w>discriminately</w><w>,</w><w>isolating</w><w>specific</w><w>records</w><w>that</w><w>meet</w><w>your</w><w>needs</w><pc>.</pc></s><s xml:id="s_SVgrKK"><w>Downloading</w><w>multiple</w><w>sources</w><w>automatically</w><w>saves</w><w>considerable</w><w>time</w><pc>.</pc></s><s xml:id="s_ZNFAAr"><w>What</w><w>you</w><w>do</w><w>with</w><w>the</w><w>downloaded</w><w>sources</w><w>depends</w><w>on</w><w>your</w><w>research</w><w>goals</w><pc>.</pc></s><s xml:id="s_zM9RCj"><w>You</w><w>may</w><w>wish</w><w>to</w><w>create</w><w>visualizations</w><w>or</w><w>perform</w><w>various</w><w>data</w><w>analysis</w><w>methods</w><w>,</w><w>or</w><w>simply</w><w>reformat</w><w>them</w><w>to</w><w>make</w><w>browsing</w><w>easier</w><pc>.</pc></s><s xml:id="s_yBHGxG"><w>Or</w><w>,</w><w>you</w><w>may</w><w>just</w><w>want</w><w>to</w><w>keep</w><w>a</w><w>backup</w><w>copy</w><w>so</w><w>you</w><w>can</w><w>access</w><w>them</w><w>without</w><w>Internet</w><w>access</w><pc>.</pc></s></p><p><s xml:id="s_B9l6wq"><w>This</w><w>lesson</w><w>is</w><w>for</w><w>intermediate</w><w>Python</w><w>users</w><pc>.</pc></s><s xml:id="s_reHTb0"><w>If</w><w>you</w><w>have</w><w>not</w><w>already</w><w>tried</w><w>the</w><ref target="/lessons/introduction-and-installation"><w>Python</w><w>Programming</w><w>Basics</w></ref><w>lessons</w><w>,</w><w>you</w><w>may</w><w>find</w><w>that</w><w>a</w><w>useful</w><w>starting</w><w>point</w><pc>.</pc></s></p></div><div type="2" n="3"><head><s xml:id="s_SnRfuD"><w>Applying</w><w>our</w><w>Historical</w><w>Knowledge</w></s></head><p><s xml:id="s_QiAOOo"><w>In</w><w>this</w><w>lesson</w><w>,</w><w>we</w><w>are</w><w>trying</w><w>to</w><w>create</w><w>our</w><w>own</w><w>corpus</w><w>of</w><w>cases</w><w>related</w><w>to</w><w>people</w><w>of</w><w>African</w><w>descent</w><pc>.</pc></s><s xml:id="s_mwiH5R"><w>From</w><ref target="http://www.oldbaileyonline.org/browse.jsp?id=t17800628-33&amp;div=t17800628-33"><w>Benjamin</w><w>Bowsey</w><w>’</w><w>s</w><w>case</w></ref><w>at</w><w>the</w><w>Old</w><w>Bailey</w><w>in</w><w>1780</w><w>,</w><w>we</w><w>might</w><w>note</w><w>that</w><w>“</w><w>black</w><w>”</w><w>can</w><w>be</w><w>a</w><w>useful</w><w>keyword</w><w>for</w><w>us</w><w>to</w><w>use</w><w>for</w><w>locating</w><w>other</w><w>cases</w><w>involving</w><w>defendants</w><w>of</w><w>African</w><w>descent</w><pc>.</pc></s><s xml:id="s_RNjrMf"><w>However</w><w>,</w><w>when</w><w>we</w><w>search</w><w>for</w><w>“</w><w>black</w><w>”</w><w>on</w><w>the</w><w>Old</w><w>Bailey</w><w>website</w><w>,</w><w>we</w><w>find</w><w>it</w><w>often</w><w>refers</w><w>to</w><w>other</w><w>uses</w><w>of</w><w>the</w><w>word</w><w>:</w><w>black</w><w>horses</w><w>,</w><w>or</w><w>black</w><w>cloth</w><pc>.</pc></s><s xml:id="s_86TqDD"><w>The</w><w>task</w><w>of</w><w>disambiguating</w><w>this</w><w>use</w><w>of</w><w>language</w><w>will</w><w>have</w><w>to</w><w>wait</w><w>for</w><w>another</w><w>lesson</w><pc>.</pc></s><s xml:id="s_mX0Ekd"><w>For</w><w>now</w><w>,</w><w>let</w><w>’</w><w>s</w><w>turn</w><w>to</w><w>easier</w><w>cases</w><pc>.</pc></s><s xml:id="s_CTII4y"><w>As</w><w>historians</w><w>,</w><w>we</w><w>can</w><w>probably</w><w>think</w><w>of</w><w>keywords</w><w>of</w><w>historic</w><w>racialised</w><w>terms</w><w>related</w><w>to</w><w>African</w><w>descendants</w><w>that</w><w>would</w><w>be</w><w>worth</w><w>pursuing</w><pc>.</pc></s><s xml:id="s_97hP4b"><w>The</w><w>infamous</w><w>“</w><w>n-word</w><w>”</w><w>of</w><w>course</w><w>is</w><w>not</w><w>useful</w><w>,</w><w>as</w><w>this</w><w>term</w><w>did</w><w>not</w><w>come</w><w>into</w><w>regular</w><w>usage</w><w>until</w><w>the</w><w>mid-nineteenth</w><w>century</w><pc>.</pc></s><s xml:id="s_0422d4"><w>Other</w><w>racialised</w><w>language</w><w>such</w><w>as</w><w>“</w><w>negro</w><w>”</w><w>and</w><w>“</w><w>mulatto</w><w>”</w><w>are</w><w>however</w><w>,</w><w>much</w><w>more</w><w>relevant</w><w>to</w><w>the</w><w>early</w><w>eighteenth</w><w>century</w><pc>.</pc></s><s xml:id="s_4O0dvy"><w>These</w><w>keywords</w><w>are</w><w>less</w><w>ambiguous</w><w>than</w><w>“</w><w>black</w><w>”</w><w>and</w><w>are</w><w>much</w><w>more</w><w>likely</w><w>to</w><w>be</w><w>immediate</w><w>references</w><w>to</w><w>people</w><w>in</w><w>our</w><w>target</w><w>demographic</w><pc>.</pc></s><s xml:id="s_Hz1MsZ"><w>If</w><w>we</w><w>try</w><w>these</w><w>two</w><w>terms</w><w>in</w><w>separate</w><w>simple</w><w>searches</w><w>on</w><w>the</w><w>Old</w><w>Bailey</w><w>website</w><w>,</w><w>we</w><w>get</w><w>results</w><w>like</w><w>in</w><w>these</w><w>screenshots</w><w>:</w></s></p><figure><desc><s xml:id="s_X2BpVC"><w>Search</w><w>results</w><w>for</w><w>'negro</w><w>'</w><w>in</w><w>the</w><w>Old</w><w>Bailey</w><w>Online</w></s></desc><graphic url="SearchResultsNegro.png"/></figure><figure><desc><s xml:id="s_xtsrBM"><w>Search</w><w>results</w><w>for</w><w>'mulatto</w><w>'</w><w>in</w><w>the</w><w>Old</w><w>Bailey</w><w>Online</w></s></desc><graphic url="SearchResultsMulatto.png"/></figure><p><s xml:id="s_hdSR6z"><w>After</w><w>glancing</w><w>through</w><w>these</w><w>search</w><w>results</w><w>,</w><w>it</w><w>seems</w><w>clear</w><w>that</w><w>these</w><w>are</w><w>references</w><w>to</w><w>people</w><w>,</w><w>rather</w><w>than</w><w>horses</w><w>or</w><w>cloth</w><w>or</w><w>other</w><w>things</w><w>that</w><w>may</w><w>be</w><w>black</w><pc>.</pc></s><s xml:id="s_U3Hq8u"><w>We</w><w>want</w><w>to</w><w>download</w><w>them</w><w>all</w><w>to</w><w>use</w><w>in</w><w>our</w><w>analysis</w><pc>.</pc></s><s xml:id="s_G8WKeN"><w>We</w><w>could</w><w>,</w><w>of</w><w>course</w><w>,</w><w>download</w><w>them</w><w>one</w><w>at</w><w>a</w><w>time</w><w>,</w><w>manually</w><pc>.</pc></s><s xml:id="s_coXX5r"><w>But</w><w>let</w><w>’</w><w>s</w><w>find</w><w>a</w><w>programmatic</w><w>way</w><w>to</w><w>automate</w><w>this</w><w>task</w><pc>.</pc></s></p></div><div type="2" n="4"><head><s xml:id="s_IfX0P8"><w>The</w><w>Advanced</w><w>Search</w><w>on</w><w>OBO</w></s></head><p><s xml:id="s_oWmCQ6"><w>Every</w><w>website</w><w>’</w><w>s</w><w>search</w><w>features</w><w>work</w><w>differently</w><pc>.</pc></s><s xml:id="s_gpm74V"><w>While</w><w>searches</w><w>work</w><w>similarly</w><w>,</w><w>the</w><w>intricacies</w><w>of</w><w>database</w><w>searches</w><w>may</w><w>not</w><w>be</w><w>entirely</w><w>obvious</w><pc>.</pc></s><s xml:id="s_5JmHIv"><w>Therefore</w><w>it</w><w>’</w><w>s</w><w>important</w><w>to</w><w>think</w><w>critically</w><w>about</w><w>database</w><w>search</w><w>options</w><w>and</w><w>,</w><w>when</w><w>available</w><w>,</w><w>read</w><w>the</w><w>documentation</w><w>provided</w><w>on</w><w>the</w><w>website</w><pc>.</pc></s><s xml:id="s_XRWZDb"><w>Prudent</w><w>historical</w><w>researchers</w><w>always</w><w>interrogate</w><w>their</w><w>sources</w><w>;</w><w>the</w><w>procedures</w><w>behind</w><w>your</w><w>search</w><w>boxes</w><w>should</w><w>receive</w><w>the</w><w>same</w><w>attention</w><pc>.</pc></s><s xml:id="s_v59s00"><w>The</w><w>Old</w><w>Bailey</w><w>Online</w><w>’</w><w>s</w><ref target="http://www.oldbaileyonline.org/forms/formMain.jsp"><w>advanced</w><w>search</w><w>form</w></ref><w>lets</w><w>you</w><w>refine</w><w>your</w><w>searches</w><w>based</w><w>on</w><w>ten</w><w>different</w><w>fields</w><w>including</w><w>simple</w><w>keywords</w><w>,</w><w>a</w><w>date</w><w>range</w><w>,</w><w>and</w><w>a</w><w>crime</w><w>type</w><pc>.</pc></s><s xml:id="s_WdVAQ9"><w>As</w><w>each</w><w>website</w><w>’</w><w>s</w><w>search</w><w>feature</w><w>is</w><w>different</w><w>it</w><w>always</w><w>pays</w><w>to</w><w>take</w><w>a</w><w>moment</w><w>or</w><w>two</w><w>to</w><w>play</w><w>with</w><w>and</w><w>read</w><w>about</w><w>the</w><w>search</w><w>options</w><w>available</w><pc>.</pc></s><s xml:id="s_QcS7dA"><w>Since</w><w>we</w><w>have</w><w>already</w><w>done</w><w>the</w><w>simple</w><w>searches</w><w>for</w><w>“</w><w>negro</w><w>”</w><w>and</w><w>“</w><w>mulatto</w><w>”</w><w>,</w><w>we</w><w>know</w><w>there</w><w>will</w><w>be</w><w>results</w><pc>.</pc></s><s xml:id="s_1qbSw3"><w>However</w><w>,</w><w>let</w><w>’</w><w>s</w><w>use</w><w>the</w><w>advanced</w><w>search</w><w>to</w><w>limit</w><w>our</w><w>results</w><w>to</w><w>records</w><w>published</w><w>in</w><w>the</w><w>Old</w><w>Bailey</w><w>Proceedings</w><w>trial</w><w>accounts</w><w>from</w><w>1700</w><w>to</w><w>1750</w><w>only</w><pc>.</pc></s><s xml:id="s_ZiR0TJ"><w>You</w><w>can</w><w>of</w><w>course</w><w>change</w><w>this</w><w>to</w><w>whatever</w><w>you</w><w>like</w><w>,</w><w>but</w><w>this</w><w>will</w><w>make</w><w>the</w><w>example</w><w>easier</w><w>to</w><w>follow</w><pc>.</pc></s><s xml:id="s_PXRFZY"><w>Perform</w><w>the</w><w>search</w><w>shown</w><w>in</w><w>the</w><w>image</w><w>below</w><pc>.</pc></s><s xml:id="s_SbaIyv"><w>Make</w><w>sure</w><w>you</w><w>tick</w><w>the</w><w>“</w><w>Advanced</w><w>”</w><w>radio</w><w>button</w><w>and</w><w>include</w><w>the</w><code rend="inline"><w>*</w></code><w>wildcards</w><w>to</w><w>include</w><w>pluralized</w><w>entries</w><w>or</w><w>those</w><w>with</w><w>an</w><w>extra</w><w>“</w><w>e</w><w>”</w><w>on</w><w>the</w><w>end</w><pc>.</pc></s></p><figure><desc><s xml:id="s_mqlJJg"><w>Old</w><w>Bailey</w><w>Advanced</w><w>Search</w><w>Example</w></s></desc><graphic url="AdvancedSearchExample.png"/></figure><p><s xml:id="s_copoYG"><w>Execute</w><w>the</w><w>search</w><w>and</w><w>then</w><w>click</w><w>on</w><w>the</w><w>“</w><w>Calculate</w><w>Total</w><w>”</w><w>link</w><w>to</w><w>see</w><w>how</w><w>many</w><w>entries</w><w>there</w><w>are</w><pc>.</pc></s><s xml:id="s_3KHAun"><w>We</w><w>now</w><w>have</w><w>13</w><w>results</w><w>(</w><w>if</w><w>you</w><w>have</w><w>a</w><w>different</w><w>number</w><w>go</w><w>back</w><w>and</w><w>make</w><w>sure</w><w>you</w><w>copied</w><w>the</w><w>example</w><w>above</w><w>exactly</w><w>)</w><pc>.</pc></s><s xml:id="s_3she1O"><w>What</w><w>we</w><w>want</w><w>to</w><w>do</w><w>at</w><w>this</w><w>point</w><w>is</w><w>download</w><w>all</w><w>of</w><w>these</w><w>trial</w><w>documents</w><w>and</w><w>analyze</w><w>them</w><w>further</w><pc>.</pc></s><s xml:id="s_1dFeZZ"><w>Again</w><w>,</w><w>for</w><w>only</w><w>13</w><w>records</w><w>,</w><w>you</w><w>might</w><w>as</w><w>well</w><w>download</w><w>each</w><w>record</w><w>manually</w><pc>.</pc></s><s xml:id="s_x0E0Vw"><w>But</w><w>as</w><w>more</w><w>and</w><w>more</w><w>data</w><w>comes</w><w>online</w><w>,</w><w>it</w><w>becomes</w><w>more</w><w>common</w><w>to</w><w>need</w><w>to</w><w>download</w><w>1,300</w><w>or</w><w>even</w><w>130,000</w><w>records</w><w>,</w><w>in</w><w>which</w><w>case</w><w>downloading</w><w>individual</w><w>records</w><w>becomes</w><w>impractical</w><w>and</w><w>an</w><w>understanding</w><w>of</w><w>how</w><w>to</w><w>automate</w><w>the</w><w>process</w><w>becomes</w><w>that</w><w>much</w><w>more</w><w>valuable</w><pc>.</pc></s><s xml:id="s_75b95A"><w>To</w><w>automate</w><w>the</w><w>download</w><w>process</w><w>,</w><w>we</w><w>need</w><w>to</w><w>step</w><w>back</w><w>and</w><w>learn</w><w>how</w><w>the</w><w>search</w><w>URLs</w><w>are</w><w>created</w><w>on</w><w>the</w><w>Old</w><w>Bailey</w><w>website</w><w>,</w><w>a</w><w>method</w><w>common</w><w>to</w><w>many</w><w>online</w><w>databases</w><w>and</w><w>websites</w><pc>.</pc></s></p></div><div type="2" n="5"><head><s xml:id="s_ZADCrB"><w>Understanding</w><w>URL</w><w>Queries</w></s></head><p><s xml:id="s_udL318"><w>Take</w><w>a</w><w>look</w><w>at</w><w>the</w><w>URL</w><w>produced</w><w>with</w><w>the</w><w>last</w><w>search</w><w>results</w><w>page</w><pc>.</pc></s><s xml:id="s_HnbEIc"><w>It</w><w>should</w><w>look</w><w>like</w><w>this</w><w>:</w></s></p><ab><code xml:id="code_downloading-multiple-records-using-query-strings_0" corresp="code_downloading-multiple-records-using-query-strings_0.txt" rend="block"/></ab><p><s xml:id="s_moSoHw"><w>We</w><w>had</w><w>a</w><w>look</w><w>at</w><w>URLs</w><w>in</w><ref target="/lessons/viewing-html-files"><w>Viewing</w><w>HTML</w><w>Files</w></ref><w>,</w><w>but</w><w>this</w><w>looks</w><w>a</w><w>lot</w><w>more</w><w>complex</w><pc>.</pc></s><s xml:id="s_JbaySX"><w>Although</w><w>longer</w><w>,</w><w>it</w><w>is</w><w>actually</w><emph><w>not</w></emph><w>that</w><w>much</w><w>more</w><w>complex</w><pc>.</pc></s><s xml:id="s_WwHPwI"><w>But</w><w>it</w><w>is</w><w>easier</w><w>to</w><w>understand</w><w>by</w><w>noticing</w><w>how</w><w>our</w><w>search</w><w>criteria</w><w>get</w><w>represented</w><w>in</w><w>the</w><w>URL</w><pc>.</pc></s></p><ab><code xml:id="code_downloading-multiple-records-using-query-strings_1" corresp="code_downloading-multiple-records-using-query-strings_1.txt" rend="block"/></ab><p><s xml:id="s_txey2C"><w>In</w><w>this</w><w>view</w><w>,</w><w>we</w><w>see</w><w>more</w><w>clearly</w><w>our</w><w>12</w><w>important</w><w>pieces</w><w>of</w><w>information</w><w>that</w><w>we</w><w>need</w><w>to</w><w>perform</w><w>our</w><w>search</w><w>(</w><w>one</w><w>per</w><w>line</w><w>)</w><pc>.</pc></s><s xml:id="s_Gz6tqQ"><w>On</w><w>the</w><w>first</w><w>is</w><w>the</w><w>Old</w><w>Bailey</w><w>’</w><w>s</w><w>base</w><w>website</w><w>URL</w><w>,</w><w>followed</w><w>by</w><w>a</w><w>query</w><w>:</w><w>“</w><pc>?</pc></s><s xml:id="s_Z5sSCN"><w>”</w><w>(</w><w>don</w><w>’</w><w>t</w><w>worry</w><w>about</w><w>the</w><code rend="inline"><w>gen=1</w></code><w>bit</w><w>;</w><w>the</w><w>developers</w><w>of</w><w>the</w><w>Old</w><w>Bailey</w><w>Online</w><w>say</w><w>that</w><w>it</w><w>does</w><w>not</w><w>do</w><w>anything</w><pc>.</pc></s><s xml:id="s_kPxWMi"><w>)</w><w>and</w><w>a</w><w>series</w><w>of</w><w>10</w><emph><w>name/value</w><w>pairs</w></emph><w>put</w><w>together</w><w>with</w><w>&amp;</w><w>characters</w><pc>.</pc></s><s xml:id="s_yzwqdY"><w>Together</w><w>these</w><w>10</w><w>name/value</w><w>pairs</w><w>comprise</w><w>the</w><w>query</w><w>string</w><w>,</w><w>which</w><w>tells</w><w>the</w><w>search</w><w>engine</w><w>what</w><w>variables</w><w>to</w><w>use</w><w>in</w><w>specific</w><w>stages</w><w>of</w><w>the</w><w>search</w><pc>.</pc></s><s xml:id="s_KhYAK5"><w>Notice</w><w>that</w><w>each</w><w>name/value</w><w>pair</w><w>contains</w><w>both</w><w>a</w><w>variable</w><w>name</w><w>:</w><w>toYear</w><w>,</w><w>and</w><w>then</w><w>assigns</w><w>that</w><w>variable</w><w>a</w><w>value</w><w>:</w><w>1750</w><pc>.</pc></s><s xml:id="s_DQhdqX"><w>This</w><w>works</w><w>in</w><w>exactly</w><w>the</w><w>same</w><w>way</w><w>as</w><emph><w>Function</w><w>Arguments</w></emph><w>by</w><w>passing</w><w>certain</w><w>information</w><w>to</w><w>specific</w><w>variables</w><pc>.</pc></s><s xml:id="s_VbsCUP"><w>In</w><w>this</w><w>case</w><w>,</w><w>the</w><w>most</w><w>important</w><w>variable</w><w>is</w><code rend="inline"><w>_divs_fulltext=</w></code><w>which</w><w>has</w><w>been</w><w>given</w><w>the</w><w>value</w><w>:</w></s></p><ab><code xml:id="code_downloading-multiple-records-using-query-strings_2" corresp="code_downloading-multiple-records-using-query-strings_2.txt" rend="block"/></ab><p><s xml:id="s_7VK0OG"><w>This</w><w>holds</w><w>the</w><w>search</w><w>term</w><w>we</w><w>have</w><w>typed</w><w>into</w><w>the</w><w>search</w><w>box</w><pc>.</pc></s><s xml:id="s_BGXeNn"><w>The</w><w>program</w><w>has</w><w>automatically</w><w>added</w><w>a</w><w>+</w><w>sign</w><w>in</w><w>place</w><w>of</w><w>a</w><w>blank</w><w>space</w><w>(</w><w>URLs</w><w>can</w><w>not</w><w>contain</w><w>spaces</w><w>)</w><w>;</w><w>otherwise</w><w>that</w><w>’</w><w>s</w><w>exactly</w><w>what</w><w>we</w><w>’</w><w>ve</w><w>asked</w><w>the</w><w>Old</w><w>Bailey</w><w>site</w><w>to</w><w>find</w><w>for</w><w>us</w><pc>.</pc></s><s xml:id="s_LzCZ12"><w>The</w><w>other</w><w>variables</w><w>hold</w><w>values</w><w>that</w><w>we</w><w>defined</w><w>as</w><w>well</w><pc>.</pc></s><s xml:id="s_6Bm5IK"><emph><w>fromYear</w></emph><w>and</w><emph><w>toYear</w></emph><w>contain</w><w>our</w><w>date</w><w>range</w><pc>.</pc></s><s xml:id="s_h64fL9"><w>Since</w><w>no</w><w>year</w><w>has</w><w>99</w><w>months</w><w>as</w><w>suggested</w><w>in</w><w>the</w><emph><w>toMonth</w></emph><w>variable</w><w>,</w><w>we</w><w>can</w><w>assume</w><w>this</w><w>is</w><w>how</w><w>the</w><w>search</w><w>algorithm</w><w>ensures</w><w>all</w><w>records</w><w>from</w><w>that</w><w>year</w><w>are</w><w>included</w><pc>.</pc></s><s xml:id="s_b7gSBq"><w>There</w><w>are</w><w>no</w><w>hard</w><w>and</w><w>fast</w><w>rules</w><w>for</w><w>figuring</w><w>out</w><w>what</w><w>each</w><w>variable</w><w>does</w><w>because</w><w>the</w><w>person</w><w>who</w><w>built</w><w>the</w><w>site</w><w>gets</w><w>to</w><w>name</w><w>them</w><pc>.</pc></s><s xml:id="s_2MmSl5"><w>Often</w><w>you</w><w>can</w><w>make</w><w>an</w><w>educated</w><w>guess</w><pc>.</pc></s><s xml:id="s_F8uiQe"><w>All</w><w>of</w><w>the</w><w>possible</w><w>search</w><w>fields</w><w>on</w><w>the</w><w>Advanced</w><w>Search</w><w>page</w><w>have</w><w>their</w><w>own</w><w>name/value</w><w>pair</w><pc>.</pc></s><s xml:id="s_vIoZga"><w>If</w><w>you</w><w>’</w><w>d</w><w>like</w><w>to</w><w>find</w><w>out</w><w>the</w><w>name</w><w>of</w><w>the</w><w>variable</w><w>so</w><w>you</w><w>can</w><w>use</w><w>it</w><w>,</w><w>do</w><w>a</w><w>new</w><w>search</w><w>and</w><w>make</w><w>sure</w><w>you</w><w>put</w><w>a</w><w>value</w><w>in</w><w>the</w><w>field</w><w>in</w><w>which</w><w>you</w><w>are</w><w>interested</w><pc>.</pc></s><s xml:id="s_pTv3mh"><w>After</w><w>you</w><w>submit</w><w>your</w><w>search</w><w>,</w><w>you</w><w>’</w><w>ll</w><w>see</w><w>your</w><w>value</w><w>and</w><w>the</w><w>name</w><w>associated</w><w>with</w><w>it</w><w>as</w><w>part</w><w>of</w><w>the</w><w>URL</w><w>of</w><w>the</w><w>search</w><w>results</w><w>page</w><pc>.</pc></s><s xml:id="s_tvFIov"><w>With</w><w>the</w><w>Old</w><w>Bailey</w><w>Online</w><w>,</w><w>as</w><w>with</w><w>many</w><w>other</w><w>websites</w><w>,</w><w>the</w><w>search</w><w>form</w><w>(</w><w>advanced</w><w>or</w><w>not</w><w>)</w><w>essentially</w><w>helps</w><w>you</w><w>to</w><w>construct</w><w>URLs</w><w>that</w><w>tell</w><w>the</w><w>database</w><w>what</w><w>to</w><w>search</w><w>for</w><pc>.</pc></s><s xml:id="s_dUi0Y0"><w>If</w><w>you</w><w>can</w><w>understand</w><w>how</w><w>the</w><w>search</w><w>fields</w><w>are</w><w>represented</w><w>in</w><w>the</w><w>URL</w><w>–</w><w>which</w><w>is</w><w>often</w><w>quite</w><w>straightforward</w><w>–</w><w>then</w><w>it</w><w>becomes</w><w>relatively</w><w>simple</w><w>to</w><w>programmatically</w><w>construct</w><w>these</w><w>URLs</w><w>and</w><w>thus</w><w>to</w><w>automate</w><w>the</w><w>process</w><w>of</w><w>downloading</w><w>records</w><pc>.</pc></s></p><p><s xml:id="s_R3SlvH"><w>Now</w><w>try</w><w>changing</w><w>the</w><w>“</w><w>”</w><w>to</w><w>“</w><w>”</w><w>and</w><w>hit</w><w>enter</w><pc>.</pc></s><hi rend="bold"><s xml:id="s_tl93Aw"><w>start=0</w></s></hi><hi rend="bold"><s xml:id="s_rcpvsp"><w>start=10</w></s></hi><s xml:id="s_pyK7wt"><w>You</w><w>should</w><w>now</w><w>have</w><w>results</w><w>11-13</w><pc>.</pc></s><s xml:id="s_9tZzio"><w>The</w><w>“</w><w>start</w><w>”</w><w>variable</w><w>tells</w><w>the</w><w>website</w><w>which</w><w>entry</w><w>should</w><w>be</w><w>shown</w><w>at</w><w>the</w><w>top</w><w>of</w><w>the</w><w>search</w><w>results</w><w>list</w><pc>.</pc></s><s xml:id="s_JFU0Hw"><w>We</w><w>should</w><w>be</w><w>able</w><w>to</w><w>use</w><w>this</w><w>knowledge</w><w>to</w><w>create</w><w>a</w><w>series</w><w>of</w><w>URLs</w><w>that</w><w>will</w><w>allow</w><w>us</w><w>to</w><w>download</w><w>all</w><w>13</w><w>files</w><pc>.</pc></s><s xml:id="s_zpIUVa"><w>Let</w><w>’</w><w>s</w><w>turn</w><w>to</w><w>that</w><w>now</w><pc>.</pc></s></p></div><div type="2" n="6"><head><s xml:id="s_dZeBwf"><w>Systematically</w><w>Downloading</w><w>Files</w></s></head><p><s xml:id="s_bvYRO1"><w>In</w><ref target="/lessons/working-with-web-pages"><w>Working</w><w>with</w><w>Webpages</w></ref><w>we</w><w>learned</w><w>that</w><w>Python</w><w>can</w><w>download</w><w>a</w><w>webpage</w><w>as</w><w>long</w><w>as</w><w>we</w><w>have</w><w>the</w><w>URL</w><pc>.</pc></s><s xml:id="s_zNggJF"><w>In</w><w>that</w><w>lesson</w><w>we</w><w>used</w><w>the</w><w>URL</w><w>to</w><w>download</w><w>the</w><w>trial</w><w>transcript</w><w>of</w><w>Benjamin</w><w>Bowsey</w><pc>.</pc></s><s xml:id="s_8FNPTO"><w>In</w><w>this</w><w>case</w><w>,</w><w>we</w><w>’</w><w>re</w><w>trying</w><w>to</w><w>download</w><w>multiple</w><w>trial</w><w>transcripts</w><w>that</w><w>meet</w><w>the</w><w>search</w><w>criteria</w><w>we</w><w>outlined</w><w>above</w><w>without</w><w>having</w><w>to</w><w>repeatedly</w><w>re-run</w><w>the</w><w>program</w><pc>.</pc></s><s xml:id="s_NhEIxx"><w>Instead</w><w>,</w><w>we</w><w>want</w><w>a</w><w>program</w><w>that</w><w>will</w><w>download</w><w>everything</w><w>we</w><w>need</w><w>in</w><w>one</w><w>go</w><pc>.</pc></s><s xml:id="s_n9EkSS"><w>At</w><w>this</w><w>point</w><w>we</w><w>have</w><w>a</w><w>URL</w><w>to</w><w>a</w><w>search</w><w>results</w><w>page</w><w>that</w><w>contains</w><w>the</w><w>first</w><w>ten</w><w>entries</w><w>of</w><w>our</w><w>search</w><pc>.</pc></s><s xml:id="s_XiaJCs"><w>We</w><w>also</w><w>know</w><w>that</w><w>by</w><w>changing</w><w>the</w><w>“</w><w>start</w><w>”</w><w>value</w><w>in</w><w>the</w><w>URL</w><w>we</w><w>can</w><w>sequentially</w><w>call</w><w>each</w><w>search</w><w>results</w><w>page</w><w>,</w><w>and</w><w>ultimately</w><w>retrieve</w><w>all</w><w>of</w><w>the</w><w>trial</w><w>documents</w><w>from</w><w>them</w><pc>.</pc></s><s xml:id="s_yEUEcv"><w>Of</w><w>course</w><w>the</w><w>research</w><w>results</w><w>don</w><w>’</w><w>t</w><w>give</w><w>us</w><w>the</w><w>trial</w><w>documents</w><w>themselves</w><w>,</w><w>but</w><w>only</w><w>links</w><w>to</w><w>them</w><pc>.</pc></s><s xml:id="s_aOuXey"><w>So</w><w>we</w><w>need</w><w>to</w><w>extract</w><w>the</w><w>link</w><w>to</w><w>the</w><w>underlying</w><w>records</w><w>from</w><w>the</w><w>search</w><w>results</w><pc>.</pc></s><s xml:id="s_3q2axW"><w>On</w><w>the</w><w>Old</w><w>Bailey</w><w>Online</w><w>website</w><w>,</w><w>the</w><w>URLs</w><w>for</w><w>the</w><w>individual</w><w>records</w><w>(</w><w>the</w><w>trial</w><w>transcript</w><w>files</w><w>)</w><w>can</w><w>be</w><w>found</w><w>as</w><w>links</w><w>on</w><w>the</w><w>search</w><w>results</w><w>pages</w><pc>.</pc></s><s xml:id="s_pEdZhw"><w>We</w><w>know</w><w>that</w><w>all</w><w>trial</w><w>transcript</w><w>URLs</w><w>contain</w><w>a</w><w>trial</w><w>id</w><w>that</w><w>takes</w><w>the</w><w>form</w><w>:</w><w>“</w><w>t</w><w>”</w><w>followed</w><w>by</w><w>at</w><w>least</w><w>8</w><w>numbers</w><w>(</w><w>e.g</w><pc>.</pc></s><s xml:id="s_MhR3Lz"><w>t17800628-33</w><w>)</w><pc>.</pc></s><s xml:id="s_PHaXwZ"><w>By</w><w>looking</w><w>for</w><w>links</w><w>that</w><w>contain</w><w>that</w><w>pattern</w><w>,</w><w>we</w><w>can</w><w>identify</w><w>trial</w><w>transcript</w><w>URLs</w><pc>.</pc></s><s xml:id="s_6v8ZU6"><w>As</w><w>in</w><w>previous</w><w>lessons</w><w>,</w><w>let</w><w>’</w><w>s</w><w>develop</w><w>an</w><w>algorithm</w><w>so</w><w>that</w><w>we</w><w>can</w><w>begin</w><w>tackling</w><w>this</w><w>problem</w><w>in</w><w>a</w><w>manner</w><w>that</w><w>a</w><w>computer</w><w>can</w><w>handle</w><pc>.</pc></s><s xml:id="s_f5diQp"><w>It</w><w>seems</w><w>this</w><w>task</w><w>can</w><w>be</w><w>achieved</w><w>in</w><w>four</w><w>steps</w><pc>.</pc></s><s xml:id="s_voAB9D"><w>We</w><w>will</w><w>need</w><w>to</w><w>:</w></s></p><list type="unordered"><item><s xml:id="s_HQlCmT"><w>Generate</w><w>the</w><w>URLs</w><w>for</w><w>each</w><w>search</w><w>results</w><w>page</w><w>by</w><w>incrementing</w><w>the</w><w>“</w><w>start</w><w>”</w><w>variable</w><w>by</w><w>a</w><w>fixed</w><w>amount</w><w>an</w><w>appropriate</w><w>number</w><w>of</w><w>times</w><pc>.</pc></s></item><item><s xml:id="s_VdMXgE"><w>Download</w><w>each</w><w>search</w><w>results</w><w>page</w><w>as</w><w>an</w><w>HTML</w><w>file</w><pc>.</pc></s></item><item><s xml:id="s_hQ7afe"><w>Extract</w><w>the</w><w>URLs</w><w>of</w><w>each</w><w>trial</w><w>transcript</w><w>(</w><w>using</w><w>the</w><w>trial</w><w>ID</w><w>as</w><w>described</w><w>above</w><w>)</w><w>from</w><w>the</w><w>search</w><w>results</w><w>HTML</w><w>files</w><pc>.</pc></s></item><item><s xml:id="s_cei6QB"><w>Cycle</w><w>through</w><w>those</w><w>extracted</w><w>URLs</w><w>to</w><w>download</w><w>each</w><w>trial</w><w>transcript</w><w>and</w><w>save</w><w>it</w><w>to</w><w>a</w><w>directory</w><w>on</w><w>our</w><w>computer</w></s></item></list><p><s xml:id="s_eOACyB"><w>You</w><w>’</w><w>ll</w><w>recall</w><w>that</w><w>this</w><w>is</w><w>fairly</w><w>similar</w><w>to</w><w>the</w><w>tasks</w><w>we</w><w>achieved</w><w>in</w><ref target="/lessons/working-with-web-pages"><w>Working</w><w>with</w><w>Webpages</w></ref><w>and</w><ref target="/lessons/from-html-to-list-of-words-2"><w>From</w><w>HTML</w><w>to</w><w>a</w><w>List</w><w>of</w><w>Words</w><w>2</w></ref><pc>.</pc></s><s xml:id="s_WhnX8N"><w>First</w><w>we</w><w>download</w><w>,</w><w>then</w><w>we</w><w>parse</w><w>out</w><w>the</w><w>information</w><w>we</w><w>’</w><w>re</w><w>after</w><pc>.</pc></s><s xml:id="s_63GfAu"><w>And</w><w>in</w><w>this</w><w>case</w><w>,</w><w>we</w><w>download</w><w>some</w><w>more</w><pc>.</pc></s></p><div type="3" n="6.1"><head><s xml:id="s_6H5bvw"><w>Downloading</w><w>the</w><w>search</w><w>results</w><w>pages</w></s></head><p><s xml:id="s_xIB8di"><w>First</w><w>we</w><w>need</w><w>to</w><w>generate</w><w>the</w><w>URLs</w><w>for</w><w>downloading</w><w>each</w><w>search</w><w>results</w><w>page</w><pc>.</pc></s><s xml:id="s_GrSKlZ"><w>We</w><w>have</w><w>already</w><w>got</w><w>the</w><w>first</w><w>one</w><w>by</w><w>using</w><w>the</w><w>form</w><w>on</w><w>the</w><w>website</w><w>:</w></s></p><ab><code xml:id="code_downloading-multiple-records-using-query-strings_3" corresp="code_downloading-multiple-records-using-query-strings_3.txt" rend="block"/></ab><p><s xml:id="s_OGl2z3"><w>We</w><w>could</w><w>type</w><w>this</w><w>URL</w><w>out</w><w>twice</w><w>and</w><w>alter</w><w>the</w><w>‘</w><emph><w>start</w></emph><w>’</w><w>variable</w><w>to</w><w>get</w><w>us</w><w>all</w><w>13</w><w>entries</w><w>,</w><w>but</w><w>let</w><w>’</w><w>s</w><w>write</w><w>a</w><w>program</w><w>that</w><w>would</w><w>work</w><w>no</w><w>matter</w><w>how</w><w>many</w><w>search</w><w>results</w><w>pages</w><w>or</w><w>records</w><w>we</w><w>had</w><w>to</w><w>download</w><w>,</w><w>and</w><w>no</w><w>matter</w><w>what</w><w>we</w><w>decide</w><w>to</w><w>search</w><w>for</w><pc>.</pc></s><s xml:id="s_NVoh21"><w>Study</w><w>this</w><w>code</w><w>and</w><w>then</w><w>add</w><w>this</w><w>function</w><w>to</w><w>a</w><w>module</w><w>named</w><code rend="inline"><w>obo.py</w></code><w>(</w><w>create</w><w>a</w><w>file</w><w>with</w><w>that</w><w>name</w><w>and</w><w>save</w><w>it</w><w>to</w><w>the</w><w>directory</w><w>where</w><w>you</w><w>want</w><w>to</w><w>do</w><w>your</w><w>work</w><w>)</w><pc>.</pc></s><s xml:id="s_yzJ6iP"><w>The</w><w>comments</w><w>in</w><w>the</w><w>code</w><w>are</w><w>meant</w><w>to</w><w>help</w><w>you</w><w>decipher</w><w>the</w><w>various</w><w>parts</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_4" corresp="code_downloading-multiple-records-using-query-strings_4.txt" rend="block"/></ab><p><s xml:id="s_JdXkyd"><w>In</w><w>this</w><w>function</w><w>we</w><w>have</w><w>split</w><w>up</w><w>the</w><w>various</w><w>Query</w><w>String</w><w>components</w><w>and</w><w>used</w><w>Function</w><w>Arguments</w><w>so</w><w>that</w><w>this</w><w>function</w><w>can</w><w>be</w><w>reused</w><w>beyond</w><w>our</w><w>specific</w><w>needs</w><w>right</w><w>now</w><pc>.</pc></s><s xml:id="s_p2Agqy"><w>When</w><w>we</w><w>call</w><w>this</w><w>function</w><w>we</w><w>will</w><w>replace</w><w>the</w><w>arguments</w><w>with</w><w>the</w><w>values</w><w>we</w><w>want</w><w>to</w><w>search</w><w>for</w><pc>.</pc></s><s xml:id="s_RpN6By"><w>We</w><w>then</w><w>download</w><w>the</w><w>search</w><w>results</w><w>page</w><w>in</w><w>a</w><w>similar</w><w>manner</w><w>as</w><w>done</w><w>in</w><ref target="/lessons/working-with-web-pages"><w>Working</w><w>with</w><w>Webpages</w></ref><pc>.</pc></s><s xml:id="s_wyCOEf"><w>Now</w><w>,</w><w>make</w><w>a</w><w>new</w><w>file</w><w>:</w><code rend="inline"><w>download-searches.py</w></code><w>and</w><w>copy</w><w>into</w><w>it</w><w>the</w><w>following</w><w>code</w><pc>.</pc></s><s xml:id="s_5fUhc2"><w>Note</w><w>,</w><w>the</w><w>values</w><w>we</w><w>have</w><w>passed</w><w>as</w><w>arguments</w><w>are</w><w>exactly</w><w>the</w><w>same</w><w>as</w><w>those</w><w>used</w><w>in</w><w>the</w><w>example</w><w>above</w><pc>.</pc></s><s xml:id="s_Msddx4"><w>Feel</w><w>free</w><w>to</w><w>play</w><w>with</w><w>these</w><w>to</w><w>get</w><w>different</w><w>results</w><w>or</w><w>see</w><w>how</w><w>they</w><w>work</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_5" corresp="code_downloading-multiple-records-using-query-strings_5.txt" rend="block"/></ab><p><s xml:id="s_Y5Zrfa"><w>When</w><w>you</w><w>run</w><w>this</w><w>code</w><w>you</w><w>should</w><w>find</w><w>a</w><w>new</w><w>file</w><w>:</w><w>“</w><code rend="inline"><w>search-results.html</w></code><w>”</w><w>in</w><w>your</w><code rend="inline"><w>programming-historian</w><w>directory</w></code><w>containing</w><w>the</w><w>first</w><w>search</w><w>results</w><w>page</w><w>for</w><w>your</w><w>search</w><pc>.</pc></s><s xml:id="s_VHpgDh"><w>Check</w><w>that</w><w>this</w><w>downloaded</w><w>properly</w><w>and</w><w>then</w><w>delete</w><w>the</w><w>file</w><pc>.</pc></s><s xml:id="s_Ah1ZWy"><w>We</w><w>’</w><w>re</w><w>going</w><w>to</w><w>adapt</w><w>our</w><w>program</w><w>to</w><w>download</w><w>the</w><w>other</w><w>page</w><w>containing</w><w>the</w><w>other</w><w>3</w><w>entries</w><w>at</w><w>the</w><w>same</w><w>time</w><w>so</w><w>we</w><w>want</w><w>to</w><w>make</w><w>sure</w><w>we</w><w>get</w><w>both</w><pc>.</pc></s><s xml:id="s_GgORYz"><w>Let</w><w>’</w><w>s</w><w>refine</w><w>our</w><code rend="inline"><w>getSearchResults</w></code><w>function</w><w>by</w><w>adding</w><w>another</w><w>function</w><w>argument</w><w>called</w><w>“</w><w>entries</w><w>”</w><w>so</w><w>we</w><w>can</w><w>tell</w><w>the</w><w>program</w><w>how</w><w>many</w><w>pages</w><w>of</w><w>search</w><w>results</w><w>we</w><w>need</w><w>to</w><w>download</w><pc>.</pc></s><s xml:id="s_0qyfmE"><w>We</w><w>will</w><w>use</w><w>the</w><w>value</w><w>of</w><w>entries</w><w>and</w><w>some</w><w>simple</w><w>math</w><w>to</w><w>determine</w><w>how</w><w>many</w><w>search</w><w>results</w><w>pages</w><w>there</w><w>are</w><pc>.</pc></s><s xml:id="s_CmMbPC"><w>This</w><w>is</w><w>fairly</w><w>straightforward</w><w>since</w><w>we</w><w>know</w><w>there</w><w>are</w><w>ten</w><w>trial</w><w>transcripts</w><w>listed</w><w>per</w><w>page</w><pc>.</pc></s><s xml:id="s_OEmToO"><w>We</w><w>can</w><w>calculate</w><w>the</w><w>number</w><w>of</w><w>search</w><w>results</w><w>pages</w><w>by</w><w>dividing</w><w>the</w><w>value</w><w>of</w><w>entries</w><w>by</w><w>10</w><pc>.</pc></s><s xml:id="s_C8sAFL"><w>We</w><w>will</w><w>save</w><w>this</w><w>result</w><w>to</w><w>a</w><w>variable</w><w>named</w><code rend="inline"><w>pageCount</w></code><pc>.</pc></s><s xml:id="s_nhNIBu"><w>It</w><w>looks</w><w>like</w><w>this</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_6" corresp="code_downloading-multiple-records-using-query-strings_6.txt" rend="block"/></ab><p><s xml:id="s_82H0pN"><w>However</w><w>,</w><w>in</w><w>cases</w><w>where</w><w>the</w><w>number</w><w>of</w><w>entries</w><w>is</w><w>not</w><w>a</w><w>multiple</w><w>of</w><w>10</w><w>,</w><w>this</w><w>will</w><w>result</w><w>in</w><w>a</w><w>decimal</w><w>number</w><pc>.</pc></s><s xml:id="s_I0826D"><w>You</w><w>can</w><w>test</w><w>this</w><w>by</w><w>running</w><w>this</w><w>code</w><w>in</w><w>your</w><w>Terminal</w><w>(</w><w>Mac</w><w>&amp;</w><w>Linux</w><w>)</w><w>/</w><w>Python</w><w>Command</w><w>Line</w><w>(</w><w>Windows</w><w>)</w><w>and</w><w>printing</w><w>out</w><w>the</w><w>value</w><w>held</w><w>in</w><code rend="inline"><w>pageCount</w></code><pc>.</pc></s><s xml:id="s_CefIev"><w>(</w><w>Note</w><w>,</w><w>from</w><w>here</w><w>on</w><w>,</w><w>we</w><w>will</w><w>use</w><w>the</w><w>word</w><w>Terminal</w><w>to</w><w>refer</w><w>to</w><w>this</w><w>program</w><w>)</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_7" corresp="code_downloading-multiple-records-using-query-strings_7.txt" rend="block"/></ab><p><s xml:id="s_8eGnYv"><w>We</w><w>know</w><w>the</w><w>page</w><w>count</w><w>should</w><w>be</w><w>2</w><w>(</w><w>one</w><w>page</w><w>containing</w><w>entries</w><w>1-10</w><w>,</w><w>and</w><w>one</w><w>page</w><w>containing</w><w>entries</w><w>11-13</w><w>)</w><pc>.</pc></s><s xml:id="s_UI4Csc"><w>Since</w><w>we</w><w>always</w><w>want</w><w>the</w><w>next</w><w>higher</w><w>integer</w><w>,</w><w>we</w><w>can</w><w>round</w><w>up</w><w>the</w><w>result</w><w>of</w><w>the</w><w>division</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_8" corresp="code_downloading-multiple-records-using-query-strings_8.txt" rend="block"/></ab><p><s xml:id="s_bBQ7Z3"><w>If</w><w>we</w><w>add</w><w>this</w><w>to</w><w>our</w><code rend="inline"><w>getSearchResults</w></code><w>function</w><w>just</w><w>under</w><w>the</w><emph><w>startValue</w><w>=</w><w>0</w></emph><w>line</w><w>,</w><w>our</w><w>program</w><w>,</w><w>the</w><w>code</w><w>can</w><w>now</w><w>calculate</w><w>the</w><w>number</w><w>of</w><w>pages</w><w>that</w><w>need</w><w>to</w><w>be</w><w>downloaded</w><pc>.</pc></s><s xml:id="s_t6j42X"><w>However</w><w>,</w><w>at</w><w>this</w><w>stage</w><w>it</w><w>will</w><w>still</w><w>only</w><w>download</w><w>the</w><w>first</w><w>page</w><w>since</w><w>we</w><w>have</w><w>only</w><w>told</w><w>the</w><w>downloading</w><w>section</w><w>of</w><w>the</w><w>function</w><w>to</w><w>run</w><w>once</w><pc>.</pc></s><s xml:id="s_ctaDmc"><w>To</w><w>correct</w><w>this</w><w>,</w><w>we</w><w>can</w><w>add</w><w>that</w><w>downloading</w><w>code</w><w>to</w><w>a</w><w>for</w><w>loop</w><w>which</w><w>will</w><w>download</w><w>once</w><w>for</w><w>every</w><w>number</w><w>in</w><w>the</w><code rend="inline"><w>pageCount</w></code><w>variable</w><pc>.</pc></s><s xml:id="s_IDuqY9"><w>If</w><w>it</w><w>reads</w><w>1</w><w>,</w><w>then</w><w>it</w><w>will</w><w>download</w><w>once</w><w>;</w><w>if</w><w>it</w><w>reads</w><w>5</w><w>it</w><w>will</w><w>download</w><w>five</w><w>times</w><w>,</w><w>and</w><w>so</w><w>on</w><pc>.</pc></s><s xml:id="s_Dvlp9F"><w>Immediately</w><w>after</w><w>the</w><w>if</w><w>statement</w><w>you</w><w>have</w><w>just</w><w>written</w><w>,</w><w>add</w><w>the</w><w>following</w><w>line</w><w>and</w><w>indent</w><w>everything</w><w>down</w><w>to</w><code rend="inline"><w>f.close</w></code><w>one</w><w>additional</w><w>tab</w><w>so</w><w>that</w><w>it</w><w>is</w><w>all</w><w>enclosed</w><w>in</w><w>the</w><w>for</w><w>loop</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_9" corresp="code_downloading-multiple-records-using-query-strings_9.txt" rend="block"/></ab><p><s xml:id="s_LzCex0"><w>Since</w><w>this</w><w>is</w><w>a</w><w>for</w><w>loop</w><w>,</w><w>all</w><w>of</w><w>the</w><w>code</w><w>we</w><w>want</w><w>to</w><w>run</w><w>repeatedly</w><w>needs</w><w>to</w><w>be</w><w>intended</w><w>as</w><w>well</w><pc>.</pc></s><s xml:id="s_KLJttf"><w>You</w><w>can</w><w>see</w><w>if</w><w>you</w><w>have</w><w>done</w><w>this</w><w>correctly</w><w>by</w><w>looking</w><w>at</w><w>the</w><w>finished</w><w>code</w><w>example</w><w>below</w><pc>.</pc></s><s xml:id="s_8cosDq"><w>This</w><w>loop</w><w>takes</w><w>advantage</w><w>of</w><w>Python</w><w>’</w><w>s</w><ref target="https://docs.python.org/3/tutorial/controlflow.html#the-range-function"><w>range</w></ref><w>funciton</w><pc>.</pc></s><s xml:id="s_sRGwXK"><w>To</w><w>understand</w><w>this</w><w>for</w><w>loop</w><w>it</w><w>is</w><w>probably</w><w>best</w><w>to</w><w>think</w><w>of</w><code rend="inline"><w>pageCount</w></code><w>as</w><w>equal</w><w>to</w><w>2</w><w>as</w><w>it</w><w>is</w><w>in</w><w>the</w><w>example</w><pc>.</pc></s><s xml:id="s_Sy0KbA"><w>This</w><w>two</w><w>lines</w><w>of</w><w>code</w><w>then</w><w>means</w><w>:</w><w>start</w><w>running</w><w>with</w><w>an</w><w>initial</w><w>loop</w><w>value</w><w>of</w><w>1</w><w>,</w><w>and</w><w>each</w><w>time</w><w>you</w><w>run</w><w>,</w><w>add</w><w>1</w><w>more</w><w>to</w><w>that</w><w>value</w><pc>.</pc></s><s xml:id="s_VWo4zJ"><w>When</w><w>the</w><w>loop</w><w>value</w><w>is</w><w>the</w><w>same</w><w>as</w><code rend="inline"><w>pageCount</w></code><w>,</w><w>run</w><w>once</w><w>more</w><w>and</w><w>then</w><w>stop</w><pc>.</pc></s><s xml:id="s_5yFi5i"><w>This</w><w>is</w><w>particularly</w><w>valuable</w><w>for</w><w>us</w><w>because</w><w>it</w><w>means</w><w>we</w><w>can</w><w>tell</w><w>our</w><w>program</w><w>to</w><w>run</w><w>exactly</w><w>once</w><w>for</w><w>each</w><w>search</w><w>results</w><w>page</w><w>and</w><w>provides</w><w>a</w><w>flexible</w><w>new</w><w>skill</w><w>for</w><w>controlling</w><w>how</w><w>many</w><w>times</w><w>a</w><w>for</w><w>loop</w><w>runs</w><pc>.</pc></s><s xml:id="s_woFf8X"><w>If</w><w>you</w><w>would</w><w>like</w><w>to</w><w>practice</w><w>with</w><w>this</w><w>new</w><w>and</w><w>powerful</w><w>way</w><w>of</w><w>writing</w><w>for</w><w>loops</w><w>,</w><w>you</w><w>can</w><w>open</w><w>your</w><w>Terminal</w><w>and</w><w>play</w><w>around</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_10" corresp="code_downloading-multiple-records-using-query-strings_10.txt" rend="block"/></ab><p><s xml:id="s_NHFHHH"><w>Before</w><w>we</w><w>add</w><w>all</w><w>of</w><w>this</w><w>code</w><w>together</w><w>to</w><w>our</w><code rend="inline"><w>getSearchResults</w></code><w>function</w><w>,</w><w>we</w><w>have</w><w>to</w><w>make</w><w>two</w><w>final</w><w>adjustments</w><pc>.</pc></s><s xml:id="s_JK63V4"><w>At</w><w>the</w><w>end</w><w>of</w><w>the</w><w>for</w><w>loop</w><w>(</w><w>but</w><w>still</w><w>inside</w><w>the</w><w>loop</w><w>)</w><w>,</w><w>and</w><w>after</w><w>our</w><w>downloading</w><w>code</w><w>has</w><w>run</w><w>we</w><w>will</w><w>need</w><w>to</w><w>change</w><w>the</w><code rend="inline"><w>startValue</w></code><w>variable</w><w>,</w><w>which</w><w>is</w><w>used</w><w>in</w><w>building</w><w>the</w><w>URL</w><w>of</w><w>the</w><w>page</w><w>we</w><w>want</w><w>to</w><w>download</w><pc>.</pc></s><s xml:id="s_CDXxZP"><w>If</w><w>we</w><w>forget</w><w>to</w><w>do</w><w>this</w><w>,</w><w>our</w><w>program</w><w>will</w><w>repeatedly</w><w>download</w><w>the</w><w>first</w><w>search</w><w>results</w><w>page</w><w>since</w><w>we</w><w>are</w><w>not</w><w>actually</w><w>changing</w><w>anything</w><w>in</w><w>the</w><w>initial</w><w>URL</w><pc>.</pc></s><s xml:id="s_O5FI8b"><w>The</w><code rend="inline"><w>startValue</w></code><w>variable</w><w>,</w><w>as</w><w>discussed</w><w>above</w><w>,</w><w>is</w><w>what</w><w>controls</w><w>which</w><w>search</w><w>results</w><w>page</w><w>we</w><w>want</w><w>to</w><w>download</w><pc>.</pc></s><s xml:id="s_438V3C"><w>Therefore</w><w>,</w><w>we</w><w>can</w><w>request</w><w>the</w><w>next</w><w>search</w><w>results</w><w>page</w><w>by</w><w>increasing</w><w>the</w><w>value</w><w>of</w><code rend="inline"><w>startValue</w></code><w>by</w><w>10</w><w>after</w><w>the</w><w>initial</w><w>download</w><w>has</w><w>completed</w><pc>.</pc></s><s xml:id="s_S57XgB"><w>If</w><w>you</w><w>are</w><w>not</w><w>sure</w><w>where</w><w>to</w><w>put</w><w>this</w><w>line</w><w>you</w><w>can</w><w>peek</w><w>ahead</w><w>to</w><w>the</w><w>finished</w><w>code</w><w>example</w><w>below</w><pc>.</pc></s></p><p><s xml:id="s_9eGbO7"><w>Finally</w><w>,</w><w>we</w><w>want</w><w>to</w><w>ensure</w><w>that</w><w>the</w><w>name</w><w>of</w><w>the</w><w>file</w><w>we</w><w>have</w><w>downloaded</w><w>is</w><w>different</w><w>for</w><w>each</w><w>file</w><pc>.</pc></s><s xml:id="s_Qc6Hfj"><w>Otherwise</w><w>,</w><w>each</w><w>download</w><w>will</w><w>save</w><w>over</w><w>the</w><w>previous</w><w>download</w><w>,</w><w>leaving</w><w>us</w><w>with</w><w>only</w><w>a</w><w>single</w><w>file</w><w>of</w><w>search</w><w>results</w><pc>.</pc></s><s xml:id="s_mnaRzM"><w>To</w><w>solve</w><w>this</w><w>,</w><w>we</w><w>can</w><w>adjust</w><w>the</w><w>contents</w><w>of</w><w>the</w><code rend="inline"><w>filename</w></code><w>variable</w><w>to</w><w>include</w><w>the</w><w>value</w><w>held</w><w>in</w><code rend="inline"><w>startValue</w></code><w>so</w><w>that</w><w>each</w><w>time</w><w>we</w><w>download</w><w>a</w><w>new</w><w>page</w><w>,</w><w>it</w><w>gets</w><w>a</w><w>different</w><w>name</w><pc>.</pc></s><s xml:id="s_9qVtg7"><w>Since</w><code rend="inline"><w>startValue</w></code><w>is</w><w>an</w><w>integer</w><w>,</w><w>we</w><w>will</w><w>have</w><w>to</w><w>convert</w><w>it</w><w>to</w><w>a</w><w>string</w><w>before</w><w>we</w><w>can</w><w>add</w><w>it</w><w>to</w><w>the</w><w>filename</w><w>variable</w><pc>.</pc></s><s xml:id="s_U8xKQc"><w>Adjust</w><w>the</w><w>line</w><w>in</w><w>your</w><w>program</w><w>that</w><w>pertains</w><w>to</w><w>the</w><code rend="inline"><w>filename</w></code><w>variable</w><w>to</w><w>looks</w><w>like</w><w>this</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_11" corresp="code_downloading-multiple-records-using-query-strings_11.txt" rend="block"/></ab><p><s xml:id="s_bjkxoX"><w>You</w><w>should</w><w>now</w><w>be</w><w>able</w><w>to</w><w>add</w><w>these</w><w>new</w><w>lines</w><w>of</w><w>code</w><w>to</w><w>your</w><w>getSearchResults</w><w>function</w><pc>.</pc></s><s xml:id="s_ceiqxD"><w>Recall</w><w>we</w><w>have</w><w>made</w><w>the</w><w>following</w><w>additions</w><w>:</w></s></p><list type="unordered"><item><s xml:id="s_YqWGTZ"><w>Add</w><w>entries</w><w>as</w><w>an</w><w>additional</w><w>function</w><w>argument</w><w>right</w><w>after</w><w>toMonth</w></s></item><item><s xml:id="s_n1ACXl"><w>Calculate</w><w>the</w><w>number</w><w>of</w><w>search</w><w>results</w><w>pages</w><w>and</w><w>add</w><w>this</w><w>immediately</w><w>after</w><w>the</w><w>line</w><w>that</w><w>begins</w><w>with</w><w>startValue</w><w>=</w><w>0</w><w>(</w><w>before</w><w>we</w><w>build</w><w>the</w><w>URL</w><w>and</w><w>start</w><w>downloading</w><w>)</w></s></item><item><s xml:id="s_cMZmhV"><w>Follow</w><w>this</w><w>immediately</w><w>with</w><w>a</w><w>for</w><w>loop</w><w>that</w><w>will</w><w>tell</w><w>the</w><w>program</w><w>to</w><w>run</w><w>once</w><w>for</w><w>each</w><w>search</w><w>results</w><w>page</w><w>,</w><w>and</w><w>indent</w><w>the</w><w>rest</w><w>of</w><w>the</w><w>code</w><w>in</w><w>the</w><w>function</w><w>so</w><w>that</w><w>it</w><w>is</w><w>inside</w><w>the</w><w>new</w><w>loop</w><pc>.</pc></s></item><item><s xml:id="s_nKK03Z"><w>The</w><w>last</w><w>line</w><w>in</w><w>the</w><w>for</w><w>loop</w><w>should</w><w>now</w><w>increase</w><w>the</w><w>value</w><w>of</w><w>the</w><w>startValue</w><w>variable</w><w>each</w><w>time</w><w>the</w><w>loop</w><w>runs</w><pc>.</pc></s></item><item><s xml:id="s_zjgwnC"><w>Adjust</w><w>the</w><w>existing</w><w>filename</w><w>variable</w><w>so</w><w>that</w><w>each</w><w>time</w><w>a</w><w>search</w><w>results</w><w>page</w><w>is</w><w>downloaded</w><w>it</w><w>gives</w><w>the</w><w>file</w><w>a</w><w>unique</w><w>name</w><pc>.</pc></s></item></list><p><s xml:id="s_toxvzY"><w>The</w><w>finished</w><w>function</w><w>code</w><w>in</w><w>your</w><code rend="inline"><w>obo.py</w></code><w>file</w><w>should</w><w>look</w><w>like</w><w>this</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_12" corresp="code_downloading-multiple-records-using-query-strings_12.txt" rend="block"/></ab><p><s xml:id="s_reBFUj"><w>To</w><w>run</w><w>this</w><w>new</w><w>function</w><w>,</w><w>add</w><w>the</w><w>extra</w><w>argument</w><w>to</w><code rend="inline"><w>download-searches.py</w></code><w>and</w><w>run</w><w>the</w><w>program</w><w>again</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_13" corresp="code_downloading-multiple-records-using-query-strings_13.txt" rend="block"/></ab><p><s xml:id="s_5lOC77"><w>Great</w><pc>!</pc></s><s xml:id="s_3JqTUI"><w>Now</w><w>we</w><w>have</w><w>both</w><w>search</w><w>results</w><w>pages</w><w>,</w><w>called</w><code rend="inline"><w>search-result0.html</w></code><w>and</w><code rend="inline"><w>search-result10.html</w></code><pc>.</pc></s><s xml:id="s_SG5wcc"><w>But</w><w>before</w><w>we</w><w>move</w><w>onto</w><w>the</w><w>next</w><w>step</w><w>in</w><w>the</w><w>algorithm</w><w>,</w><w>let</w><w>’</w><w>s</w><w>take</w><w>care</w><w>of</w><w>some</w><w>housekeeping</w><pc>.</pc></s><s xml:id="s_KPOUH7"><w>Our</w><code rend="inline"><w>programming-historian</w></code><w>directory</w><w>will</w><w>quickly</w><w>become</w><w>unwieldy</w><w>if</w><w>we</w><w>download</w><w>multiple</w><w>search</w><w>results</w><w>pages</w><w>and</w><w>trial</w><w>transcripts</w><pc>.</pc></s><s xml:id="s_OAtZSa"><w>Let</w><w>’</w><w>s</w><w>have</w><w>Python</w><w>make</w><w>a</w><w>new</w><w>directory</w><w>named</w><w>after</w><w>our</w><w>search</w><w>terms</w><pc>.</pc></s></p><p><s xml:id="s_f9BZpd"><w>We</w><w>want</w><w>to</w><w>add</w><w>this</w><w>new</w><w>functionality</w><w>in</w><code rend="inline"><w>getSearchResults</w></code><w>,</w><w>so</w><w>that</w><w>our</w><w>search</w><w>results</w><w>pages</w><w>are</w><w>downloaded</w><w>to</w><w>a</w><w>directory</w><w>with</w><w>the</w><w>same</w><w>name</w><w>as</w><w>our</w><w>search</w><w>query</w><pc>.</pc></s><s xml:id="s_IflYJk"><w>This</w><w>will</w><w>keep</w><w>our</w><code rend="inline"><w>programming-historian</w></code><w>directory</w><w>more</w><w>organized</w><pc>.</pc></s><s xml:id="s_EiWUkQ"><w>To</w><w>do</w><w>this</w><w>we</w><w>will</w><w>create</w><w>a</w><w>new</w><w>directory</w><w>using</w><w>the</w><code rend="inline"><w>os</w></code><w>library</w><w>,</w><w>short</w><w>for</w><w>“</w><w>operating</w><w>system</w><w>”</w><pc>.</pc></s><s xml:id="s_kvuWDZ"><w>That</w><w>library</w><w>contains</w><w>a</w><w>function</w><w>called</w><code rend="inline"><w>makedirs</w></code><w>,</w><w>which</w><w>,</w><w>unsurprisingly</w><w>,</w><w>makes</w><w>a</w><w>new</w><w>directory</w><pc>.</pc></s><s xml:id="s_J9YjwY"><w>You</w><w>can</w><w>try</w><w>this</w><w>out</w><w>using</w><w>the</w><w>Terminal</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_14" corresp="code_downloading-multiple-records-using-query-strings_14.txt" rend="block"/></ab><p><s xml:id="s_lVOv6T"><w>This</w><w>program</w><w>will</w><w>check</w><w>to</w><w>see</w><w>if</w><w>your</w><w>computer</w><w>already</w><w>has</w><w>a</w><w>directory</w><w>with</w><w>this</w><w>name</w><pc>.</pc></s><s xml:id="s_RMo23n"><w>If</w><w>not</w><w>,</w><w>you</w><w>should</w><w>now</w><w>have</w><w>a</w><w>directory</w><w>called</w><code rend="inline"><w>myNewDirectory</w></code><w>on</w><w>your</w><w>computer</w><pc>.</pc></s><s xml:id="s_FGAZl3"><w>On</w><w>a</w><w>Mac</w><w>this</w><w>is</w><w>probably</w><w>located</w><w>in</w><w>your</w><code rend="inline"><w>/Users/username/</w></code><w>directory</w><w>,</w><w>and</w><w>on</w><w>Windows</w><w>you</w><w>should</w><w>be</w><w>able</w><w>to</w><w>find</w><w>it</w><w>in</w><w>the</w><code rend="inline"><w>Python</w></code><w>directory</w><w>on</w><w>your</w><w>computer</w><w>,</w><w>the</w><w>same</w><w>in</w><w>which</w><w>you</w><w>opened</w><w>your</w><w>command</w><w>line</w><w>program</w><pc>.</pc></s><s xml:id="s_zq96HZ"><w>If</w><w>this</w><w>worked</w><w>you</w><w>can</w><w>delete</w><w>the</w><w>directory</w><w>from</w><w>your</w><w>hard</w><w>drive</w><w>,</w><w>since</w><w>it</w><w>was</w><w>just</w><w>for</w><w>practice</w><pc>.</pc></s><s xml:id="s_vbSw4x"><w>Since</w><w>we</w><w>want</w><w>to</w><w>create</w><w>a</w><w>new</w><w>directory</w><w>named</w><w>after</w><w>the</w><w>query</w><w>that</w><w>we</w><w>input</w><w>into</w><w>the</w><w>Old</w><w>Bailey</w><w>Online</w><w>website</w><w>,</w><w>we</w><w>will</w><w>make</w><w>direct</w><w>use</w><w>of</w><w>the</w><w>query</w><w>function</w><w>argument</w><w>from</w><w>the</w><w>getSearchResults</w><w>function</w><pc>.</pc></s><s xml:id="s_onycOE"><w>To</w><w>do</w><w>this</w><w>,</w><w>import</w><w>the</w><code rend="inline"><w>os</w></code><w>library</w><w>after</w><w>the</w><w>others</w><w>and</w><w>then</w><w>add</w><w>the</w><w>code</w><w>you</w><w>have</w><w>just</w><w>written</w><w>immediately</w><w>below</w><pc>.</pc></s><s xml:id="s_o9KKIp"><w>Your</w><code rend="inline"><w>getSearchResults</w></code><w>function</w><w>should</w><w>now</w><w>look</w><w>like</w><w>this</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_15" corresp="code_downloading-multiple-records-using-query-strings_15.txt" rend="block"/></ab><p><s xml:id="s_3RBIel"><w>The</w><w>last</w><w>step</w><w>for</w><w>this</w><w>function</w><w>is</w><w>to</w><w>make</w><w>sure</w><w>that</w><w>when</w><w>we</w><w>save</w><w>our</w><w>search</w><w>results</w><w>pages</w><w>,</w><w>we</w><w>save</w><w>them</w><w>in</w><w>this</w><w>new</w><w>directory</w><pc>.</pc></s><s xml:id="s_4YpnY0"><w>To</w><w>do</w><w>this</w><w>we</w><w>can</w><w>make</w><w>a</w><w>minor</w><w>adjustment</w><w>to</w><w>the</w><w>filename</w><w>variable</w><w>so</w><w>that</w><w>the</w><w>file</w><w>ends</w><w>up</w><w>in</w><w>the</w><w>right</w><w>place</w><pc>.</pc></s><s xml:id="s_Vz7AyE"><w>There</w><w>are</w><w>many</w><w>ways</w><w>we</w><w>can</w><w>do</w><w>this</w><w>,</w><w>the</w><w>easiest</w><w>of</w><w>which</w><w>is</w><w>just</w><w>to</w><w>append</w><w>the</w><w>new</w><w>directory</w><w>name</w><w>plus</w><w>a</w><w>slash</w><w>to</w><w>the</w><w>name</w><w>of</w><w>the</w><w>file</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_16" corresp="code_downloading-multiple-records-using-query-strings_16.txt" rend="block"/></ab><p><s xml:id="s_U86b7w"><w>If</w><w>your</w><w>computer</w><w>is</w><w>running</w><w>Windows</w><w>you</w><w>will</w><w>need</w><w>to</w><w>use</w><w>a</w><w>backslash</w><w>instead</w><w>of</w><w>a</w><w>forward</w><w>slash</w><w>in</w><w>the</w><w>above</w><w>example</w><pc>.</pc></s><s xml:id="s_hOshd3"><w>Add</w><w>the</w><w>above</w><w>line</w><w>to</w><w>your</w><code rend="inline"><w>getSearchResults</w></code><w>page</w><w>in</w><w>lieu</w><w>of</w><w>the</w><w>current</w><code rend="inline"><w>filename</w></code><w>description</w><pc>.</pc></s></p><p><s xml:id="s_VABPmm"><w>If</w><w>you</w><w>are</w><w>running</w><w>Windows</w><w>,</w><w>chances</w><w>are</w><w>your</w><code rend="inline"><w>downloadSearches.py</w></code><w>program</w><w>will</w><w>now</w><w>crash</w><w>when</w><w>you</w><w>run</w><w>it</w><w>because</w><w>you</w><w>are</w><w>trying</w><w>to</w><w>create</w><w>a</w><w>directory</w><w>with</w><w>a</w><w>*</w><w>in</w><w>it</w><pc>.</pc></s><s xml:id="s_9CARtm"><w>Windows</w><w>does</w><w>not</w><w>like</w><w>this</w><pc>.</pc></s><s xml:id="s_hiO0nj"><w>To</w><w>get</w><w>around</w><w>this</w><w>problem</w><w>we</w><w>can</w><w>use</w><ref target="https://docs.python.org/3/library/re.html"><w>regular</w><w>expressions</w></ref><w>to</w><w>remove</w><w>any</w><w>non-Windows-friendly</w><w>characters</w><pc>.</pc></s><s xml:id="s_sdpToN"><w>We</w><w>used</w><w>regular</w><w>expressions</w><w>previously</w><w>in</w><ref target="/lessons/counting-frequencies"><w>Counting</w><w>Frequencies</w></ref><pc>.</pc></s><s xml:id="s_xCYTEE"><w>To</w><w>remove</w><w>non-alpha-numeric</w><w>characters</w><w>from</w><w>the</w><w>query</w><w>,</w><w>first</w><w>import</w><w>the</w><w>regular</w><w>expressions</w><w>library</w><w>immediately</w><w>after</w><w>you</w><w>have</w><w>imported</w><w>the</w><code rend="inline"><w>os</w></code><w>library</w><w>,</w><w>then</w><w>use</w><w>the</w><code rend="inline"><w>re.sub</w><w>(</w><w>)</w></code><w>function</w><w>to</w><w>create</w><w>a</w><w>new</w><w>string</w><w>named</w><code rend="inline"><w>cleanQuery</w></code><w>that</w><w>contains</w><w>only</w><w>alphanumeric</w><w>characters</w><pc>.</pc></s><s xml:id="s_eim2Lz"><w>You</w><w>will</w><w>then</w><w>have</w><w>to</w><w>substitute</w><code rend="inline"><w>cleanQuery</w></code><w>as</w><w>the</w><w>variable</w><w>used</w><w>in</w><w>the</w><code rend="inline"><w>os.path.exists</w><w>(</w><w>)</w></code><w>,</w><code rend="inline"><w>os.makedirs</w><w>(</w><w>)</w></code><w>,</w><w>and</w><code rend="inline"><w>filename</w></code><w>declarations</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_17" corresp="code_downloading-multiple-records-using-query-strings_17.txt" rend="block"/></ab><p><s xml:id="s_ghPjBU"><w>The</w><w>final</w><w>version</w><w>of</w><w>your</w><w>function</w><w>should</w><w>look</w><w>like</w><w>this</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_18" corresp="code_downloading-multiple-records-using-query-strings_18.txt" rend="block"/></ab><p><s xml:id="s_gBhkps"><w>This</w><w>time</w><w>we</w><w>tell</w><w>the</w><w>program</w><w>to</w><w>download</w><w>the</w><w>trials</w><w>and</w><w>put</w><w>them</w><w>in</w><w>the</w><w>new</w><w>directory</w><w>rather</w><w>than</w><w>our</w><code rend="inline"><w>programming-historian</w></code><w>directory</w><pc>.</pc></s><s xml:id="s_yh0ciz"><w>Run</w><code rend="inline"><w>download-searches.py</w></code><w>once</w><w>more</w><w>to</w><w>ensure</w><w>this</w><w>worked</w><w>and</w><w>you</w><w>understand</w><w>how</w><w>to</w><w>save</w><w>files</w><w>to</w><w>a</w><w>particular</w><w>directory</w><w>using</w><w>Python</w><pc>.</pc></s></p></div><div type="3" n="6.2"><head><s xml:id="s_GpCCFf"><w>Downloading</w><w>the</w><w>individual</w><w>trial</w><w>entries</w></s></head><p><s xml:id="s_a6CT6y"><w>At</w><w>this</w><w>stage</w><w>we</w><w>have</w><w>created</w><w>a</w><w>function</w><w>that</w><w>can</w><w>download</w><w>all</w><w>of</w><w>the</w><w>search</w><w>results</w><w>HTML</w><w>files</w><w>from</w><w>the</w><w>Old</w><w>Bailey</w><w>Online</w><w>website</w><w>for</w><w>an</w><w>advanced</w><w>search</w><w>that</w><w>we</w><w>have</w><w>defined</w><w>,</w><w>and</w><w>have</w><w>done</w><w>so</w><w>programmatically</w><pc>.</pc></s><s xml:id="s_o3jbud"><w>Now</w><w>for</w><w>the</w><w>next</w><w>step</w><w>in</w><w>the</w><w>algorithm</w><w>:</w><w>Extract</w><w>the</w><w>URLs</w><w>of</w><w>each</w><w>trial</w><w>transcript</w><w>from</w><w>the</w><w>search</w><w>results</w><w>HTML</w><w>files</w><pc>.</pc></s><s xml:id="s_7ny8JT"><w>In</w><w>the</w><w>lessons</w><w>that</w><w>precede</w><w>this</w><w>one</w><w>(</w><w>eg</w><w>,</w><ref target="/lessons/working-with-web-pages"><w>Working</w><w>with</w><w>Webpages</w></ref><w>)</w><w>,</w><w>we</w><w>have</w><w>worked</w><w>with</w><w>the</w><w>printer</w><w>friendly</w><w>versions</w><w>of</w><w>the</w><w>trial</w><w>transcripts</w><w>,</w><w>so</w><w>we</w><w>will</w><w>continue</w><w>to</w><w>do</w><w>so</w><pc>.</pc></s><s xml:id="s_6GSUKt"><w>We</w><w>know</w><w>that</w><w>the</w><w>printer</w><w>friendly</w><w>version</w><w>of</w><w>Benjamin</w><w>Bowsey</w><w>’</w><w>s</w><w>trial</w><w>is</w><w>located</w><w>at</w><w>the</w><w>URL</w><w>:</w></s></p><ab><code xml:id="code_downloading-multiple-records-using-query-strings_19" corresp="code_downloading-multiple-records-using-query-strings_19.txt" rend="block"/></ab><p><s xml:id="s_dIkdhj"><w>In</w><w>the</w><w>same</w><w>way</w><w>that</w><w>changing</w><w>query</w><w>strings</w><w>in</w><w>the</w><w>URLs</w><w>yields</w><w>different</w><w>search</w><w>results</w><w>,</w><w>changing</w><w>the</w><w>URL</w><w>for</w><w>trial</w><w>records</w><w>–</w><w>namely</w><w>substituting</w><w>one</w><w>trial</w><w>ID</w><w>for</w><w>another</w><w>–</w><w>we</w><w>will</w><w>get</w><w>the</w><w>transcript</w><w>for</w><w>that</w><w>new</w><w>trial</w><pc>.</pc></s><s xml:id="s_pC5UHj"><w>This</w><w>means</w><w>that</w><w>to</w><w>find</w><w>and</w><w>download</w><w>the</w><w>13</w><w>matching</w><w>files</w><w>,</w><w>all</w><w>we</w><w>need</w><w>are</w><w>these</w><w>trial</w><w>IDs</w><pc>.</pc></s><s xml:id="s_yWVqIK"><w>Since</w><w>we</w><w>know</w><w>that</w><w>search</w><w>results</w><w>pages</w><w>on</w><w>websites</w><w>generally</w><w>contain</w><w>a</w><w>link</w><w>to</w><w>the</w><w>pages</w><w>described</w><w>,</w><w>there</w><w>is</w><w>a</w><w>good</w><w>chance</w><w>that</w><w>we</w><w>can</w><w>find</w><w>these</w><w>links</w><w>embedded</w><w>in</w><w>the</w><w>HTML</w><w>code</w><pc>.</pc></s><s xml:id="s_M5ePAs"><w>If</w><w>we</w><w>can</w><w>scrape</w><w>this</w><w>information</w><w>from</w><w>the</w><w>downloaded</w><w>search</w><w>results</w><w>pages</w><w>,</w><w>we</w><w>can</w><w>then</w><w>use</w><w>that</w><w>information</w><w>to</w><w>generate</w><w>a</w><w>URL</w><w>that</w><w>will</w><w>allow</w><w>us</w><w>to</w><w>download</w><w>each</w><w>trial</w><w>transcript</w><pc>.</pc></s><s xml:id="s_U7TW08"><w>This</w><w>is</w><w>a</w><w>technique</w><w>that</w><w>you</w><w>can</w><w>use</w><w>for</w><w>most</w><w>search</w><w>result</w><w>pages</w><w>,</w><w>not</w><w>just</w><w>Old</w><w>Bailey</w><w>Online</w><pc>!</pc></s><s xml:id="s_fkBOtW"><w>To</w><w>do</w><w>this</w><w>,</w><w>we</w><w>must</w><w>first</w><w>find</w><w>where</w><w>the</w><w>trial</w><w>IDs</w><w>are</w><w>amidst</w><w>the</w><w>HTML</w><w>code</w><w>in</w><w>the</w><w>downloaded</w><w>files</w><w>,</w><w>and</w><w>then</w><w>determine</w><w>a</w><w>way</w><w>to</w><w>consistently</w><w>isolate</w><w>them</w><w>using</w><w>code</w><w>so</w><w>that</w><w>no</w><w>matter</w><w>which</w><w>search</w><w>results</w><w>page</w><w>we</w><w>download</w><w>from</w><w>the</w><w>site</w><w>we</w><w>are</w><w>able</w><w>to</w><w>find</w><w>the</w><w>trial</w><w>transcripts</w><pc>.</pc></s><s xml:id="s_qqEVfz"><w>First</w><w>,</w><w>open</w><code rend="inline"><w>search-results0.html</w></code><w>in</w><w>Komodo</w><w>Edit</w><w>and</w><w>have</w><w>a</w><w>look</w><w>for</w><w>the</w><w>list</w><w>of</w><w>the</w><w>trials</w><pc>.</pc></s><s xml:id="s_4riwIb"><w>The</w><w>first</w><w>entry</w><w>starts</w><w>with</w><w>“</w><w>Anne</w><w>Smith</w><w>”</w><w>so</w><w>you</w><w>can</w><w>use</w><w>the</w><w>“</w><w>find</w><w>”</w><w>feature</w><w>in</w><w>Komodo</w><w>Edit</w><w>to</w><w>jump</w><w>immediately</w><w>to</w><w>the</w><w>right</w><w>spot</w><pc>.</pc></s><s xml:id="s_dHrnq3"><w>Notice</w><w>Anne</w><w>’</w><w>s</w><w>name</w><w>is</w><w>part</w><w>of</w><w>a</w><w>link</w><w>:</w></s></p><ab><code xml:id="code_downloading-multiple-records-using-query-strings_20" corresp="code_downloading-multiple-records-using-query-strings_20.txt" rend="block"/></ab><p><s xml:id="s_qrtfMI"><w>Perfect</w><w>,</w><w>the</w><w>link</w><w>contains</w><w>the</w><w>trial</w><w>ID</w><pc>!</pc></s><s xml:id="s_y8OoWz"><w>Scroll</w><w>through</w><w>the</w><w>remaining</w><w>entries</w><w>and</w><w>you</w><w>’</w><w>ll</w><w>find</w><w>the</w><w>same</w><w>is</w><w>true</w><pc>.</pc></s><s xml:id="s_EakMJT"><w>Lucky</w><w>for</w><w>us</w><w>,</w><w>the</w><w>site</w><w>is</w><w>well</w><w>formatted</w><w>and</w><w>it</w><w>looks</w><w>like</w><w>each</w><w>link</w><w>starts</w><w>with</w><w>“</w><w>browse.jsp</w><pc>?</pc></s><s xml:id="s_wxVHmX"><w>id=</w><w>”</w><w>followed</w><w>by</w><w>the</w><w>trial</w><w>ID</w><w>and</w><w>finished</w><w>with</w><w>an</w><w>&amp;</w><w>,</w><w>in</w><w>Anne</w><w>’</w><w>s</w><w>case</w><w>:</w><w>“</w><w>browse.jsp</w><pc>?</pc></s><s xml:id="s_gTfkgn"><w>id=t17160113-18</w><w>&amp;</w><w>”</w><pc>.</pc></s><s xml:id="s_gwsC5Y"><w>We</w><w>can</w><w>write</w><w>a</w><w>few</w><w>lines</w><w>of</w><w>code</w><w>that</w><w>can</w><w>isolate</w><w>those</w><w>IDs</w><pc>.</pc></s><s xml:id="s_0hjJGW"><w>Take</w><w>a</w><w>look</w><w>at</w><w>the</w><w>following</w><w>function</w><pc>.</pc></s><s xml:id="s_ZVMtnL"><w>This</w><w>function</w><w>also</w><w>uses</w><w>the</w><code rend="inline"><w>os</w></code><w>library</w><w>,</w><w>in</w><w>this</w><w>case</w><w>to</w><w>list</w><w>all</w><w>of</w><w>the</w><w>files</w><w>located</w><w>in</w><w>the</w><w>directory</w><w>created</w><w>in</w><w>the</w><w>previous</w><w>section</w><pc>.</pc></s><s xml:id="s_2ATGPh"><w>The</w><code rend="inline"><w>os</w></code><w>library</w><w>contains</w><w>a</w><w>range</w><w>of</w><w>useful</w><w>functions</w><w>that</w><w>mirror</w><w>the</w><w>types</w><w>of</w><w>tasks</w><w>you</w><w>would</w><w>expect</w><w>to</w><w>be</w><w>able</w><w>to</w><w>do</w><w>with</w><w>your</w><w>mouse</w><w>in</w><w>the</w><w>Mac</w><w>Finder</w><w>or</w><w>Windows</w><w>such</w><w>as</w><w>opening</w><w>,</w><w>closing</w><w>,</w><w>creating</w><w>,</w><w>deleting</w><w>,</w><w>and</w><w>moving</w><w>files</w><w>and</w><w>directories</w><w>,</w><w>and</w><w>is</w><w>a</w><w>great</w><w>library</w><w>to</w><w>master</w><w>–</w><w>or</w><w>at</w><w>least</w><w>familiarize</w><w>yourself</w><w>with</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_21" corresp="code_downloading-multiple-records-using-query-strings_21.txt" rend="block"/></ab><p><s xml:id="s_j7ofHn"><w>Create</w><w>and</w><w>run</w><w>a</w><w>new</w><w>program</w><w>called</w><code rend="inline"><w>extract-trial-ids.py</w></code><w>with</w><w>the</w><w>following</w><w>code</w><pc>.</pc></s><s xml:id="s_ZkQThG"><w>Make</w><w>sure</w><w>you</w><w>input</w><w>the</w><w>same</w><w>value</w><w>into</w><w>the</w><w>query</w><w>argument</w><w>as</w><w>you</w><w>did</w><w>in</w><w>the</w><w>previous</w><w>example</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_22" corresp="code_downloading-multiple-records-using-query-strings_22.txt" rend="block"/></ab><p><s xml:id="s_QAx16E"><w>If</w><w>everything</w><w>went</w><w>right</w><w>,</w><w>you</w><w>should</w><w>see</w><w>a</w><w>list</w><w>containing</w><w>the</w><w>names</w><w>of</w><w>all</w><w>the</w><w>files</w><w>in</w><w>your</w><w>new</w><w>“</w><w>mulatto</w><w>*</w><w>+negro</w><w>*</w><w>”</w><w>directory</w><w>,</w><w>which</w><w>at</w><w>this</w><w>point</w><w>should</w><w>be</w><w>the</w><w>two</w><w>search</w><w>results</w><w>pages</w><pc>.</pc></s><s xml:id="s_f01CQz"><w>Ensure</w><w>this</w><w>worked</w><w>before</w><w>moving</w><w>forward</w><pc>.</pc></s><s xml:id="s_gdAzpA"><w>Since</w><w>we</w><w>saved</w><w>all</w><w>of</w><w>the</w><w>search</w><w>results</w><w>pages</w><w>with</w><w>a</w><w>filename</w><w>that</w><w>includes</w><w>“</w><w>search-results</w><w>”</w><w>,</w><w>we</w><w>now</w><w>want</w><w>to</w><w>open</w><w>each</w><w>file</w><w>with</w><w>a</w><w>name</w><w>containing</w><w>“</w><w>search-results</w><w>”</w><w>,</w><w>and</w><w>extract</w><w>all</w><w>trial</w><w>IDs</w><w>found</w><w>therein</w><pc>.</pc></s><s xml:id="s_7Hpgot"><w>In</w><w>this</w><w>case</w><w>we</w><w>know</w><w>we</w><w>have</w><w>2</w><w>,</w><w>but</w><w>we</w><w>want</w><w>our</w><w>code</w><w>to</w><w>be</w><w>as</w><w>reusable</w><w>as</w><w>possible</w><w>(</w><w>with</w><w>reason</w><w>,</w><w>of</w><w>course</w><pc>!</pc></s><s xml:id="s_Q2Z1Q8"><w>)</w><w>Restricting</w><w>this</w><w>action</w><w>to</w><w>files</w><w>named</w><w>“</w><w>search-results</w><w>”</w><w>will</w><w>mean</w><w>that</w><w>this</w><w>program</w><w>will</w><w>work</w><w>as</w><w>intended</w><w>even</w><w>if</w><w>the</w><w>directory</w><w>contains</w><w>many</w><w>other</w><w>unrelated</w><w>files</w><w>because</w><w>the</w><w>program</w><w>will</w><w>skip</w><w>over</w><w>anything</w><w>with</w><w>a</w><w>different</w><w>name</w><pc>.</pc></s><s xml:id="s_aTviKn"><w>Add</w><w>the</w><w>following</w><w>to</w><w>your</w><w>getIndivTrials</w><w>(</w><w>)</w><w>function</w><w>,</w><w>which</w><w>will</w><w>check</w><w>if</w><w>each</w><w>file</w><w>contains</w><w>“</w><w>search-results</w><w>”</w><w>in</w><w>its</w><w>name</w><pc>.</pc></s><s xml:id="s_dq9AAL"><w>If</w><w>it</w><w>does</w><w>,</w><w>the</w><w>file</w><w>will</w><w>be</w><w>opened</w><w>and</w><w>the</w><w>contents</w><w>saved</w><w>to</w><w>a</w><w>variable</w><w>named</w><w>text</w><pc>.</pc></s><s xml:id="s_t6zYwa"><w>That</w><w>text</w><w>variable</w><w>will</w><w>then</w><w>be</w><w>parsed</w><w>looking</w><w>for</w><w>the</w><w>trial</w><w>ID</w><w>,</w><w>which</w><w>we</w><w>know</w><w>always</w><w>follows</w><w>“</w><w>browse.jsp</w><pc>?</pc></s><s xml:id="s_RkcwVY"><w>id=</w><w>”</w><pc>.</pc></s><s xml:id="s_a57ADf"><w>If</w><w>and</w><w>when</w><w>that</w><w>trial</w><w>ID</w><w>is</w><w>found</w><w>it</w><w>will</w><w>be</w><w>saved</w><w>to</w><w>a</w><w>list</w><w>and</w><w>printed</w><w>to</w><w>the</w><w>command</w><w>output</w><w>,</w><w>which</w><w>leaves</w><w>us</w><w>with</w><w>all</w><w>of</w><w>the</w><w>information</w><w>we</w><w>need</w><w>to</w><w>then</w><w>write</w><w>a</w><w>program</w><w>that</w><w>will</w><w>download</w><w>the</w><w>desired</w><w>trials</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_23" corresp="code_downloading-multiple-records-using-query-strings_23.txt" rend="block"/></ab><p><s xml:id="s_XWahwR"><w>That</w><w>last</w><w>line</w><w>of</w><w>the</w><w>for</w><w>loop</w><w>may</w><w>look</w><w>tricky</w><w>,</w><w>but</w><w>make</w><w>sure</w><w>you</w><w>understand</w><w>it</w><w>before</w><w>moving</w><w>on</w><pc>.</pc></s><s xml:id="s_46mZ5T"><w>The</w><w>words</w><w>variable</w><w>is</w><w>checked</w><w>to</w><w>see</w><w>if</w><w>it</w><w>contains</w><w>the</w><w>characters</w><w>“</w><w>id=</w><w>”</w><w>(</w><w>without</w><w>the</w><w>quotes</w><w>)</w><w>,</w><w>which</w><w>of</w><w>course</w><w>refers</w><w>to</w><w>a</w><w>specific</w><w>trial</w><w>transcript</w><w>ID</w><pc>.</pc></s><s xml:id="s_zDbJ6g"><w>If</w><w>it</w><w>does</w><w>,</w><w>we</w><w>use</w><w>the</w><w>slice</w><w>string</w><w>method</w><w>to</w><w>capture</w><w>only</w><w>the</w><w>chunk</w><w>between</w><emph><w>id=</w></emph><w>and</w><emph><w>&amp;</w></emph><w>and</w><w>append</w><w>it</w><w>to</w><w>the</w><w>url</w><w>list</w><pc>.</pc></s><s xml:id="s_YzzLqI"><w>If</w><w>we</w><w>knew</w><w>the</w><w>exact</w><w>index</w><w>positions</w><w>of</w><w>this</w><w>substring</w><w>we</w><w>could</w><w>have</w><w>used</w><w>those</w><w>numerical</w><w>values</w><w>instead</w><pc>.</pc></s><s xml:id="s_JhwCAU"><w>However</w><w>,</w><w>by</w><w>using</w><w>the</w><emph><w>find</w><w>(</w><w>)</w></emph><w>string</w><w>method</w><w>we</w><w>have</w><w>created</w><w>a</w><w>much</w><w>more</w><w>flexible</w><w>program</w><pc>.</pc></s><s xml:id="s_1RPMnf"><w>The</w><w>following</w><w>code</w><w>does</w><w>exactly</w><w>the</w><w>same</w><w>thing</w><w>as</w><w>that</w><w>last</w><w>line</w><w>in</w><w>a</w><w>less</w><w>condensed</w><w>manner</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_24" corresp="code_downloading-multiple-records-using-query-strings_24.txt" rend="block"/></ab><p><s xml:id="s_nTr5V4"><w>When</w><w>you</w><w>re-run</w><code rend="inline"><w>extract-trial-ids.py</w></code><w>,</w><w>you</w><w>should</w><w>now</w><w>see</w><w>a</w><w>list</w><w>of</w><w>all</w><w>the</w><w>trial</w><w>IDs</w><pc>.</pc></s><s xml:id="s_ajjd0H"><w>We</w><w>can</w><w>add</w><w>a</w><w>couple</w><w>extra</w><w>lines</w><w>to</w><w>turn</w><w>these</w><w>into</w><w>proper</w><w>URLs</w><w>and</w><w>download</w><w>the</w><w>whole</w><w>list</w><w>to</w><w>our</w><w>new</w><w>directory</w><pc>.</pc></s><s xml:id="s_YQTKyJ"><w>We</w><w>’</w><w>ll</w><w>also</w><w>use</w><w>the</w><code rend="inline"><w>time</w></code><w>library</w><w>to</w><w>pause</w><w>our</w><w>program</w><w>for</w><w>three</w><w>seconds</w><w>between</w><w>downloads–</w><w>a</w><w>technique</w><w>called</w><w>throttling</w><pc>.</pc></s><s xml:id="s_xweJwa"><w>It</w><w>’</w><w>s</w><w>considered</w><w>good</w><w>form</w><w>not</w><w>to</w><w>pound</w><w>someone</w><w>’</w><w>s</w><w>server</w><w>with</w><w>many</w><w>requests</w><w>per</w><w>second</w><w>;</w><w>and</w><w>the</w><w>slight</w><w>delay</w><w>makes</w><w>it</w><w>more</w><w>likely</w><w>that</w><w>all</w><w>the</w><w>files</w><w>will</w><w>actually</w><w>download</w><w>rather</w><w>than</w><ref target="http://www.checkupdown.com/status/E408.html"><w>time</w><w>out</w></ref><pc>.</pc></s><s xml:id="s_NG9udt"><w>Add</w><w>the</w><w>following</w><w>code</w><w>to</w><w>the</w><w>end</w><w>of</w><w>your</w><code rend="inline"><w>getIndivTrials</w><w>(</w><w>)</w></code><w>function</w><pc>.</pc></s><s xml:id="s_RDGnnC"><w>This</w><w>code</w><w>will</w><w>generate</w><w>the</w><w>URL</w><w>of</w><w>each</w><w>individual</w><w>page</w><w>,</w><w>download</w><w>the</w><w>page</w><w>to</w><w>your</w><w>computer</w><w>,</w><w>place</w><w>it</w><w>in</w><w>your</w><w>new</w><w>directory</w><w>,</w><w>save</w><w>the</w><w>file</w><w>,</w><w>and</w><w>pause</w><w>for</w><w>3</w><w>seconds</w><w>before</w><w>moving</w><w>on</w><w>to</w><w>the</w><w>next</w><w>trial</w><pc>.</pc></s><s xml:id="s_1aHSti"><w>This</w><w>work</w><w>is</w><w>all</w><w>contained</w><w>in</w><w>a</w><w>for</w><w>loop</w><w>,</w><w>and</w><w>will</w><w>run</w><w>once</w><w>for</w><w>every</w><w>trial</w><w>in</w><w>your</w><w>url</w><w>list</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_25" corresp="code_downloading-multiple-records-using-query-strings_25.txt" rend="block"/></ab><p><s xml:id="s_UDXMEp"><w>If</w><w>we</w><w>put</w><w>this</w><w>all</w><w>together</w><w>into</w><w>a</w><w>single</w><w>function</w><w>it</w><w>should</w><w>look</w><w>something</w><w>like</w><w>this</w><pc>.</pc></s><s xml:id="s_XcSKMb"><w>(</w><w>Note</w><w>,</w><w>we</w><w>’</w><w>ve</w><w>put</w><w>all</w><w>the</w><w>“</w><w>import</w><w>”</w><w>calls</w><w>at</w><w>the</w><w>top</w><w>to</w><w>keep</w><w>things</w><w>cleaner</w><w>)</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_26" corresp="code_downloading-multiple-records-using-query-strings_26.txt" rend="block"/></ab><p><s xml:id="s_vnAUrH"><w>Let</w><w>’</w><w>s</w><w>add</w><w>the</w><w>same</w><w>three-second</w><w>pause</w><w>to</w><w>our</w><code rend="inline"><w>getSearchResults</w></code><w>function</w><w>to</w><w>be</w><w>kind</w><w>to</w><w>the</w><w>Old</w><w>Bailey</w><w>Online</w><w>servers</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_27" corresp="code_downloading-multiple-records-using-query-strings_27.txt" rend="block"/></ab><p><s xml:id="s_EhxZYK"><w>Finally</w><w>,</w><w>call</w><w>the</w><w>function</w><w>in</w><w>the</w><code rend="inline"><w>download-searches.py</w></code><w>program</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_28" corresp="code_downloading-multiple-records-using-query-strings_28.txt" rend="block"/></ab><p><s xml:id="s_3BAZ1S"><w>Now</w><w>,</w><w>you</w><w>’</w><w>ve</w><w>created</w><w>a</w><w>program</w><w>that</w><w>can</w><w>request</w><w>and</w><w>download</w><w>files</w><w>from</w><w>the</w><w>Old</w><w>Bailey</w><w>website</w><w>based</w><w>on</w><w>search</w><w>parameters</w><w>you</w><w>define</w><w>,</w><w>all</w><w>without</w><w>visiting</w><w>the</w><w>site</w><pc>!</pc></s></p></div><div type="3" n="6.3"><head><s xml:id="s_cu9881"><w>In</w><w>case</w><w>a</w><w>file</w><w>does</w><w>not</w><w>download</w></s></head><p><s xml:id="s_qXwk3l"><w>Check</w><w>to</w><w>make</w><w>all</w><w>thirteen</w><w>files</w><w>have</w><w>downloaded</w><w>properly</w><pc>.</pc></s><s xml:id="s_Of5iYd"><w>If</w><w>that</w><w>’</w><w>s</w><w>the</w><w>case</w><w>for</w><w>you</w><w>,</w><w>that</w><w>’</w><w>s</w><w>great</w><pc>!</pc></s><s xml:id="s_vZt6OY"><w>However</w><w>,</w><w>there</w><w>’</w><w>s</w><w>a</w><w>possibility</w><w>that</w><w>this</w><w>program</w><w>stalled</w><w>along</w><w>the</w><w>way</w><pc>.</pc></s><s xml:id="s_mSdtnm"><w>That</w><w>’</w><w>s</w><w>because</w><w>our</w><w>program</w><w>,</w><w>though</w><w>running</w><w>on</w><w>your</w><w>own</w><w>machine</w><w>,</w><w>relies</w><w>on</w><w>two</w><w>factors</w><w>outside</w><w>of</w><w>our</w><w>immediate</w><w>control</w><w>:</w><w>the</w><w>speed</w><w>of</w><w>the</w><w>Internet</w><w>,</w><w>and</w><w>the</w><w>response</w><w>time</w><w>of</w><w>the</w><w>Old</w><w>Bailey</w><w>Online</w><w>server</w><w>at</w><w>that</w><w>moment</w><pc>.</pc></s><s xml:id="s_NqO40c"><w>It</w><w>’</w><w>s</w><w>one</w><w>thing</w><w>to</w><w>ask</w><w>Python</w><w>to</w><w>download</w><w>a</w><w>single</w><w>file</w><w>,</w><w>but</w><w>when</w><w>we</w><w>start</w><w>asking</w><w>for</w><w>a</w><w>file</w><w>every</w><w>3</w><w>seconds</w><w>there</w><w>’</w><w>s</w><w>a</w><w>greater</w><w>chance</w><w>the</w><w>server</w><w>will</w><w>either</w><w>time</w><w>out</w><w>or</w><w>fail</w><w>to</w><w>send</w><w>us</w><w>the</w><w>file</w><w>we</w><w>are</w><w>after</w><pc>.</pc></s></p><p><s xml:id="s_IiU3ZK"><w>If</w><w>we</w><w>were</w><w>using</w><w>a</w><w>web</w><w>browser</w><w>to</w><w>make</w><w>these</w><w>requests</w><w>,</w><w>we</w><w>’</w><w>d</w><w>eventually</w><w>get</w><w>a</w><w>message</w><w>that</w><w>the</w><w>“</w><w>connection</w><w>had</w><w>timed</w><w>out</w><w>”</w><w>or</w><w>something</w><w>of</w><w>the</w><w>sort</w><pc>.</pc></s><s xml:id="s_n5Ln9p"><w>We</w><w>all</w><w>see</w><w>this</w><w>from</w><w>time</w><w>to</w><w>time</w><pc>.</pc></s><s xml:id="s_DQgwsh"><w>However</w><w>,</w><w>our</w><w>program</w><w>isn</w><w>’</w><w>t</w><w>built</w><w>to</w><w>handle</w><w>or</w><w>relay</w><w>such</w><w>error</w><w>messages</w><w>,</w><w>so</w><w>instead</w><w>you</w><w>’</w><w>ll</w><w>realize</w><w>it</w><w>when</w><w>you</w><w>discover</w><w>that</w><w>the</w><w>program</w><w>has</w><w>not</w><w>returned</w><w>the</w><w>expected</w><w>number</w><w>of</w><w>files</w><w>or</w><w>just</w><w>seemingly</w><w>does</w><w>nothing</w><pc>.</pc></s><s xml:id="s_P4EDgn"><w>To</w><w>prevent</w><w>frustration</w><w>and</w><w>uncertainty</w><w>,</w><w>we</w><w>want</w><w>a</w><w>fail-safe</w><w>in</w><w>our</w><w>program</w><w>that</w><w>will</w><w>attempt</w><w>to</w><w>download</w><w>each</w><w>trial</w><pc>.</pc></s><s xml:id="s_LHx9jH"><w>If</w><w>for</w><w>whatever</w><w>reason</w><w>it</w><w>fails</w><w>,</w><w>we</w><w>’</w><w>ll</w><w>make</w><w>a</w><w>note</w><w>of</w><w>it</w><w>and</w><w>move</w><w>on</w><w>to</w><w>the</w><w>next</w><w>trial</w><pc>.</pc></s></p><p><s xml:id="s_z2pWgO"><w>To</w><w>do</w><w>this</w><w>,</w><w>we</w><w>will</w><w>make</w><w>use</w><w>of</w><w>the</w><w>Python</w><ref target="http://docs.python.org/tutorial/errors.html"><w>try</w><w>/</w><w>except</w></ref><w>error</w><w>handling</w><w>mechanism</w><w>,</w><w>as</w><w>well</w><w>as</w><w>a</w><w>new</w><w>library</w><w>:</w><w>socket</w><pc>.</pc></s><s xml:id="s_AwzG3J"><w>Try</w><w>and</w><w>Except</w><w>are</w><w>a</w><w>lot</w><w>like</w><w>an</w><emph><w>if</w><w>/</w><w>else</w></emph><w>statement</w><pc>.</pc></s><s xml:id="s_JKI1eT"><w>When</w><w>you</w><w>ask</w><w>Python</w><w>to</w><emph><w>try</w></emph><w>something</w><w>,</w><w>it</w><w>will</w><w>attempt</w><w>to</w><w>run</w><w>the</w><w>code</w><w>;</w><w>if</w><w>the</w><w>code</w><w>fails</w><w>to</w><w>achieve</w><w>what</w><w>you</w><w>have</w><w>defined</w><w>,</w><w>it</w><w>will</w><w>run</w><w>the</w><emph><w>except</w></emph><w>code</w><pc>.</pc></s><s xml:id="s_cULQxK"><w>This</w><w>is</w><w>often</w><w>used</w><w>when</w><w>dealing</w><w>with</w><w>errors</w><w>,</w><w>known</w><w>as</w><emph><w>error</w><w>handling</w></emph><pc>.</pc></s><s xml:id="s_HoyoQ2"><w>We</w><w>can</w><w>use</w><w>this</w><w>to</w><w>our</w><w>advantage</w><w>by</w><w>telling</w><w>our</w><w>program</w><w>to</w><w>attempt</w><w>downloading</w><w>a</w><w>page</w><pc>.</pc></s><s xml:id="s_x67iY4"><w>If</w><w>it</w><w>fails</w><w>,</w><w>we</w><w>’</w><w>ll</w><w>ask</w><w>it</w><w>to</w><w>let</w><w>us</w><w>know</w><w>which</w><w>file</w><w>failed</w><w>and</w><w>then</w><w>move</w><w>on</w><pc>.</pc></s><s xml:id="s_6kswfA"><w>To</w><w>do</w><w>this</w><w>we</w><w>need</w><w>to</w><w>use</w><w>the</w><code rend="inline"><w>socket</w></code><w>library</w><w>,</w><w>which</w><w>will</w><w>allow</w><w>us</w><w>to</w><w>put</w><w>a</w><w>time</w><w>limit</w><w>on</w><w>a</w><w>download</w><w>attempt</w><w>before</w><w>moving</w><w>on</w><pc>.</pc></s><s xml:id="s_xilCbq"><w>This</w><w>involves</w><w>altering</w><w>the</w><code rend="inline"><w>getIndivTrials</w></code><w>function</w><pc>.</pc></s></p><p><s xml:id="s_n6zuq0"><w>First</w><w>,</w><w>we</w><w>need</w><w>to</w><w>load</w><w>the</w><code rend="inline"><w>socket</w></code><w>library</w><w>,</w><w>which</w><w>should</w><w>be</w><w>done</w><w>in</w><w>the</w><w>same</w><w>way</w><w>as</w><w>all</w><w>of</w><w>our</w><w>previous</w><w>library</w><w>imports</w><pc>.</pc></s><s xml:id="s_YLJfSM"><w>Then</w><w>,</w><w>we</w><w>need</w><w>to</w><w>import</w><w>the</w><code rend="inline"><w>urllib.error</w></code><w>library</w><w>,</w><w>which</w><w>allows</w><w>us</w><w>to</w><w>handle</w><w>download</w><w>errors</w><pc>.</pc></s><s xml:id="s_F6P6DC"><w>We</w><w>will</w><w>also</w><w>need</w><w>to</w><w>set</w><w>the</w><w>default</w><w>socket</w><w>timeout</w><w>length</w><w>–</w><w>how</w><w>long</w><w>do</w><w>we</w><w>want</w><w>to</w><w>try</w><w>to</w><w>download</w><w>a</w><w>page</w><w>before</w><w>we</w><w>give</w><w>up</w><pc>.</pc></s><s xml:id="s_7V53GE"><w>This</w><w>should</w><w>go</w><w>immediately</w><w>after</w><w>the</w><w>comment</w><w>that</w><w>begins</w><w>with</w><code rend="inline"><w>#</w><w>download</w><w>the</w><w>page</w></code></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_29" corresp="code_downloading-multiple-records-using-query-strings_29.txt" rend="block"/></ab><p><s xml:id="s_BaeL7Y"><w>Then</w><w>,</w><w>we</w><w>need</w><w>a</w><w>new</w><w>python</w><w>list</w><w>that</w><w>will</w><w>hold</w><w>all</w><w>of</w><w>the</w><w>urls</w><w>that</w><w>failed</w><w>to</w><w>download</w><pc>.</pc></s><s xml:id="s_x6HOnf"><w>We</w><w>will</w><w>call</w><w>this</w><code rend="inline"><w>failedAttempts</w></code><w>and</w><w>you</w><w>can</w><w>insert</w><w>it</w><w>immediately</w><w>after</w><w>the</w><code rend="inline"><w>import</w></code><w>instructions</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_30" corresp="code_downloading-multiple-records-using-query-strings_30.txt" rend="block"/></ab><p><s xml:id="s_q3UhT0"><w>Finally</w><w>,</w><w>we</w><w>can</w><w>add</w><w>the</w><emph><w>try</w><w>/</w><w>except</w></emph><w>statement</w><w>,</w><w>which</w><w>is</w><w>added</w><w>in</w><w>much</w><w>the</w><w>same</w><w>way</w><w>as</w><w>an</w><emph><w>if</w><w>/</w><w>else</w></emph><w>statement</w><w>would</w><w>be</w><pc>.</pc></s><s xml:id="s_LGjGlU"><w>In</w><w>this</w><w>case</w><w>,</w><w>we</w><w>will</w><w>put</w><w>all</w><w>of</w><w>the</w><w>code</w><w>designed</w><w>to</w><w>download</w><w>and</w><w>save</w><w>the</w><w>trials</w><w>in</w><w>the</w><w>try</w><w>statement</w><w>,</w><w>and</w><w>in</w><w>the</w><w>except</w><w>statement</w><w>we</w><w>will</w><w>tell</w><w>the</w><w>program</w><w>what</w><w>we</w><w>want</w><w>it</w><w>to</w><w>do</w><w>if</w><w>that</w><w>should</w><w>fail</w><pc>.</pc></s><s xml:id="s_l6smBO"><w>Here</w><w>,</w><w>we</w><w>will</w><w>append</w><w>the</w><w>url</w><w>that</w><w>failed</w><w>to</w><w>download</w><w>to</w><w>our</w><w>new</w><w>list</w><w>,</w><code rend="inline"><w>failedAttempts</w></code></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_31" corresp="code_downloading-multiple-records-using-query-strings_31.txt" rend="block"/></ab><p><s xml:id="s_nhE7Sj"><w>Finally</w><w>,</w><w>we</w><w>will</w><w>tell</w><w>the</w><w>program</w><w>to</w><w>print</w><w>the</w><w>contents</w><w>of</w><w>the</w><w>list</w><w>to</w><w>the</w><w>command</w><w>output</w><w>so</w><w>we</w><w>know</w><w>which</w><w>files</w><w>failed</w><w>to</w><w>download</w><pc>.</pc></s><s xml:id="s_PLOv2j"><w>This</w><w>should</w><w>be</w><w>added</w><w>as</w><w>the</w><w>last</w><w>line</w><w>in</w><w>the</w><w>function</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_32" corresp="code_downloading-multiple-records-using-query-strings_32.txt" rend="block"/></ab><p><s xml:id="s_LU1puH"><w>Now</w><w>when</w><w>you</w><w>run</w><w>the</w><w>program</w><w>,</w><w>should</w><w>there</w><w>be</w><w>a</w><w>problem</w><w>downloading</w><w>a</w><w>particular</w><w>file</w><w>,</w><w>you</w><w>will</w><w>receive</w><w>a</w><w>message</w><w>in</w><w>the</w><w>Command</w><w>Output</w><w>window</w><w>of</w><w>Komodo</w><w>Edit</w><pc>.</pc></s><s xml:id="s_y26guD"><w>This</w><w>message</w><w>will</w><w>contain</w><w>any</w><w>URLs</w><w>of</w><w>files</w><w>that</w><w>failed</w><w>to</w><w>download</w><pc>.</pc></s><s xml:id="s_JSYS4K"><w>If</w><w>there</w><w>are</w><w>only</w><w>one</w><w>or</w><w>two</w><w>,</w><w>it</w><w>’</w><w>s</w><w>probably</w><w>fastest</w><w>just</w><w>to</w><w>visit</w><w>the</w><w>pages</w><w>manually</w><w>and</w><w>use</w><w>the</w><w>“</w><w>Save</w><w>As</w><w>”</w><w>feature</w><w>of</w><w>your</w><w>browser</w><pc>.</pc></s><s xml:id="s_tgrNXx"><w>If</w><w>you</w><w>are</w><w>feeling</w><w>adventurous</w><w>,</w><w>you</w><w>could</w><w>modify</w><w>the</w><w>program</w><w>to</w><w>automatically</w><w>download</w><w>the</w><w>remaining</w><w>files</w><pc>.</pc></s><s xml:id="s_3dlVqJ"><w>The</w><w>final</w><w>version</w><w>of</w><w>your</w><code rend="inline"><w>getSearchResults</w><w>(</w><w>)</w></code><w>and</w><code rend="inline"><w>getIndivTrials</w><w>(</w><w>)</w></code><w>functions</w><w>should</w><w>now</w><w>look</w><w>like</w><w>this</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_downloading-multiple-records-using-query-strings_33" corresp="code_downloading-multiple-records-using-query-strings_33.txt" rend="block"/></ab></div></div><div type="2" n="7"><head><s xml:id="s_7YzTFO"><w>Further</w><w>Reading</w></s></head><p><s xml:id="s_qWo3GP"><w>For</w><w>more</w><w>advanced</w><w>users</w><w>,</w><w>or</w><w>to</w><w>become</w><w>a</w><w>more</w><w>advanced</w><w>user</w><w>,</w><w>you</w><w>may</w><w>find</w><w>it</w><w>worthwhile</w><w>to</w><w>read</w><w>about</w><w>achieving</w><w>this</w><w>same</w><w>process</w><w>using</w><w>Application</w><w>Programming</w><w>Interfaces</w><w>(</w><w>API</w><w>)</w><pc>.</pc></s><s xml:id="s_eWCts4"><w>A</w><w>website</w><w>with</w><w>an</w><w>API</w><w>will</w><w>generally</w><w>provide</w><w>instructions</w><w>on</w><w>how</w><w>to</w><w>request</w><w>certain</w><w>documents</w><pc>.</pc></s><s xml:id="s_7eVkGi"><w>It</w><w>’</w><w>s</w><w>a</w><w>very</w><w>similar</w><w>process</w><w>to</w><w>what</w><w>we</w><w>just</w><w>did</w><w>by</w><w>interpreting</w><w>the</w><w>URL</w><w>Query</w><w>Strings</w><w>,</w><w>but</w><w>without</w><w>the</w><w>added</w><w>detective</w><w>work</w><w>required</w><w>to</w><w>decipher</w><w>what</w><w>each</w><w>variable</w><w>does</w><pc>.</pc></s><s xml:id="s_bl3505"><w>If</w><w>you</w><w>are</w><w>interested</w><w>in</w><w>the</w><w>Old</w><w>Bailey</w><w>Online</w><w>,</w><w>they</w><w>have</w><w>recently</w><w>released</w><w>an</w><w>API</w><w>and</w><w>the</w><w>documentation</w><w>can</w><w>be</w><w>quite</w><w>helpful</w><w>:</w></s></p><list type="unordered"><item><s xml:id="s_GiqbTY"><w>Old</w><w>Bailey</w><w>Online</w><w>API</w><w>(</w><ref target="http://www.oldbaileyonline.org/static/DocAPI.jsp"><w>http</w><w>:</w><w>//www.oldbaileyonline.org/static/DocAPI.jsp</w></ref><w>)</w></s></item><item><s xml:id="s_kVKVD2"><w>Python</w><w>Best</w><w>way</w><w>to</w><w>create</w><w>directory</w><w>if</w><w>it</w><w>doesn</w><w>’</w><w>t</w><w>exist</w><w>for</w><w>file</w><w>write</w><pc>?</pc></s><s xml:id="s_ir4s3r"><w>(</w><ref target="http://stackoverflow.com/questions/273192/python-best-way-to-create-directory-if-it-doesnt-exist-for-file-write"><w>http</w><w>:</w><w>//stackoverflow.com/questions/273192/python-best-way-to-create-directory-if-it-doesnt-exist-for-file-write</w></ref><w>)</w></s></item></list></div></body>
    </text>
</TEI>
