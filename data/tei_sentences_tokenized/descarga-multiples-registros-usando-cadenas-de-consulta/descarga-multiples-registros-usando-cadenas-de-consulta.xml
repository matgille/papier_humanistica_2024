<TEI xmlns="http://www.tei-c.org/ns/1.0" xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="descarga-multiples-registros-usando-cadenas-de-consulta" type="translation" xml:base="descarga-multiples-registros-usando-cadenas-de-consulta/descarga-multiples-registros-usando-cadenas-de-consulta/descarga-multiples-registros-usando-cadenas-de-consulta.xml">
    <teiHeader>
        <fileDesc>
            <titleStmt>
                <title>Descargar múltiples registros mediante cadenas de consulta</title>
                <author role="original_author">Adam Crymble</author>
                <editor role="reviewers">
                    <persName>Luke Bergmann</persName>
                    <persName>Sharon Howard</persName>
                </editor>
                <author role="translators">Víctor Gayol</author>
                <editor role="translation-reviewers">
                    <persName>José Antonio Motilla</persName>
                    <persName>Nicolás Vaughan</persName>
                </editor>
                <editor role="editors">Fred Gibbs</editor>
            </titleStmt>
            <publicationStmt>
                <distributor>Programming Historian</distributor>
                <date type="translated">07/30/2022</date>
                <idno type="doi">10.46430/phes0059</idno>
                <date type="published">11/11/2012</date>
            </publicationStmt>
            <sourceDesc>
                <p>Born digital, in a markdown format. Original file: <ref type="original_file" target="#downloading-multiple-records-using-query-strings"/>.</p>
                <p>There are other translations: <ref target="#download-multiplos-registros-query-strings"/>
                </p>
            </sourceDesc>
        </fileDesc>
        <profileDesc>
            <abstract>
                <p>Descargar un solo registro de un sitio web es fácil, aunque la descarga de muchos registros a la vez –una necesidad cada vez más frecuente– es mucho más eficiente utilizando un lenguaje de programación como Python. En esta lección escribiremos un programa que descargará una serie de registros del Old Bailey Online usando criterios de búsqueda personalizada y los guardará en un directorio de nuestro equipo.</p>
            </abstract>
            <textClass>
                <keywords>
                    <term xml:lang="en">web-scraping</term>
                    <term xml:lang="en">python</term>
                </keywords>
            </textClass>
        </profileDesc>
    </teiHeader>
    <text xml:lang="es">
        <body><div type="2" n="1"><head><s xml:id="s_2veTxM"><w>Objetivos</w><w>del</w><w>módulo</w></s></head><p><s xml:id="s_NwT3Tg"><w>Descargar</w><w>un</w><w>solo</w><w>registro</w><w>de</w><w>un</w><w>sitio</w><w>web</w><w>es</w><w>fácil</w><w>,</w><w>aunque</w><w>la</w><w>descarga</w><w>de</w><w>muchos</w><w>registros</w><w>a</w><w>la</w><w>vez</w><w>—una</w><w>necesidad</w><w>cada</w><w>vez</w><w>más</w><w>frecuente</w><w>para</w><w>personas</w><w>de</w><w>humanidades—</w><w>es</w><w>mucho</w><w>más</w><w>eficiente</w><w>si</w><w>se</w><w>utiliza</w><w>un</w><w>lenguaje</w><w>de</w><w>programación</w><w>como</w><w>Python</w><pc>.</pc></s><s xml:id="s_qm6Ylk"><w>En</w><w>esta</w><w>lección</w><w>escribiremos</w><w>un</w><w>programa</w><w>para</w><w>descargar</w><w>una</w><w>serie</w><w>de</w><w>registros</w><w>del</w><ref target="https://www.oldbaileyonline.org/"><w>Old</w><w>Bailey</w><w>Online</w></ref><w>(</w><emph><w>OBO</w></emph><w>)</w><w>utilizando</w><w>criterios</w><w>de</w><w>búsqueda</w><w>personalizados</w><w>y</w><w>luego</w><w>guardarlos</w><w>en</w><w>un</w><w>directorio</w><w>de</w><w>nuestro</w><w>computador</w><pc>.</pc></s><s xml:id="s_vs9oA1"><ref type="footnotemark" target="#es_note_1"/><w>Este</w><w>proceso</w><w>conlleva</w><w>la</w><w>interpretación</w><w>y</w><w>manipulación</w><w>de</w><emph><w>cadenas</w><w>de</w><w>consulta</w></emph><w>(</w><emph><w>query</w><w>strings</w></emph><w>,</w><w>en</w><w>inglés</w><w>)</w><w>en</w><w>la</w><w>URL</w><pc>.</pc></s><s xml:id="s_ZIDnCE"><w>En</w><w>este</w><w>caso</w><w>,</w><w>el</w><w>programa</w><w>tratará</w><w>de</w><w>descargar</w><w>fuentes</w><w>que</w><w>contengan</w><w>referencias</w><w>a</w><w>personas</w><w>de</w><w>ascendencia</w><w>africana</w><w>,</w><w>publicadas</w><w>en</w><w>el</w><emph><w>Old</w><w>Bailey</w><w>Proceedings</w></emph><w>entre</w><w>1700</w><w>y</w><w>1750</w><pc>.</pc></s></p></div><div type="2" n="2"><head><s xml:id="s_tXgOYz"><w>¿Para</w><w>quién</w><w>es</w><w>útil</w><w>esto</w><pc>?</pc></s></head><p><s xml:id="s_tQaqjz"><w>Automatizar</w><w>el</w><w>proceso</w><w>de</w><w>descarga</w><w>de</w><w>registros</w><w>de</w><w>una</w><w>base</w><w>de</w><w>datos</w><w>en</w><w>línea</w><w>será</w><w>útil</w><w>para</w><w>cualquier</w><w>persona</w><w>que</w><w>trabaje</w><w>con</w><w>fuentes</w><w>históricas</w><w>almacenadas</w><w>en</w><w>línea</w><w>de</w><w>manera</w><w>ordenada</w><w>y</w><w>accesible</w><w>,</w><w>y</w><w>que</w><w>desea</w><w>guardar</w><w>copias</w><w>de</w><w>esas</w><w>fuentes</w><w>en</w><w>su</w><w>propio</w><w>computador</w><pc>.</pc></s><s xml:id="s_KQkICe"><w>Es</w><w>particularmente</w><w>útil</w><w>para</w><w>quien</w><w>quiera</w><w>descargar</w><w>muchos</w><w>registros</w><w>específicos</w><w>,</w><w>en</w><w>lugar</w><w>de</w><w>solo</w><w>unos</w><w>cuantos</w><pc>.</pc></s><s xml:id="s_wAHyty"><w>Si</w><w>deseas</w><w>descargar</w><emph><w>todos</w></emph><w>o</w><emph><w>la</w><w>mayoría</w></emph><w>de</w><w>los</w><w>registros</w><w>de</w><w>una</w><w>base</w><w>de</w><w>datos</w><w>determinada</w><w>,</w><w>el</w><w>tutorial</w><w>de</w><w>Ian</w><w>Milligan</w><w>sobre</w><ref target="/es/lecciones/descarga-automatizada-con-wget"><w>Descarga</w><w>automatizada</w><w>con</w><w>Wget</w></ref><w>puede</w><w>ser</w><w>más</w><w>adecuado</w><pc>.</pc></s></p><p><s xml:id="s_rdGUQj"><w>El</w><w>presente</w><w>tutorial</w><w>te</w><w>permitirá</w><w>descargar</w><w>registros</w><w>específicos</w><w>de</w><w>manera</w><w>selectiva</w><w>,</w><w>aislando</w><w>aquellos</w><w>que</w><w>satisfagan</w><w>tus</w><w>necesidades</w><pc>.</pc></s><s xml:id="s_6a0mTx"><w>La</w><w>descarga</w><w>automática</w><w>de</w><w>varias</w><w>fuentes</w><w>ahorra</w><w>un</w><w>tiempo</w><w>considerable</w><pc>.</pc></s><s xml:id="s_7Hd2e0"><w>Lo</w><w>que</w><w>hagas</w><w>con</w><w>las</w><w>fuentes</w><w>descargadas</w><w>depende</w><w>de</w><w>tus</w><w>objetivos</w><w>de</w><w>investigación</w><pc>.</pc></s><s xml:id="s_fdyYwD"><w>Es</w><w>posible</w><w>que</w><w>quieras</w><w>crear</w><w>visualizaciones</w><w>,</w><w>aplicar</w><w>diversos</w><w>métodos</w><w>de</w><w>análisis</w><w>de</w><w>datos</w><w>o</w><w>simplemente</w><w>reformatearlos</w><w>para</w><w>facilitar</w><w>la</w><w>navegación</w><pc>.</pc></s><s xml:id="s_eEvmJ2"><w>O</w><w>quizá</w><w>solo</w><w>desees</w><w>guardar</w><w>una</w><w>copia</w><w>de</w><w>seguridad</w><w>para</w><w>acceder</w><w>a</w><w>ellos</w><w>cuando</w><w>no</w><w>tengas</w><w>acceso</w><w>a</w><w>Internet</w><pc>.</pc></s></p><p><s xml:id="s_IOCjw2"><w>Esta</w><w>lección</w><w>está</w><w>dirigida</w><w>a</w><w>usuarios</w><w>intermedios</w><w>de</w><w>Python</w><pc>.</pc></s><s xml:id="s_PtM98J"><w>Si</w><w>aún</w><w>no</w><w>has</w><w>revisado</w><w>las</w><w>lecciones</w><w>de</w><ref target="/es/lecciones/introduccion-e-instalacion"><w>Programación</w><w>básica</w><w>en</w><w>Python</w></ref><w>,</w><w>puedes</w><w>encontrar</w><w>en</w><w>ellas</w><w>un</w><w>punto</w><w>de</w><w>partida</w><w>útil</w><pc>.</pc></s></p></div><div type="2" n="3"><head><s xml:id="s_FH9b4r"><w>Cómo</w><w>aplicar</w><w>nuestro</w><w>conocimiento</w><w>histórico</w></s></head><p><s xml:id="s_p5qdUy"><w>En</w><w>esta</w><w>lección</w><w>crearemos</w><w>nuestro</w><w>propio</w><w>corpus</w><w>de</w><w>casos</w><w>relacionados</w><w>con</w><w>personas</w><w>de</w><w>ascendencia</w><w>africana</w><pc>.</pc></s><s xml:id="s_A8iStU"><w>A</w><w>partir</w><w>del</w><ref target="https://www.oldbaileyonline.org/browse.jsp?id=t17800628-33&amp;div=t17800628-33"><w>caso</w><w>de</w><w>Benjamin</w><w>Bowsey</w></ref><w>en</w><w>el</w><emph><w>OBO</w></emph><w>en</w><w>1780</w><w>,</w><w>notamos</w><w>que</w><w>la</w><w>voz</w><w>``</w><emph><w>black</w></emph><w>``</w><ref type="footnotemark" target="#es_note_2"/><w>es</w><w>una</w><w>palabra</w><w>clave</w><w>útil</w><w>para</w><w>localizar</w><w>otros</w><w>casos</w><w>que</w><w>involucren</w><w>a</w><w>acusados</w><w>de</w><w>ascendencia</w><w>africana</w><pc>.</pc></s><s xml:id="s_YbcmDo"><w>Sin</w><w>embargo</w><w>,</w><w>cuando</w><w>buscamos</w><w>``</w><emph><w>black</w></emph><w>``</w><w>en</w><w>el</w><w>sitio</w><w>web</w><w>del</w><emph><w>OBO</w></emph><w>,</w><w>encontramos</w><w>que</w><w>a</w><w>menudo</w><w>se</w><w>refiere</w><w>a</w><w>otros</w><w>usos</w><w>de</w><w>la</w><w>palabra</w><w>:</w><w>caballos</w><w>negros</w><w>,</w><w>tela</w><w>negra</w><w>,</w><w>etc</w><pc>.</pc></s><s xml:id="s_RuBAPw"><w>La</w><w>tarea</w><w>de</w><w>desambiguar</w><w>este</w><w>uso</w><w>del</w><w>lenguaje</w><w>tendrá</w><w>que</w><w>esperar</w><w>a</w><w>otra</w><w>lección</w><pc>.</pc></s><s xml:id="s_6e45xw"><w>Por</w><w>ahora</w><w>vayamos</w><w>a</w><w>los</w><w>casos</w><w>más</w><w>fáciles</w><pc>.</pc></s><s xml:id="s_gkk0O0"><w>Como</w><w>historiadores</w><w>e</w><w>historiadoras</w><w>,</w><w>probablemente</w><w>podamos</w><w>pensar</w><w>en</w><w>palabras</w><w>clave</w><w>relacionadas</w><w>con</w><w>los</w><w>descendientes</w><w>de</w><w>africanos</w><w>que</w><w>valdría</w><w>la</w><w>pena</w><w>explorar</w><pc>.</pc></s><s xml:id="s_IW4kdq"><w>La</w><w>infame</w><emph><w>n-word</w></emph><ref type="footnotemark" target="#es_note_3"/><w>no</w><w>es</w><w>útil</w><w>,</w><w>por</w><w>supuesto</w><w>,</w><w>ya</w><w>que</w><w>ese</w><w>término</w><w>no</w><w>entró</w><w>en</w><w>uso</w><w>regular</w><w>sino</w><w>hasta</w><w>mediados</w><w>del</w><w>siglo</w><w>XIX</w><pc>.</pc></s><s xml:id="s_DsMlwq"><w>Pero</w><emph><w>negro</w></emph><w>y</w><emph><w>mulatto</w></emph><w>eran</w><w>voces</w><w>muy</w><w>utilizadas</w><w>a</w><w>principios</w><w>del</w><w>siglo</w><w>XVIII</w><pc>.</pc></s><s xml:id="s_cyd2H4"><w>Estas</w><w>palabras</w><w>clave</w><w>son</w><w>menos</w><w>ambiguas</w><w>que</w><w>``</w><emph><w>black</w></emph><w>``</w><w>y</w><w>es</w><w>mucho</w><w>más</w><w>probable</w><w>que</w><w>sean</w><w>referencias</w><w>inmediatas</w><w>a</w><w>personas</w><w>de</w><w>nuestro</w><w>grupo</w><w>demográfico</w><w>objetivo</w><pc>.</pc></s><s xml:id="s_WDSTgg"><w>Si</w><w>intentamos</w><w>buscar</w><w>por</w><w>separado</w><w>estos</w><w>dos</w><w>términos</w><w>en</w><w>el</w><w>sitio</w><w>web</w><w>del</w><emph><w>OBO</w></emph><w>,</w><w>obtenemos</w><w>resultados</w><w>como</w><w>en</w><w>estas</w><w>capturas</w><w>de</w><w>pantalla</w><w>:</w></s></p><figure><desc><s xml:id="s_WymqYB"><w>Resultados</w><w>de</w><w>búsqueda</w><w>para</w><w>'negro</w><w>'</w><w>en</w><w>el</w><w>OBO</w></s></desc><graphic url="SearchResultsNegro.png"/></figure><figure><desc><s xml:id="s_iMY4Pz"><w>Resultados</w><w>de</w><w>búsqueda</w><w>para</w><w>'mulatto</w><w>'</w><w>en</w><w>el</w><w>OBO</w></s></desc><graphic url="SearchResultsMulatto.png"/></figure><p><s xml:id="s_nEhFoj"><w>Después</w><w>de</w><w>analizar</w><w>estos</w><w>resultados</w><w>,</w><w>resulta</w><w>evidente</w><w>que</w><w>se</w><w>trata</w><w>de</w><w>referencias</w><w>a</w><w>personas</w><w>y</w><w>no</w><w>a</w><w>caballos</w><w>,</w><w>ropa</w><w>u</w><w>otras</w><w>cosas</w><w>que</w><w>pueden</w><w>ser</w><w>de</w><w>color</w><w>negro</w><pc>.</pc></s><s xml:id="s_W9zwFb"><w>Queremos</w><w>tener</w><w>todos</w><w>estos</w><w>registros</w><w>en</w><w>nuestro</w><w>computador</w><w>para</w><w>usarlos</w><w>en</w><w>nuestro</w><w>análisis</w><w>así</w><w>que</w><w>podríamos</w><w>descargarlos</w><w>manualmente</w><w>uno</w><w>por</w><w>uno</w><pc>.</pc></s><s xml:id="s_zfk0It"><w>Pero</w><w>encontremos</w><w>una</w><w>manera</w><w>programática</w><w>de</w><w>automatizar</w><w>esta</w><w>tarea</w><pc>.</pc></s></p></div><div type="2" n="4"><head><s xml:id="s_aITq9e"><w>La</w><w>búsqueda</w><w>avanzada</w><w>en</w><w>el</w><emph><w>OBO</w></emph></s></head><p><s xml:id="s_MuJ2gW"><w>Las</w><w>características</w><w>de</w><w>búsqueda</w><w>de</w><w>cada</w><w>sitio</w><w>web</w><w>funcionan</w><w>de</w><w>manera</w><w>diferente</w><pc>.</pc></s><s xml:id="s_sLQ35x"><w>Si</w><w>bien</w><w>las</w><w>búsquedas</w><w>funcionan</w><w>de</w><w>manera</w><w>similar</w><w>,</w><w>la</w><w>complejidad</w><w>en</w><w>la</w><w>que</w><w>están</w><w>estructuradas</w><w>las</w><w>búsquedas</w><w>en</w><w>bases</w><w>de</w><w>datos</w><w>pueden</w><w>no</w><w>ser</w><w>del</w><w>todo</w><w>obvias</w><pc>.</pc></s><s xml:id="s_8Y4Rzd"><w>Por</w><w>lo</w><w>tanto</w><w>,</w><w>es</w><w>importante</w><w>pensar</w><w>críticamente</w><w>sobre</w><w>las</w><w>opciones</w><w>de</w><w>búsqueda</w><w>en</w><w>la</w><w>base</w><w>de</w><w>datos</w><w>y</w><w>leer</w><w>la</w><w>documentación</w><w>proporcionada</w><w>en</w><w>el</w><w>sitio</w><w>web</w><w>,</w><w>cuando</w><w>esta</w><w>esté</w><w>disponible</w><pc>.</pc></s><s xml:id="s_3OoC8s"><w>El</w><w>historiador</w><w>o</w><w>historiadora</w><w>prudente</w><w>siempre</w><w>critica</w><w>sus</w><w>fuentes</w><w>,</w><w>por</w><w>lo</w><w>que</w><w>los</w><w>procedimientos</w><w>que</w><w>hay</w><w>detrás</w><w>de</w><w>las</w><w>casillas</w><w>de</w><w>búsqueda</w><w>deben</w><w>recibir</w><w>la</w><w>misma</w><w>atención</w><w>de</w><w>nuestra</w><w>parte</w><pc>.</pc></s><s xml:id="s_VdWYbb"><w>El</w><ref target="https://www.oldbaileyonline.org/forms/formMain.jsp"><w>formulario</w><w>de</w><w>búsqueda</w><w>avanzada</w></ref><w>del</w><emph><w>OBO</w></emph><w>te</w><w>permite</w><w>refinar</w><w>tus</w><w>búsquedas</w><w>en</w><w>diez</w><w>campos</w><w>diferentes</w><w>,</w><w>incluyendo</w><w>palabras</w><w>clave</w><w>simples</w><w>,</w><w>un</w><w>rango</w><w>de</w><w>fechas</w><w>y</w><w>un</w><w>tipo</w><w>de</w><w>delito</w><pc>.</pc></s><s xml:id="s_6r5sue"><w>Como</w><w>la</w><w>función</w><w>de</w><w>búsqueda</w><w>de</w><w>cada</w><w>sitio</w><w>web</w><w>es</w><w>diferente</w><w>,</w><w>siempre</w><w>vale</w><w>la</w><w>pena</w><w>tomarse</w><w>un</w><w>tiempo</w><w>para</w><w>experimentar</w><w>con</w><w>ella</w><w>y</w><w>leer</w><w>acerca</w><w>de</w><w>las</w><w>opciones</w><w>disponibles</w><pc>.</pc></s><s xml:id="s_uXGoV4"><w>Como</w><w>ya</w><w>hemos</w><w>hecho</w><w>una</w><w>búsqueda</w><w>simple</w><w>de</w><w>los</w><w>términos</w><w>``</w><emph><w>negro</w></emph><w>``</w><w>y</w><w>``</w><emph><w>mulatto</w></emph><w>``</w><w>,</w><w>sabemos</w><w>que</w><w>obtendremos</w><w>resultados</w><pc>.</pc></s><s xml:id="s_IvVVmC"><w>Usaremos</w><w>la</w><w>búsqueda</w><w>avanzada</w><w>para</w><w>limitar</w><w>nuestros</w><w>resultados</w><w>a</w><w>los</w><w>registros</w><w>de</w><w>procesos</w><w>judiciales</w><w>publicados</w><w>en</w><w>los</w><emph><w>Old</w><w>Bailey</w><w>Proceedings</w></emph><w>entre</w><w>1700</w><w>y</w><w>1750</w><w>solamente</w><pc>.</pc></s><s xml:id="s_h24gkw"><w>Desde</w><w>luego</w><w>,</w><w>puedes</w><w>ajustar</w><w>la</w><w>búsqueda</w><w>como</w><w>quieras</w><w>;</w><w>pero</w><w>si</w><w>sigues</w><w>el</w><w>ejemplo</w><w>aquí</w><w>presentado</w><w>,</w><w>será</w><w>más</w><w>fácil</w><w>comprender</w><w>la</w><w>lección</w><pc>.</pc></s><s xml:id="s_NPvBKp"><w>Ejecuta</w><w>la</w><w>búsqueda</w><w>que</w><w>se</w><w>muestra</w><w>en</w><w>la</w><w>imagen</w><w>de</w><w>abajo</w><pc>.</pc></s><s xml:id="s_6l3VvR"><w>Asegúrate</w><w>de</w><w>marcar</w><w>el</w><w>botón</w><w>de</w><w>opción</w><emph><w>Advanced</w></emph><w>(</w><w>``</w><w>Avanzado</w><w>''</w><w>)</w><w>y</w><w>usa</w><w>los</w><w>comodines</w><code rend="inline"><w>*</w></code><w>para</w><w>incluir</w><w>entradas</w><w>en</w><w>plural</w><w>o</w><w>aquellas</w><w>con</w><w>una</w><w>“</w><w>e</w><w>”</w><w>adicional</w><w>al</w><w>final</w><pc>.</pc></s></p><figure><desc><s xml:id="s_3nMgB7"><w>Ejemplo</w><w>de</w><w>búsqueda</w><w>avanzada</w><w>en</w><w>el</w><w>OBO</w></s></desc><graphic url="AdvancedSearchExample.png"/></figure><p><s xml:id="s_Wtmg8I"><w>Realiza</w><w>la</w><w>búsqueda</w><w>y</w><w>luego</w><w>haz</w><w>clic</w><w>en</w><w>el</w><w>enlace</w><emph><w>Calculate</w><w>total</w></emph><w>(</w><w>``</w><w>Calcular</w><w>el</w><w>total</w><w>''</w><w>)</w><w>para</w><w>ver</w><w>cuántas</w><w>entradas</w><w>hay</w><pc>.</pc></s><s xml:id="s_Oe8N8J"><w>Debe</w><w>haber</w><w>13</w><w>resultados</w><w>(</w><w>si</w><w>tienes</w><w>un</w><w>número</w><w>diferente</w><w>,</w><w>vuelve</w><w>atrás</w><w>y</w><w>asegúrate</w><w>de</w><w>haber</w><w>copiado</w><w>exactamente</w><w>el</w><w>ejemplo</w><w>anterior</w><w>)</w><pc>.</pc></s><s xml:id="s_nIHSvG"><w>Vamos</w><w>a</w><w>descargar</w><w>estas</w><w>transcripciones</w><w>de</w><w>procesos</w><w>judiciales</w><w>para</w><w>analizarlas</w><w>más</w><w>a</w><w>fondo</w><pc>.</pc></s><s xml:id="s_ldtMsO"><w>Por</w><w>supuesto</w><w>,</w><w>puedes</w><w>descargar</w><w>cada</w><w>uno</w><w>de</w><w>los</w><w>13</w><w>registros</w><w>manualmente</w><pc>.</pc></s><s xml:id="s_UGZdb1"><w>Sin</w><w>embargo</w><w>,</w><w>a</w><w>medida</w><w>queb</w><w>más</w><w>datos</w><w>están</w><w>disponibles</w><w>en</w><w>línea</w><w>,</w><w>será</w><w>necesario</w><w>manejar</w><w>descargas</w><w>de</w><w>1,300</w><w>o</w><w>incluso</w><w>130,000</w><w>registros</w><pc>.</pc></s><s xml:id="s_0pkc4f"><w>La</w><w>descarga</w><w>de</w><w>registros</w><w>individuales</w><w>resulta</w><w>poco</w><w>práctica</w><w>y</w><w>saber</w><w>cómo</w><w>automatizar</w><w>el</w><w>proceso</w><w>es</w><w>una</w><w>herramienta</w><w>muy</w><w>valiosa</w><pc>.</pc></s><s xml:id="s_jIOjvd"><w>Para</w><w>automatizar</w><w>el</w><w>proceso</w><w>de</w><w>descarga</w><w>debemos</w><w>retroceder</w><w>y</w><w>aprender</w><w>cómo</w><w>se</w><w>crean</w><w>las</w><w>URLs</w><w>de</w><w>búsqueda</w><w>en</w><w>el</w><w>sitio</w><w>web</w><w>del</w><emph><w>OBO</w></emph><w>,</w><w>un</w><w>método</w><w>común</w><w>en</w><w>muchas</w><w>bases</w><w>de</w><w>datos</w><w>y</w><w>sitios</w><w>web</w><w>en</w><w>línea</w><pc>.</pc></s></p></div><div type="2" n="5"><head><s xml:id="s_vF7Spi"><w>Comprender</w><w>las</w><w>consultas</w><w>en</w><w>URLs</w></s></head><p><s xml:id="s_WZXA9A"><w>Echa</w><w>un</w><w>vistazo</w><w>a</w><w>la</w><w>URL</w><w>producida</w><w>con</w><w>la</w><w>última</w><w>página</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><pc>.</pc></s><s xml:id="s_rGKExu"><w>Debe</w><w>tener</w><w>un</w><w>aspecto</w><w>como</w><w>este</w><w>:</w></s></p><ab><code lang="language-xml" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_0" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_0.txt" rend="block"/></ab><p><s xml:id="s_Dz6Bm9"><w>Ya</w><w>hemos</w><w>estudiado</w><w>las</w><w>URLs</w><w>en</w><w>la</w><w>lección</w><ref target="/es/lecciones/ver-archivos-html"><w>Para</w><w>entender</w><w>páginas</w><w>web</w><w>y</w><w>HTML</w></ref><w>y</w><w>este</w><w>parece</w><w>mucho</w><w>más</w><w>complicado</w><pc>.</pc></s><s xml:id="s_goaclM"><w>Pero</w><w>,</w><w>aunque</w><w>es</w><w>más</w><w>largo</w><w>,</w><w>en</w><w>realidad</w><emph><w>no</w></emph><w>es</w><w>mucho</w><w>más</w><w>complejo</w><pc>.</pc></s><s xml:id="s_zv2iXs"><w>Es</w><w>sencillo</w><w>entenderlo</w><w>al</w><w>observar</w><w>cómo</w><w>se</w><w>representan</w><w>nuestros</w><w>criterios</w><w>de</w><w>búsqueda</w><w>en</w><w>la</w><w>URL</w><w>:</w></s></p><ab><code lang="language-xml" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_1" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_1.txt" rend="block"/></ab><p><s xml:id="s_Eh2HsK"><w>Aquí</w><w>observamos</w><w>más</w><w>claramente</w><w>los</w><w>12</w><w>datos</w><w>que</w><w>necesitamos</w><w>para</w><w>realizar</w><w>nuestra</w><w>búsqueda</w><w>(</w><w>uno</w><w>en</w><w>cada</w><w>línea</w><w>)</w><pc>.</pc></s><s xml:id="s_JlX214"><w>Tenemos</w><w>la</w><w>URL</w><w>del</w><w>sitio</w><w>web</w><w>del</w><emph><w>OBO</w></emph><w>seguido</w><w>de</w><w>una</w><w>consulta</w><w>(</w><w>introducida</w><w>por</w><w>el</w><w>carácter</w><code rend="inline"><pc>?</pc></code><w>)</w><w>,</w><w>seguida</w><w>de</w><w>11</w><emph><w>pares</w><w>nombre/valor</w></emph><w>acompañados</w><w>cada</w><w>uno</w><w>del</w><w>carácter</w><code rend="inline"><w>&amp;</w></code><pc>.</pc></s><s xml:id="s_hXQPZo"><w>Cada</w><w>par</w><w>contiene</w><w>el</w><w>nombre</w><w>de</w><w>una</w><w>variable</w><w>de</w><w>servidor</w><w>(</w><w>por</w><w>ejemplo</w><w>,</w><code rend="inline"><w>toYear</w></code><w>)</w><w>,</w><ref type="footnotemark" target="#es_note_4"/><w>unido</w><w>con</w><w>el</w><w>signo</w><w>de</w><w>asignación</w><code rend="inline"><w>=</w></code><w>al</w><w>valor</w><w>de</w><w>dicha</w><w>variable</w><w>(</w><w>en</w><w>nuestro</w><w>ejemplo</w><w>,</w><code rend="inline"><w>1750</w></code><w>)</w><pc>.</pc></s><s xml:id="s_LIEtpS"><w>Finalmente</w><w>,</w><w>el</w><w>carácter</w><w>'</w><w>&amp;</w><w>'</w><w>le</w><w>indica</w><w>al</w><w>servidor</w><w>que</w><w>a</w><w>continuación</w><w>siguen</w><w>más</w><w>pares</w><w>nombre/valor</w><w>en</w><w>la</w><w>URL</w><pc>.</pc></s><s xml:id="s_jCBQPb"><w>Todo</w><w>esto</w><w>forma</w><w>la</w><w>cadena</w><w>de</w><w>consulta</w><w>que</w><w>le</w><w>dice</w><w>al</w><w>motor</w><w>de</w><w>búsqueda</w><w>qué</w><w>variables</w><w>utilizar</w><w>en</w><w>etapas</w><w>específicas</w><w>de</w><w>la</w><w>búsqueda</w><pc>.</pc></s></p><p><s xml:id="s_X8O5Ul"><w>En</w><w>nuestro</w><w>caso</w><w>,</w><w>la</w><w>variable</w><w>de</w><w>servidor</w><w>más</w><w>importante</w><w>de</w><w>la</w><w>cadena</w><w>de</w><w>consulta</w><w>es</w><code rend="inline"><w>_divs_fulltext</w></code><w>,</w><w>a</w><w>la</w><w>que</w><w>se</w><w>le</w><w>ha</w><w>dado</w><w>el</w><w>valor</w><code rend="inline"><w>mulatto</w><w>*</w><w>+negro</w><w>*</w></code><pc>.</pc></s><s xml:id="s_m2QGLg"><w>Este</w><w>valor</w><w>contiene</w><w>el</w><w>término</w><w>de</w><w>consulta</w><w>que</w><w>hemos</w><w>escrito</w><w>en</w><w>el</w><w>cuadro</w><w>de</w><w>búsqueda</w><pc>.</pc></s><s xml:id="s_4lF0y0"><w>(</w><w>La</w><w>aplicación</w><w>web</w><w>ha</w><w>agregado</w><w>automáticamente</w><w>un</w><w>signo</w><code rend="inline"><w>+</w></code><w>en</w><w>lugar</w><w>de</w><w>un</w><w>espacio</w><w>en</w><w>blanco</w><w>ya</w><w>que</w><w>las</w><w>URLs</w><w>no</w><w>pueden</w><w>contener</w><w>espacios</w><pc>.</pc></s><s xml:id="s_2Nt6BG"><w>)</w><w>Esto</w><w>es</w><w>exactamente</w><w>lo</w><w>que</w><w>le</w><w>hemos</w><w>pedido</w><w>al</w><w>buscador</w><w>del</w><emph><w>OBO</w></emph><w>que</w><w>nos</w><w>encuentre</w><pc>.</pc></s></p><p><s xml:id="s_u8QAxA"><w>Las</w><w>otras</w><w>variables</w><w>de</w><w>servidor</w><w>tienen</w><w>valores</w><w>que</w><w>también</w><w>establecimos</w><w>en</w><w>la</w><w>caja</w><w>de</w><w>búsqueda</w><pc>.</pc></s><s xml:id="s_C7V7rC"><code rend="inline"><w>fromYear</w></code><w>y</w><code rend="inline"><w>toYear</w></code><w>contienen</w><w>nuestro</w><w>intervalo</w><w>de</w><w>fechas</w><pc>.</pc></s><s xml:id="s_Ff4h1P"><w>Nota</w><w>que</w><w>en</w><w>nuestro</w><w>ejemplo</w><w>el</w><w>valor</w><w>de</w><code rend="inline"><w>toMonth</w></code><w>es</w><w>99</w><pc>.</pc></s><s xml:id="s_VOd1NR"><w>Como</w><w>ningún</w><w>año</w><w>tiene</w><w>99</w><w>meses</w><w>,</w><w>podemos</w><w>conjeturar</w><w>que</w><w>así</w><w>es</w><w>como</w><w>el</w><w>algoritmo</w><w>de</w><w>búsqueda</w><w>garantiza</w><w>que</w><w>se</w><w>incluyan</w><w>todos</w><w>los</w><w>registros</w><w>de</w><w>un</w><w>mismo</w><w>año</w><pc>.</pc></s><s xml:id="s_3YYc2w"><w>No</w><w>hay</w><w>reglas</w><w>estrictas</w><w>para</w><w>determinar</w><w>qué</w><w>hace</w><w>cada</w><w>variable</w><w>porque</w><w>las</w><w>personas</w><w>que</w><w>construyeron</w><w>el</w><w>sitio</w><w>les</w><w>han</w><w>asignado</w><w>un</w><w>nombre</w><w>arbitrario</w><pc>.</pc></s><s xml:id="s_c4TQev"><w>A</w><w>menudo</w><w>podemos</w><w>hacer</w><w>una</w><w>conjetura</w><w>basada</w><w>en</w><w>nuestra</w><w>experiencia</w><w>y</w><w>conocimiento</w><pc>.</pc></s></p><p><s xml:id="s_aiuLVz"><w>Todos</w><w>los</w><w>campos</w><w>de</w><w>búsqueda</w><w>posibles</w><w>en</w><w>la</w><w>página</w><w>de</w><w>búsqueda</w><w>avanzada</w><w>tienen</w><w>su</w><w>propio</w><w>par</w><w>de</w><w>nombre/valor</w><pc>.</pc></s><s xml:id="s_h6fhwU"><w>Si</w><w>deseas</w><w>averiguar</w><w>el</w><w>nombre</w><w>de</w><w>la</w><w>variable</w><w>de</w><w>servidor</w><w>para</w><w>poder</w><w>usarla</w><w>,</w><w>busca</w><w>de</w><w>nuevo</w><w>y</w><w>asegúrate</w><w>de</w><w>poner</w><w>un</w><w>valor</w><w>en</w><w>el</w><w>campo</w><w>de</w><w>tu</w><w>interés</w><pc>.</pc></s><s xml:id="s_mLAP47"><w>Después</w><w>de</w><w>enviar</w><w>tu</w><w>búsqueda</w><w>,</w><w>verás</w><w>el</w><w>valor</w><w>y</w><w>el</w><w>nombre</w><w>asociado</w><w>a</w><w>él</w><w>como</w><w>parte</w><w>de</w><w>la</w><w>URL</w><w>de</w><w>la</w><w>página</w><w>de</w><w>resultados</w><pc>.</pc></s><s xml:id="s_R8Bonb"><w>Con</w><w>el</w><emph><w>OBO</w></emph><w>,</w><w>al</w><w>igual</w><w>que</w><w>con</w><w>muchos</w><w>otros</w><w>sitios</w><w>web</w><w>,</w><w>el</w><w>formulario</w><w>de</w><w>búsqueda</w><w>te</w><w>ayuda</w><w>esencialmente</w><w>a</w><w>construir</w><w>URLs</w><w>que</w><w>le</w><w>indiquen</w><w>a</w><w>la</w><w>base</w><w>de</w><w>datos</w><w>qué</w><w>debe</w><w>buscar</w><pc>.</pc></s><s xml:id="s_mjUuHk"><w>Si</w><w>comprendes</w><w>cómo</w><w>se</w><w>representan</w><w>los</w><w>campos</w><w>de</w><w>búsqueda</w><w>en</w><w>la</w><w>URL</w><w>,</w><w>lo</w><w>que</w><w>a</w><w>menudo</w><w>es</w><w>bastante</w><w>sencillo</w><w>,</w><w>entonces</w><w>es</w><w>relativamente</w><w>fácil</w><w>construir</w><w>las</w><w>URLs</w><w>mediante</w><w>programación</w><w>y</w><w>,</w><w>por</w><w>lo</w><w>tanto</w><w>,</w><w>automatizar</w><w>el</w><w>proceso</w><w>de</w><w>descarga</w><w>de</w><w>registros</w><pc>.</pc></s></p><p><s xml:id="s_cnrhOZ"><w>Entre</w><w>las</w><w>variables</w><w>de</w><w>servidor</w><w>hay</w><w>una</w><w>que</w><w>será</w><w>importante</w><w>en</w><w>nuestra</w><w>búsqueda</w><w>programática</w><pc>.</pc></s><s xml:id="s_sguTkm"><w>La</w><w>variable</w><code rend="inline"><w>start</w></code><w>le</w><w>indica</w><w>al</w><w>servidor</w><w>en</w><w>cuál</w><w>número</w><w>de</w><w>registro</w><w>debe</w><w>iniciar</w><w>la</w><w>página</w><w>de</w><w>resultados</w><pc>.</pc></s><s xml:id="s_XGMCUD"><w>Por</w><w>ejemplo</w><w>,</w><w>si</w><w>cambias</w><code rend="inline"><w>start=0</w></code><w>por</w><code rend="inline"><w>start=10</w></code><w>en</w><w>la</w><w>URL</w><w>y</w><w>presionas</w><w>enter</w><w>,</w><w>deberás</w><w>obtener</w><w>los</w><w>resultados</w><w>del</w><w>11</w><w>al</w><w>13</w><pc>.</pc></s><s xml:id="s_D7PpJi"><w>Y</w><w>si</w><w>la</w><w>cambias</w><w>por</w><code rend="inline"><w>start=5</w></code><w>,</w><w>obtendrás</w><w>del</w><w>6</w><w>al</w><w>13</w><pc>.</pc></s><s xml:id="s_egVxlR"><w>Sería</w><w>ideal</w><w>que</w><w>pudiéramos</w><w>elegir</w><w>mostrar</w><w>todos</w><w>los</w><w>resultados</w><w>en</w><w>una</w><w>sola</w><w>página</w><w>,</w><w>pues</w><w>ello</w><w>facilitará</w><w>su</w><w>procesamiento</w><w>;</w><w>pero</w><w>la</w><w>aplicación</w><w>web</w><w>del</w><emph><w>OBO</w></emph><w>despliega</w><w>los</w><w>resultados</w><w>en</w><w>páginas</w><w>de</w><w>10</w><w>registros</w><w>cada</w><w>una</w><pc>.</pc></s></p><p><s xml:id="s_nzNShm"><w>Ahora</w><w>aprovecharemos</w><w>este</w><w>conocimiento</w><w>para</w><w>crear</w><w>una</w><w>serie</w><w>de</w><w>URLs</w><w>que</w><w>nos</w><w>permitirá</w><w>descargar</w><w>los</w><w>13</w><w>archivos</w><pc>.</pc></s></p></div><div type="2" n="6"><head><s xml:id="s_QOsujh"><w>Descarga</w><w>sistemática</w><w>de</w><w>archivos</w></s></head><p><s xml:id="s_WsERlg"><w>En</w><ref target="/es/lecciones/trabajar-con-paginas-web"><w>Descargar</w><w>páginas</w><w>web</w><w>con</w><w>Python</w></ref><w>aprendimos</w><w>que</w><w>Python</w><w>puede</w><w>descargar</w><w>una</w><w>página</w><w>web</w><w>siempre</w><w>que</w><w>tengamos</w><w>la</w><w>URL</w><pc>.</pc></s><s xml:id="s_E4Fa7P"><w>En</w><w>dicha</w><w>lección</w><w>usamos</w><w>la</w><w>URL</w><w>para</w><w>descargar</w><w>la</w><ref target="https://www.oldbaileyonline.org/browse.jsp?id=t17800628-33&amp;div=t17800628-33"><w>transcripción</w><w>del</w><w>proceso</w><w>de</w><w>Benjamin</w><w>Bowsey</w></ref><pc>.</pc></s><s xml:id="s_TXrJio"><w>En</w><w>la</w><w>presente</w><w>lección</w><w>estamos</w><w>intentando</w><w>descargar</w><w>varias</w><w>transcripciones</w><w>de</w><w>procesos</w><w>judiciales</w><w>que</w><w>cumplan</w><w>con</w><w>los</w><w>criterios</w><w>de</w><w>búsqueda</w><w>que</w><w>describimos</w><w>anteriormente</w><w>,</w><w>sin</w><w>tener</w><w>que</w><w>volver</w><w>a</w><w>ejecutar</w><w>el</w><w>programa</w><w>repetidamente</w><pc>.</pc></s><s xml:id="s_4urukg"><w>Así</w><w>pues</w><w>,</w><w>queremos</w><w>un</w><w>programa</w><w>que</w><w>descargue</w><w>todo</w><w>lo</w><w>que</w><w>necesitamos</w><w>de</w><w>una</w><w>sola</w><w>vez</w><pc>.</pc></s><s xml:id="s_CoaUWD"><w>En</w><w>este</w><w>punto</w><w>,</w><w>tenemos</w><w>la</w><w>URL</w><w>de</w><w>una</w><w>página</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>que</w><w>contiene</w><w>las</w><w>diez</w><w>primeras</w><w>entradas</w><w>de</w><w>nuestra</w><w>consulta</w><pc>.</pc></s><s xml:id="s_nWtcQG"><w>También</w><w>sabemos</w><w>que</w><w>al</w><w>modificar</w><w>el</w><w>valor</w><w>de</w><w>la</w><w>variable</w><code rend="inline"><w>start</w></code><w>en</w><w>la</w><w>URL</w><w>,</w><w>podemos</w><w>llamar</w><w>secuencialmente</w><w>cada</w><w>página</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>y</w><w>así</w><w>al</w><w>fin</w><w>recuperar</w><w>todos</w><w>los</w><w>registros</w><w>de</w><w>procesos</w><w>judiciales</w><pc>.</pc></s><s xml:id="s_VhxoLr"><w>Por</w><w>supuesto</w><w>,</w><w>las</w><w>páginas</w><w>de</w><w>resultados</w><w>no</w><w>nos</w><w>dan</w><w>los</w><w>los</w><w>registros</w><w>de</w><w>los</w><w>procesos</w><w>judiciales</w><w>sino</w><w>enlaces</w><w>a</w><w>ellos</w><pc>.</pc></s><s xml:id="s_Quj0cK"><w>Así</w><w>que</w><w>necesitamos</w><w>extraer</w><w>el</w><w>enlace</w><w>a</w><w>los</w><w>registros</w><w>contenidos</w><w>en</w><w>los</w><w>resultados</w><w>de</w><w>búsqueda</w><pc>.</pc></s><s xml:id="s_X03ND5"><w>En</w><w>el</w><w>sitio</w><w>web</w><w>del</w><emph><w>OBO</w></emph><w>,</w><w>los</w><w>de</w><w>los</w><w>registros</w><w>individuales</w><w>(</w><w>los</w><w>archivos</w><w>de</w><w>transcripción</w><w>de</w><w>los</w><w>procesos</w><w>judiciales</w><w>)</w><w>se</w><w>pueden</w><w>encontrar</w><w>como</w><w>enlaces</w><w>en</w><w>las</w><w>páginas</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><pc>.</pc></s><s xml:id="s_xw8g8d"><w>Sabemos</w><w>que</w><w>todas</w><w>las</w><w>URLs</w><w>de</w><w>transcripciones</w><w>contienen</w><w>una</w><w>identificación</w><w>formada</w><w>por</w><w>una</w><code rend="inline"><w>t</w></code><w>seguida</w><w>de</w><w>al</w><w>menos</w><w>8</w><w>números</w><w>(</w><w>por</w><w>ejemplo</w><w>,</w><code rend="inline"><w>t17800628-33</w></code><w>)</w><pc>.</pc></s><s xml:id="s_qCekBK"><w>Al</w><w>buscar</w><w>los</w><w>enlaces</w><w>que</w><w>contengan</w><w>ese</w><w>patrón</w><w>,</w><w>podemos</w><w>identificar</w><w>las</w><w>URLs</w><w>de</w><w>las</w><w>transcripciones</w><w>de</w><w>los</w><w>procesos</w><w>judiciales</w><pc>.</pc></s><s xml:id="s_G97NZ6"><w>Al</w><w>igual</w><w>que</w><w>en</w><w>las</w><w>lecciones</w><w>anteriores</w><w>,</w><w>desarrollaremos</w><w>un</w><w>algoritmo</w><w>para</w><w>abordar</w><w>el</w><w>problema</w><w>de</w><w>tal</w><w>manera</w><w>que</w><w>el</w><w>computador</w><w>lo</w><w>pueda</w><w>manejar</w><pc>.</pc></s><s xml:id="s_vqlIlW"><w>Al</w><w>parecer</w><w>,</w><w>esta</w><w>tarea</w><w>se</w><w>puede</w><w>lograr</w><w>en</w><w>cuatro</w><w>pasos</w><pc>.</pc></s><s xml:id="s_kxXqTD"><w>Necesitaremos</w><w>:</w></s></p><list type="ordered"><item><s xml:id="s_zC0IDE"><w>Generar</w><w>las</w><w>URLs</w><w>para</w><w>cada</w><w>página</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>incrementando</w><w>en</w><w>una</w><w>cantidad</w><w>fija</w><w>la</w><w>variable</w><w>de</w><w>servidor</w><code rend="inline"><w>start</w></code><w>por</w><w>un</w><w>número</w><w>apropiado</w><w>de</w><w>veces</w><pc>.</pc></s></item><item><s xml:id="s_fBYxj2"><w>Descargar</w><w>cada</w><w>página</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>como</w><w>un</w><w>archivo</w><w>HTML</w><pc>.</pc></s></item><item><s xml:id="s_itRQrg"><w>Extraer</w><w>las</w><w>URLs</w><w>de</w><w>cada</w><w>procesos</w><w>judiciales</w><w>(</w><w>utilizando</w><w>la</w><w>ID</w><w>de</w><w>proceso</w><w>,</w><w>como</w><w>se</w><w>describió</w><w>anteriormente</w><w>)</w><w>contenidos</w><w>en</w><w>los</w><w>archivos</w><w>HTML</w><w>de</w><w>los</w><w>resultados</w><w>de</w><w>la</w><w>consulta</w><pc>.</pc></s></item><item><s xml:id="s_vlpRaE"><w>Recorrer</w><w>esos</w><w>URLs</w><w>extraídos</w><w>para</w><w>descargar</w><w>cada</w><w>transcripción</w><w>de</w><w>prueba</w><w>y</w><w>guardarlas</w><w>en</w><w>una</w><w>carpeta</w><w>en</w><w>nuestro</w><w>computador</w><pc>.</pc></s></item></list><p><s xml:id="s_RuAzpm"><w>Recordarás</w><w>que</w><w>esto</w><w>es</w><w>bastante</w><w>similar</w><w>a</w><w>las</w><w>tareas</w><w>que</w><w>realizamos</w><w>en</w><ref target="/es/lecciones/trabajar-con-paginas-web"><w>Descargar</w><w>páginas</w><w>web</w><w>con</w><w>Python</w></ref><w>y</w><ref target="/es/lecciones/de-html-a-lista-de-palabras-2"><w>De</w><w>HTML</w><w>a</w><w>lista</w><w>de</w><w>palabras</w><w>(</w><w>parte</w><w>2</w><w>)</w></ref><pc>.</pc></s><s xml:id="s_UzMK7Q"><w>Primero</w><w>descargamos</w><w>y</w><w>luego</w><w>analizamos</w><w>la</w><w>información</w><w>que</w><w>buscamos</w><w>;</w><w>y</w><w>,</w><w>en</w><w>el</w><w>presente</w><w>caso</w><w>,</w><w>descargamos</w><w>un</w><w>poco</w><w>más</w><pc>.</pc></s></p><div type="3" n="6.1"><head><s xml:id="s_TBNiTk"><w>Descargar</w><w>las</w><w>páginas</w><w>de</w><w>resultados</w><w>de</w><w>consulta</w></s></head><p><s xml:id="s_hkjCH8"><w>Primero</w><w>necesitamos</w><w>generar</w><w>las</w><w>URLs</w><w>para</w><w>descargar</w><w>cada</w><w>página</w><w>de</w><w>resultados</w><w>de</w><w>consulta</w><pc>.</pc></s><s xml:id="s_8MGUYR"><w>Ya</w><w>tenemos</w><w>el</w><w>primero</w><w>utilizando</w><w>el</w><w>formulario</w><w>en</w><w>el</w><w>sitio</w><w>web</w><w>:</w></s></p><ab><code lang="language-xml" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_2" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_2.txt" rend="block"/></ab><p><s xml:id="s_mAkGKq"><w>Escribamos</w><w>un</w><w>programa</w><w>que</w><w>funcione</w><w>sin</w><w>importar</w><w>cuántas</w><w>páginas</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>o</w><w>registros</w><w>tengamos</w><w>que</w><w>descargar</w><w>,</w><w>y</w><w>sin</w><w>importar</w><w>qué</w><w>decidamos</w><w>buscar</w><pc>.</pc></s><s xml:id="s_EQ4kS8"><w>Estudia</w><w>el</w><w>siguiente</w><w>código</w><w>y</w><w>luego</w><w>agrega</w><w>esta</w><w>función</w><w>a</w><w>un</w><w>módulo</w><w>llamado</w><code rend="inline"><w>obo.py</w></code><w>(</w><w>crea</w><w>un</w><w>archivo</w><w>con</w><w>ese</w><w>nombre</w><w>y</w><w>guárdalo</w><w>en</w><w>el</w><w>directorio</w><w>donde</w><w>deseas</w><w>hacer</w><w>tu</w><w>trabajo</w><w>)</w><pc>.</pc></s><s xml:id="s_UDblcm"><w>Los</w><w>comentarios</w><w>en</w><w>el</w><w>código</w><w>(</w><w>las</w><w>líneas</w><w>que</w><w>empiezan</w><w>con</w><w>un</w><code rend="inline"><w>#</w></code><w>)</w><w>están</w><w>destinados</w><w>a</w><w>ayudarte</w><w>a</w><w>descifrar</w><w>las</w><w>distintas</w><w>partes</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_3" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_3.txt" rend="block"/></ab><p><s xml:id="s_PAGSA5"><w>En</w><w>esta</w><w>función</w><w>hemos</w><w>dividido</w><w>los</w><w>diversos</w><w>componentes</w><w>de</w><w>la</w><emph><w>cadena</w><w>de</w><w>consulta</w></emph><w>y</w><w>hemos</w><w>utilizado</w><emph><w>argumentos</w><w>de</w><w>función</w></emph><w>para</w><w>que</w><w>pueda</w><w>reutilizarse</w><w>más</w><w>allá</w><w>de</w><w>nuestras</w><w>necesidades</w><w>específicas</w><w>del</w><w>momento</w><pc>.</pc></s><s xml:id="s_nlb1Nr"><w>Cuando</w><w>llamamos</w><w>esta</w><w>función</w><w>,</w><w>reemplazamos</w><w>los</w><w>argumentos</w><w>con</w><w>los</w><w>valores</w><w>que</w><w>queremos</w><w>buscar</w><pc>.</pc></s><s xml:id="s_uuAKi0"><w>Luego</w><w>,</w><w>descargamos</w><w>la</w><w>página</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>de</w><w>una</w><w>manera</w><w>similar</w><w>a</w><w>como</w><w>se</w><w>hace</w><w>en</w><ref target="/es/lecciones/trabajar-con-paginas-web"><w>Descargar</w><w>páginas</w><w>web</w><w>con</w><w>Python</w></ref><pc>.</pc></s><s xml:id="s_CuYibI"><w>La</w><w>línea</w><w>que</w><w>hemos</w><w>marcado</w><w>con</w><w>①</w><w>crea</w><w>el</w><w>archivo</w><code rend="inline"><w>resultado_consulta.html</w></code><w>,</w><w>asegurándonos</w><w>de</w><w>estar</w><w>usando</w><w>la</w><w>codificación</w><w>de</w><w>caracteres</w><ref target="https://es.wikipedia.org/wiki/UTF-8"><w>UTF-8</w></ref><pc>.</pc></s><s xml:id="s_RJjiTa"><w>Y</w><w>la</w><w>línea</w><w>②</w><w>guarda</w><w>en</w><w>dicho</w><w>archivo</w><w>el</w><w>valor</w><w>de</w><w>la</w><w>variable</w><code rend="inline"><w>contenido_web</w></code><w>,</w><w>también</w><w>asegurándose</w><w>de</w><w>usar</w><w>esa</w><w>misma</w><w>codificación</w><pc>.</pc></s><s xml:id="s_Dws06a"><w>(</w><w>No</w><w>necesitas</w><w>cerrar</w><w>explícitamente</w><w>el</w><w>archivo</w><w>con</w><w>la</w><w>instrucción</w><code rend="inline"><w>close</w></code><w>,</w><w>ya</w><w>que</w><w>el</w><w>bloque</w><code rend="inline"><w>with</w></code><w>se</w><w>encarga</w><w>de</w><w>ello</w><pc>.</pc></s><s xml:id="s_Mo1bqj"><w>)</w></s></p><p><s xml:id="s_q5PJNb"><w>Ahora</w><w>crea</w><w>un</w><w>nuevo</w><w>programa</w><w>de</w><w>Python</w><w>llamado</w><code rend="inline"><w>descarga_consultas.py</w></code><w>y</w><w>copia</w><w>en</w><w>él</w><w>el</w><w>siguiente</w><w>código</w><pc>.</pc></s><s xml:id="s_oBcEGR"><w>Ten</w><w>en</w><w>cuenta</w><w>que</w><w>los</w><w>valores</w><w>que</w><w>hemos</w><w>utilizado</w><w>como</w><w>argumentos</w><w>son</w><w>exactamente</w><w>los</w><w>mismos</w><w>del</w><w>ejemplo</w><w>anterior</w><pc>.</pc></s><s xml:id="s_5jvk8i"><w>Siéntete</w><w>libre</w><w>de</w><w>jugar</w><w>con</w><w>estos</w><w>para</w><w>obtener</w><w>diferentes</w><w>resultados</w><w>o</w><w>ver</w><w>cómo</w><w>funcionan</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_4" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_4.txt" rend="block"/></ab><p><s xml:id="s_WHt8y7"><w>Cuando</w><w>ejecutes</w><w>este</w><w>programa</w><w>(</w><w>con</w><code rend="inline"><w>python3</w><w>descarga_consultas.py</w></code><w>desde</w><w>el</w><w>terminal</w><w>,</w><w>o</w><w>desde</w><w>tu</w><w>editor</w><w>de</w><w>código</w><w>preferido</w><w>)</w><w>,</w><w>encontrarás</w><w>un</w><w>nuevo</w><w>archivo</w><w>llamado</w><code rend="inline"><w>resultado_consulta.html</w></code><w>en</w><w>tu</w><w>carpeta</w><w>de</w><w>trabajo</w><pc>.</pc></s><s xml:id="s_tJ032e"><w>Este</w><w>archivo</w><w>contiene</w><w>la</w><w>primera</w><w>página</w><w>de</w><w>los</w><w>resultados</w><w>de</w><w>búsqueda</w><pc>.</pc></s><s xml:id="s_50DufX"><w>Comprueba</w><w>que</w><w>se</w><w>haya</w><w>descargado</w><w>correctamente</w><w>y</w><w>luego</w><w>bórralo</w><w>,</w><w>pues</w><w>ya</w><w>no</w><w>lo</w><w>necesitaremos</w><pc>.</pc></s><s xml:id="s_ZW3Qq4"><w>Vamos</w><w>a</w><w>adaptar</w><w>nuestro</w><w>programa</w><w>para</w><w>descargar</w><w>la</w><w>otra</w><w>página</w><w>que</w><w>contiene</w><w>las</w><w>otras</w><w>3</w><w>entradas</w><w>al</w><w>mismo</w><w>tiempo</w><w>,</w><w>por</w><w>lo</w><w>que</w><w>debemos</w><w>asegurarnos</w><w>de</w><w>obtener</w><w>ambas</w><pc>.</pc></s></p><p><s xml:id="s_BZgCxK"><w>Refinemos</w><w>ahora</w><w>nuestra</w><w>función</w><w>de</w><w>Python</w><code rend="inline"><w>obtener_resultados_consulta</w></code><pc>.</pc></s><s xml:id="s_cTxHcH"><w>Primero</w><w>agregaremos</w><w>otro</w><w>argumento</w><w>de</w><w>función</w><w>llamado</w><code rend="inline"><w>entradas</w></code><w>para</w><w>que</w><w>podamos</w><w>decirle</w><w>al</w><w>programa</w><w>cuántas</w><w>páginas</w><w>de</w><w>resultados</w><w>necesitamos</w><w>descargar</w><pc>.</pc></s><s xml:id="s_e2Z7AO"><w>Usaremos</w><w>el</w><w>valor</w><w>de</w><w>las</w><w>entradas</w><w>y</w><w>algunos</w><w>cálculos</w><w>matemáticos</w><w>simples</w><w>para</w><w>determinar</w><w>cuántas</w><w>páginas</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>hay</w><pc>.</pc></s><s xml:id="s_I1bZDQ"><w>Esto</w><w>es</w><w>bastante</w><w>sencillo</w><w>ya</w><w>que</w><w>sabemos</w><w>que</w><w>en</w><w>el</w><emph><w>OBO</w></emph><w>hay</w><w>10</w><w>transcripciones</w><w>enumeradas</w><w>por</w><w>página</w><pc>.</pc></s><s xml:id="s_ItEceU"><w>Podemos</w><w>calcular</w><w>el</w><w>número</w><w>de</w><w>páginas</w><w>de</w><w>resultados</w><w>dividiendo</w><w>el</w><w>valor</w><w>de</w><w>las</w><w>entradas</w><w>por</w><w>10</w><pc>.</pc></s><s xml:id="s_FVf69t"><w>Guardaremos</w><w>este</w><w>resultado</w><w>en</w><w>una</w><w>variable</w><w>entera</w><w>llamada</w><code rend="inline"><w>contar_paginas</w></code><pc>.</pc></s><s xml:id="s_DYuQoh"><w>Será</w><w>algo</w><w>como</w><w>lo</w><w>siguiente</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_5" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_5.txt" rend="block"/></ab><p><s xml:id="s_UXE5sB"><w>Debido</w><w>a</w><w>que</w><w>en</w><w>Python</w><w>3</w><w>el</w><w>operador</w><code rend="inline"><w>//</w></code><w>es</w><w>de</w><w>división</w><w>entera</w><w>,</w><w>y</w><w>por</w><w>lo</w><w>tanto</w><w>redondea</w><w>hacia</w><w>el</w><w>menor</w><w>número</w><w>entero</w><w>el</w><w>resultado</w><w>de</w><w>la</w><w>división</w><w>,</w><w>el</w><w>valor</w><w>de</w><code rend="inline"><w>contar_palabras</w></code><w>siempre</w><w>será</w><w>un</w><w>número</w><w>entero</w><pc>.</pc></s><s xml:id="s_Q6eLnA"><w>Prueba</w><w>lo</w><w>siguiente</w><w>ejecutando</w><w>el</w><w>siguiente</w><w>código</w><w>en</w><ref target="https://docs.python.org/es/3/tutorial/interpreter.html"><w>el</w><w>intérprete</w><w>REPL</w><w>de</w><w>Python</w></ref><w>en</w><w>tu</w><w>terminal</w><w>(</w><w>en</w><w>Mac</w><w>y</w><w>Linux</w><w>)</w><w>,</w><w>o</w><w>en</w><w>cmd</w><w>o</w><w>PowerShell</w><w>(</w><w>en</w><w>Windows</w><w>)</w><pc>.</pc></s><s xml:id="s_zyplLW"><w>(</w><w>Nota</w><w>,</w><w>de</w><w>aquí</w><w>en</w><w>adelante</w><w>,</w><w>usaremos</w><w>la</w><w>palabra</w><w>``</w><w>terminal</w><w>''</w><w>para</w><w>referirnos</w><w>al</w><w>intérprete</w><w>de</w><w>línea</w><w>de</w><w>comandos</w><pc>.</pc></s><s xml:id="s_OFqFDg"><w>)</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_6" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_6.txt" rend="block"/></ab><p><s xml:id="s_zGBpJc"><w>Ahora</w><w>bien</w><w>,</w><w>lo</w><w>que</w><w>queremos</w><w>obtener</w><w>es</w><w>``</w><w>2</w><w>''</w><w>:</w><w>una</w><w>página</w><w>que</w><w>contiene</w><w>las</w><w>entradas</w><w>1</w><w>a</w><w>10</w><w>,</w><w>y</w><w>otra</w><w>que</w><w>contiene</w><w>las</w><w>entradas</w><w>11</w><w>a</w><w>13</w><pc>.</pc></s><s xml:id="s_zaj7DF"><w>Pero</w><w>dado</w><w>que</w><w>hay</w><w>un</w><w>residuo</w><w>en</w><w>esta</w><w>operación</w><w>(</w><w>de</w><w>3</w><w>en</w><w>este</w><w>caso</w><w>,</w><w>aunque</w><w>no</w><w>importa</w><w>cuál</w><w>sea</w><w>)</w><w>,</w><w>los</w><w>últimos</w><w>3</w><w>resultados</w><w>no</w><w>se</w><w>descargarán</w><w>ya</w><w>que</w><w>solo</w><w>capturaremos</w><w>1</w><w>página</w><w>de</w><w>10</w><w>resultados</w><pc>.</pc></s><s xml:id="s_jCAbM7"><w>Para</w><w>solucionar</w><w>este</w><w>problema</w><w>utilizaremos</w><w>el</w><w>operador</w><ref target="https://docs.python.org/3.10/library/operator.html?highlight=modulo"><w>modulo</w></ref><w>(</w><code rend="inline"><w>%</w></code><w>)</w><w>,</w><w>que</w><w>divide</w><w>el</w><w>primer</w><w>valor</w><w>por</w><w>el</w><w>segundo</w><w>y</w><w>nos</w><w>devuelve</w><w>el</w><w>residuo</w><pc>.</pc></s><s xml:id="s_Ke5EN9"><w>Así</w><w>,</w><w>si</w><w>el</w><w>residuo</w><w>es</w><w>mayor</w><w>que</w><w>0</w><w>,</w><w>sabemos</w><w>que</w><w>hay</w><w>una</w><w>página</w><w>adicional</w><w>de</w><w>resultados</w><w>y</w><w>necesitamos</w><w>aumentar</w><w>el</w><w>valor</w><w>de</w><w>la</w><w>variable</w><w>de</w><w>Python</w><code rend="inline"><w>contar_paginas</w></code><w>en</w><w>una</w><w>unidad</w><pc>.</pc></s><s xml:id="s_foiK60"><w>El</w><w>código</w><w>ahora</w><w>debería</w><w>verse</w><w>así</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_7" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_7.txt" rend="block"/></ab><p><s xml:id="s_tfeoYh"><w>Si</w><w>agregamos</w><w>este</w><w>código</w><w>a</w><w>nuestra</w><w>función</w><code rend="inline"><w>obtener_resultados_consulta</w></code><w>,</w><w>justo</w><w>debajo</w><w>de</w><w>la</w><w>línea</w><code rend="inline"><w>start_value</w><w>=</w><w>0</w></code><w>,</w><w>nuestro</w><w>programa</w><w>podrá</w><w>calcular</w><w>el</w><w>número</w><w>de</w><w>páginas</w><w>que</w><w>deben</w><w>descargarse</w><pc>.</pc></s><s xml:id="s_vw1okC"><w>Sin</w><w>embargo</w><w>,</w><w>en</w><w>esta</w><w>etapa</w><w>solo</w><w>se</w><w>descargará</w><w>la</w><w>primera</w><w>página</w><w>,</w><w>ya</w><w>que</w><w>hemos</w><w>indicado</w><w>,</w><w>en</w><w>la</w><w>sección</w><w>de</w><w>la</w><w>función</w><w>de</w><w>descarga</w><w>,</w><w>que</w><w>se</w><w>ejecute</w><w>solamente</w><w>una</w><w>vez</w><pc>.</pc></s><s xml:id="s_rao5IE"><w>Para</w><w>corregirlo</w><w>,</w><w>debemos</w><w>encerrar</w><w>en</w><w>un</w><w>bucle</w><code rend="inline"><w>for</w></code><w>el</w><w>código</w><w>de</w><w>descarga</w><w>que</w><w>trabajará</w><w>una</w><w>vez</w><w>por</w><w>cada</w><w>número</w><w>que</w><w>se</w><w>indique</w><w>en</w><w>la</w><w>variable</w><w>de</w><w>Python</w><code rend="inline"><w>contar_paginas</w></code><pc>.</pc></s><s xml:id="s_UE94TC"><w>Si</w><w>el</w><w>valor</w><w>de</w><w>dicha</w><w>variable</w><w>es</w><w>1</w><w>,</w><w>entonces</w><w>descargará</w><w>una</w><w>vez</w><w>;</w><w>si</w><w>obtiene</w><w>5</w><w>descargará</w><w>cinco</w><w>veces</w><w>,</w><w>y</w><w>así</w><w>sucesivamente</w><pc>.</pc></s><s xml:id="s_0OfWM1"><w>(</w><w>El</w><w>valor</w><w>de</w><code rend="inline"><w>pagina</w></code><w>irá</w><w>aumentando</w><w>en</w><w>cada</w><w>iteración</w><w>de</w><w>bucle</w><code rend="inline"><w>for</w></code><w>:</w><w>1</w><w>,</w><w>2</w><w>,</w><w>3</w><w>,</w><w>etc.</w><w>hasta</w><w>una</w><w>unidad</w><w>menos</w><w>que</w><w>el</w><w>valor</w><w>de</w><code rend="inline"><w>contar_páginas</w></code><w>)</w><w>Inmediatamente</w><w>después</w><w>de</w><w>la</w><w>línea</w><w>que</w><w>contiene</w><w>la</w><w>expresión</w><code rend="inline"><w>contar_paginas</w><w>+=</w><w>1</w></code><w>,</w><w>que</w><w>acabas</w><w>de</w><w>escribir</w><w>,</w><w>agrega</w><w>la</w><w>siguiente</w><w>línea</w><w>y</w><w>todo</w><w>lo</w><w>que</w><w>está</w><w>debajo</w><w>de</w><w>la</w><w>línea</w><w>que</w><w>contiene</w><code rend="inline"><w>f.write</w><w>(</w><w>contenido_web.decode</w><w>(</w><w>'utf-8</w><w>'</w><w>)</w><w>)</w></code><w>(</w><w>cuida</w><w>de</w><w>sangrar</w><w>a</w><w>la</w><w>derecha</w><w>todo</w><w>el</w><w>código</w><w>para</w><w>que</w><w>este</w><w>se</w><w>incluya</w><w>en</w><w>el</w><w>bucle</w><code rend="inline"><w>for</w></code><w>)</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_8" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_8.txt" rend="block"/></ab><p><s xml:id="s_W362PM"><w>Dado</w><w>que</w><w>este</w><w>es</w><w>un</w><w>bucle</w><code rend="inline"><w>for</w></code><w>,</w><w>debemos</w><w>planear</w><w>bien</w><w>todo</w><w>el</w><w>código</w><w>que</w><w>queremos</w><w>ejecutar</w><w>repetidamente</w><w>ahí</w><pc>.</pc></s><s xml:id="s_a7HfMe"><w>Puedes</w><w>saber</w><w>si</w><w>lo</w><w>has</w><w>hecho</w><w>correctamente</w><w>al</w><w>ver</w><w>el</w><w>ejemplo</w><w>del</w><w>código</w><w>terminado</w><w>a</w><w>continuación</w><pc>.</pc></s><s xml:id="s_HILHWT"><w>Este</w><w>bucle</w><w>aprovecha</w><w>la</w><w>función</w><ref target="https://docs.python.org/3.10/library/stdtypes.html"><w>range</w></ref><w>(</w><w>``</w><w>rango</w><w>''</w><w>)</w><w>de</w><w>Python</w><pc>.</pc></s><s xml:id="s_S53kkY"><w>Para</w><w>entender</w><w>esto</w><w>,</w><w>es</w><w>mejor</w><w>pensar</w><w>que</w><w>la</w><w>variable</w><w>de</w><w>Python</w><code rend="inline"><w>contar_paginas</w></code><w>es</w><w>igual</w><w>a</w><w>2</w><w>como</w><w>se</w><w>muestra</w><w>en</w><w>el</w><w>ejemplo</w><pc>.</pc></s><s xml:id="s_XPfSJS"><w>Estas</w><w>dos</w><w>líneas</w><w>de</w><w>código</w><w>significan</w><w>:</w><w>''</w><w>Comienza</w><w>a</w><w>ejecutarlo</w><w>con</w><w>un</w><w>valor</w><w>de</w><w>bucle</w><w>inicial</w><w>de</w><w>0</w><w>,</w><w>y</w><w>cada</w><w>vez</w><w>que</w><w>ejecutes</w><w>agrega</w><w>1</w><w>más</w><w>a</w><w>ese</w><w>valor</w><pc>.</pc></s><s xml:id="s_A7yCJa"><w>Cuando</w><w>el</w><w>valor</w><w>del</w><w>bucle</w><w>es</w><w>el</w><w>mismo</w><w>que</w><code rend="inline"><w>contar_paginas</w></code><w>,</w><w>ejecuta</w><w>una</w><w>vez</w><w>más</w><w>y</w><w>luego</w><w>para</w><pc>.</pc></s><s xml:id="s_4gCqyd"><w>''</w><ref type="footnotemark" target="#es_note_5"/><w>Esto</w><w>es</w><w>particularmente</w><w>valioso</w><w>en</w><w>nuestro</w><w>caso</w><w>,</w><w>porque</w><w>podemos</w><w>decirle</w><w>a</w><w>nuestro</w><w>programa</w><w>que</w><w>se</w><w>ejecute</w><w>exactamente</w><w>una</w><w>vez</w><w>para</w><w>cada</w><w>página</w><w>de</w><w>resultados</w><w>,</w><w>lo</w><w>que</w><w>proporciona</w><w>una</w><w>nueva</w><w>habilidad</w><w>flexible</w><w>para</w><w>controlar</w><w>cuántas</w><w>veces</w><w>se</w><w>ejecuta</w><w>el</w><w>bucle</w><code rend="inline"><w>for</w></code><pc>.</pc></s><s xml:id="s_Jg3PE0"><w>Si</w><w>deseas</w><w>practicar</w><w>con</w><w>esta</w><w>nueva</w><w>y</w><w>poderosa</w><w>forma</w><w>de</w><w>escribir</w><w>bucles</w><w>,</w><w>puedes</w><w>abrir</w><w>tu</w><w>terminal</w><w>y</w><w>jugar</w><w>con</w><w>el</w><w>REPL</w><w>de</w><w>Python</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_9" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_9.txt" rend="block"/></ab><p><s xml:id="s_WeNicI"><w>Ahora</w><w>bien</w><w>,</w><w>antes</w><w>de</w><w>agregar</w><w>todo</w><w>este</w><w>código</w><w>a</w><w>nuestra</w><w>función</w><code rend="inline"><w>obtener_resultados_consulta</w></code><w>,</w><w>tenemos</w><w>que</w><w>hacer</w><w>dos</w><w>ajustes</w><pc>.</pc></s><s xml:id="s_5rZxVp"><w>Primero</w><w>,</w><w>al</w><w>final</w><w>del</w><w>bucle</w><code rend="inline"><w>for</w></code><w>(</w><w>pero</w><w>aún</w><w>dentro</w><w>del</w><w>bucle</w><w>)</w><w>y</w><w>después</w><w>de</w><w>que</w><w>se</w><w>haya</w><w>ejecutado</w><w>nuestro</w><w>código</w><w>de</w><w>descarga</w><w>,</w><w>necesitaremos</w><w>modificar</w><w>la</w><w>variable</w><w>de</w><w>servidor</w><code rend="inline"><w>startValue</w></code><w>en</w><w>la</w><w>URL</w><w>de</w><w>la</w><w>página</w><w>que</w><w>queremos</w><w>descargar</w><pc>.</pc></s><s xml:id="s_4KHLpB"><w>(</w><w>Esto</w><w>lo</w><w>hacemos</w><w>modificando</w><w>la</w><w>variable</w><w>de</w><w>Python</w><w>correspondiente</w><code rend="inline"><w>start_value</w></code><w>,</w><w>que</w><w>es</w><w>la</w><w>que</w><w>nuestro</w><w>programa</w><w>usa</w><w>para</w><w>general</w><w>el</w><w>valor</w><w>de</w><w>la</w><w>variable</w><w>de</w><w>servidor</w><code rend="inline"><w>startValue</w></code><w>en</w><w>la</w><w>URL</w><pc>.</pc></s><s xml:id="s_KvOJ1c"><w>)</w><w>Si</w><w>no</w><w>lo</w><w>hacemos</w><w>,</w><w>nuestro</w><w>programa</w><w>descargará</w><w>repetidamente</w><w>la</w><w>primera</w><w>página</w><w>de</w><w>resultados</w><w>pues</w><w>no</w><w>estamos</w><w>cambiando</w><w>nada</w><w>en</w><w>la</w><w>URL</w><w>inicial</w><pc>.</pc></s><s xml:id="s_WWbu4C"><w>Por</w><w>lo</w><w>tanto</w><w>,</w><w>podemos</w><w>solicitar</w><w>la</w><w>siguiente</w><w>página</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>aumentando</w><w>su</w><w>valor</w><w>en</w><w>10</w><w>,</w><w>una</w><w>vez</w><w>que</w><w>se</w><w>haya</w><w>completado</w><w>la</w><w>descarga</w><w>inicial</w><pc>.</pc></s><s xml:id="s_9Lr0G7"><w>Si</w><w>no</w><w>sabes</w><w>exactamente</w><w>dónde</w><w>colocar</w><w>esta</w><w>línea</w><w>,</w><w>puedes</w><w>echar</w><w>un</w><w>vistazo</w><w>al</w><w>ejemplo</w><w>de</w><w>código</w><w>terminado</w><w>,</w><w>más</w><w>abajo</w><pc>.</pc></s></p><p><s xml:id="s_nFDPl2"><w>Segundo</w><w>,</w><w>debemos</w><w>asegurarnos</w><w>de</w><w>que</w><w>el</w><w>nombre</w><w>del</w><w>archivo</w><w>con</w><w>los</w><w>datos</w><w>que</w><w>hemos</w><w>descargado</w><w>sea</w><w>diferente</w><w>para</w><w>cada</w><w>página</w><w>registrada</w><pc>.</pc></s><s xml:id="s_FZ6W8H"><w>De</w><w>lo</w><w>contrario</w><w>,</w><w>cada</w><w>descarga</w><w>se</w><w>guardará</w><w>sobrescribiendo</w><w>la</w><w>descarga</w><w>anterior</w><w>,</w><w>lo</w><w>que</w><w>nos</w><w>dejará</w><w>con</w><w>un</w><w>solo</w><w>archivo</w><w>de</w><w>resultados</w><pc>.</pc></s><s xml:id="s_0ciwAs"><w>Para</w><w>resolver</w><w>esto</w><w>,</w><w>debemos</w><w>ajustar</w><w>el</w><w>contenido</w><w>de</w><w>la</w><w>variable</w><code rend="inline"><w>nombre_archivo</w></code><w>para</w><w>incluir</w><w>el</w><w>valor</w><w>contenido</w><w>en</w><w>la</w><w>variable</w><code rend="inline"><w>pagina</w></code><pc>.</pc></s><s xml:id="s_xGuPyg"><w>Así</w><w>,</w><w>cada</w><w>vez</w><w>que</w><w>descarguemos</w><w>una</w><w>nueva</w><w>página</w><w>,</w><w>obtendremos</w><w>un</w><w>nombre</w><w>diferente</w><w>:</w><code rend="inline"><w>resultado_consulta0.html</w></code><w>,</w><code rend="inline"><w>resultado_consulta1.html</w></code><w>,</w><code rend="inline"><w>resultado_consulta2.html</w></code><w>y</w><w>así</w><w>sucesivamente</w><pc>.</pc></s><s xml:id="s_2lIDGN"><w>Como</w><code rend="inline"><w>pagina</w></code><w>contiene</w><w>un</w><w>número</w><w>entero</w><w>,</w><w>tendremos</w><w>que</w><w>convertir</w><w>su</w><w>valor</w><w>en</w><w>una</w><w>cadena</w><w>(</w><w>con</w><w>la</w><w>función</w><code rend="inline"><w>str</w><w>(</w><w>)</w></code><w>de</w><w>Python</w><w>)</w><w>antes</w><w>de</w><w>poder</w><w>agregarlo</w><w>a</w><w>la</w><w>variable</w><w>de</w><w>cadena</w><code rend="inline"><w>nombre_archivo</w></code><pc>.</pc></s><s xml:id="s_KzI8rG"><w>(</w><w>De</w><w>lo</w><w>contrario</w><w>obtendremos</w><w>un</w><w>error</w><w>,</w><w>pues</w><w>el</w><w>operador</w><code rend="inline"><w>+</w></code><w>,</w><w>usado</w><w>como</w><w>concatenador</w><w>,</w><w>requiere</w><w>necesariamente</w><w>datos</w><w>de</w><w>tipo</w><w>de</w><w>cadena</w><w>,</w><w>no</w><w>de</w><w>tipo</w><w>numérico</w><pc>.</pc></s><s xml:id="s_s2V0K4"><w>)</w><w>Ajusta</w><w>la</w><w>línea</w><w>en</w><w>tu</w><w>programa</w><w>que</w><w>pertenece</w><w>a</w><w>la</w><w>variable</w><code rend="inline"><w>nombre_archivo</w></code><w>para</w><w>que</w><w>se</w><w>vea</w><w>así</w><w>:</w><ref type="footnotemark" target="#es_note_6"/></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_10" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_10.txt" rend="block"/></ab><p><s xml:id="s_kuAg73"><w>Ahora</w><w>ya</w><w>puedes</w><w>agregar</w><w>estas</w><w>nuevas</w><w>líneas</w><w>de</w><w>código</w><w>a</w><w>tu</w><w>función</w><code rend="inline"><w>obtener_resultados_consulta</w></code><pc>.</pc></s><s xml:id="s_tn1fXy"><w>Recordemos</w><w>que</w><w>hasta</w><w>el</w><w>momento</w><w>hemos</w><w>añadido</w><w>lo</w><w>siguiente</w><w>:</w></s></p><list type="ordered"><item><s xml:id="s_fxmKtL"><w>agregamos</w><w>la</w><w>variable</w><w>de</w><w>Python</w><code rend="inline"><w>entradas</w></code><w>como</w><w>un</w><w>argumento</w><w>de</w><w>función</w><w>adicional</w><w>justo</w><w>después</w><w>de</w><code rend="inline"><w>to_month</w></code><w>;</w></s></item><item><s xml:id="s_OQe6Wu"><w>calculamos</w><w>el</w><w>número</w><w>de</w><w>páginas</w><w>de</w><w>resultados</w><w>e</w><w>incluimos</w><w>esto</w><w>inmediatamente</w><w>después</w><w>de</w><w>la</w><w>línea</w><w>que</w><w>comienza</w><w>con</w><code rend="inline"><w>start_value</w><w>=</w><w>0</w></code><w>(</w><w>antes</w><w>de</w><w>crear</w><w>la</w><w>URL</w><w>y</w><w>comenzar</w><w>a</w><w>descargar</w><w>)</w><w>;</w></s></item><item><s xml:id="s_U83lhD"><w>inmediatamente</w><w>después</w><w>de</w><w>esto</w><w>añadimos</w><w>un</w><w>bucle</w><code rend="inline"><w>for</w></code><w>,</w><w>que</w><w>le</w><w>indicará</w><w>al</w><w>programa</w><w>que</w><w>se</w><w>ejecute</w><w>una</w><w>vez</w><w>para</w><w>cada</w><w>página</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>(</w><w>es</w><w>importante</w><w>sangrar</w><w>a</w><w>la</w><w>derecha</w><w>el</w><w>resto</w><w>del</w><w>código</w><w>de</w><w>la</w><w>función</w><w>para</w><w>que</w><w>quede</w><w>dentro</w><w>del</w><w>nuevo</w><w>bucle</w><w>)</w><w>;</w></s></item><item><s xml:id="s_tcJBnf"><w>ajustamos</w><w>la</w><w>variable</w><code rend="inline"><w>nombre_archivo</w></code><w>existente</w><w>para</w><w>que</w><w>cada</w><w>vez</w><w>que</w><w>se</w><w>descargue</w><w>una</w><w>página</w><w>de</w><w>resultados</w><w>se</w><w>le</w><w>dé</w><w>un</w><w>nombre</w><w>único</w><w>al</w><w>archivo</w><w>;</w><w>y</w></s></item><item><s xml:id="s_c5n7af"><w>finalmente</w><w>,</w><w>en</w><w>la</w><w>última</w><w>línea</w><w>del</w><w>bloque</w><w>de</w><code rend="inline"><w>for</w></code><w>aumentamos</w><w>el</w><w>valor</w><w>de</w><w>la</w><w>variable</w><w>de</w><w>Python</w><code rend="inline"><w>start_value</w></code><w>(</w><w>en</w><w>10</w><w>unidades</w><w>)</w><w>cada</w><w>vez</w><w>que</w><w>se</w><w>ejecute</w><w>el</w><w>bucle</w><pc>.</pc></s></item></list><p><s xml:id="s_IkR4HD"><w>Ahora</w><w>bien</w><w>,</w><w>antes</w><w>de</w><w>proseguir</w><w>,</w><w>hagamos</w><w>una</w><w>última</w><w>cosa</w><pc>.</pc></s><s xml:id="s_JhOHIJ"><w>Nota</w><w>que</w><w>en</w><w>el</w><w>código</w><w>de</w><w>la</w><w>función</w><code rend="inline"><w>obtener_resultados_consulta</w></code><w>la</w><w>variable</w><w>de</w><w>Python</w><code rend="inline"><w>entradas</w></code><w>,</w><w>que</w><w>contiene</w><w>el</w><w>número</w><w>de</w><w>registros</w><w>que</w><w>han</w><w>de</w><w>ser</w><w>obtenidos</w><w>,</w><w>está</w><w>predefinida</w><w>con</w><w>un</w><w>valor</w><w>fijo</w><w>(</w><w>13</w><w>en</w><w>nuestro</w><w>ejemplo</w><w>)</w><pc>.</pc></s><s xml:id="s_VsK5Wd"><w>Como</w><w>queremos</w><w>que</w><w>nuestra</w><w>función</w><w>sea</w><w>más</w><w>flexible</w><w>y</w><w>no</w><w>esté</w><w>necesariamente</w><w>atada</w><w>a</w><w>un</w><w>número</w><w>predeterminado</w><w>de</w><w>registros</w><w>,</w><w>vamos</w><w>incluir</w><w>un</w><w>argumento</w><w>o</w><w>parámetro</w><w>adicional</w><w>en</w><w>nuestra</w><w>definición</w><w>de</w><w>función</w><w>:</w><code rend="inline"><w>entradas</w></code><pc>.</pc></s><s xml:id="s_Kpp8B0"><w>Lo</w><w>añadiremos</w><w>al</w><w>final</w><w>de</w><w>la</w><w>lista</w><w>de</w><w>argumentos</w><w>:</w><code rend="inline"><w>def</w><w>obtener_resultados_consulta</w><w>(</w><w>...</w><w>,</w><w>entradas</w><w>)</w></code><pc>.</pc></s><s xml:id="s_Kc3xct"><w>Así</w><w>las</w><w>cosas</w><w>,</w><w>el</w><w>código</w><w>de</w><w>la</w><w>función</w><w>terminada</w><w>en</w><w>el</w><w>archivo</w><code rend="inline"><w>obo.py</w></code><w>deberá</w><w>verse</w><w>de</w><w>la</w><w>siguiente</w><w>manera</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_11" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_11.txt" rend="block"/></ab><p><s xml:id="s_UTO7YP"><w>Como</w><w>hemos</w><w>añadido</w><w>la</w><w>variable</w><code rend="inline"><w>entradas</w></code><w>en</w><w>la</w><w>definición</w><w>de</w><w>la</w><w>función</w><w>,</w><w>debemos</w><w>añadir</w><w>un</w><w>argumento</w><w>adicional</w><w>cuando</w><w>la</w><w>llamemos</w><w>en</w><w>el</w><w>programa</w><code rend="inline"><w>descarga_consultas.py</w></code><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_12" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_12.txt" rend="block"/></ab><p><s xml:id="s_3dhykZ"><w>¡Estupendo</w><pc>!</pc></s><s xml:id="s_YGsU2u"><w>Corre</w><w>el</w><w>programa</w><w>y</w><w>verás</w><w>que</w><w>ahora</w><w>tenemos</w><w>dos</w><w>páginas</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>:</w><code rend="inline"><w>resultado_consulta0.html</w></code><w>y</w><code rend="inline"><w>resultado_consulta1.html</w></code><pc>.</pc></s><s xml:id="s_IF3uqC"><w>Pero</w><w>antes</w><w>de</w><w>avanzar</w><w>al</w><w>siguiente</w><w>paso</w><w>en</w><w>el</w><w>algoritmo</w><w>,</w><w>vamos</w><w>a</w><w>ocuparnos</w><w>de</w><w>algunas</w><w>tareas</w><w>de</w><w>limpieza</w><pc>.</pc></s><s xml:id="s_jHcILl"><w>Nuestra</w><w>carpeta</w><w>de</w><w>trabajo</w><w>se</w><w>volverá</w><w>difícil</w><w>de</w><w>manejar</w><w>si</w><w>descargamos</w><w>varias</w><w>páginas</w><w>de</w><w>resultados</w><w>y</w><w>transcripciones</w><w>de</w><w>procesos</w><w>judiciales</w><w>en</w><w>ella</w><pc>.</pc></s><s xml:id="s_BaD1dV"><w>Por</w><w>lo</w><w>tanto</w><w>,</w><w>con</w><w>Python</w><w>crearemos</w><w>un</w><w>nuevo</w><w>directorio</w><w>con</w><w>el</w><w>nombre</w><w>de</w><w>nuestros</w><w>términos</w><w>de</w><w>búsqueda</w><pc>.</pc></s></p><p><s xml:id="s_5Cj2nE"><w>Queremos</w><w>añadir</w><w>esta</w><w>nueva</w><w>funcionalidad</w><w>en</w><code rend="inline"><w>obtener_resultados_consulta</w></code><w>,</w><w>para</w><w>que</w><w>nuestras</w><w>páginas</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>se</w><w>descarguen</w><w>en</w><w>un</w><w>directorio</w><w>con</w><w>el</w><w>mismo</w><w>nombre</w><w>que</w><w>nuestra</w><w>consulta</w><w>de</w><w>búsqueda</w><pc>.</pc></s><s xml:id="s_wK9MGE"><w>Esto</w><w>mantendrá</w><w>nuestro</w><w>directorio</w><w>de</w><w>trabajo</w><w>más</w><w>organizado</w><pc>.</pc></s><s xml:id="s_RSqmxW"><w>Para</w><w>ello</w><w>crearemos</w><w>un</w><w>nuevo</w><w>directorio</w><w>utilizando</w><w>el</w><w>módulo</w><w>de</w><w>Python</w><code rend="inline"><w>os</w></code><w>,</w><w>(</w><w>abreviatura</w><w>de</w><emph><w>operating</w><w>system</w></emph><w>,</w><w>``</w><w>sistema</w><w>operativo</w><w>''</w><w>)</w><pc>.</pc></s><s xml:id="s_y0WGGj"><w>Esa</w><w>biblioteca</w><w>contiene</w><w>una</w><w>función</w><w>llamada</w><code rend="inline"><w>makedirs</w></code><w>cuya</w><w>función</w><w>es</w><w>crear</w><w>un</w><w>nuevo</w><w>directorio</w><pc>.</pc></s><s xml:id="s_gcId4G"><w>Puedes</w><w>probar</w><w>esto</w><w>usando</w><w>el</w><w>REPL</w><w>de</w><w>Python</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_13" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_13.txt" rend="block"/></ab><p><s xml:id="s_bo29Av"><w>Este</w><w>código</w><w>verifica</w><w>si</w><w>tu</w><w>computador</w><w>ya</w><w>tiene</w><w>un</w><w>directorio</w><w>con</w><w>este</w><w>nombre</w><pc>.</pc></s><s xml:id="s_alLDx7"><w>Si</w><w>no</w><w>lo</w><w>tenías</w><w>,</w><w>ahora</w><w>deberás</w><w>tener</w><w>un</w><w>directorio</w><w>llamado</w><code rend="inline"><w>mi_directorio_nuevo</w></code><pc>.</pc></s><s xml:id="s_piMuHt"><w>(</w><w>El</w><w>directorio</w><w>se</w><w>creará</w><w>como</w><w>subdirectorio</w><w>del</w><w>directorio</w><w>donde</w><w>hayas</w><w>llamado</w><w>originalmente</w><w>al</w><w>REPL</w><w>de</w><w>Python</w><pc>.</pc></s><s xml:id="s_prg8gK"><w>)</w><w>Si</w><w>esto</w><w>funciona</w><w>,</w><w>puedes</w><w>eliminar</w><w>el</w><w>directorio</w><w>de</w><w>tu</w><w>disco</w><w>duro</w><w>,</w><w>ya</w><w>que</w><w>esto</w><w>fue</w><w>solo</w><w>para</w><w>practicar</w><pc>.</pc></s><s xml:id="s_CimL24"><w>Como</w><w>queremos</w><w>crear</w><w>un</w><w>nuevo</w><w>directorio</w><w>con</w><w>el</w><w>nombre</w><w>de</w><w>la</w><w>consulta</w><w>que</w><w>ingresamos</w><w>en</w><w>el</w><w>sitio</w><w>web</w><w>del</w><emph><w>OBO</w></emph><w>,</w><w>haremos</w><w>uso</w><w>directamente</w><w>del</w><w>argumento</w><w>de</w><w>función</w><code rend="inline"><w>consulta</w></code><w>en</w><w>la</w><w>función</w><code rend="inline"><w>obtener_resultados_consulta</w></code><pc>.</pc></s><s xml:id="s_cA7rpa"><w>Para</w><w>hacer</w><w>esto</w><w>,</w><w>importa</w><w>el</w><w>módulo</w><code rend="inline"><w>os</w></code><w>(</w><w>debajo</w><w>de</w><w>las</w><w>otra</w><w>instrucción</w><w>de</w><w>importación</w><w>,</w><code rend="inline"><w>from</w><w>urllib.request</w><w>import</w><w>urlopen</w></code><w>)</w><pc>.</pc></s></p><p><s xml:id="s_McOE4v"><w>Ahora</w><w>bien</w><w>,</w><w>como</w><w>estamos</w><w>usando</w><w>los</w><w>caracteres</w><code rend="inline"><w>*</w></code><w>y</w><code rend="inline"><w>+</w></code><w>en</w><w>nuestra</w><w>búsqueda</w><w>en</w><w>el</w><emph><w>OBO</w></emph><w>,</w><w>y</w><w>como</w><w>estos</w><w>tienen</w><w>una</w><w>significación</w><w>importante</w><w>en</w><w>el</w><w>modo</w><w>como</w><w>los</w><w>sistemas</w><w>operativos</w><w>navegan</w><w>los</w><w>directorios</w><w>,</w><w>es</w><w>conveniente</w><w>que</w><w>los</w><w>reemplacemos</w><w>por</w><w>otros</w><w>más</w><w>seguros</w><w>antes</w><w>de</w><w>crear</w><w>nuestro</w><w>directorio</w><pc>.</pc></s><s xml:id="s_hU9dSG"><w>Usaremos</w><ref target="https://es.wikipedia.org/wiki/Expresi%C3%B3n_regular"><w>expresiones</w><w>regulares</w></ref><w>en</w><ref target="https://docs.python.org/3.10/library/re.html"><w>Python</w></ref><w>para</w><w>excluir</w><w>del</w><w>nombre</w><w>de</w><w>directorio</w><w>todos</w><w>los</w><w>caracteres</w><w>que</w><w>no</w><w>sean</w><w>alfanuméricos</w><pc>.</pc></s><s xml:id="s_xuLhXF"><w>Python</w><w>dispone</w><w>del</w><w>potente</w><w>módulo</w><code rend="inline"><w>re</w></code><w>(</w><w>que</w><w>deberemos</w><w>importar</w><w>al</w><w>inicio</w><w>del</w><w>archivo</w><code rend="inline"><w>obo.py</w></code><w>,</w><w>debajo</w><w>de</w><w>las</w><w>otras</w><w>instrucciones</w><w>de</w><w>importación</w><w>)</w><w>para</w><w>ello</w><pc>.</pc></s><s xml:id="s_4HSLGW"><w>Nuestro</w><w>código</w><w>``</w><w>seguro</w><w>''</w><w>será</w><w>entonces</w><w>el</w><w>siguiente</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_14" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_14.txt" rend="block"/></ab><p><s xml:id="s_LOWfzt"><w>En</w><w>la</w><w>primera</w><w>línea</w><w>,</w><w>la</w><w>función</w><code rend="inline"><w>re.sub</w></code><w>busca</w><w>la</w><w>expresión</w><w>regular</w><code rend="inline"><w>\W</w></code><w>(</w><w>que</w><w>significa</w><w>:</w><w>``</w><w>cualquier</w><w>carácter</w><emph><w>no</w></emph><w>alfanumérico</w><w>''</w><w>)</w><w>en</w><w>el</w><w>valor</w><w>de</w><w>la</w><w>variable</w><code rend="inline"><w>consulta</w></code><w>y</w><w>lo</w><w>reemplaza</w><w>por</w><w>la</w><w>cadena</w><w>vacía</w><code rend="inline"><w>''</w></code><w>,</w><w>es</w><w>decir</w><w>,</w><w>lo</w><w>elimina</w><pc>.</pc></s><s xml:id="s_wIoz3H"><ref type="footnotemark" target="#es_note_7"/><w>El</w><w>resultado</w><w>de</w><w>este</w><w>reemplazo</w><w>se</w><w>almacena</w><w>en</w><w>la</w><w>variable</w><code rend="inline"><w>directorio</w></code><pc>.</pc></s><s xml:id="s_nJitRG"><w>(</w><w>Es</w><w>importante</w><w>que</w><w>recordemos</w><w>,</w><w>en</w><w>todo</w><w>caso</w><w>,</w><w>que</w><w>el</w><w>valor</w><w>que</w><w>nuestro</w><w>programa</w><w>pasará</w><w>a</w><w>la</w><w>variable</w><w>de</w><w>servidor</w><w>en</w><w>la</w><w>URL</w><w>aún</w><w>contiene</w><w>los</w><w>caracteres</w><code rend="inline"><w>*</w></code><w>y</w><code rend="inline"><w>+</w></code><pc>.</pc></s><s xml:id="s_E6LfzT"><w>Este</w><w>reemplazo</w><w>solo</w><w>es</w><w>para</w><w>el</w><w>nombre</w><w>del</w><w>directorio</w><pc>.</pc></s><s xml:id="s_XYdk0Q"><w>)</w></s></p><p><s xml:id="s_PfoSKp"><w>Así</w><w>las</w><w>cosas</w><w>,</w><w>la</w><w>función</w><code rend="inline"><w>obtener_resultados_consulta</w></code><w>deberá</w><w>quedar</w><w>así</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_15" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_15.txt" rend="block"/></ab><p><s xml:id="s_MpkAsI"><w>Muy</w><w>bien</w><pc>.</pc></s><s xml:id="s_zSdVm4"><w>Ahora</w><w>debemos</w><w>asegurarnos</w><w>de</w><w>que</w><w>guardemos</w><w>nuestras</w><w>páginas</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>en</w><w>este</w><w>nuevo</w><w>directorio</w><pc>.</pc></s><s xml:id="s_Q9apBu"><w>Podemos</w><w>hacerlo</w><w>de</w><w>muchas</w><w>maneras</w><w>,</w><w>pero</w><w>la</w><w>más</w><w>sencilla</w><w>es</w><w>agregar</w><w>el</w><w>nuevo</w><w>nombre</w><w>del</w><w>directorio</w><w>más</w><w>una</w><w>barra</w><w>al</w><w>nombre</w><w>del</w><w>archivo</w><w>(</w><w>en</w><w>la</w><w>variable</w><code rend="inline"><w>nombre_archivo</w></code><w>)</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_16" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_16.txt" rend="block"/></ab><p><s xml:id="s_kJyh12"><w>Nota</w><w>,</w><w>sin</w><w>embargo</w><w>,</w><w>que</w><w>este</w><w>código</w><w>solo</w><w>funcionará</w><w>adecuadamente</w><w>en</w><w>MacOS</w><w>y</w><w>en</w><w>Linux</w><w>,</w><w>no</w><w>en</w><w>Windows</w><w>,</w><w>pues</w><w>este</w><w>usa</w><w>la</w><w>barra</w><w>invertida</w><code rend="inline"><w>\</w></code><w>para</w><w>demarcar</w><w>rutas</w><w>de</w><w>directorio</w><pc>.</pc></s><s xml:id="s_0vADcv"><w>Para</w><w>asegurarnos</w><w>de</w><w>que</w><w>funcione</w><w>también</w><w>en</w><w>Windows</w><w>,</w><w>usaremos</w><w>la</w><w>función</w><code rend="inline"><w>os.path.join</w></code><w>de</w><w>Python</w><pc>.</pc></s><s xml:id="s_u2cqlr"><w>Esta</w><w>función</w><w>une</w><w>adecuadamente</w><w>las</w><w>rutas</w><w>,</w><w>teniendo</w><w>en</w><w>cuenta</w><w>el</w><w>sistema</w><w>operativo</w><w>donde</w><w>se</w><w>corre</w><w>el</w><w>programa</w><pc>.</pc></s><s xml:id="s_FmwFhR"><w>Arriba</w><w>en</w><code rend="inline"><w>obo.py</w></code><w>la</w><w>importaremos</w><w>así</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_17" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_17.txt" rend="block"/></ab><p><s xml:id="s_qKhcH2"><w>(</w><w>la</w><w>importaremos</w><w>como</w><code rend="inline"><w>pjoin</w></code><w>porque</w><w>de</w><w>lo</w><w>contrario</w><w>habría</w><w>una</w><w>colisión</w><w>con</w><w>la</w><w>función</w><w>de</w><w>concatenación</w><code rend="inline"><w>join</w></code><w>,</w><w>que</w><w>es</w><w>más</w><w>fundamental</w><w>en</w><w>Python</w><w>)</w><pc>.</pc></s></p><p><s xml:id="s_RMYuJg"><w>La</w><w>línea</w><w>modificada</w><w>será</w><w>entonces</w><w>esta</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_18" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_18.txt" rend="block"/></ab><p><s xml:id="s_USHW1h"><w>Así</w><w>pues</w><w>,</w><w>el</w><w>código</w><w>completo</w><w>del</w><w>programa</w><code rend="inline"><w>obo.py</w></code><w>deberá</w><w>quedar</w><w>así</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_19" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_19.txt" rend="block"/></ab><p><s xml:id="s_OBO7w8"><w>Ejecuta</w><w>el</w><w>programa</w><code rend="inline"><w>descarga_consultas.py</w></code><w>una</w><w>vez</w><w>más</w><w>para</w><w>asegurarte</w><w>de</w><w>que</w><w>funcione</w><w>y</w><w>entiendas</w><w>cómo</w><w>guardar</w><w>archivos</w><w>en</w><w>un</w><w>directorio</w><w>particular</w><w>usando</w><w>Python</w><pc>.</pc></s></p></div><div type="3" n="6.2"><head><s xml:id="s_9MvAYh"><w>Descargar</w><w>las</w><w>entradas</w><w>individuales</w><w>de</w><w>los</w><w>procesos</w><w>judiciales</w></s></head><p><s xml:id="s_Ul8TPZ"><w>A</w><w>estas</w><w>alturas</w><w>hemos</w><w>creado</w><w>una</w><w>función</w><w>capaz</w><w>de</w><w>descargar</w><w>todos</w><w>los</w><w>archivos</w><w>HTML</w><w>con</w><w>los</w><w>resultados</w><w>de</w><w>consulta</w><w>del</w><w>sitio</w><w>web</w><w>del</w><emph><w>OBO</w></emph><w>,</w><w>para</w><w>realizar</w><w>la</w><w>búsqueda</w><w>avanzada</w><w>que</w><w>hemos</w><w>definido</w><pc>.</pc></s><s xml:id="s_AKpOF3"><w>Todo</w><w>esto</w><w>lo</w><w>hemos</w><w>hecho</w><w>usando</w><w>Python</w><pc>.</pc></s><s xml:id="s_9fdfk4"><w>Para</w><w>el</w><w>siguiente</w><w>paso</w><w>del</w><w>algoritmo</w><w>,</w><w>debemos</w><w>extraer</w><w>las</w><w>URLs</w><w>de</w><w>cada</w><w>proceso</w><w>judicial</w><w>de</w><w>los</w><w>archivos</w><w>HTML</w><pc>.</pc></s><s xml:id="s_30xyJY"><w>En</w><w>las</w><w>lecciones</w><w>que</w><w>preceden</w><w>a</w><w>esta</w><w>(</w><w>por</w><w>ejemplo</w><w>,</w><ref target="/es/lecciones/trabajar-con-paginas-web"><w>Descargar</w><w>páginas</w><w>web</w><w>con</w><w>Python</w></ref><w>)</w><w>,</w><w>hemos</w><w>trabajado</w><w>con</w><w>versiones</w><w>para</w><w>impresión</w><w>(</w><emph><w>printer</w><w>friendly</w></emph><w>)</w><w>de</w><w>los</w><w>procesos</w><w>judiciales</w><w>,</w><w>por</w><w>lo</w><w>que</w><w>continuaremos</w><w>haciéndolo</w><w>así</w><w>aquí</w><pc>.</pc></s><s xml:id="s_LolMUE"><w>Sabemos</w><w>que</w><w>la</w><w>versión</w><w>para</w><w>impresión</w><w>del</w><w>proceso</w><w>judicial</w><w>contra</w><w>Benjamin</w><w>Bowsey</w><w>se</w><w>encuentra</w><w>en</w><w>la</w><w>URL</w><w>:</w></s></p><ab><code lang="language-xml" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_20" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_20.txt" rend="block"/></ab><p><s xml:id="s_Z1QJvP"><w>Así</w><w>como</w><w>al</w><w>cambiar</w><w>las</w><w>cadenas</w><w>de</w><w>consulta</w><w>en</w><w>las</w><w>URLs</w><w>se</w><w>producen</w><w>resultados</w><w>de</w><w>búsqueda</w><w>diferentes</w><w>,</w><w>así</w><w>también</w><w>al</w><w>cambiar</w><w>la</w><w>URL</w><w>por</w><w>registros</w><w>de</w><w>procesos</w><w>judiciales</w><w>—es</w><w>decir</w><w>,</w><w>sustituyendo</w><w>la</w><w>ID</w><w>de</w><w>un</w><w>proceso</w><w>judicial</w><w>por</w><w>otra—</w><w>,</w><w>obtendremos</w><w>la</w><w>transcripción</w><w>de</w><w>otro</w><w>proceso</w><pc>.</pc></s><s xml:id="s_XcOz6w"><w>(</w><w>En</w><w>este</w><w>caso</w><w>,</w><w>la</w><w>ID</w><w>del</w><w>proceso</w><w>judicial</w><w>se</w><w>pasa</w><w>con</w><w>la</w><w>variable</w><w>de</w><w>servidor</w><code rend="inline"><w>div</w></code><w>,</w><w>cuyo</w><w>valor</w><w>en</w><w>el</w><w>caso</w><w>del</w><w>ejemplo</w><w>es</w><code rend="inline"><w>t17800628-33</w></code><pc>.</pc></s><s xml:id="s_hy9QbS"><w>)</w><w>Esto</w><w>significa</w><w>que</w><w>para</w><w>descargar</w><w>los</w><w>13</w><w>archivos</w><w>coincidentes</w><w>,</w><w>todo</w><w>lo</w><w>que</w><w>necesitamos</w><w>son</w><w>las</w><w>IDs</w><w>de</w><w>los</w><w>procesos</w><w>judiciales</w><pc>.</pc></s><s xml:id="s_s9rv6L"><w>Como</w><w>sabemos</w><w>que</w><w>las</w><w>páginas</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>en</w><w>los</w><w>sitios</w><w>web</w><w>generalmente</w><w>contienen</w><w>un</w><w>enlace</w><w>a</w><w>las</w><w>páginas</w><w>descritas</w><w>,</w><w>es</w><w>muy</w><w>probable</w><w>que</w><w>podamos</w><w>encontrar</w><w>estos</w><w>enlaces</w><w>,</w><w>incrustados</w><w>en</w><w>el</w><w>código</w><w>HTML</w><pc>.</pc></s><s xml:id="s_iwmztE"><w>Si</w><w>en</w><w>otras</w><w>lecciones</w><w>pudimos</w><w>eliminar</w><w>esta</w><w>información</w><w>de</w><w>la</w><w>página</w><w>que</w><w>descargamos</w><w>,</w><w>ahora</w><w>podemos</w><w>usar</w><w>esa</w><w>misma</w><w>información</w><w>para</w><w>generar</w><w>una</w><w>URL</w><w>que</w><w>nos</w><w>permita</w><w>descargar</w><w>cada</w><w>transcripción</w><w>del</w><w>proceso</w><w>judicial</w><pc>.</pc></s><s xml:id="s_TivtD3"><w>Esta</w><w>técnica</w><w>de</w><ref target="https://es.wikipedia.org/wiki/Web_scraping"><emph><w>web</w><w>scraping</w></emph></ref><w>se</w><w>puede</w><w>usar</w><w>en</w><w>la</w><w>mayoría</w><w>de</w><w>las</w><w>páginas</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>,</w><w>no</w><w>solo</w><w>la</w><w>del</w><emph><w>OBO</w></emph><pc>.</pc></s><s xml:id="s_sZsNz6"><w>Para</w><w>hacerlo</w><w>,</w><w>primero</w><w>deberemos</w><w>encontrar</w><w>dónde</w><w>están</w><w>las</w><w>IDs</w><w>de</w><w>cada</w><w>proceso</w><w>judicial</w><w>en</w><w>medio</w><w>del</w><w>código</w><w>HTML</w><w>de</w><w>los</w><w>archivos</w><w>descargados</w><pc>.</pc></s><s xml:id="s_XURyjZ"><w>Luego</w><w>determinaremos</w><w>una</w><w>forma</w><w>de</w><w>aislarlos</w><w>consistentemente</w><w>usando</w><w>Python</w><w>,</w><w>de</w><w>modo</w><w>que</w><w>siempre</w><w>podamos</w><w>encontrar</w><w>las</w><w>transcripciones</w><w>de</w><w>los</w><w>procesos</w><w>judiciales</w><w>,</w><w>sin</w><w>importar</w><w>qué</w><w>página</w><w>de</w><w>resultados</w><w>de</w><w>búsqueda</w><w>descarguemos</w><w>del</w><w>sitio</w><pc>.</pc></s></p><p><s xml:id="s_MHfBg2"><w>Abre</w><w>el</w><w>documento</w><code rend="inline"><w>resultado_consulta0.html</w></code><w>en</w><w>tu</w><w>editor</w><w>de</w><w>código</w><w>y</w><w>dale</w><w>un</w><w>vistazo</w><w>a</w><w>la</w><w>lista</w><w>de</w><w>los</w><w>procesos</w><w>judiciales</w><pc>.</pc></s><s xml:id="s_XhkPd0"><w>La</w><w>primera</w><w>entrada</w><w>comenzará</w><w>con</w><w>las</w><w>palabras</w><w>``</w><w>Anne</w><w>Smith</w><w>''</w><w>,</w><w>por</w><w>lo</w><w>que</w><w>puedes</w><w>usar</w><w>la</w><w>herramienta</w><w>de</w><w>búsqueda</w><w>de</w><w>texto</w><w>de</w><w>tu</w><w>editor</w><w>de</w><w>código</w><w>para</w><w>ir</w><w>inmediatamente</w><w>al</w><w>lugar</w><w>correcto</w><pc>.</pc></s><s xml:id="s_BcamsC"><w>Fíjate</w><w>que</w><w>el</w><w>nombre</w><w>``</w><w>Anne</w><w>''</w><w>está</w><w>en</w><w>el</w><w>contenido</w><w>de</w><w>un</w><w>enlace</w><w>(</w><w>un</w><w>elemento</w><w>de</w><code rend="inline"><w>&lt;</w><w>a</w><w>&gt;</w></code><w>de</w><w>HTML</w><w>)</w><w>:</w></s></p><ab><code lang="language-html" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_21" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_21.txt" rend="block"/></ab><p><s xml:id="s_770Odn"><w>En</w><w>el</w><w>lenguaje</w><w>HTML</w><w>,</w><w>el</w><w>destino</w><w>de</w><w>un</w><w>enlace</w><w>(</w><w>el</w><ref target="https://es.wikipedia.org/wiki/Elemento_HTML"><w>elemento</w></ref><code rend="inline"><w>&lt;</w><w>a</w><w>&gt;</w></code><w>)</w><w>se</w><w>especifica</w><w>en</w><w>el</w><w>valor</w><w>del</w><ref target="https://es.wikipedia.org/wiki/Atributo_HTML"><w>atributo</w></ref><code rend="inline"><w>href</w></code><w>,</w><w>que</w><w>en</w><w>este</w><w>caso</w><w>es</w><w>:</w></s></p><ab><code lang="language-html" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_22" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_22.txt" rend="block"/></ab><p><s xml:id="s_XrTppg"><w>Saber</w><w>esto</w><w>es</w><w>magnífico</w><w>,</w><w>pues</w><w>podemos</w><w>ver</w><w>que</w><w>el</w><w>enlace</w><w>contiene</w><w>la</w><w>ID</w><w>del</w><w>proceso</w><w>judicial</w><w>:</w><code rend="inline"><w>t17160113-18</w></code><pc>.</pc></s><s xml:id="s_7pn31W"><w>¡Excelente</w><pc>!</pc></s><s xml:id="s_U4wBi7"><w>Desplázate</w><w>por</w><w>las</w><w>entradas</w><w>restantes</w><w>y</w><w>encontrarás</w><w>lo</w><w>mismo</w><w>en</w><w>todas</w><w>ellas</w><pc>.</pc></s><s xml:id="s_LLpbOH"><w>Por</w><w>suerte</w><w>para</w><w>nosotros</w><w>,</w><w>el</w><w>sitio</w><w>está</w><w>bien</w><w>construido</w><w>y</w><w>parece</w><w>que</w><w>cada</w><w>enlace</w><w>comienza</w><w>con</w><code rend="inline"><w>browse.jsp</w><pc>?</pc><w>id=</w></code><w>,</w><w>seguido</w><w>de</w><w>la</w><w>ID</w><w>del</w><w>proceso</w><w>judicial</w><w>,</w><w>luego</w><w>un</w><code rend="inline"><w>&amp;</w></code><w>y</w><w>luego</w><w>el</w><w>resto</w><w>de</w><w>variables</w><w>de</w><w>servidor</w><pc>.</pc></s><s xml:id="s_MSAYiD"><w>En</w><w>el</w><w>caso</w><w>de</w><w>Anne</w><w>Smith</w><w>:</w><code rend="inline"><w>browse.jsp</w><pc>?</pc><w>id=t17160113-18</w><w>&amp;</w></code><pc>.</pc></s></p><p><s xml:id="s_fGQHEM"><w>Vamos</w><w>entonces</w><w>a</w><w>escribir</w><w>unas</w><w>líneas</w><w>de</w><w>código</w><w>que</w><w>capturen</w><w>estas</w><w>IDs</w><pc>.</pc></s><s xml:id="s_ErO8Ba"><w>Las</w><w>pondremos</w><w>al</w><w>final</w><w>de</w><w>nuestro</w><w>programa</w><w>de</w><w>Python</w><code rend="inline"><w>obo.py</w></code><pc>.</pc></s><s xml:id="s_D3fqPz"><w>Echa</w><w>un</w><w>vistazo</w><w>al</w><w>código</w><w>de</w><w>la</w><w>función</w><code rend="inline"><w>obtener_procesos_individuales</w></code><w>a</w><w>continuación</w><pc>.</pc></s><s xml:id="s_auVv3P"><w>Esta</w><w>función</w><w>también</w><w>utiliza</w><w>el</w><w>módulo</w><ref target="https://docs.python.org/es/3/library/os.path.html"><w>os</w></ref><w>de</w><w>Python</w><w>,</w><w>en</w><w>este</w><w>caso</w><w>para</w><w>enumerar</w><w>el</w><w>contenido</w><w>del</w><w>directorio</w><w>que</w><w>creamos</w><w>en</w><w>la</w><w>sección</w><w>anterior</w><pc>.</pc></s><s xml:id="s_Ehd6OA"><w>(</w><w>Este</w><w>módulo</w><w>contiene</w><w>una</w><w>gama</w><w>de</w><w>funciones</w><w>útiles</w><w>que</w><w>reflejan</w><w>los</w><w>tipos</w><w>de</w><w>tareas</w><w>que</w><w>podrías</w><w>realizar</w><w>con</w><w>tu</w><w>ratón</w><w>en</w><w>el</w><w>Finder</w><w>de</w><w>Mac</w><w>o</w><w>el</w><w>Explorador</w><w>de</w><w>Windows</w><w>,</w><w>como</w><w>abrir</w><w>,</w><w>cerrar</w><w>,</w><w>crear</w><w>,</w><w>eliminar</w><w>y</w><w>mover</w><w>archivos</w><w>y</w><w>directorios</w><pc>.</pc></s><s xml:id="s_HNzT5g"><w>Es</w><w>un</w><w>módulo</w><w>magnífico</w><w>que</w><w>deberíamos</w><w>dominar</w><w>o</w><w>,</w><w>al</w><w>menos</w><w>,</w><w>familiarizarnos</w><w>con</w><w>él</w><pc>.</pc></s><s xml:id="s_VgKqX8"><w>)</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_23" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_23.txt" rend="block"/></ab><p><s xml:id="s_Ej5Ish"><w>Ahora</w><w>crea</w><w>y</w><w>ejecuta</w><w>un</w><w>nuevo</w><w>programa</w><w>de</w><w>Python</w><w>llamado</w><code rend="inline"><w>extraer_id_proceso.py</w></code><w>con</w><w>el</w><w>siguiente</w><w>código</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_24" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_24.txt" rend="block"/></ab><p><s xml:id="s_xDpbuH"><w>Asegúrate</w><w>de</w><w>introducir</w><w>el</w><w>mismo</w><w>valor</w><w>en</w><w>el</w><w>argumento</w><w>de</w><w>consulta</w><w>como</w><w>en</w><w>el</w><w>ejemplo</w><w>anterior</w><w>(</w><code rend="inline"><w>mulatto</w><w>*</w><w>+negro</w><w>*</w></code><w>)</w><pc>.</pc></s><s xml:id="s_nxXnT7"><w>Si</w><w>todo</w><w>sale</w><w>bien</w><w>,</w><w>Python</w><w>imprimirá</w><w>una</w><w>lista</w><w>con</w><w>los</w><w>nombres</w><w>de</w><w>todos</w><w>los</w><w>archivos</w><w>que</w><w>están</w><w>en</w><w>la</w><w>nueva</w><w>carpeta</w><w>,</w><w>algo</w><w>como</w><w>:</w></s></p><ab><code lang="language-sh" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_25" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_25.txt" rend="block"/></ab><p><s xml:id="s_eLhRTC"><w>Por</w><w>ahora</w><w>deberán</w><w>ser</w><w>solamente</w><w>las</w><w>dos</w><w>páginas</w><w>con</w><w>los</w><w>resultados</w><w>de</w><w>búsqueda</w><pc>.</pc></s><s xml:id="s_eX6MCC"><w>Asegúrate</w><w>de</w><w>que</w><w>esto</w><w>funcione</w><w>antes</w><w>de</w><w>seguir</w><w>adelante</w><pc>.</pc></s><s xml:id="s_pt2TA9"><w>Dado</w><w>que</w><w>hemos</w><w>guardado</w><w>todas</w><w>las</w><w>páginas</w><w>de</w><w>resultados</w><w>usando</w><w>nombres</w><w>de</w><w>archivo</w><w>que</w><w>contienen</w><w>la</w><w>expresión</w><code rend="inline"><w>resultado_consulta</w></code><w>,</w><w>podemos</w><w>abrir</w><w>cada</w><w>uno</w><w>de</w><w>ellos</w><w>y</w><w>extraer</w><w>todas</w><w>las</w><w>IDs</w><w>de</w><w>los</w><w>procesos</w><w>judiciales</w><w>que</w><w>se</w><w>encuentran</w><w>en</w><w>él</w><pc>.</pc></s><s xml:id="s_fZgT2O"><w>En</w><w>este</w><w>caso</w><w>,</w><w>sabemos</w><w>que</w><w>solo</w><w>hay</w><w>dos</w><w>,</w><w>aunque</w><w>queremos</w><w>que</w><w>nuestro</w><w>código</w><w>sea</w><w>lo</w><w>más</w><w>flexible</w><w>posible</w><w>,</w><w>desde</w><w>luego</w><pc>.</pc></s><s xml:id="s_cp383i"><w>Al</w><w>restringir</w><w>esta</w><w>acción</w><w>exclusivamente</w><w>a</w><w>los</w><w>archivos</w><w>cuyos</w><w>nombres</w><w>contienen</w><w>la</w><w>expresión</w><code rend="inline"><w>resultado_consulta</w></code><w>,</w><w>nuestro</w><w>programa</w><w>funcionará</w><w>como</w><w>lo</w><w>esperamos</w><w>,</w><w>incluso</w><w>si</w><w>el</w><w>directorio</w><w>contiene</w><w>muchos</w><w>otros</w><w>archivos</w><w>no</w><w>relacionados</w><w>porque</w><w>el</w><w>programa</w><w>saltará</w><w>cualquier</w><w>cosa</w><w>con</w><w>un</w><w>nombre</w><w>diferente</w><pc>.</pc></s></p><p><s xml:id="s_FVp1wN"><w>Agrega</w><w>el</w><w>siguiente</w><w>código</w><w>a</w><w>la</w><w>función</w><code rend="inline"><w>obtener_procesos_individuales</w></code><w>(</w><w>en</w><w>el</w><w>programa</w><code rend="inline"><w>obo.py</w></code><w>)</w><pc>.</pc></s><s xml:id="s_e5Cxew"><w>El</w><w>código</w><w>pasará</w><w>por</w><w>cada</w><w>archivo</w><w>contenido</w><w>en</w><w>el</w><w>directorio</w><w>creado</w><w>anteriormente</w><w>y</w><w>comprobará</w><w>si</w><w>su</w><w>nombre</w><w>contiene</w><w>la</w><w>expresión</w><code rend="inline"><w>resultado_consulta</w></code><pc>.</pc></s><s xml:id="s_8JaeRR"><w>En</w><w>caso</w><w>positivo</w><w>,</w><w>el</w><w>archivo</w><w>se</w><w>abrirá</w><w>y</w><w>los</w><w>contenidos</w><w>se</w><w>guardarán</w><w>en</w><w>una</w><w>variable</w><w>llamada</w><code rend="inline"><w>texto</w></code><pc>.</pc></s><s xml:id="s_GEwZsn"><w>El</w><w>contenido</w><w>de</w><w>dicha</w><w>variable</w><w>se</w><w>analizará</w><w>luego</w><w>para</w><w>aislar</w><w>la</w><w>ID</w><w>del</w><w>proceso</w><w>judicial</w><w>,</w><w>que</w><w>sabemos</w><w>que</w><w>siempre</w><w>está</w><w>ubicada</w><w>a</w><w>la</w><w>derecha</w><w>de</w><w>la</w><w>expresión</w><code rend="inline"><w>browse.jsp</w><pc>?</pc><w>id=</w></code><w>en</w><w>la</w><w>URL</w><pc>.</pc></s><s xml:id="s_w4p3SG"><w>Cuando</w><w>el</w><w>programa</w><w>encuentre</w><w>la</w><w>ID</w><w>del</w><w>proceso</w><w>judicial</w><w>,</w><w>se</w><w>guardará</w><w>en</w><w>una</w><w>lista</w><w>de</w><w>Python</w><w>y</w><w>se</w><w>imprimirá</w><w>en</w><w>pantalla</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_26" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_26.txt" rend="block"/></ab><p><s xml:id="s_GjQuZ7"><w>Este</w><w>código</w><w>puede</w><w>parecer</w><w>algo</w><w>complicado</w><w>a</w><w>primera</w><w>vista</w><w>,</w><w>pero</w><w>vamos</w><w>a</w><w>desmenuzarlo</w><w>y</w><w>verás</w><w>que</w><w>no</w><w>es</w><w>tan</w><w>difícil</w><pc>.</pc></s><s xml:id="s_jr8598"><w>Las</w><w>líneas</w><w>①</w><w>y</w><w>④</w><w>usan</w><w>el</w><w>operador</w><w>de</w><w>continencia</w><code rend="inline"><w>in</w></code><w>de</w><w>Python</w><w>,</w><w>en</w><w>este</w><w>caso</w><w>entre</w><w>cadenas</w><pc>.</pc></s><s xml:id="s_TvllSx"><w>La</w><w>expresión</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_27" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_27.txt" rend="block"/></ab><p><s xml:id="s_oRZ0aL"><w>es</w><w>verdadera</w><w>solo</w><w>si</w><code rend="inline"><w>&lt;</w><w>cadena1</w><w>&gt;</w></code><w>es</w><w>una</w><w>subcadena</w><w>de</w><code rend="inline"><w>&lt;</w><w>cadena2</w><w>&gt;</w></code><w>,</w><w>es</w><w>decir</w><w>,</w><w>si</w><w>los</w><w>caracteres</w><w>de</w><w>la</w><w>primera</w><w>cadena</w><w>están</w><w>contenidos</w><w>,</w><w>en</w><w>el</w><w>mismo</w><w>orden</w><w>,</w><w>en</w><w>la</w><w>segunda</w><w>cadena</w><pc>.</pc></s><s xml:id="s_tW3GVL"><w>Por</w><w>ejemplo</w><w>,</w><w>lo</w><w>siguiente</w><w>es</w><w>verdadero</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_28" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_28.txt" rend="block"/></ab><p><s xml:id="s_Y8yx7t"><w>pero</w><w>esto</w><w>es</w><w>falso</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_29" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_29.txt" rend="block"/></ab><p><s xml:id="s_2K2Vk8"><w>En</w><w>ese</w><w>sentido</w><w>,</w><w>lo</w><w>que</w><w>las</w><w>líneas</w><w>①</w><w>y</w><w>④</w><w>hace</w><w>es</w><w>verificar</w><w>que</w><w>estemos</w><w>seleccionando</w><w>el</w><w>archivo</w><w>apropiado</w><w>(</w><w>según</w><w>nuestra</w><w>convención</w><w>de</w><w>denominación</w><w>)</w><w>,</w><w>en</w><w>el</w><w>primer</w><w>caso</w><w>;</w><w>y</w><w>si</w><w>la</w><w>``</w><w>palabra</w><w>''</w><w>que</w><w>estamos</w><w>procesando</w><w>contiene</w><w>la</w><w>expresión</w><code rend="inline"><w>browse.jsp</w><pc>?</pc><w>id=</w></code><w>,</w><w>en</w><w>el</w><w>segundo</w><pc>.</pc></s></p><p><s xml:id="s_jAbVXO"><w>Veamos</w><w>ahora</w><w>la</w><w>importancia</w><w>de</w><w>esa</w><w>expresión</w><w>,</w><w>para</w><w>lo</w><w>cual</w><w>pasemos</w><w>al</w><w>bucle</w><code rend="inline"><w>for</w></code><w>en</w><w>③.</w><w>Este</w><w>bucle</w><w>iterará</w><w>por</w><w>cada</w><w>una</w><w>de</w><w>las</w><w>``</w><w>palabras</w><w>''</w><w>del</w><w>documento</w><w>HTML</w><w>que</w><w>estamos</w><w>procesando</w><pc>.</pc></s><s xml:id="s_k0gHri"><w>La</w><w>línea</w><w>②</w><w>ha</w><w>guardado</w><w>una</w><w>lista</w><w>enorme</w><w>de</w><w>palabras</w><w>en</w><w>la</w><w>variable</w><code rend="inline"><w>texto</w></code><pc>.</pc></s><s xml:id="s_vwli9d"><w>Python</w><w>ha</w><w>partido</w><w>todo</w><w>el</w><w>archivo</w><w>con</w><w>la</w><w>función</w><code rend="inline"><w>split</w></code><w>,</w><w>cuyo</w><w>argumento</w><w>es</w><w>un</w><w>espacio</w><w>en</w><w>blanco</w><w>(</w><code rend="inline"><w>'</w><w>'</w></code><w>)</w><pc>.</pc></s><s xml:id="s_iWHjwy"><w>Esto</w><w>quiere</w><w>decir</w><w>que</w><w>Python</w><w>separará</w><w>todo</w><w>el</w><w>documento</w><w>donde</w><w>haya</w><w>espacios</w><pc>.</pc></s><s xml:id="s_OXVKQq"><w>Estas</w><w>serán</w><w>nuestras</w><w>``</w><w>palabras</w><w>''</w><w>,</w><w>si</w><w>se</w><w>nos</w><w>permite</w><w>la</w><w>expresión</w><w>:</w><code rend="inline"><w>Anne</w></code><w>,</w><code rend="inline"><w>Smith</w></code><w>,</w><code rend="inline"><w>href=</w><w>''</w><w>browse.jsp</w><pc>?</pc><w>id=t17160113-18</w><w>&amp;</w><w>amp</w><w>;</w><w>div=t17160113-18</w><w>&amp;</w><w>amp</w><w>;</w><w>terms=mulatto</w><w>*</w><w>_negro</w><w>*</w><w>#</w><w>highlight</w><w>''</w><w>&gt;</w></code><w>,</w><w>etc.</w><w>Nuestro</w><code rend="inline"><w>for</w></code><w>pasará</w><w>por</w><w>cada</w><w>una</w><w>de</w><w>ellas</w><pc>.</pc></s><s xml:id="s_nTlabY"><w>Como</w><w>vimos</w><w>,</w><w>la</w><w>línea</w><w>④</w><w>examinará</w><w>si</w><w>la</w><w>expresión</w><code rend="inline"><w>browse.jsp</w><pc>?</pc><w>id=</w></code><w>está</w><w>contenida</w><w>en</w><w>la</w><w>``</w><w>palabra</w><w>''</w><pc>.</pc></s><s xml:id="s_o5GmJQ"><w>Es</w><w>decir</w><w>,</w><w>determinará</w><w>si</w><w>ahí</w><w>es</w><w>donde</w><w>está</w><w>guardada</w><w>la</w><w>ID</w><w>del</w><w>proceso</w><w>judicial</w><w>que</w><w>estamos</w><w>buscando</w><pc>.</pc></s></p><p><s xml:id="s_aapV4U"><w>Si</w><w>esto</w><w>es</w><w>el</w><w>caso</w><w>,</w><w>en</w><w>la</w><w>línea</w><w>⑤</w><w>aislaremos</w><w>la</w><w>parte</w><w>de</w><w>la</w><w>expresión</w><w>capturada</w><w>en</w><w>la</w><w>palabra</w><w>,</w><w>la</w><w>ID</w><pc>.</pc></s><s xml:id="s_6w6gpo"><w>Para</w><w>esto</w><w>usamos</w><w>un</w><w>grupo</w><w>de</w><w>captura</w><w>de</w><w>expresiones</w><w>regulares</w><w>,</w><w>que</w><w>se</w><w>indican</w><w>entre</w><w>paréntesis</w><pc>.</pc></s><s xml:id="s_6WSqGZ"><w>Miremos</w><w>en</w><w>el</w><w>documento</w><w>HTML</w><w>una</w><w>de</w><w>estas</w><w>``</w><w>palabras</w><w>''</w><w>que</w><w>nos</w><w>interesan</w><w>:</w></s></p><ab><code lang="language-xml" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_30" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_30.txt" rend="block"/></ab><p><s xml:id="s_mLITNd"><w>Subrayemos</w><w>la</w><w>parte</w><w>que</w><w>nos</w><w>interesa</w><w>únicamente</w><w>:</w></s></p><ab><code lang="language-xml" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_31" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_31.txt" rend="block"/></ab><p><s xml:id="s_KkckO6"><w>Nuestro</w><w>grupo</w><w>de</w><w>captura</w><w>tomará</w><w>el</w><w>texto</w><w>que</w><w>va</w><w>desde</w><code rend="inline"><w>id=</w></code><w>hasta</w><w>el</w><w>primer</w><code rend="inline"><w>&amp;</w></code><w>(</w><w>excluyéndolos</w><w>en</w><w>el</w><w>texto</w><w>capturado</w><w>)</w><pc>.</pc></s><s xml:id="s_7QlE2j"><w>Eso</w><w>es</w><w>justo</w><w>lo</w><w>que</w><w>significa</w><w>la</w><w>expresión</w><w>regular</w><code rend="inline"><w>id=</w><w>(</w><w>.+</w><pc>?</pc><w>)</w><w>&amp;</w></code><pc>.</pc></s><s xml:id="s_rCOo8l"><w>En</w><w>efecto</w><w>,</w><code rend="inline"><w>.+</w><pc>?</pc></code><w>significa</w><w>:</w><w>captura</w><w>cualquier</w><w>carácter</w><w>(</w><code rend="inline"><pc>.</pc></code><w>)</w><w>una</w><w>o</w><w>más</w><w>veces</w><w>(</w><code rend="inline"><w>+</w></code><w>)</w><w>,</w><w>pero</w><w>hazlo</w><ref target="https://docs.python.org/es/3/howto/regex.html#repeating-things"><w>sin</w><w>codicia</w></ref><w>(</w><code rend="inline"><pc>?</pc></code><w>)</w><w>,</w><w>es</w><w>decir</w><w>,</w><w>detén</w><w>la</w><w>búsqueda</w><w>apenas</w><w>encuentres</w><w>el</w><w>primer</w><code rend="inline"><w>&amp;</w></code><w>;</w><w>y</w><w>finalmente</w><w>guarda</w><w>el</w><w>texto</w><w>hallado</w><w>en</w><w>un</w><w>grupo</w><w>de</w><w>captura</w><w>(</w><code rend="inline"><w>(</w></code><w>,</w><code rend="inline"><w>)</w></code><w>)</w><pc>.</pc></s><s xml:id="s_ZXdpOY"><w>Python</w><w>enumera</w><w>secuencialmente</w><w>los</w><w>grupos</w><w>de</w><w>captura</w><pc>.</pc></s><s xml:id="s_cI2wiM"><w>En</w><w>nuestra</w><w>expresión</w><w>regular</w><w>solo</w><w>hay</w><w>un</w><w>grupo</w><w>;</w><w>por</w><w>lo</w><w>tanto</w><w>,</w><w>será</w><w>el</w><w>grupo</w><w>1</w><pc>.</pc></s><s xml:id="s_q2W7X1"><w>La</w><w>línea</w><w>⑥</w><w>guarda</w><w>el</w><w>contenido</w><w>de</w><w>ese</w><w>grupo</w><w>—nuestra</w><w>ID—</w><w>en</w><w>la</w><w>variable</w><code rend="inline"><w>url</w></code><pc>.</pc></s><s xml:id="s_AI0JMP"><w>Finalmente</w><w>,</w><w>la</w><w>línea</w><w>⑦</w><w>la</w><w>añade</w><w>como</w><w>un</w><w>ítem</w><w>adicional</w><w>en</w><w>nuestra</w><w>lista</w><code rend="inline"><w>urls</w></code><w>,</w><w>que</w><w>luego</w><w>aprovecharemos</w><pc>.</pc></s></p><p><s xml:id="s_XeG99e"><w>Cuando</w><w>vuelvas</w><w>a</w><w>ejecutar</w><w>el</w><w>programa</w><code rend="inline"><w>extraer_id_procesos.py</w></code><w>,</w><w>verás</w><w>una</w><w>lista</w><w>de</w><w>todas</w><w>las</w><w>ID</w><w>de</w><w>los</w><w>procesos</w><w>judiciales</w><pc>.</pc></s><s xml:id="s_pGFw6f"><w>Podemos</w><w>agregar</w><w>un</w><w>par</w><w>de</w><w>líneas</w><w>adicionales</w><w>para</w><w>convertirlas</w><w>en</w><w>URLs</w><w>adecuadas</w><w>y</w><w>descargar</w><w>la</w><w>lista</w><w>completa</w><w>en</w><w>nuestro</w><w>nuevo</w><w>directorio</w><pc>.</pc></s><s xml:id="s_VBwHSZ"><w>Asimismo</w><w>,</w><w>usaremos</w><w>el</w><w>módulo</w><code rend="inline"><w>time</w></code><w>de</w><w>Python</w><w>para</w><w>pausar</w><w>nuestro</w><w>programa</w><w>durante</w><w>tres</w><w>segundos</w><w>entre</w><w>las</w><w>descargas</w><pc>.</pc></s><s xml:id="s_7F1jxi"><w>Esta</w><w>técnica</w><w>es</w><w>llamada</w><w>``</w><w>regulación</w><w>''</w><w>o</w><w>``</w><w>limitación</w><w>''</w><w>(</w><emph><w>throttling</w></emph><w>,</w><w>en</w><w>inglés</w><w>)</w><pc>.</pc></s><s xml:id="s_L4HkYl"><w>Se</w><w>considera</w><w>una</w><w>buena</w><w>forma</w><w>de</w><w>no</w><w>golpear</w><w>el</w><w>servidor</w><w>de</w><w>alguien</w><w>con</w><w>muchas</w><w>solicitudes</w><w>por</w><w>segundo</w><w>;</w><w>y</w><w>el</w><w>ligero</w><w>retraso</w><w>hace</w><w>que</w><w>sea</w><w>más</w><w>probable</w><w>que</w><w>todos</w><w>los</w><w>archivos</w><w>se</w><w>descarguen</w><w>antes</w><w>de</w><w>agotar</w><w>nuestro</w><w>tiempo</w><w>de</w><w>conexión</w><w>(</w><w>véase</w><ref target="https://www.checkupdown.com/status/E408.html"><w>time</w><w>out</w></ref><w>)</w><pc>.</pc></s><s xml:id="s_iLhn1c"><w>Elimina</w><w>la</w><w>línea</w><w>que</w><w>dice</w><code rend="inline"><w>print</w><w>(</w><w>urls</w><w>)</w></code><w>y</w><w>pon</w><w>en</w><w>su</w><w>lugar</w><w>el</w><w>código</w><w>de</w><w>abajo</w><w>(</w><w>ten</w><w>en</w><w>cuenta</w><w>que</w><w>quede</w><w>sangrado</w><w>exactamente</w><w>donde</w><w>estaba</w><w>esa</w><w>línea</w><w>)</w><pc>.</pc></s><s xml:id="s_JZTGnl"><w>Agrega</w><w>el</w><w>siguiente</w><w>código</w><w>al</w><w>final</w><w>de</w><w>la</w><w>función</w><code rend="inline"><w>obtener_procesos_individuales</w></code><w>,</w><w>luego</w><w>de</w><w>la</w><w>línea</w><w>que</w><w>tiene</w><code rend="inline"><w>urls.append</w><w>(</w><w>url</w><w>)</w></code><pc>.</pc></s><s xml:id="s_bseKup"><w>Este</w><w>código</w><w>generará</w><w>la</w><w>URL</w><w>de</w><w>cada</w><w>página</w><w>individual</w><w>,</w><w>la</w><w>descargará</w><w>en</w><w>tu</w><w>computador</w><w>en</w><w>directorio</w><w>ya</w><w>creado</w><w>,</w><w>guardará</w><w>el</w><w>archivo</w><w>y</w><w>se</w><w>detendrá</w><w>durante</w><w>3</w><w>segundos</w><w>antes</w><w>de</w><w>pasar</w><w>al</w><w>siguiente</w><w>proceso</w><w>judicial</w><pc>.</pc></s><s xml:id="s_hLmtNk"><w>Todo</w><w>lo</w><w>siguiente</w><w>está</w><w>contenido</w><w>en</w><w>un</w><w>bucle</w><code rend="inline"><w>for</w></code><w>que</w><w>se</w><w>ejecutará</w><w>una</w><w>vez</w><w>por</w><w>cada</w><w>proceso</w><w>en</w><w>tu</w><w>lista</w><w>de</w><w>URLs</w><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_32" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_32.txt" rend="block"/></ab><p><s xml:id="s_71vNlr"><w>(</w><w>Nota</w><w>que</w><w>en</w><w>la</w><w>instrucción</w><code rend="inline"><w>with</w><w>open</w></code><w>usamos</w><w>la</w><w>variable</w><code rend="inline"><w>f2</w></code><w>en</w><w>lugar</w><w>de</w><code rend="inline"><w>f</w></code><pc>.</pc></s><s xml:id="s_BCszYg"><w>Eso</w><w>es</w><w>porque</w><w>todo</w><w>este</w><w>código</w><w>está</w><w>incluido</w><w>en</w><w>bloque</w><code rend="inline"><w>with</w><w>open</w></code><w>abierto</w><w>,</w><w>que</w><w>ya</w><w>ha</w><w>definido</w><w>la</w><w>variable</w><code rend="inline"><w>f</w></code><pc>.</pc></s><s xml:id="s_XyxHj3"><w>)</w></s></p><p><s xml:id="s_JnzDzH"><w>Si</w><w>juntamos</w><w>todo</w><w>en</w><w>una</w><w>sola</w><w>función</w><w>,</w><w>debería</w><w>verse</w><w>algo</w><w>como</w><w>lo</w><w>que</w><w>sigue</w><pc>.</pc></s><s xml:id="s_ZlSvKo"><w>Hemos</w><w>añadido</w><w>también</w><w>un</w><w>par</w><w>de</w><code rend="inline"><w>print</w></code><w>s</w><w>para</w><w>ir</w><w>viendo</w><w>cómo</w><w>avanza</w><w>nuestro</w><w>programa</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_33" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_33.txt" rend="block"/></ab><p><s xml:id="s_fBYwCF"><w>Ahora</w><w>agreguemos</w><w>la</w><w>misma</w><w>pausa</w><w>de</w><w>tres</w><w>segundos</w><w>a</w><w>nuestra</w><w>función</w><code rend="inline"><w>obtener_resultados_consulta</w></code><w>para</w><w>ser</w><w>amables</w><w>con</w><w>los</w><w>servidores</w><w>del</w><emph><w>OBO</w></emph><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_34" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_34.txt" rend="block"/></ab><p><s xml:id="s_fQkhr1"><w>Finalmente</w><w>,</w><w>llama</w><w>a</w><w>la</w><w>función</w><w>desde</w><w>el</w><w>programa</w><code rend="inline"><w>descarga_consultas.py</w></code><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_35" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_35.txt" rend="block"/></ab><p><s xml:id="s_Sf8aWp"><w>Has</w><w>creado</w><w>un</w><w>programa</w><w>que</w><w>puede</w><w>solicitar</w><w>y</w><w>descargar</w><w>archivos</w><w>del</w><w>sitio</w><w>web</w><w>del</w><emph><w>OBO</w></emph><w>,</w><w>según</w><w>los</w><w>parámetros</w><w>de</w><w>búsqueda</w><w>que</w><w>definiste</w><w>,</w><w>¡todo</w><w>sin</w><w>visitar</w><w>manualmente</w><w>el</w><w>sitio</w><pc>!</pc></s></p></div><div type="3" n="6.3"><head><s xml:id="s_OYYiX5"><w>Si</w><w>los</w><w>archivos</w><w>no</w><w>se</w><w>descargan</w></s></head><p><s xml:id="s_ieLMNy"><w>Comprueba</w><w>que</w><w>los</w><w>13</w><w>archivos</w><w>se</w><w>hayan</w><w>descargado</w><w>correctamente</w><pc>.</pc></s><s xml:id="s_H7LTVe"><w>Ábrelos</w><w>en</w><w>tu</w><w>navegador</w><w>web</w><w>y</w><w>verifica</w><w>que</w><w>estén</w><w>bien</w><pc>.</pc></s><s xml:id="s_yOwhZr"><w>Si</w><w>es</w><w>así</w><w>,</w><w>¡genial</w><pc>!</pc></s><s xml:id="s_c2x4RL"><w>Sin</w><w>embargo</w><w>,</w><w>existe</w><w>la</w><w>posibilidad</w><w>de</w><w>que</w><w>el</w><w>programa</w><w>se</w><w>atore</w><w>en</w><w>el</w><w>proceso</w><pc>.</pc></s><s xml:id="s_KHbu7t"><w>Esto</w><w>se</w><w>debe</w><w>a</w><w>que</w><w>,</w><w>aunque</w><w>el</w><w>programa</w><w>se</w><w>ejecute</w><w>en</w><w>nuestra</w><w>propia</w><w>máquina</w><w>,</w><w>se</w><w>basa</w><w>en</w><w>dos</w><w>factores</w><w>que</w><w>están</w><w>fuera</w><w>de</w><w>nuestro</w><w>control</w><w>inmediato</w><w>:</w><w>la</w><w>velocidad</w><w>de</w><w>Internet</w><w>y</w><w>el</w><w>tiempo</w><w>de</w><w>respuesta</w><w>del</w><w>servidor</w><w>del</w><emph><w>OBO</w></emph><w>en</w><w>ese</w><w>momento</w><pc>.</pc></s><s xml:id="s_Bykqd1"><w>Una</w><w>cosa</w><w>es</w><w>pedirle</w><w>a</w><w>Python</w><w>que</w><w>descargue</w><w>un</w><w>solo</w><w>archivo</w><w>;</w><w>pero</w><w>cuando</w><w>le</w><w>pedimos</w><w>que</w><w>descargue</w><w>un</w><w>archivo</w><w>cada</w><w>3</w><w>segundos</w><w>,</w><w>existe</w><w>una</w><w>gran</w><w>probabilidad</w><w>de</w><w>que</w><w>el</w><w>servidor</w><w>agote</w><w>el</w><w>tiempo</w><w>de</w><w>conexión</w><w>o</w><w>no</w><w>nos</w><w>envíe</w><w>el</w><w>archivo</w><w>que</w><w>buscamos</w><pc>.</pc></s></p><p><s xml:id="s_j3jbDR"><w>Si</w><w>estuviéramos</w><w>usando</w><w>un</w><w>navegador</w><w>web</w><w>para</w><w>hacer</w><w>estas</w><w>solicitudes</w><w>,</w><w>eventualmente</w><w>recibiríamos</w><w>un</w><w>mensaje</w><w>diciendo</w><w>:</w><w>''</w><w>La</w><w>conexión</w><w>se</w><w>ha</w><w>agotado</w><w>''</w><w>o</w><w>algo</w><w>por</w><w>el</w><w>estilo</w><pc>.</pc></s><s xml:id="s_BsBS10"><w>Todos</w><w>vemos</w><w>esto</w><w>de</w><w>vez</w><w>en</w><w>cuando</w><pc>.</pc></s><s xml:id="s_V2LZLQ"><w>Sin</w><w>embargo</w><w>,</w><w>nuestro</w><w>programa</w><w>no</w><w>está</w><w>diseñado</w><w>para</w><w>manejar</w><w>o</w><w>transmitir</w><w>dichos</w><w>mensajes</w><w>de</w><w>error</w><pc>.</pc></s><s xml:id="s_BKpv8o"><w>En</w><w>su</w><w>lugar</w><w>,</w><w>te</w><w>darás</w><w>cuenta</w><w>de</w><w>que</w><w>algo</w><w>malo</w><w>pasa</w><w>,</w><w>cuando</w><w>descubras</w><w>que</w><w>el</w><w>programa</w><w>no</w><w>ha</w><w>devuelto</w><w>el</w><w>número</w><w>esperado</w><w>de</w><w>archivos</w><w>o</w><w>que</w><w>simplemente</w><w>no</w><w>hace</w><w>nada</w><pc>.</pc></s><s xml:id="s_fp6pWt"><w>Para</w><w>evitar</w><w>la</w><w>frustración</w><w>y</w><w>la</w><w>incertidumbre</w><w>,</w><w>queremos</w><w>un</w><w>programa</w><w>a</w><w>prueba</w><w>de</w><w>fallas</w><w>que</w><w>intente</w><w>descargar</w><w>cada</w><w>proceso</w><w>judicial</w><pc>.</pc></s><s xml:id="s_fkaOzQ"><w>Si</w><w>por</w><w>alguna</w><w>razón</w><w>falla</w><w>,</w><w>lo</w><w>anotaremos</w><w>y</w><w>pasaremos</w><w>al</w><w>siguiente</w><w>proceso</w><pc>.</pc></s></p><p><s xml:id="s_2UdnFW"><w>Para</w><w>hacer</w><w>esto</w><w>,</w><w>haremos</w><w>uso</w><w>del</w><w>mecanismo</w><w>de</w><w>manejo</w><w>de</w><w>errores</w><w>y</w><w>excepciones</w><w>(</w><emph><w>try/except</w></emph><w>)</w><w>de</w><w>Python</w><w>(</w><w>ver</w><ref target="https://docs.python.org/es/3/tutorial/errors.html"><w>errores</w><w>y</w><w>excepciones</w></ref><w>)</w><w>,</w><w>así</w><w>como</w><w>otro</w><w>módulo</w><w>de</w><w>Python</w><code rend="inline"><w>socket</w></code><pc>.</pc></s><s xml:id="s_znN8xQ"><code rend="inline"><w>try/except</w></code><w>se</w><w>parece</w><w>mucho</w><w>a</w><w>una</w><w>declaración</w><code rend="inline"><w>if/else</w></code><pc>.</pc></s><s xml:id="s_MyIC4t"><w>Cuando</w><w>le</w><w>pides</w><w>a</w><w>Python</w><w>que</w><emph><w>pruebe</w></emph><w>algo</w><w>(</w><code rend="inline"><w>try</w></code><w>)</w><w>,</w><w>intentará</w><w>ejecutar</w><w>el</w><w>código</w><pc>.</pc></s><s xml:id="s_wpjzxG"><w>Si</w><w>el</w><w>código</w><w>no</w><w>logra</w><w>hacer</w><w>lo</w><w>que</w><w>se</w><w>ha</w><w>definido</w><w>,</w><w>ejecutará</w><w>el</w><w>código</w><code rend="inline"><w>except</w></code><pc>.</pc></s><s xml:id="s_iGuD7D"><w>Esto</w><w>se</w><w>conoce</w><w>como</w><emph><w>manejo</w><w>de</w><w>errores</w></emph><w>y</w><w>se</w><w>usa</w><w>con</w><w>mucha</w><w>frecuencia</w><pc>.</pc></s><s xml:id="s_qDObvp"><w>Podemos</w><w>tomar</w><w>ventaja</w><w>de</w><w>esto</w><w>diciéndole</w><w>a</w><w>nuestro</w><w>programa</w><w>que</w><w>intente</w><w>descargar</w><w>una</w><w>página</w><pc>.</pc></s><s xml:id="s_BjzodR"><w>Si</w><w>esto</w><w>falla</w><w>,</w><w>le</w><w>pediremos</w><w>que</w><w>nos</w><w>informe</w><w>qué</w><w>archivo</w><w>no</w><w>se</w><w>pudo</w><w>descartar</w><w>y</w><w>luego</w><w>seguiremos</w><w>adelante</w><pc>.</pc></s><s xml:id="s_Ii4JAm"><w>Para</w><w>esto</w><w>necesitamos</w><w>usar</w><w>el</w><w>módulo</w><code rend="inline"><w>socket</w></code><w>,</w><w>que</w><w>nos</w><w>permitirá</w><w>poner</w><w>un</w><w>límite</w><w>de</w><w>tiempo</w><w>en</w><w>un</w><w>intento</w><w>de</w><w>descarga</w><w>antes</w><w>de</w><w>continuar</w><pc>.</pc></s><s xml:id="s_siXDNA"><w>Esto</w><w>implica</w><w>alterar</w><w>la</w><w>función</w><code rend="inline"><w>obtener_procesos_individuales</w></code><pc>.</pc></s></p><p><s xml:id="s_BvI4xY"><w>Primero</w><w>debemos</w><w>importar</w><w>el</w><w>módulo</w><code rend="inline"><w>socket</w></code><w>,</w><w>lo</w><w>que</w><w>debe</w><w>hacerse</w><w>de</w><w>la</w><w>misma</w><w>manera</w><w>que</w><w>todas</w><w>nuestras</w><w>importaciones</w><w>de</w><w>módulos</w><w>anteriores</w><pc>.</pc></s><s xml:id="s_RDDxVL"><w>También</w><w>tendremos</w><w>que</w><w>establecer</w><w>la</w><w>duración</w><w>predeterminada</w><w>del</w><w>tiempo</w><w>de</w><w>espera</w><w>de</w><code rend="inline"><w>socket</w></code><w>:</w><w>cuánto</w><w>tiempo</w><w>intentaremos</w><w>descargar</w><w>una</w><w>página</w><w>antes</w><w>de</w><w>darnos</w><w>por</w><w>vencidos</w><pc>.</pc></s><s xml:id="s_FRt8tu"><w>Esto</w><w>debe</w><w>escribirse</w><w>inmediatamente</w><w>después</w><w>del</w><w>comentario</w><code rend="inline"><w>#</w><w>descarga</w><w>la</w><w>página</w></code></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_36" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_36.txt" rend="block"/></ab><p><s xml:id="s_Ryf9lY"><w>A</w><w>continuación</w><w>,</w><w>agregaremos</w><w>la</w><w>declaración</w><code rend="inline"><w>try/except</w></code><pc>.</pc></s><s xml:id="s_a4MvUR"><w>En</w><w>este</w><w>caso</w><w>,</w><w>pondremos</w><w>todo</w><w>el</w><w>código</w><w>diseñado</w><w>para</w><w>descargar</w><w>y</w><w>guardar</w><w>los</w><w>procesos</w><w>judiciales</w><w>en</w><w>la</w><w>declaración</w><code rend="inline"><w>try</w></code><w>,</w><w>y</w><w>en</w><w>la</w><w>declaración</w><code rend="inline"><w>except</w></code><w>le</w><w>diremos</w><w>al</w><w>programa</w><w>lo</w><w>que</w><w>queremos</w><w>que</w><w>haga</w><w>si</w><w>eso</w><w>falla</w><pc>.</pc></s><s xml:id="s_BF0rRg"><w>Aunque</w><w>podríamos</w><w>dejar</w><w>la</w><w>línea</w><w>de</w><w>la</w><w>excepción</w><w>de</w><w>manera</w><w>genérica</w><w>(</w><w>simplemente</w><w>con</w><w>un</w><code rend="inline"><w>except</w><w>:</w></code><w>)</w><w>,</w><ref target="https://peps.python.org/pep-0008/#programming-recommendations"><w>Python</w><w>recomienda</w></ref><w>especificar</w><w>el</w><w>tipo</w><w>de</w><w>excepción</w><w>ocurrida</w><pc>.</pc></s><s xml:id="s_HBS0sS"><w>Para</w><w>ello</w><w>usamos</w><code rend="inline"><w>except</w><w>OSError</w><w>as</w><w>msg</w><w>:</w></code><pc>.</pc></s><s xml:id="s_M3tAvI"><w>Esto</w><w>nos</w><w>dice</w><w>que</w><w>la</w><w>excepción</w><w>es</w><w>de</w><w>tipo</w><ref target="https://docs.python.org/es/3/library/exceptions.html#OSError"><code rend="inline"><w>OSError</w></code></ref><w>y</w><w>guardará</w><w>los</w><w>detalles</w><w>en</w><w>la</w><w>variable</w><code rend="inline"><w>msg</w></code><pc>.</pc></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_37" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_37.txt" rend="block"/></ab><p><s xml:id="s_ij5raw"><w>Si</w><w>surge</w><w>un</w><w>problema</w><w>al</w><w>descargar</w><w>un</w><w>determinado</w><w>archivo</w><w>,</w><w>recibirás</w><w>un</w><w>mensaje</w><w>en</w><w>el</w><w>terminal</w><pc>.</pc></s><s xml:id="s_9s72JY"><w>Si</w><w>solo</w><w>hay</w><w>uno</w><w>o</w><w>dos</w><w>archivos</w><w>no</w><w>descargados</w><w>,</w><w>probablemente</w><w>sea</w><w>más</w><w>rápido</w><w>visitar</w><w>las</w><w>páginas</w><w>manualmente</w><w>y</w><w>usar</w><w>la</w><w>función</w><w>``</w><w>Guardar</w><w>como</w><w>...</w><w>''</w><w>de</w><w>tu</w><w>navegador</w><pc>.</pc></s><s xml:id="s_2VKbpi"><w>Pero</w><w>si</w><w>tienes</w><w>espíritu</w><w>de</w><w>aventura</w><w>puedes</w><w>modificar</w><w>el</w><w>programa</w><w>para</w><w>descargar</w><w>automáticamente</w><w>los</w><w>archivos</w><w>restantes</w><pc>.</pc></s></p><p><s xml:id="s_fqOSRj"><w>El</w><w>archivo</w><code rend="inline"><w>obo.py</w></code><w>terminado</w><w>deberá</w><w>verse</w><w>como</w><w>esto</w><w>:</w></s></p><ab><code lang="language-python" xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_38" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_38.txt" rend="block"/></ab></div></div><div type="2" n="7"><head><s xml:id="s_Whatf5"><w>Próximos</w><w>pasos</w><w>:</w><w>usar</w><w>una</w><w>interfaz</w><w>de</w><w>programación</w><w>de</w><w>aplicaciones</w><w>(</w><w>API</w><w>)</w></s></head><p><s xml:id="s_n3BG2T"><w>Para</w><w>usuarias/os</w><w>más</w><w>avanzadas/os</w><w>,</w><w>o</w><w>para</w><w>adquirir</w><w>más</w><w>destreza</w><w>,</w><w>vale</w><w>la</w><w>pena</w><w>leer</w><w>acerca</w><w>de</w><w>cómo</w><w>lograr</w><w>este</w><w>mismo</w><w>proceso</w><w>utilizando</w><w>las</w><ref target="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones"><w>interfaces</w><w>de</w><w>programación</w><w>de</w><w>aplicaciones</w><w>(</w><w>API</w><w>)</w></ref><pc>.</pc></s><s xml:id="s_zjDzmo"><w>Un</w><w>sitio</w><w>web</w><w>con</w><w>una</w><w>API</w><w>generalmente</w><w>proporcionará</w><w>instrucciones</w><w>sobre</w><w>cómo</w><w>solicitar</w><w>ciertos</w><w>documentos</w><pc>.</pc></s><s xml:id="s_OvoVDq"><w>Es</w><w>un</w><w>proceso</w><w>muy</w><w>similar</w><w>al</w><w>que</w><w>acabamos</w><w>de</w><w>hacer</w><w>interpretando</w><w>las</w><w>cadenas</w><w>de</w><w>consulta</w><w>de</w><w>URL</w><w>,</w><w>pero</w><w>sin</w><w>el</w><w>trabajo</w><w>adicional</w><w>de</w><w>detective</w><w>que</w><w>hicimos</w><w>para</w><w>descifrar</w><w>el</w><w>comportamiento</w><w>de</w><w>cada</w><w>variable</w><pc>.</pc></s><s xml:id="s_bkAVYu"><w>Si</w><w>tienes</w><w>interés</w><w>en</w><w>el</w><emph><w>OBO</w></emph><w>,</w><w>el</w><w>sitio</w><w>cuenta</w><w>con</w><ref target="https://www.oldbaileyonline.org/static/DocAPI.jsp"><w>una</w><w>buena</w><w>API</w><w>y</w><w>su</w><w>documentación</w><w>es</w><w>muy</w><w>útil</w></ref><pc>.</pc></s></p></div><div type="2" n="8"><head><s xml:id="s_chAb4K"><w>Notas</w></s></head><p><s xml:id="s_0MxadS"><ref type="footnotemark" target="#es_note_1"/><w>:</w><w>El</w><ref target="https://es.wikipedia.org/wiki/Old_Bailey"><w>Tribunal</w><w>Penal</w><w>Central</w><w>de</w><w>Inglaterra</w><w>y</w><w>Gales</w></ref><w>es</w><w>conocido</w><w>también</w><w>como</w><w>el</w><emph><w>OBO</w></emph><w>,</w><w>por</w><w>la</w><w>calle</w><w>en</w><w>la</w><w>que</w><w>está</w><w>ubicada</w><w>en</w><w>Londres</w><pc>.</pc></s><s xml:id="s_YLEeMt"><w>El</w><w>sitio</w><w>web</w><w>del</w><ref target="https://www.oldbaileyonline.org"><emph><w>OBO</w></emph></ref><w>contiene</w><w>los</w><w>registros</w><w>judiciales</w><w>de</w><w>dicho</w><w>tribunal</w><w>desde</w><w>1674</w><w>hasta</w><w>*</w><w>1913</w><pc>.</pc></s><s xml:id="s_p4ZOTz"><w>(</w><w>N.</w><w>de</w><w>T</w><pc>.</pc></s><s xml:id="s_tlL5NH"><w>)</w></s></p><p><s xml:id="s_7siblA"><ref type="footnotemark" target="#es_note_2"/><w>:</w><w>Hemos</w><w>dejado</w><w>los</w><w>términos</w><w>de</w><w>búsqueda</w><w>en</w><w>inglés</w><w>,</w><w>ya</w><w>que</w><w>son</w><w>los</w><w>que</w><w>arrojan</w><w>resultados</w><w>en</w><w>la</w><w>página</w><w>web</w><w>de</w><emph><w>Old</w><w>Bailey</w><w>Online</w></emph><pc>.</pc></s><s xml:id="s_aP1Ed2"><w>(</w><w>N.</w><w>de</w><w>T</w><pc>.</pc></s><s xml:id="s_mi7zGW"><w>)</w></s></p><p><s xml:id="s_i5eYxn"><ref type="footnotemark" target="#es_note_3"/><w>:</w><w>El</w><w>eufemismo</w><w>``</w><w>n-word</w><w>''</w><w>se</w><w>refiere</w><w>a</w><w>una</w><w>de</w><w>las</w><w>palabras</w><w>más</w><w>ofensivas</w><w>que</w><w>existe</w><w>en</w><w>lengua</w><w>inglesa</w><w>para</w><w>designar</w><w>a</w><w>los</w><w>afrodescendientes</w><pc>.</pc></s><s xml:id="s_ThVARR"><w>Puede</w><w>verse</w><w>una</w><w>explicación</w><w>[</w><w>aquí</w><w>]</w><ref target="https://www.wordreference.com/es/translation.asp?tranword=nigger"><w>aquí</w></ref><pc>.</pc></s><s xml:id="s_rNY0ue"><w>(</w><w>N.</w><w>de</w><w>T</w><pc>.</pc></s><s xml:id="s_1E3m46"><w>)</w></s></p><p><s xml:id="s_PZQeRq"><ref type="footnotemark" target="#es_note_4"/><w>:</w><w>Aquí</w><w>usaremos</w><w>el</w><w>término</w><w>``</w><w>``</w><w>para</w><emph><w>las</w><w>variables</w><w>que</w><w>se</w><w>asignan</w><w>en</w><w>un</w><w>URL</w></emph><w>y</w><w>que</w><w>son</w><w>procesados</w><w>por</w><w>el</w><w>servidor</w><w>(</w><w>PhP</w><w>,</w><w>Ruby</w><w>on</w><w>Rails</w><w>,</w><w>Flask</w><w>,</w><w>etc.</w><w>)</w><pc>.</pc></s><hi rend="bold"><s xml:id="s_Gsx7Q4"><w>variable</w><w>de</w><w>servidor</w></s></hi><s xml:id="s_mgKfUi"><w>En</w><w>el</w><w>caso</w><w>del</w><emph><w>OBO</w></emph><w>,</w><w>los</w><w>nombres</w><w>de</w><w>estas</w><w>siguen</w><w>la</w><w>convención</w><w>del</w><ref target="https://es.wikipedia.org/wiki/Camel_case"><w>camelCase</w><w>o</w><w>letra</w><w>de</w><w>caja</w><w>camello</w></ref><w>;</w><w>por</w><w>ejemplo</w><w>:</w><code rend="inline"><w>fromYear</w></code><w>,</w><code rend="inline"><w>toYear</w></code><w>,</w><code rend="inline"><w>fromMonth</w></code><w>,</w><code rend="inline"><w>toMonth</w></code><w>,</w><w>etc</w><pc>.</pc></s><s xml:id="s_qg5c7j"><w>Por</w><w>el</w><w>contrario</w><w>,</w><w>llamaremos</w><w>simplemente</w><w>``</w><w>``</w><w>a</w><w>las</w><w>variables</w><w>de</w><w>Python</w><pc>.</pc></s><hi rend="bold"><s xml:id="s_ymcyyB"><w>variables</w></s></hi><s xml:id="s_SmCJCm"><ref target="https://peps.python.org/pep-0008/"><w>La</w><w>convención</w><w>de</w><w>Python</w></ref><w>es</w><emph><w>no</w></emph><w>usar</w><w>camelCase</w><w>para</w><w>sus</w><w>nombres</w><w>sino</w><w>usar</w><w>guiones</w><w>bajos</w><code rend="inline"><w>_</w></code><w>para</w><w>mejorar</w><w>la</w><w>legibilidad</w><w>;</w><w>en</w><w>nuestro</w><w>caso</w><w>,</w><code rend="inline"><w>from_year</w></code><w>,</w><code rend="inline"><w>to_year</w></code><w>,</w><code rend="inline"><w>from_month</w></code><w>,</w><code rend="inline"><w>to_month</w></code><w>,</w><w>etc</w><pc>.</pc></s></p><p><s xml:id="s_5SOgGV"><ref type="footnotemark" target="#es_note_5"/><w>:</w><w>La</w><w>función</w><code rend="inline"><w>range</w></code><w>de</w><w>Python</w><w>crea</w><w>una</w><ref target="https://docs.python.org/3/library/stdtypes.html#typesseq-range"><w>secuencia</w><w>inmutable</w><w>de</w><w>números</w></ref><w>que</w><w>puede</w><w>ser</w><w>usada</w><w>como</w><w>iterador</w><w>en</w><w>un</w><w>bucle</w><code rend="inline"><w>for</w></code><pc>.</pc></s><s xml:id="s_OB1q2G"><code rend="inline"><w>range</w></code><w>toma</w><w>un</w><w>argumento</w><w>obligatorio</w><w>:</w><w>el</w><w>valor</w><w>de</w><w>parada</w><pc>.</pc></s><s xml:id="s_fq1oy9"><w>Este</w><w>valor</w><w>siempre</w><w>es</w><emph><w>una</w><w>unidad</w><w>menor</w><w>que</w></emph><w>el</w><w>valor</w><w>de</w><w>parada</w><pc>.</pc></s><s xml:id="s_Iasquo"><w>El</w><w>valor</w><w>inicial</w><w>de</w><w>la</w><w>secuencia</w><w>es</w><w>por</w><w>defecto</w><w>0</w><pc>.</pc></s><s xml:id="s_PSawWN"><w>Así</w><w>,</w><w>por</w><w>ejemplo</w><w>,</w><code rend="inline"><w>range</w><w>(</w><w>3</w><w>)</w></code><w>creará</w><w>la</w><w>siguiente</w><w>secuencia</w><w>inmutable</w><w>:</w><code rend="inline"><w>0</w><w>,</w><w>1</w><w>,</w><w>2</w></code><w>,</w><w>puesto</w><w>que</w><w>2</w><w>es</w><w>una</w><w>unidad</w><w>menor</w><w>que</w><w>el</w><w>valor</w><w>de</w><w>parada</w><w>3</w><pc>.</pc></s><s xml:id="s_jXZ0MY"><code rend="inline"><w>range</w></code><w>también</w><w>puede</w><w>tomar</w><w>un</w><w>valor</w><w>inicial</w><w>distinto</w><w>como</w><emph><w>primer</w></emph><w>argumento</w><w>de</w><w>función</w><w>(</w><w>aunque</w><w>es</w><w>opcional</w><w>)</w><pc>.</pc></s><s xml:id="s_FxLAgl"><w>Por</w><w>ejemplo</w><w>,</w><code rend="inline"><w>range</w><w>(</w><w>1</w><w>,</w><w>3</w><w>)</w></code><w>creará</w><w>la</w><w>secuencia</w><w>:</w><code rend="inline"><w>1</w><w>,</w><w>2</w></code><pc>.</pc></s><s xml:id="s_ESdMVU"><w>Es</w><w>por</w><w>esto</w><w>que</w><w>en</w><w>el</w><w>ejemplo</w><w>del</w><w>código</w><w>de</w><w>la</w><w>lección</w><w>necesitamos</w><w>la</w><w>expresión</w><code rend="inline"><w>range</w><w>(</w><w>1</w><w>,</w><w>contar_paginas</w><w>+</w><w>1</w><w>)</w></code><pc>.</pc></s><s xml:id="s_w7J3w4"><w>Esta</w><w>expresión</w><w>crea</w><w>una</w><w>secuencia</w><w>que</w><w>empieza</w><w>en</w><w>1</w><w>y</w><w>se</w><w>detiene</w><emph><w>e</w><w>incluye</w></emph><w>el</w><w>valor</w><w>de</w><w>la</w><w>variable</w><code rend="inline"><w>contar_paginas</w></code><pc>.</pc></s><s xml:id="s_1Gl7qh"><w>Por</w><w>ejemplo</w><w>,</w><w>si</w><code rend="inline"><w>contar_paginas</w></code><w>es</w><w>3</w><w>,</w><w>la</w><w>expresión</w><code rend="inline"><w>range</w><w>(</w><w>1</w><w>,</w><w>contar_paginas</w><w>+</w><w>1</w><w>)</w></code><w>equivaldrá</w><w>a</w><code rend="inline"><w>range</w><w>(</w><w>1</w><w>,</w><w>4</w><w>)</w></code><w>,</w><w>que</w><w>en</w><w>efecto</w><w>creará</w><w>la</w><w>secuencia</w><code rend="inline"><w>1</w><w>,</w><w>2</w><w>,</w><w>3</w></code><pc>.</pc></s><s xml:id="s_jZoQn8"><w>Por</w><w>lo</w><w>tanto</w><w>,</w><w>el</w><w>bucle</w><code rend="inline"><w>for</w><w>pagina</w><w>in</w><w>range</w><w>(</w><w>1</w><w>,</w><w>contar_paginas</w><w>+</w><w>1</w><w>)</w></code><w>iterará</w><w>tres</w><w>veces</w><w>:</w><w>una</w><w>vez</w><w>por</w><w>cada</w><w>página</w><w>de</w><w>resultados</w><pc>.</pc></s></p><p><s xml:id="s_B86XNr"><ref type="footnotemark" target="#es_note_6"/><w>:</w><w>Más</w><w>adelante</w><w>,</w><w>en</w><w>la</w><w>función</w><code rend="inline"><w>obtener_procesos_individuales</w></code><w>,</w><w>procesaremos</w><w>una</w><w>a</w><w>una</w><w>las</w><w>páginas</w><w>descargadas</w><w>,</w><w>buscando</w><w>las</w><w>URLs</w><w>de</w><w>los</w><w>procesos</w><w>judiciales</w><w>en</w><w>la</w><emph><w>OBO</w></emph><pc>.</pc></s><s xml:id="s_rOOIxQ"><w>Será</w><w>importante</w><w>que</w><w>los</w><w>procesemos</w><w>en</w><w>el</w><w>mismo</w><w>orden</w><w>en</w><w>que</w><w>los</w><w>descargamos</w><w>:</w><code rend="inline"><w>resultado_consulta0.html</w></code><w>,</w><code rend="inline"><w>resultado_consulta1.html</w></code><w>,</w><code rend="inline"><w>resultado_consulta2.html</w></code><w>,</w><w>etc.</w><w>Cuando</w><w>lleguemos</w><w>a</w><code rend="inline"><w>resultado_consulta10.html</w></code><w>nos</w><w>encontraremos</w><w>con</w><w>un</w><w>problema</w><pc>.</pc></s><s xml:id="s_FfvETK"><w>Como</w><w>el</w><w>orden</w><w>de</w><w>procesamiento</w><w>de</w><w>archivos</w><w>ocurre</w><w>por</w><w>orden</w><w>alfabético</w><w>(</w><w>pues</w><w>así</w><w>se</w><w>ordenan</w><w>por</w><w>defecto</w><w>en</w><w>los</w><w>directorios</w><w>)</w><w>,</w><code rend="inline"><w>resultado_consulta10.html</w></code><w>será</w><w>procesado</w><w>luego</w><w>de</w><code rend="inline"><w>resultado_consulta1.html</w></code><w>y</w><w>antes</w><w>de</w><code rend="inline"><w>resultado_consulta2.html</w></code><pc>.</pc></s><s xml:id="s_bktbxo"><w>Para</w><w>el</w><w>ejemplo</w><w>de</w><w>esta</w><w>lección</w><w>eso</w><w>no</w><w>será</w><w>un</w><w>problema</w><w>,</w><w>porque</w><w>solo</w><w>tenemos</w><w>dos</w><w>páginas</w><w>de</w><w>consulta</w><w>(</w><w>dado</w><w>que</w><w>hay</w><w>13</w><w>registros</w><w>)</w><pc>.</pc></s><s xml:id="s_Su8T9z"><w>Si</w><w>quisiéramos</w><w>blindar</w><w>nuestro</w><w>código</w><w>para</w><w>búsquedas</w><w>con</w><w>más</w><w>de</w><w>99</w><w>registros</w><w>,</w><w>debemos</w><w>asegurarnos</w><w>de</w><w>que</w><w>el</w><w>orden</w><w>de</w><w>procesamiento</w><w>sea</w><w>el</w><w>correcto</w><pc>.</pc></s><s xml:id="s_YQ5MP6"><w>Una</w><w>forma</w><w>sencilla</w><w>de</w><w>hacerlo</w><w>así</w><w>:</w></s></p><ab><code xml:id="code_descarga-multiples-registros-usando-cadenas-de-consulta_39" corresp="code_descarga-multiples-registros-usando-cadenas-de-consulta_39.txt" rend="block"/></ab><p><s xml:id="s_SuO3Hd"><ref type="footnotemark" target="#es_note_7"/><w>:</w><w>La</w><code rend="inline"><w>r</w></code><w>en</w><w>la</w><w>expresión</w><code rend="inline"><w>r'\W</w><w>'</w></code><w>establece</w><w>que</w><code rend="inline"><w>'\W</w><w>'</w></code><w>es</w><w>una</w><w>``</w><w>cadena</w><w>cruda</w><w>''</w><w>(</w><emph><w>raw</w><w>string</w></emph><w>)</w><w>,</w><w>lo</w><w>que</w><w>facilita</w><w>en</w><w>general</w><w>el</w><w>trabajo</w><w>con</w><w>expresiones</w><w>regulares</w><pc>.</pc></s><s xml:id="s_Fvipvp"><w>Al</w><w>respecto</w><w>véasen</w><ref target="https://docs.python.org/3/library/re.html"><w>https</w><w>:</w><w>//docs.python.org/3/library/re.html</w></ref><w>y</w><ref target="https://blog.devgenius.io/beauty-of-raw-strings-in-python-fa627d674cbf"><w>https</w><w>:</w><w>//blog.devgenius.io/beauty-of-raw-strings-in-python-fa627d674cbf</w></ref></s></p></div></body>
    </text>
</TEI>
