<TEI xmlns="http://www.tei-c.org/ns/1.0" xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="shiny-leaflet-newspaper-map-tutorial" type="original" xml:base="shiny-leaflet-newspaper-map-tutorial/shiny-leaflet-newspaper-map-tutorial/shiny-leaflet-newspaper-map-tutorial.xml">
    <teiHeader>
        <fileDesc>
            <titleStmt>
                <title>Making an Interactive Web Application with R and Shiny</title>
                <author role="original_author">Yann Ryan</author>
                <editor role="reviewers">
                    <persName>Amanda Regan</persName>
                    <persName>Nicole Lemire Garlic</persName>
                </editor>
                <editor role="editors">Alex Wermer-Colan</editor>
            </titleStmt>
            <publicationStmt>
                <distributor>Programming Historian</distributor>
                <idno type="doi">10.46430/phen0105</idno>
                <date type="published">10/19/2022</date>
            </publicationStmt>
            <sourceDesc>
                <p>Born digital, in a markdown format. This lesson is original. Available translations are the following:<ref type="translations" target="#creacion-de-aplicacion-shiny #aplicacao-web-interativa-r-shiny-leaflet"/>
                </p>
            </sourceDesc>
        </fileDesc>
        <profileDesc>
            <abstract>
                <p>This lesson demonstrates how to build an interactive webmap using R and the Shiny library. In the lesson, you will design and implement a simple application, consisting of a slider which allows a user to select a date range, and display a set of corresponding points, on an interactive map.</p>
            </abstract>
            <textClass>
                <keywords>
                    <term xml:lang="en">mapping</term>
                    <term xml:lang="en">website</term>
                    <term xml:lang="en">r</term>
                    <term xml:lang="en">data-visualization</term>
                </keywords>
            </textClass>
        </profileDesc>
    </teiHeader>
    <text xml:lang="en">
        <body><div type="2" n="1"><head><s xml:id="s_Bbdb6J"><w>Introduction</w></s></head><p><s xml:id="s_q54j9U"><w>This</w><w>lesson</w><w>demonstrates</w><w>how</w><w>to</w><w>build</w><w>a</w><w>basic</w><w>interactive</w><w>web</w><w>application</w><w>using</w><w>Shiny</w><pc>.</pc></s><s xml:id="s_eHEleD"><w>Shiny</w><w>is</w><w>a</w><w>library</w><w>(</w><w>a</w><w>set</w><w>of</w><w>additional</w><w>functions</w><w>)</w><w>for</w><w>the</w><w>programming</w><w>language</w><w>R.</w><w>Its</w><w>purpose</w><w>is</w><w>to</w><w>facilitate</w><w>the</w><w>development</w><w>of</w><w>web</w><w>applications</w><w>,</w><w>which</w><w>allow</w><w>a</w><w>user</w><w>to</w><w>interact</w><w>with</w><w>R</w><w>code</w><w>using</w><w>User</w><w>Interface</w><w>(</w><w>UI</w><w>)</w><w>elements</w><w>in</w><w>a</w><w>web</w><w>browser</w><w>,</w><w>such</w><w>as</w><w>sliders</w><w>,</w><w>drop-down</w><w>menus</w><w>,</w><w>and</w><w>so</w><w>forth</w><pc>.</pc></s><s xml:id="s_NTaRKD"><w>In</w><w>the</w><w>lesson</w><w>,</w><w>you</w><w>will</w><w>design</w><w>and</w><w>implement</w><w>a</w><w>simple</w><w>application</w><w>,</w><w>consisting</w><w>of</w><w>a</w><w>slider</w><w>which</w><w>allows</w><w>a</w><w>user</w><w>to</w><w>select</w><w>a</w><w>date</w><w>range</w><w>,</w><w>which</w><w>will</w><w>then</w><w>trigger</w><w>some</w><w>code</w><w>in</w><w>R</w><w>,</w><w>and</w><w>display</w><w>a</w><w>set</w><w>of</w><w>corresponding</w><w>points</w><w>on</w><w>an</w><w>interactive</w><w>map</w><pc>.</pc></s></p></div><div type="2" n="2"><head><s xml:id="s_j7Babi"><w>Lesson</w><w>Aims</w></s></head><p><s xml:id="s_tUdE9c"><w>In</w><w>this</w><w>lesson</w><w>,</w><w>you</w><w>will</w><w>learn</w><w>:</w></s></p><list type="unordered"><item><s xml:id="s_3Hp7zL"><w>How</w><w>to</w><w>create</w><w>a</w><w>basic</w><w>interactive</w><w>Shiny</w><w>application</w><pc>.</pc></s></item><item><s xml:id="s_ODH6Td"><w>The</w><w>key</w><w>layouts</w><w>and</w><w>design</w><w>principles</w><w>of</w><w>the</w><w>Shiny</w><w>UI</w><pc>.</pc></s></item><item><s xml:id="s_SQ9EaW"><w>The</w><w>concept</w><w>and</w><w>practice</w><w>of</w><w>'reactive</w><w>programming</w><w>'</w><w>,</w><w>as</w><w>implemented</w><w>by</w><w>Shiny</w><w>applications</w><pc>.</pc></s><s xml:id="s_yk7Z1c"><w>Specifically</w><w>,</w><w>you</w><w>'ll</w><w>learn</w><w>how</w><w>you</w><w>can</w><w>use</w><w>Shiny</w><w>to</w><w>'listen</w><w>'</w><w>for</w><w>certain</w><w>inputs</w><w>,</w><w>and</w><w>how</w><w>they</w><w>are</w><w>connected</w><w>to</w><w>outputs</w><w>displayed</w><w>in</w><w>your</w><w>app</w><pc>.</pc></s></item></list><p style="alert alert-info"><s xml:id="s_AsQ2uh"><w>Note</w><w>that</w><w>this</w><w>lesson</w><w>does</w><w>n't</w><w>teach</w><w>any</w><w>coding</w><w>in</w><w>R</w><w>,</w><w>other</w><w>than</w><w>what</w><w>'s</w><w>necessary</w><w>to</w><w>create</w><w>the</w><w>web</w><w>application</w><w>,</w><w>nor</w><w>does</w><w>it</w><w>cover</w><w>publishing</w><w>the</w><w>finished</w><w>application</w><w>to</w><w>the</w><w>web</w><pc>.</pc></s><s xml:id="s_U1D4o6"><w>A</w><w>basic</w><w>knowledge</w><w>of</w><w>R</w><w>,</w><w>particularly</w><w>using</w><w>the</w><ref target="/en/lessons/data_wrangling_and_management_in_R"><w>tidyverse</w></ref><w>,</w><w>would</w><w>be</w><w>very</w><w>useful</w><pc>.</pc></s></p><div type="3" n="2.1"><head><s xml:id="s_kfBisX"><w>Graphical</w><w>User</w><w>Interfaces</w><w>and</w><w>the</w><w>Digital</w><w>Humanities</w></s></head><p><s xml:id="s_a5TvC0"><ref target="https://perma.cc/8SYH-TX26"><w>Graphical</w><w>User</w><w>Interfaces</w><w>(</w><w>GUI</w><w>)</w></ref><w>and</w><w>interactive</w><w>elements</w><w>can</w><w>help</w><w>to</w><w>make</w><w>certain</w><w>types</w><w>of</w><w>data-driven</w><w>scholarly</w><w>work</w><w>more</w><w>accessible</w><w>or</w><w>readable</w><pc>.</pc></s><s xml:id="s_E0vUOP"><w>To</w><w>give</w><w>a</w><w>simple</w><w>example</w><w>,</w><w>historians</w><w>working</w><w>with</w><w>large-scale</w><w>data</w><w>might</w><w>want</w><w>to</w><w>demonstrate</w><w>the</w><w>change</w><w>in</w><w>a</w><w>variable</w><w>over</w><w>time</w><pc>.</pc></s><s xml:id="s_tGslLg"><w>An</w><w>interactive</w><w>map</w><w>with</w><w>an</w><w>adjustable</w><w>timeline</w><w>is</w><w>,</w><w>in</w><w>some</w><w>cases</w><w>,</w><w>easier</w><w>to</w><w>read</w><w>and</w><w>allows</w><w>for</w><w>more</w><w>granularity</w><w>than</w><w>a</w><w>series</w><w>of</w><w>static</w><w>maps</w><pc>.</pc></s><s xml:id="s_ianyoP"><w>Allowing</w><w>a</w><w>user</w><w>to</w><w>set</w><w>the</w><w>parameters</w><w>of</w><w>the</w><w>visualisation</w><w>can</w><w>help</w><w>to</w><w>avoid</w><w>some</w><w>of</w><w>the</w><w>bias</w><w>often</w><w>found</w><w>in</w><w>data</w><w>visualisations</w><w>using</w><w>time</w><w>series</w><w>(</w><w>for</w><w>example</w><w>,</w><w>arbitrarily</w><w>drawing</w><w>one</w><w>map</w><w>per</w><w>decade</w><w>)</w><pc>.</pc></s></p><p><s xml:id="s_fQw9ev"><w>Many</w><w>research</w><w>projects</w><w>have</w><w>interactive</w><w>elements</w><w>as</w><w>outputs</w><pc>.</pc></s><s xml:id="s_pnYW5B"><w>Some</w><w>examples</w><w>include</w><w>the</w><ref target="https://tudornetworks.net/"><w>Tudor</w><w>Networks</w><w>of</w><w>Power</w></ref><w>visualisation</w><w>of</w><w>the</w><w>networks</w><w>in</w><w>the</w><w>Tudor</w><w>State</w><w>Papers</w><w>,</w><w>the</w><w>interactive</w><ref target="https://livingwithmachines.ac.uk/press-tracer-visualise-newspaper-lineage/"><w>Press</w><w>Tracer</w></ref><w>,</w><w>and</w><w>(</w><w>to</w><w>give</w><w>an</w><w>example</w><w>using</w><w>Shiny</w><w>)</w><w>,</w><w>the</w><ref target="https://utrecht-university.shinyapps.io/GeoNewsMiner"><w>GeoNewsMiner</w></ref><w>,</w><w>which</w><w>displays</w><w>geocoded</w><w>place-mentions</w><w>in</w><w>a</w><w>corpus</w><w>of</w><w>newspapers</w><pc>.</pc></s><s xml:id="s_tGSnda"><w>Interactive</w><w>applications</w><w>can</w><w>also</w><w>be</w><w>useful</w><w>tools</w><w>for</w><w>archivists</w><w>:</w><w>researchers</w><w>at</w><w>the</w><w>National</w><w>Archives</w><w>UK</w><w>have</w><ref target="https://perma.cc/C6U5-PYHF"><w>created</w><w>an</w><w>app</w><w>using</w><w>Shiny</w></ref><w>which</w><w>assesses</w><w>the</w><w>risk</w><w>level</w><w>in</w><w>a</w><w>digital</w><w>collection</w><w>through</w><w>a</w><w>series</w><w>of</w><w>questions</w><w>answered</w><w>by</w><w>a</w><w>user</w><pc>.</pc></s></p><p><s xml:id="s_aweQRb"><w>Another</w><w>typical</w><w>use-case</w><w>for</w><w>interactive</w><w>applications</w><w>is</w><w>to</w><w>provide</w><w>an</w><w>easier</w><w>way</w><w>to</w><w>explore</w><w>your</w><w>own</w><w>dataset</w><w>,</w><w>without</w><w>ever</w><w>intending</w><w>for</w><w>the</w><w>application</w><w>itself</w><w>to</w><w>be</w><w>made</w><w>publicly</w><w>available</w><pc>.</pc></s><s xml:id="s_5nwMzO"><w>One</w><w>might</w><w>simply</w><w>use</w><w>interactive</w><w>data</w><w>visualizations</w><w>to</w><w>find</w><w>interesting</w><w>patterns</w><w>or</w><w>as</w><w>a</w><w>starting</w><w>point</w><w>for</w><w>further</w><w>research</w><pc>.</pc></s><s xml:id="s_Fsie1m"><w>In</w><w>this</w><w>way</w><w>,</w><w>interactivity</w><w>can</w><w>be</w><w>particularly</w><w>useful</w><w>in</w><w>helping</w><w>explore</w><w>and</w><w>find</w><w>patterns</w><w>within</w><w>large-scale</w><w>datasets</w><pc>.</pc></s></p></div><div type="3" n="2.2"><head><s xml:id="s_QySMd4"><w>Options</w><w>for</w><w>creating</w><w>a</w><w>GUI</w></s></head><p><s xml:id="s_Il7Tx0"><w>There</w><w>are</w><w>a</w><w>number</w><w>of</w><w>ways</w><w>one</w><w>could</w><w>approach</w><w>the</w><w>development</w><w>of</w><w>interactive</w><w>visualisations</w><w>similar</w><w>to</w><w>the</w><w>examples</w><w>above</w><pc>.</pc></s><s xml:id="s_zemibb"><w>One</w><w>is</w><w>to</w><w>learn</w><w>a</w><w>specialist</w><w>tool</w><w>designed</w><w>for</w><w>manipulating</w><w>web</w><w>pages</w><w>in</w><w>response</w><w>to</w><w>data</w><w>inputs</w><w>,</w><w>such</w><w>as</w><w>the</w><ref target="https://perma.cc/BG9S-KPJE"><w>Javascript</w><w>library</w><w>D3</w></ref><pc>.</pc></s><s xml:id="s_LGEYgM"><w>A</w><w>second</w><w>option</w><w>would</w><w>be</w><w>to</w><w>use</w><w>existing</w><w>web-based</w><w>tools</w><w>,</w><w>either</w><w>general</w><w>ones</w><w>such</w><w>as</w><ref target="https://perma.cc/M6Y9-9ZCP"><w>Tableau</w></ref><w>and</w><ref target="https://perma.cc/TAA2-W7WA"><w>Rawgraphs</w></ref><w>,</w><w>or</w><w>ones</w><w>with</w><w>a</w><w>more</w><w>specific</w><w>purpose</w><w>such</w><w>as</w><ref target="https://perma.cc/2W5A-PBJU"><w>Palladio</w></ref><w>or</w><ref target="https://perma.cc/SS9Z-6DAG"><w>Gephi</w></ref><pc>.</pc></s><s xml:id="s_O310nQ"><w>A</w><w>third</w><w>approach</w><w>might</w><w>be</w><w>to</w><w>use</w><ref target="https://perma.cc/CX23-VTAK"><w>Jupyter</w><w>notebooks</w></ref><w>,</w><w>which</w><w>allow</w><w>you</w><w>to</w><w>share</w><w>interactive</w><w>code</w><w>,</w><w>and</w><w>even</w><w>,</w><w>with</w><w>some</w><ref target="https://perma.cc/ESA5-9MEJ"><w>additional</w><w>packages</w></ref><w>,</w><w>to</w><w>create</w><w>a</w><w>user</w><w>interface</w><pc>.</pc></s></p><p><s xml:id="s_9cByrT"><w>This</w><w>lesson</w><w>covers</w><w>a</w><w>fourth</w><w>approach</w><w>:</w><w>making</w><w>interactive</w><w>applications</w><w>with</w><w>a</w><w>GUI</w><w>using</w><w>a</w><w>library</w><w>for</w><w>a</w><w>general-purpose</w><w>programming</w><w>language</w><w>,</w><w>such</w><w>as</w><ref target="https://perma.cc/LXR5-BYC9"><w>Bokeh</w></ref><w>or</w><ref target="https://perma.cc/J7T9-EHTJ"><w>Dash</w></ref><w>for</w><w>Python</w><w>,</w><w>or</w><w>,</w><w>as</w><w>used</w><w>in</w><w>this</w><w>tutorial</w><w>,</w><ref target="https://perma.cc/CK9W-VRKN"><w>Shiny</w></ref><w>for</w><w>R.</w><w>Both</w><w>Python</w><w>and</w><w>R</w><w>are</w><w>open</w><w>source</w><w>,</w><w>widely-used</w><w>,</w><w>versatile</w><w>programming</w><w>languages</w><w>,</w><w>with</w><w>active</w><w>communities</w><w>and</w><w>a</w><w>huge</w><w>range</w><w>of</w><w>third-party</w><w>packages</w><pc>.</pc></s><s xml:id="s_3bVjZA"><w>There</w><w>are</w><w>many</w><w>circumstances</w><w>where</w><w>it</w><w>makes</w><w>sense</w><w>to</w><w>use</w><w>these</w><w>as</w><w>the</w><w>basis</w><w>for</w><w>interactive</w><w>applications</w><pc>.</pc></s><s xml:id="s_TamNAy"><w>In</w><w>essence</w><w>,</w><w>these</w><w>packages</w><w>act</w><w>as</w><w>interactive</w><w>interfaces</w><w>to</w><w>the</w><w>programming</w><w>language</w><w>,</w><w>allowing</w><w>for</w><w>the</w><w>creation</w><w>of</w><w>sliders</w><w>,</w><w>selectors</w><w>,</w><w>and</w><w>so</w><w>forth</w><w>,</w><w>which</w><w>can</w><w>then</w><w>be</w><w>used</w><w>as</w><w>inputs</w><w>to</w><w>dynamically</w><w>change</w><w>bits</w><w>of</w><w>code</w><pc>.</pc></s><s xml:id="s_H5c76I"><w>In</w><w>most</w><w>cases</w><w>,</w><w>they</w><w>require</w><w>no</w><w>technical</w><w>expertise</w><w>from</w><w>the</w><w>end-user</w><pc>.</pc></s><s xml:id="s_DDlU3Z"><w>As</w><w>they</w><w>are</w><w>designed</w><w>to</w><w>work</w><w>in</w><w>a</w><w>browser</w><w>,</w><w>they</w><w>work</w><w>on</w><w>any</w><w>platform</w><w>,</w><w>and</w><w>are</w><w>easy</w><w>to</w><w>share</w><pc>.</pc></s></p></div><div type="3" n="2.3"><head><s xml:id="s_qioHFU"><w>Shiny</w><w>and</w><w>Reactive</w><w>Programming</w></s></head><p><s xml:id="s_xGfDsS"><w>Shiny</w><w>is</w><w>based</w><w>around</w><w>a</w><w>concept</w><w>called</w><ref target="https://perma.cc/SGQ8-BU48"><emph><w>reactivity</w></emph></ref><pc>.</pc></s><s xml:id="s_UmjOnD"><w>Usually</w><w>,</w><w>when</w><w>coding</w><w>,</w><w>we</w><w>set</w><w>a</w><w>variable</w><w>to</w><w>a</w><w>specific</w><w>value</w><w>,</w><w>say</w><code rend="inline"><w>x</w><w>=</w><w>5</w></code><pc>.</pc></s><s xml:id="s_GSbuUh"><w>In</w><emph><w>reactive</w><w>programming</w></emph><w>,</w><w>the</w><w>variable</w><w>is</w><w>dependent</w><w>on</w><w>a</w><w>changing</w><w>input</w><w>,</w><w>usually</w><w>set</w><w>by</w><w>a</w><w>user</w><w>(</w><w>from</w><w>a</w><w>text</w><w>slider</w><w>or</w><w>drop</w><w>down</w><w>list</w><w>,</w><w>for</w><w>example</w><w>)</w><pc>.</pc></s><s xml:id="s_z01Ecj"><w>The</w><w>code</w><w>'listens</w><w>'</w><w>for</w><w>changes</w><w>to</w><w>these</w><w>reactive</w><w>variables</w><w>and</w><w>every</w><w>time</w><w>these</w><w>special</w><w>variables</w><w>change</w><w>,</w><w>any</w><w>output</w><w>they</w><w>are</w><w>used</w><w>to</w><w>generate</w><w>automatically</w><w>updates</w><pc>.</pc></s></p><p><s xml:id="s_nyJJ6s"><w>However</w><w>,</w><w>this</w><w>updating</w><w>only</w><w>happens</w><w>within</w><pc>.</pc></s><hi rend="bold"><s xml:id="s_9VKEvw"><w>reactive</w><w>contexts</w></s></hi><s xml:id="s_5M1qK8"><w>Shiny</w><w>has</w><w>three</w><w>important</w><w>reactive</w><w>contexts</w><w>:</w><code rend="inline"><w>render</w><w>*</w></code><w>functions</w><w>,</w><w>which</w><w>are</w><w>used</w><w>to</w><w>create</w><w>R</w><w>objects</w><w>and</w><w>display</w><w>them</w><w>in</w><w>the</w><w>app</w><w>,</w><code rend="inline"><w>observe</w><w>(</w><w>{</w><w>}</w><w>)</w></code><w>,</w><w>and</w><code rend="inline"><w>reactive</w><w>(</w><w>{</w><w>}</w><w>)</w></code><pc>.</pc></s><s xml:id="s_nDTVIX"><w>In</w><w>this</w><w>tutorial</w><w>you</w><w>'ll</w><w>use</w><w>reactivity</w><w>to</w><w>create</w><w>a</w><w>summarised</w><w>dataframe</w><w>of</w><w>newspaper</w><w>titles</w><w>and</w><w>their</w><w>dates</w><w>,</w><w>which</w><w>updates</w><w>dynamically</w><w>based</w><w>on</w><w>a</w><w>user</w><w>input</w><w>of</w><w>dates</w><pc>.</pc></s><s xml:id="s_rS3I5S"><w>Elsewhere</w><w>in</w><w>your</w><w>app</w><w>,</w><w>you</w><w>'ll</w><w>use</w><w>a</w><code rend="inline"><w>render</w><w>*</w></code><w>function</w><w>to</w><w>display</w><w>a</w><w>map</w><w>which</w><w>will</w><w>listen</w><w>for</w><w>changes</w><w>to</w><w>this</w><w>reactive</w><w>dataframe</w><w>and</w><w>update</w><w>itself</w><w>when</w><w>any</w><w>is</w><w>found</w><pc>.</pc></s></p></div><div type="3" n="2.4"><head><s xml:id="s_tYamoR"><w>Advantages</w><w>and</w><w>Disadvantages</w><w>of</w><w>Using</w><w>Shiny</w></s></head><p><s xml:id="s_NQebDH"><w>The</w><w>advantage</w><w>to</w><w>this</w><w>approach</w><w>is</w><w>that</w><w>creating</w><w>Shiny</w><w>applications</w><w>is</w><emph><w>relatively</w></emph><w>simple</w><w>if</w><w>you</w><w>already</w><w>know</w><w>R</w><w>,</w><w>and</w><w>R</w><w>'s</w><w>entire</w><w>range</w><w>of</w><w>libraries</w><w>and</w><w>features</w><w>can</w><w>be</w><w>harnessed</w><w>by</w><w>Shiny</w><pc>.</pc></s><s xml:id="s_XI3ngz"><w>In</w><w>some</w><w>circumstances</w><w>,</w><w>this</w><w>might</w><w>be</w><w>preferable</w><w>to</w><w>learning</w><w>a</w><w>new</w><w>language</w><w>from</w><w>scratch</w><pc>.</pc></s><s xml:id="s_n8mpuQ"><w>If</w><w>you</w><w>have</w><w>experience</w><w>with</w><w>R</w><w>and</w><w>just</w><w>a</w><w>little</w><w>knowledge</w><w>of</w><w>Shiny</w><w>,</w><w>you</w><w>can</w><w>create</w><w>very</w><w>complex</w><w>and</w><w>useful</w><w>applications</w><w>,</w><w>covering</w><w>everything</w><w>from</w><w>maps</w><w>to</w><w>network</w><w>analysis</w><w>,</w><w>from</w><ref target="https://perma.cc/YAX3-RZZP"><w>machine</w><w>learning</w><w>models</w></ref><w>to</w><w>full</w><w>dashboards</w><w>with</w><w>lots</w><w>of</w><w>functionality</w><pc>.</pc></s><s xml:id="s_12wGMD"><w>If</w><w>you</w><w>can</w><w>program</w><w>it</w><w>with</w><w>R</w><w>,</w><w>you</w><w>can</w><w>probably</w><w>make</w><w>it</w><w>interactive</w><w>with</w><w>Shiny</w><pc>.</pc></s><s xml:id="s_QP4kfb"><w>The</w><w>process</w><w>of</w><w>creating</w><w>a</w><w>Shiny</w><w>UI</w><w>is</w><w>very</w><w>flexible</w><w>and</w><w>easy</w><w>to</w><w>customise</w><w>,</w><w>meaning</w><w>it</w><w>is</w><w>straightforward</w><w>to</w><w>make</w><w>an</w><w>application</w><w>in</w><w>a</w><w>format</w><w>that</w><w>could</w><w>be</w><w>embedded</w><w>into</w><w>a</w><w>project</w><w>website</w><w>using</w><w>iframes</w><w>:</w><w>see</w><w>the</w><ref target="https://www.mappingthegayguides.org/map/"><emph><w>Mapping</w><w>the</w><w>Gay</w><w>Guides</w></emph></ref><w>project</w><w>for</w><w>one</w><w>example</w><pc>.</pc></s></p><p><s xml:id="s_Y5YuhC"><w>There</w><w>are</w><w>some</w><w>drawbacks</w><w>worth</w><w>considering</w><pc>.</pc></s><s xml:id="s_Vp5yKy"><w>For</w><w>those</w><w>who</w><w>have</w><w>no</w><w>intention</w><w>of</w><w>using</w><w>a</w><w>language</w><w>like</w><w>R</w><w>in</w><w>other</w><w>aspects</w><w>of</w><w>their</w><w>work</w><w>,</w><w>learning</w><w>it</w><w>just</w><w>to</w><w>produce</w><w>Shiny</w><w>apps</w><w>may</w><w>be</w><w>overkill</w><pc>.</pc></s><s xml:id="s_87BEDS"><w>Shiny</w><w>is</w><w>open</w><w>source</w><w>and</w><w>free</w><w>to</w><w>use</w><w>,</w><w>but</w><w>by</w><w>far</w><w>the</w><w>easiest</w><w>way</w><w>to</w><w>publish</w><w>your</w><w>finished</w><w>application</w><w>to</w><w>the</w><w>web</w><w>is</w><w>using</w><w>a</w><w>service</w><w>called</w><w>shinyapps.io</w><pc>.</pc></s><s xml:id="s_EfjI5e"><w>Shinyapps.io</w><w>is</w><w>a</w><w>commercial</w><w>product</w><w>with</w><w>a</w><w>free</w><w>tier</w><w>giving</w><w>a</w><w>limited</w><w>number</w><w>of</w><w>hours</w><w>of</w><w>use</w><w>(</w><w>25</w><w>)</w><w>,</w><w>and</w><w>after</w><w>that</w><w>you</w><w>'ll</w><w>need</w><w>to</w><w>pay</w><w>a</w><w>monthly</w><w>fee</w><pc>.</pc></s><s xml:id="s_R6rCgW"><w>You</w><emph><w>can</w></emph><w>run</w><w>Shiny</w><w>on</w><w>your</w><w>own</w><w>server</w><w>(</w><w>or</w><w>through</w><w>something</w><w>like</w><ref target="https://perma.cc/DEA2-HCC7"><w>Amazon</w><w>Web</w><w>Services</w></ref><w>)</w><w>,</w><w>but</w><w>it</w><w>'s</w><w>quite</w><w>an</w><w>involved</w><w>process</w><w>and</w><w>requires</w><w>some</w><w>pretty</w><w>advanced</w><w>knowledge</w><w>of</w><w>configuring</w><w>web</w><w>servers</w><pc>.</pc></s><s xml:id="s_mRlTLx"><w>You</w><w>should</w><w>bear</w><w>this</w><w>in</w><w>mind</w><w>if</w><w>you</w><w>are</w><w>thinking</w><w>about</w><w>using</w><w>Shiny</w><w>for</w><w>a</w><w>public-facing</w><w>output</w><w>,</w><w>particularly</w><w>if</w><w>you</w><w>think</w><w>it</w><w>might</w><w>have</w><w>lots</w><w>of</w><w>traffic</w><w>and</w><w>heavy</w><w>use</w><pc>.</pc></s><s xml:id="s_sTx85Q"><w>As</w><w>an</w><w>alternative</w><w>,</w><w>some</w><w>of</w><w>the</w><w>functionality</w><w>of</w><w>Shiny</w><w>can</w><w>be</w><w>replicated</w><w>in</w><w>a</w><w>simple</w><w>HTML</w><w>page</w><w>using</w><w>the</w><w>R</w><w>package</w><ref target="https://rstudio.github.io/crosstalk/index.html"><w>crosstalk</w><pc>.</pc></ref></s></p></div></div><div type="2" n="3"><head><s xml:id="s_XE5N86"><w>Historical</w><w>Background</w><w>and</w><w>Data</w></s></head><p><s xml:id="s_QFWFMc"><w>The</w><w>national</w><w>library</w><w>of</w><w>the</w><w>United</w><w>Kingdom</w><w>,</w><w>the</w><ref target="https://perma.cc/C7VP-VBTS"><w>British</w><w>Library</w></ref><w>,</w><w>holds</w><w>by</w><w>far</w><w>the</w><w>largest</w><w>collection</w><w>of</w><w>British</w><w>and</w><w>Irish</w><w>newspapers</w><w>in</w><w>the</w><w>world</w><pc>.</pc></s><s xml:id="s_fFGTj5"><w>The</w><w>earliest</w><w>serial</w><w>news</w><w>publication</w><w>in</w><w>its</w><w>collection</w><w>is</w><w>from</w><w>1621</w><w>,</w><w>and</w><w>it</w><w>continues</w><w>to</w><w>collect</w><w>to</w><w>this</w><w>day</w><pc>.</pc></s><s xml:id="s_Z10Eo2"><w>The</w><w>Library</w><w>'s</w><w>catalogue</w><w>holds</w><w>a</w><w>wealth</w><w>of</w><w>information</w><w>on</w><w>its</w><w>newspaper</w><w>holdings</w><w>,</w><w>which</w><w>has</w><w>been</w><w>made</w><w>publically</w><w>available</w><w>in</w><w>the</w><w>form</w><w>of</w><w>structured</w><w>metadata</w><pc>.</pc></s><s xml:id="s_FaNLEb"><w>This</w><w>metadata</w><w>is</w><w>essentially</w><w>a</w><w>list</w><w>of</w><w>newspaper</w><w>titles</w><w>,</w><w>containing</w><w>the</w><w>publication</w><w>dates</w><w>and</w><w>places</w><w>,</w><w>title</w><w>changes</w><w>and</w><w>merges</w><w>,</w><w>and</w><w>information</w><w>on</w><w>microfilm</w><w>surrogates</w><w>and</w><w>digital</w><w>holdings</w><pc>.</pc></s></p><p><s xml:id="s_G3ylVI"><w>This</w><w>structured</w><w>metadata</w><w>is</w><w>the</w><w>resource</w><w>which</w><w>you</w><w>will</w><w>use</w><w>in</w><w>this</w><w>lesson</w><pc>.</pc></s><s xml:id="s_wzxg4h"><w>Tracing</w><w>the</w><w>metadata</w><w>of</w><w>this</w><w>collection</w><w>is</w><w>a</w><w>way</w><w>for</w><w>historians</w><w>to</w><w>chart</w><w>the</w><w>growth</w><w>and</w><w>change</w><w>in</w><w>the</w><w>press</w><w>over</w><w>time</w><w>and</w><w>through</w><w>different</w><w>regions</w><pc>.</pc></s><s xml:id="s_Vkq3st"><w>Furthermore</w><w>,</w><w>it</w><w>may</w><w>help</w><w>us</w><w>to</w><w>understand</w><w>more</w><w>about</w><w>the</w><w>Library</w><w>'s</w><w>collection</w><w>itself</w><w>,</w><w>including</w><w>its</w><w>gaps</w><w>,</w><w>biases</w><w>,</w><w>digitisation</w><w>strategies</w><w>and</w><w>blind</w><w>spots</w><pc>.</pc></s><s xml:id="s_EmyYW5"><w>The</w><w>data</w><w>might</w><w>even</w><w>indicate</w><w>something</w><w>about</w><w>the</w><w>changing</w><w>demographics</w><w>and</w><w>industrialisation</w><w>of</w><w>Britain</w><w>,</w><w>as</w><w>well</w><w>as</w><w>developments</w><w>in</w><w>communication</w><w>technologies</w><w>(</w><w>trains</w><w>and</w><w>then</w><w>telegraphs</w><w>made</w><w>it</w><w>possible</w><w>to</w><w>have</w><w>regional</w><w>and</w><w>local</w><w>presses</w><w>,</w><w>for</w><w>instance</w><w>)</w><pc>.</pc></s></p><p><s xml:id="s_TDgU5m"><w>The</w><w>newspaper</w><w>industry</w><w>(</w><w>and</w><w>therefore</w><w>the</w><w>collection</w><w>)</w><w>grew</w><w>from</w><w>a</w><w>tiny</w><w>number</w><w>of</w><w>titles</w><w>published</w><w>in</w><w>London</w><w>in</w><w>the</w><w>early</w><w>seventeenth</w><w>century</w><w>to</w><w>a</w><w>flourishing</w><w>weekly</w><w>and</w><w>daily</w><w>provincial</w><w>press</w><w>in</w><w>the</w><w>eighteenth</w><w>,</w><w>and</w><w>then</w><w>a</w><w>very</w><w>large</w><w>local</w><w>press</w><w>in</w><w>the</w><w>nineteenth</w><w>and</w><w>twentieth</w><w>centuries</w><pc>.</pc></s><s xml:id="s_30aDaK"><w>For</w><w>much</w><w>of</w><w>the</w><w>eighteenth</w><w>century</w><w>,</w><w>a</w><w>tax</w><w>was</w><w>added</w><w>to</w><w>every</w><w>copy</w><w>of</w><w>a</w><w>newspaper</w><w>making</w><w>them</w><w>expensive</w><w>and</w><w>only</w><w>available</w><w>to</w><w>the</w><w>elite</w><pc>.</pc></s><s xml:id="s_7OLfWO"><w>In</w><w>the</w><w>following</w><w>century</w><w>this</w><w>was</w><w>repealed</w><w>,</w><w>and</w><w>the</w><w>press</w><w>began</w><w>—albeit</w><w>slowly—</w><w>to</w><w>reflect</w><w>the</w><w>aspirations</w><w>and</w><w>diversity</w><w>of</w><w>the</w><w>country</w><w>and</w><w>its</w><w>various</w><w>regions</w><w>more</w><w>fully</w><pc>.</pc></s><s xml:id="s_UEE0SI"><w>The</w><w>application</w><w>you</w><w>'ll</w><w>create</w><w>in</w><w>this</w><w>tutorial</w><w>—an</w><w>interactive</w><w>map</w><w>of</w><w>published</w><w>titles</w><w>,</w><w>controlled</w><w>by</w><w>a</w><w>user-selected</w><w>time</w><w>slider—</w><w>is</w><w>a</w><w>useful</w><w>way</w><w>to</w><w>visualise</w><w>these</w><w>changes</w><pc>.</pc></s></p><div type="3" n="3.1"><head><s xml:id="s_7y7Jbc"><w>Getting</w><w>Hold</w><w>of</w><w>the</w><w>Data</w></s></head><p><s xml:id="s_1b1KSk"><w>For</w><w>this</w><w>tutorial</w><w>you</w><w>will</w><w>need</w><w>to</w><w>download</w><w>two</w><w>files</w><w>:</w><w>first</w><w>,</w><w>a</w><w>title-level</w><w>list</w><w>of</w><w>British</w><w>and</w><w>Irish</w><w>newspapers</w><w>(</w><w>which</w><w>will</w><w>be</w><w>referred</w><w>to</w><w>as</w><w>the</w><w>'title</w><w>list</w><w>'</w><w>)</w><w>and</w><w>second</w><w>,</w><w>a</w><w>helper</w><w>dataset</w><w>of</w><w>place</w><w>names</w><w>and</w><w>coordinates</w><w>(</w><w>which</w><w>we</w><w>'ll</w><w>refer</w><w>to</w><w>as</w><w>the</w><w>'coordinates</w><w>list</w><w>'</w><w>)</w><w>for</w><w>matching</w><w>the</w><w>places</w><w>found</w><w>in</w><w>the</w><w>title</w><w>list</w><w>to</w><w>locations</w><w>on</w><w>a</w><w>map</w><pc>.</pc></s></p><p><s xml:id="s_CCJx4a"><w>1</w><pc>.</pc></s><s xml:id="s_Aup87z"><w>To</w><w>get</w><w>the</w><w>title</w><w>list</w><w>,</w><w>visit</w><w>the</w><ref target="https://bl.iro.bl.uk/concern/datasets/7da47fac-a759-49e2-a95a-26d49004eba8?locale=en"><w>British</w><w>Library</w><w>repository</w></ref><pc>.</pc></s><s xml:id="s_1QaaVH"><w>The</w><w>list</w><w>is</w><w>available</w><w>on</w><w>the</w><w>repository</w><w>in</w><w>two</w><w>formats</w><w>:</w><w>either</w><w>a</w><w>.zip</w><w>file</w><w>containing</w><w>a</w><w>.csv</w><w>and</w><w>a</w><w>readme</w><w>,</w><w>or</w><w>as</w><w>an</w><w>Excel</w><w>spreadsheet</w><pc>.</pc></s><s xml:id="s_HacA5g"><w>For</w><w>this</w><w>lesson</w><w>,</w><w>we</w><w>'ll</w><w>work</w><w>with</w><w>the</w><w>.csv</w><w>format</w><pc>.</pc></s><s xml:id="s_Z7P6V7"><w>Download</w><w>the</w><w>.zip</w><w>file</w><w>,</w><w>and</w><w>unzip</w><w>it</w><pc>.</pc></s><s xml:id="s_xpU26N"><w>Alternatively</w><w>,</w><w>you</w><w>can</w><w>download</w><w>a</w><w>copy</w><w>of</w><w>the</w><w>dataset</w><w>used</w><w>in</w><w>this</w><w>tutorial</w><w>on</w><w>Github</w><pc>.</pc></s><s xml:id="s_raVMdE"><w>To</w><w>download</w><w>this</w><w>file</w><w>,</w><w>just</w><w>view</w><w>the</w><ref target="https://raw.githubusercontent.com/programminghistorian/ph-submissions/gh-pages/assets/shiny-leaflet-newspaper-map-tutorial-data/BritishAndIrishNewspapersTitleList_20191118.csv"><w>raw</w></ref><w>version</w><w>and</w><w>save</w><w>the</w><w>page</w><w>locally</w><pc>.</pc></s></p><p><s xml:id="s_zQduBQ"><w>2</w><pc>.</pc></s><s xml:id="s_5B7v0v"><w>The</w><w>coordinates</w><w>list</w><w>is</w><w>also</w><w>available</w><w>on</w><w>Github</w><pc>.</pc></s><s xml:id="s_rN3iF5"><w>To</w><w>download</w><w>this</w><w>file</w><w>of</w><w>coordinates</w><w>,</w><w>just</w><w>view</w><w>the</w><ref target="https://raw.githubusercontent.com/programminghistorian/ph-submissions/gh-pages/assets/shiny-leaflet-newspaper-map-tutorial-data/newspaper_coordinates.csv"><w>raw</w></ref><w>version</w><w>and</w><w>likewise</w><w>save</w><w>the</w><w>page</w><w>locally</w><pc>.</pc></s></p></div><div type="3" n="3.2"><head><s xml:id="s_fcx7H6"><w>Understanding</w><w>the</w><w>Title</w><w>List</w></s></head><p><s xml:id="s_08FZfM"><w>Once</w><w>this</w><w>is</w><w>done</w><w>,</w><w>take</w><w>a</w><w>look</w><w>at</w><w>the</w><w>title</w><w>list</w><w>dataset</w><w>(</w><w>you</w><w>can</w><w>open</w><w>it</w><w>in</w><w>R</w><w>,</w><w>a</w><w>spreadsheet</w><w>program</w><w>or</w><w>a</w><w>text</w><w>editor</w><w>)</w><pc>.</pc></s><s xml:id="s_lJB7XM"><w>The</w><w>title</w><w>list</w><w>has</w><w>been</w><w>produced</w><w>by</w><w>the</w><w>British</w><w>Library</w><w>and</w><w>is</w><w>published</w><w>on</w><w>their</w><w>institutional</w><w>repository</w><pc>.</pc></s><s xml:id="s_v24vMD"><w>It</w><w>contains</w><w>metadata</w><w>taken</w><w>from</w><w>the</w><w>Library</w><w>'s</w><w>catalogue</w><w>of</w><w>every</w><w>newspaper</w><w>published</w><w>in</w><w>Britain</w><w>and</w><w>Ireland</w><w>up</w><w>until</w><w>the</w><w>year</w><w>2019</w><w>,</w><w>a</w><w>total</w><w>of</w><w>about</w><w>24,000</w><w>titles</w><pc>.</pc></s><s xml:id="s_QnbjEt"><w>There</w><w>is</w><w>more</w><w>information</w><w>available</w><w>in</w><w>a</w><w>published</w><w>data</w><w>paper</w><pc>.</pc></s><ref type="footnotemark" target="#en_note_1"/></p><p><s xml:id="s_11Jr0M"><w>The</w><w>.csv</w><w>file</w><w>(</w><code rend="inline"><w>BritishAndIrishNewspapersTitleList_20191118.csv</w></code><w>)</w><w>contains</w><w>a</w><w>number</w><w>of</w><w>fields</w><w>for</w><w>each</w><w>title</w><w>,</w><w>including</w><w>the</w><w>name</w><w>of</w><w>the</w><w>publication</w><w>,</w><w>subsequent</w><w>and</w><w>previous</w><w>title</w><w>names</w><w>,</w><w>several</w><w>fields</w><w>for</w><w>geographic</w><w>coverage</w><w>,</w><w>the</w><w>first</w><w>and</w><w>last</w><w>dates</w><w>held</w><w>,</w><w>and</w><w>some</w><w>other</w><w>information</w><pc>.</pc></s></p><p><s xml:id="s_7BbVcG"><w>It</w><w>'s</w><w>worth</w><w>reading</w><w>the</w><code rend="inline"><w>README</w></code><w>file</w><w>which</w><w>comes</w><w>along</w><w>with</w><w>the</w><w>.zip</w><w>file</w><pc>.</pc></s><s xml:id="s_EDVO80"><w>This</w><w>explains</w><w>that</w><w>there</w><w>are</w><w>several</w><w>fields</w><w>provided</w><w>for</w><w>geographic</w><w>coverage</w><w>,</w><w>because</w><w>the</w><w>records</w><w>have</w><w>been</w><w>catalogued</w><w>over</w><w>a</w><w>long</w><w>period</w><w>of</w><w>time</w><w>,</w><w>during</w><w>which</w><w>cataloguing</w><w>standards</w><w>and</w><w>conventions</w><w>have</w><w>changed</w><pc>.</pc></s><s xml:id="s_bTllCT"><w>The</w><w>purpose</w><w>here</w><w>is</w><w>to</w><w>map</w><w>the</w><w>newspapers</w><w>at</w><w>a</w><w>geographic</w><w>point</w><w>level</w><w>,</w><w>i.e.</w><w>,</w><w>at</w><w>the</w><w>level</w><w>of</w><w>village</w><w>,</w><w>town</w><w>,</w><w>or</w><w>city</w><w>,</w><w>rather</w><w>than</w><w>county</w><w>or</w><w>country</w><pc>.</pc></s><s xml:id="s_4miLrV"><w>There</w><w>are</w><w>two</w><w>fields</w><w>where</w><w>we</w><w>might</w><w>find</w><w>the</w><w>relevant</w><w>geographic</w><w>points</w><w>to</w><w>map</w><w>:</w><code rend="inline"><w>place_of_publication</w></code><w>and</w><code rend="inline"><w>coverage_city</w></code><pc>.</pc></s><s xml:id="s_UP81NZ"><w>These</w><w>seem</w><w>like</w><w>different</w><w>things</w><w>(</w><w>a</w><w>newspaper</w><w>could</w><w>be</w><w>published</w><w>in</w><w>one</w><w>place</w><w>but</w><w>have</w><w>geographic</w><w>coverage</w><w>over</w><w>another</w><w>,</w><w>perhaps</w><w>if</w><w>the</w><w>former</w><w>did</w><w>n't</w><w>have</w><w>a</w><w>suitable</w><w>newspaper</w><w>press</w><w>)</w><w>,</w><w>but</w><w>that</w><w>'s</w><w>not</w><w>how</w><w>they</w><w>'ve</w><w>been</w><w>used</w><w>by</w><w>cataloguers</w><w>in</w><w>practice</w><pc>.</pc></s><s xml:id="s_T9CfHg"><w>The</w><code rend="inline"><w>README</w></code><w>file</w><w>says</w><w>that</w><w>the</w><w>latter</w><w>(</w><code rend="inline"><w>coverage_city</w></code><w>)</w><w>contains</w><w>more</w><w>complete</w><w>data</w><w>,</w><w>so</w><w>that</w><w>is</w><w>the</w><w>one</w><w>you</w><w>'ll</w><w>use</w><w>to</w><w>map</w><w>the</w><w>titles</w><pc>.</pc></s></p><p><s xml:id="s_uJTukf"><w>The</w><w>other</w><w>two</w><w>fields</w><w>of</w><w>interest</w><w>are</w><w>the</w><w>first</w><w>and</w><w>last</w><w>dates</w><w>held</w><pc>.</pc></s><s xml:id="s_9EapLo"><w>The</w><w>readme</w><w>also</w><w>tells</w><w>us</w><w>that</w><w>the</w><w>library</w><w>does</w><w>not</w><w>have</w><w>complete</w><w>coverage</w><w>,</w><w>though</w><w>it</w><w>has</w><w>most</w><w>titles</w><w>from</w><w>the</w><w>1840s</w><w>onwards</w><w>,</w><w>and</w><w>effectively</w><w>all</w><w>titles</w><w>from</w><w>1869</w><w>when</w><w>Legal</w><w>Deposit</w><ref type="footnotemark" target="#en_note_2"/><w>was</w><w>introduced</w><pc>.</pc></s><s xml:id="s_40zAYt"><w>This</w><w>means</w><w>that</w><w>the</w><w>collection</w><w>does</w><w>not</w><w>necessarily</w><w>have</w><w>all</w><w>issues</w><w>of</w><w>a</w><w>newspaper</w><emph><w>between</w></emph><w>the</w><w>first</w><w>and</w><w>last</w><w>dates</w><w>held</w><w>by</w><w>the</w><w>Library</w><pc>.</pc></s></p><p><s xml:id="s_eU229J"><w>In</w><w>this</w><w>tutorial</w><w>,</w><w>you</w><w>'ll</w><w>create</w><w>an</w><w>interactive</w><w>slider</w><w>which</w><w>will</w><w>allow</w><w>a</w><w>user</w><w>to</w><w>choose</w><w>a</w><w>start</w><w>and</w><w>an</w><w>end</w><w>date</w><pc>.</pc></s><s xml:id="s_xGrCSQ"><w>This</w><w>could</w><w>be</w><w>used</w><w>to</w><w>filter</w><w>the</w><w>data</w><w>in</w><w>one</w><w>of</w><w>two</w><w>ways</w><w>:</w><w>either</w><w>to</w><w>show</w><w>every</w><w>newspaper</w><w>published</w><emph><w>at</w><w>some</w><w>point</w></emph><w>between</w><w>those</w><w>two</w><w>dates</w><w>,</w><w>or</w><w>to</w><w>map</w><w>every</w><w>newspaper</w><emph><w>first</w></emph><w>published</w><w>between</w><w>two</w><w>given</w><w>dates</w><pc>.</pc></s><s xml:id="s_NcEitW"><w>Because</w><w>the</w><w>former</w><w>scenario</w><w>it</w><w>would</w><w>over-represent</w><w>the</w><w>Library</w><w>'s</w><w>collections</w><w>,</w><w>to</w><w>keep</w><w>things</w><w>simple</w><w>,</w><w>in</w><w>this</w><w>tutorial</w><w>you</w><w>'ll</w><w>work</w><w>on</w><w>the</w><w>latter</w><w>visualization</w><w>of</w><w>every</w><w>newspaper</w><w>published</w><w>within</w><w>a</w><w>certain</w><w>time</w><w>frame</w><pc>.</pc></s></p></div></div><div type="2" n="4"><head><s xml:id="s_dDWvAs"><w>Setting</w><w>up</w><w>your</w><w>Coding</w><w>Environment</w><w>and</w><w>Creating</w><w>the</w><w>Shiny</w><w>Application</w></s></head><p><s xml:id="s_I7jmxR"><w>To</w><w>demonstrate</w><w>how</w><w>Shiny</w><w>works</w><w>,</w><w>in</w><w>this</w><w>tutorial</w><w>you</w><w>will</w><w>take</w><w>this</w><w>dataset</w><w>of</w><w>newspaper</w><w>titles</w><w>,</w><w>places</w><w>of</w><w>publication</w><w>,</w><w>and</w><w>dates</w><w>,</w><w>and</w><w>turn</w><w>it</w><w>into</w><w>a</w><w>basic</w><w>interactive</w><w>application</w><pc>.</pc></s><s xml:id="s_WKR27L"><w>In</w><w>total</w><w>there</w><w>are</w><w>five</w><w>short</w><w>coding</w><w>tasks</w><w>your</w><w>application</w><w>will</w><w>need</w><w>to</w><w>carry</w><w>out</w><w>:</w></s></p><list type="unordered"><item><s xml:id="s_zaYGoy"><w>Load</w><w>the</w><w>two</w><w>necessary</w><w>datasets</w></s></item><item><s xml:id="s_JDl8LC"><w>Create</w><w>a</w><w>user</w><w>interface</w></s></item><item><s xml:id="s_6afPYk"><w>Create</w><w>a</w><w>'reactive</w><w>'</w><w>dataset</w><w>of</w><w>places</w><w>,</w><w>a</w><w>count</w><w>of</w><w>their</w><w>appearances</w><w>,</w><w>and</w><w>their</w><w>geographic</w><w>coordinates</w></s></item><item><s xml:id="s_cVPFqp"><w>Turn</w><w>this</w><w>'reactive</w><w>'</w><w>dataset</w><w>into</w><w>a</w><w>special</w><w>geographic</w><w>dataset</w><w>,</w><w>called</w><w>a</w><w>simple</w><w>features</w><w>object</w></s></item><item><s xml:id="s_MDLiUr"><w>Create</w><w>an</w><w>interactive</w><w>map</w><w>using</w><w>the</w><w>R</w><w>library</w><w>,</w><ref target="https://perma.cc/RW6M-ZCG2"><w>Leaflet</w></ref></s></item></list><p><s xml:id="s_tFcDvg"><w>First</w><w>,</w><w>however</w><w>,</w><w>you</w><w>need</w><w>to</w><w>set</w><w>up</w><w>the</w><w>correct</w><w>programming</w><w>environment</w><w>and</w><w>create</w><w>a</w><w>new</w><w>Shiny</w><w>application</w><pc>.</pc></s></p><div type="3" n="4.1"><head><s xml:id="s_a2EIJE"><w>Install</w><w>R</w><w>and</w><w>Rstudio</w></s></head><p><s xml:id="s_jmN9oY"><w>To</w><w>get</w><w>started</w><w>with</w><w>this</w><w>tutorial</w><w>,</w><w>you</w><w>should</w><w>install</w><w>the</w><w>latest</w><w>versions</w><w>of</w><ref target="https://cran.rstudio.com/"><w>R</w></ref><w>and</w><ref target="https://www.rstudio.com/products/rstudio/download/"><w>Rstudio</w></ref><w>on</w><w>your</w><w>local</w><w>machine</w><pc>.</pc></s><s xml:id="s_hMIBnB"><w>The</w><w>R</w><w>programming</w><w>language</w><w>has</w><w>a</w><w>very</w><w>popular</w><w>IDE</w><w>(</w><w>Integrated</w><w>Development</w><w>Environment</w><w>)</w><w>called</w><w>RStudio</w><w>,</w><w>which</w><w>is</w><w>often</w><w>used</w><w>alongside</w><w>R</w><w>,</w><w>as</w><w>it</w><w>provides</w><w>a</w><w>large</w><w>set</w><w>of</w><w>features</w><w>to</w><w>make</w><w>coding</w><w>in</w><w>the</w><w>language</w><w>more</w><w>convenient</w><pc>.</pc></s><s xml:id="s_TrrkvC"><w>We</w><w>'ll</w><w>use</w><w>RStudio</w><w>throughout</w><w>the</w><w>lesson</w><pc>.</pc></s></p><p><s xml:id="s_QCzzwC"><w>Previous</w><emph><w>Programming</w><w>Historian</w></emph><w>lessons</w><w>have</w><w>covered</w><ref target="/en/lessons/r-basics-with-tabular-data"><w>working</w><w>with</w><w>R</w></ref><w>and</w><ref target="/en/lessons/data_wrangling_and_management_in_R"><w>working</w><w>with</w><w>the</w><w>tidyverse</w></ref><pc>.</pc></s><s xml:id="s_leKNSU"><w>It</w><w>would</w><w>be</w><w>useful</w><w>to</w><w>go</w><w>through</w><w>these</w><w>lessons</w><w>beforehand</w><w>,</w><w>to</w><w>learn</w><w>the</w><w>basics</w><w>of</w><w>installing</w><w>R</w><w>and</w><w>using</w><w>the</w><w>tidyverse</w><w>for</w><w>data</w><w>wrangling</w><pc>.</pc></s></p></div><div type="3" n="4.2"><head><s xml:id="s_3l5FSy"><w>Create</w><w>a</w><w>new</w><w>RStudio</w><w>Project</w></s></head><p><s xml:id="s_VILOIT"><w>Once</w><w>you</w><w>have</w><w>a</w><w>working</w><w>copy</w><w>of</w><w>R</w><w>and</w><w>Rstudio</w><w>,</w><w>open</w><w>RStudio</w><w>and</w><w>create</w><w>a</w><w>new</w><w>project</w><w>to</w><w>develop</w><w>your</w><w>application</w><pc>.</pc></s><s xml:id="s_EwSQRH"><w>Open</w><w>the</w><w>'Create</w><w>a</w><w>Project</w><w>'</w><w>dialogue</w><w>window</w><w>using</w><w>the</w><w>menus</w><w>(</w><w>File-</w><w>&gt;</w><w>New</w><w>Project</w><w>)</w><pc>.</pc></s><s xml:id="s_DAAQkd"><w>Select</w><w>'New</w><w>Directory</w><w>'</w><w>,</w><w>then</w><w>'New</w><w>Project</w><w>'</w><pc>.</pc></s><s xml:id="s_tRL3Pt"><w>Name</w><w>your</w><w>project</w><w>directory</w><w>and</w><w>press</w><w>'Create</w><w>Project</w><w>'</w><pc>.</pc></s></p><p style="alert alert-info"><s xml:id="s_YUEqf7"><w>Usually</w><w>it</w><w>is</w><w>recommended</w><w>to</w><w>start</w><w>a</w><w>project</w><w>with</w><w>the</w><ref target="https://rstudio.github.io/renv/index.html"><w>R</w><w>package</w><w>renv</w></ref><w>to</w><w>manage</w><w>package</w><w>dependencies</w><pc>.</pc></s><s xml:id="s_nROASI"><w>In</w><w>this</w><w>case</w><w>,</w><w>one</w><w>of</w><w>the</w><w>necessary</w><w>packages</w><w>,</w><w>'sf</w><w>'</w><w>,</w><w>has</w><w>some</w><w>compatibility</w><w>issues</w><w>with</w><w>renv</w><w>,</w><w>particularly</w><w>using</w><w>macOS</w><pc>.</pc></s></p><p><s xml:id="s_qohqvy"><w>Before</w><w>you</w><w>continue</w><w>,</w><w>install</w><w>the</w><w>four</w><w>packages</w><w>necessary</w><w>to</w><w>complete</w><w>the</w><w>tutorial</w><w>,</w><w>if</w><w>you</w><w>do</w><w>n't</w><w>have</w><w>them</w><w>already</w><pc>.</pc></s><s xml:id="s_EItGNX"><w>Three</w><w>of</w><w>these</w><w>can</w><w>be</w><w>installed</w><w>directly</w><w>through</w><w>R</w><w>Studio</w><w>;</w><w>the</w><w>fourth</w><w>might</w><w>require</w><w>extra</w><w>steps</w><pc>.</pc></s><s xml:id="s_Wuld1B"><w>In</w><w>the</w><w>R</w><w>console</w><w>or</w><w>in</w><w>a</w><w>separate</w><w>R</w><w>script</w><w>,</w><w>run</w><w>the</w><w>following</w><w>commands</w><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_0" corresp="code_shiny-leaflet-newspaper-map-tutorial_0.txt" rend="block"/></ab><p><s xml:id="s_vYu7ZZ"><w>Depending</w><w>on</w><w>your</w><w>system</w><w>setup</w><w>,</w><w>the</w><w>fourth</w><w>package</w><w>,</w><code rend="inline"><w>sf</w></code><w>,</w><w>may</w><w>require</w><w>additional</w><w>steps</w><w>before</w><w>it</w><w>can</w><w>be</w><w>installed</w><pc>.</pc></s><s xml:id="s_yThW6E"><w>Windows</w><w>users</w><w>should</w><w>be</w><w>able</w><w>to</w><w>install</w><w>directly</w><w>using</w><code rend="inline"><w>install.packages</w><w>(</w><w>'sf</w><w>'</w><w>)</w></code><w>,</w><w>but</w><w>Mac</w><w>users</w><w>may</w><w>need</w><w>to</w><w>install</w><w>a</w><w>third-party</w><w>library</w><w>,</w><code rend="inline"><w>gdal</w></code><w>,</w><w>before</w><w>the</w><w>installation</w><w>will</w><w>work</w><w>,</w><w>using</w><ref target="https://brew.sh/"><w>Homebrew</w></ref><pc>.</pc></s><s xml:id="s_QsePOp"><w>Install</w><w>gdal</w><w>by</w><w>opening</w><w>a</w><w>Terminal</w><w>window</w><w>and</w><w>entering</w><w>the</w><w>following</w><w>commands</w><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_1" corresp="code_shiny-leaflet-newspaper-map-tutorial_1.txt" rend="block"/></ab><p><s xml:id="s_UOnvlH"><w>The</w><w>latest</w><w>instructions</w><w>and</w><w>further</w><w>details</w><w>can</w><w>be</w><w>found</w><w>on</w><w>the</w><ref target="https://github.com/r-spatial/sf"><w>package</w><w>Github</w><w>page</w></ref><w>,</w><w>including</w><w>instructions</w><w>for</w><w>various</w><w>Linux</w><w>distros</w><pc>.</pc></s><s xml:id="s_DziV0q"><w>Check</w><w>the</w><w>instructions</w><w>under</w><w>the</w><w>header</w><w>in</w><w>the</w><w>linked</w><w>Github</w><w>Readme</w><w>file</w><pc>.</pc></s><hi rend="bold"><s xml:id="s_Aw7BIt"><w>Installing</w></s></hi></p></div><div type="3" n="4.3"><head><s xml:id="s_qWJzY0"><w>Create</w><w>an</w><w>Empty</w><w>Shiny</w><w>Application</w></s></head><p><s xml:id="s_GoU3p1"><w>A</w><w>Shiny</w><w>application</w><w>consists</w><w>of</w><w>a</w><w>script</w><w>file</w><w>with</w><w>a</w><w>special</w><w>,</w><w>reserved</w><w>filename</w><w>,</w><code rend="inline"><w>app.R</w></code><w>,</w><w>which</w><w>tells</w><w>R</w><w>Studio</w><w>to</w><w>treat</w><w>that</w><w>script</w><w>as</w><w>an</w><w>application</w><w>and</w><w>open</w><w>it</w><w>in</w><w>a</w><w>web</w><w>browser</w><w>when</w><w>it</w><w>is</w><w>run</w><pc>.</pc></s><s xml:id="s_qjJCzC"><w>In</w><w>this</w><w>first</w><w>section</w><w>,</w><w>you</w><w>will</w><w>create</w><w>an</w><w>application</w><w>which</w><w>will</w><w>load</w><w>the</w><w>relevant</w><w>libraries</w><w>and</w><w>datasets</w><w>,</w><w>and</w><w>display</w><w>a</w><w>test</w><w>'Hello</w><w>World</w><w>'</w><w>message</w><pc>.</pc></s><s xml:id="s_9tSAyy"><w>To</w><w>do</w><w>this</w><w>,</w><w>carry</w><w>out</w><w>the</w><w>following</w><w>steps</w><w>:</w></s></p><p><s xml:id="s_4KJqjZ"><w>1</w><pc>.</pc></s><s xml:id="s_7JA5gd"><w>Set</w><w>up</w><w>an</w><w>Application</w><w>Folder</w></s></p><p><s xml:id="s_tG2L55"><w>It</w><w>'s</w><w>good</w><w>practice</w><w>to</w><w>put</w><w>all</w><w>the</w><w>necessary</w><w>files</w><w>for</w><w>the</w><w>application</w><w>in</w><w>their</w><w>own</w><w>folder</w><w>,</w><w>within</w><w>the</w><w>RStudio</w><w>project</w><pc>.</pc></s><s xml:id="s_Z0YTKR"><w>Do</w><w>this</w><w>by</w><w>creating</w><w>a</w><w>new</w><w>folder</w><w>called</w><w>'newspaper-app</w><w>'</w><w>within</w><w>the</w><w>folder</w><w>of</w><w>the</w><w>RStudio</w><w>project</w><w>you</w><w>just</w><w>created</w><pc>.</pc></s><s xml:id="s_0bCsex"><w>Place</w><w>the</w><w>files</w><w>you</w><w>downloaded</w><w>above</w><w>(</w><code rend="inline"><w>BritishAndIrishNewspapersTitleList_20191118.csv</w></code><w>and</w><code rend="inline"><w>newspaper_coordinates.csv</w></code><w>)</w><w>into</w><w>this</w><w>new</w><w>folder</w><pc>.</pc></s></p><p><s xml:id="s_MXb8sF"><w>2</w><pc>.</pc></s><s xml:id="s_jlXRBE"><w>Make</w><w>the</w><w>app.R</w><w>file</w><pc>.</pc></s></p><p><s xml:id="s_i3apXl"><w>With</w><w>RStudio</w><w>open</w><w>,</w><w>click</w><w>File-</w><w>&gt;</w><w>New</w><w>file</w><w>-</w><w>&gt;</w><w>R</w><w>Script</w><pc>.</pc></s><s xml:id="s_cTKMK2"><w>Use</w><w>the</w><w>menu</w><w>or</w><code rend="inline"><w>command/ctrl</w><w>+</w><w>s</w></code><w>to</w><w>save</w><w>the</w><w>file</w><pc>.</pc></s><s xml:id="s_2tXVg0"><w>Navigate</w><w>to</w><w>the</w><w>new</w><w>folder</w><w>you</w><w>'ve</w><w>just</w><w>created</w><w>,</w><w>and</w><w>save</w><w>the</w><w>file</w><w>there</w><w>,</w><w>entering</w><code rend="inline"><w>app.R</w></code><w>as</w><w>the</w><w>file</w><w>name</w><pc>.</pc></s><s xml:id="s_quVuB7"><w>You</w><w>should</w><w>now</w><w>have</w><w>the</w><w>following</w><w>files</w><w>in</w><w>the</w><w>'newspaper-app</w><w>'</w><w>folder</w><w>you</w><w>just</w><w>created</w><w>:</w></s></p><figure><desc><s xml:id="s_4eSwWU"><w>Figure</w><w>1</w><pc>.</pc></s><s xml:id="s_DCAM27"><w>Screenshot</w><w>of</w><w>application</w><w>folder</w><w>showing</w><w>the</w><w>files</w><w>needed</w><pc>.</pc></s></desc><figDesc><s xml:id="s_3bEKeE"><w>Figure</w><w>1</w><pc>.</pc></s><s xml:id="s_QoQNOQ"><w>A</w><w>Screenshot</w><w>of</w><w>the</w><w>R</w><w>file</w><w>pane</w><w>,</w><w>showing</w><w>the</w><w>files</w><w>needed</w><pc>.</pc></s><s xml:id="s_Lo58Jb"><w>There</w><w>are</w><w>three</w><w>files</w><w>in</w><w>total</w><w>,</w><w>App.R</w><w>,</w><w>the</w><w>british</w><w>and</w><w>Irish</w><w>newspapers</w><w>csv</w><w>,</w><w>and</w><w>the</w><w>newspaper</w><w>coordinates</w><w>csv</w><pc>.</pc></s></figDesc><graphic url="shiny-leaflet-newspaper-map-tutorial-1.png"/></figure><p><s xml:id="s_b5bcWT"><w>3</w><pc>.</pc></s><s xml:id="s_9ztMig"><w>Load</w><w>the</w><w>relevant</w><w>libraries</w></s></p><p style="alert alert-warning"><s xml:id="s_CC0uMF"><w>It</w><w>'s</w><w>important</w><w>to</w><w>note</w><w>that</w><w>,</w><w>unlike</w><w>many</w><w>tutorials</w><w>,</w><w>the</w><w>code</w><w>you</w><w>'re</w><w>about</w><w>to</w><w>enter</w><w>will</w><w>not</w><w>work</w><w>if</w><w>run</w><w>line-by-line</w><w>,</w><w>but</w><w>only</w><w>when</w><w>the</w><w>enire</w><w>`</w><w>app.R</w><w>`</w><w>script</w><w>itself</w><w>is</w><w>run</w><w>from</w><w>within</w><w>RStudio</w><pc>.</pc></s></p><p><s xml:id="s_kjiH0p"><w>The</w><w>first</w><w>thing</w><w>the</w><w>app</w><w>will</w><w>need</w><w>to</w><w>do</w><w>is</w><w>prepare</w><w>and</w><w>load</w><w>the</w><w>data</w><pc>.</pc></s><s xml:id="s_oAS7qa"><w>This</w><w>is</w><w>done</w><w>within</w><w>the</w><code rend="inline"><w>app.R</w></code><w>script</w><w>,</w><w>but</w><w>outside</w><w>the</w><w>UI</w><w>and</w><w>server</w><w>elements</w><w>you</w><w>'ll</w><w>create</w><w>in</w><w>a</w><w>moment</w><pc>.</pc></s><s xml:id="s_JvQuo0"><w>First</w><w>,</w><w>load</w><w>all</w><w>the</w><w>libraries</w><w>you</w><w>need</w><w>to</w><w>use</w><w>by</w><w>entering</w><w>the</w><w>following</w><w>into</w><w>your</w><w>console</w><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_2" corresp="code_shiny-leaflet-newspaper-map-tutorial_2.txt" rend="block"/></ab><p><s xml:id="s_tkOsnF"><w>4</w><pc>.</pc></s><s xml:id="s_kBrDlp"><w>Load</w><w>the</w><w>datasets</w></s></p><p><s xml:id="s_nEcLYb"><w>Next</w><w>,</w><w>the</w><w>app</w><w>should</w><w>load</w><w>the</w><w>title</w><w>list</w><w>and</w><w>coordinates</w><w>list</w><w>files</w><w>as</w><w>dataframes</w><w>called</w><code rend="inline"><w>title_list</w></code><w>and</w><code rend="inline"><w>coordinates_list</w></code><w>respectively</w><pc>.</pc></s><s xml:id="s_lLR5tr"><w>Add</w><w>the</w><w>following</w><w>line</w><w>to</w><w>your</w><code rend="inline"><w>app.R</w></code><w>script</w><w>,</w><w>which</w><w>should</w><w>be</w><w>displayed</w><w>in</w><w>the</w><w>top-left</w><w>panel</w><w>of</w><w>RStudio</w><pc>.</pc></s><s xml:id="s_lfndbX"><w>Note</w><w>that</w><w>because</w><w>the</w><w>working</w><w>directory</w><w>is</w><w>different</w><w>from</w><w>your</w><w>app</w><w>directory</w><w>,</w><w>these</w><w>commands</w><w>will</w><w>only</w><w>work</w><w>when</w><w>you</w><w>run</w><w>the</w><w>app</w><w>itself</w><pc>.</pc></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_3" corresp="code_shiny-leaflet-newspaper-map-tutorial_3.txt" rend="block"/></ab></div><div type="3" n="4.4"><head><s xml:id="s_JTWSVo"><w>Add</w><w>the</w><w>necessary</w><w>Shiny</w><w>Elements</w></s></head><p><s xml:id="s_IbRa6K"><w>To</w><w>turn</w><w>this</w><w>into</w><w>a</w><w>Shiny</w><w>application</w><w>,</w><w>this</w><code rend="inline"><w>app.R</w></code><w>script</w><w>needs</w><w>three</w><w>elements</w><w>:</w></s></p><p><s xml:id="s_oeQz5q"><w>1</w><pc>.</pc></s><s xml:id="s_dLFk36"><w>The</w><w>,</w><w>where</w><w>the</w><w>visual</w><w>appearance</w><w>of</w><w>the</w><w>app</w><w>will</w><w>be</w><w>stored</w><pc>.</pc></s><hi rend="bold"><s xml:id="s_tTWsxv"><w>UI</w></s></hi></p><p><s xml:id="s_AY3I5F"><w>2</w><pc>.</pc></s><s xml:id="s_Ezxr99"><w>The</w><w>,</w><w>which</w><w>will</w><w>contain</w><w>the</w><w>code</w><w>used</w><pc>.</pc></s><hi rend="bold"><s xml:id="s_rtqngO"><w>server</w></s></hi></p><p><s xml:id="s_hWtlRN"><w>3</w><pc>.</pc></s><s xml:id="s_mrAfdx"><w>The</w><w>command</w><w>to</w><w>run</w><w>the</w><w>application</w><w>itself</w><pc>.</pc></s></p><p><s xml:id="s_zbSD4B"><w>Next</w><w>you</w><w>'ll</w><w>create</w><w>each</w><w>of</w><w>these</w><w>in</w><w>turn</w><pc>.</pc></s></p><p><s xml:id="s_1KTo5d"><w>1</w><pc>.</pc></s><s xml:id="s_psDshu"><w>Create</w><w>an</w><w>Empty</w><w>UI</w><w>Element</w></s></p><p><s xml:id="s_0l4zrI"><w>The</w><w>UI</w><w>is</w><w>an</w><w>element</w><w>which</w><w>will</w><w>contain</w><w>a</w><w>number</w><w>of</w><w>special</w><w>Shiny</w><w>commands</w><w>to</w><w>define</w><w>how</w><w>the</w><w>application</w><w>will</w><w>look</w><pc>.</pc></s><s xml:id="s_vkwSJh"><w>We</w><w>'ll</w><w>examine</w><w>the</w><w>specific</w><w>options</w><w>below</w><w>,</w><w>but</w><w>generally</w><w>,</w><w>you</w><w>begin</w><w>by</w><w>specifying</w><w>a</w><w>page</w><w>type</w><w>,</w><w>within</w><w>which</w><w>the</w><w>various</w><w>components</w><w>of</w><w>the</w><w>UI</w><w>are</w><w>nested</w><w>;</w><w>then</w><w>,</w><w>a</w><w>layout</w><w>type</w><w>,</w><w>within</w><w>that</w><w>the</w><w>specific</w><w>layout</w><w>elements</w><w>;</w><w>and</w><w>finally</w><w>within</w><w>these</w><w>,</w><w>the</w><w>various</w><w>components</w><w>of</w><w>the</w><w>app</w><w>itself</w><pc>.</pc></s></p><p><s xml:id="s_T7MUUp"><w>The</w><w>type</w><w>you</w><w>'ll</w><w>use</w><w>is</w><w>called</w><code rend="inline"><w>fluidPage</w><w>(</w><w>)</w></code><w>,</w><w>a</w><w>page</w><w>—which</w><w>dynamically</w><w>resizes</w><w>depending</w><w>on</w><w>the</w><w>size</w><w>of</w><w>the</w><w>browser</w><w>window—</w><w>containing</w><w>a</w><w>fluid</w><w>layout</w><w>of</w><w>rows</w><w>which</w><w>in</w><w>turn</w><w>contain</w><w>columns</w><pc>.</pc></s></p><p><s xml:id="s_ZovjTS"><w>The</w><w>first</w><w>step</w><w>is</w><w>to</w><w>create</w><w>all</w><w>the</w><w>basic</w><w>elements</w><w>needed</w><w>for</w><w>an</w><w>app</w><w>,</w><w>before</w><w>filling</w><w>them</w><w>with</w><w>the</w><w>required</w><w>components</w><pc>.</pc></s><s xml:id="s_jX7o8Y"><w>To</w><w>start</w><w>with</w><w>,</w><w>make</w><w>a</w><w>blank</w><w>UI</w><w>element</w><w>by</w><w>setting</w><w>the</w><w>variable</w><code rend="inline"><w>ui</w></code><w>to</w><w>the</w><w>element</w><code rend="inline"><w>fluidPage</w><w>(</w><w>)</w></code><pc>.</pc></s><s xml:id="s_uCwivA"><w>So</w><w>you</w><w>know</w><w>your</w><w>application</w><w>is</w><w>running</w><w>when</w><w>you</w><w>first</w><w>test</w><w>it</w><w>,</w><w>add</w><w>a</w><w>simple</w><w>'Hello</w><w>World</w><w>'</w><w>message</w><w>to</w><w>the</w><w>UI</w><w>element</w><pc>.</pc></s><s xml:id="s_9jtVb9"><w>Add</w><w>the</w><w>following</w><w>code</w><w>in</w><w>your</w><code rend="inline"><w>app.R</w></code><w>script</w><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_4" corresp="code_shiny-leaflet-newspaper-map-tutorial_4.txt" rend="block"/></ab><p><s xml:id="s_Jp2GVl"><w>2</w><pc>.</pc></s><s xml:id="s_yREGmO"><w>Create</w><w>the</w><w>Server</w><w>Element</w></s></p><p><s xml:id="s_ZRRIjb"><w>Next</w><w>up</w><w>is</w><w>the</w><w>server</w><w>part</w><pc>.</pc></s><s xml:id="s_wcvNDA"><w>The</w><w>server</w><w>is</w><w>created</w><w>as</w><w>an</w><w>R</w><w>function</w><w>with</w><w>two</w><w>arguments</w><w>,</w><code rend="inline"><w>input</w></code><w>and</w><code rend="inline"><w>output</w></code><w>(</w><w>you</w><w>do</w><w>n't</w><w>need</w><w>to</w><w>worry</w><w>about</w><w>what</w><w>the</w><w>input</w><w>and</w><w>output</w><w>arguments</w><w>do</w><w>for</w><w>now</w><w>,</w><w>as</w><w>long</w><w>as</w><w>they</w><w>are</w><w>there</w><w>)</w><pc>.</pc></s><s xml:id="s_pUhbzW"><ref type="footnotemark" target="#en_note_3"/><w>In</w><w>R</w><w>a</w><w>function</w><w>is</w><w>made</w><w>using</w><w>the</w><w>command</w><code rend="inline"><w>function</w><w>(</w><w>)</w><w>{</w><w>}</w></code><w>,</w><w>specifying</w><w>the</w><w>arguments</w><w>in</w><w>parentheses</w><w>,</w><w>and</w><w>then</w><w>the</w><w>function</w><w>code</w><w>between</w><w>curly</w><w>braces</w><pc>.</pc></s><s xml:id="s_tYCT4u"><w>All</w><w>the</w><w>code</w><w>for</w><w>the</w><w>logic</w><w>of</w><w>the</w><w>application</w><w>will</w><w>live</w><w>between</w><w>these</w><w>two</w><w>curly</w><w>braces</w><pc>.</pc></s></p><p><s xml:id="s_fgDyim"><w>Specify</w><w>the</w><w>server</w><w>part</w><w>using</w><w>the</w><w>following</w><w>code</w><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_5" corresp="code_shiny-leaflet-newspaper-map-tutorial_5.txt" rend="block"/></ab><p><s xml:id="s_vI5Qum"><w>3</w><pc>.</pc></s><s xml:id="s_UfaBnG"><w>Add</w><w>the</w><w>command</w><w>to</w><w>run</w><w>the</w><w>application</w><pc>.</pc></s></p><p><s xml:id="s_Vyv5tN"><w>Finally</w><w>,</w><w>add</w><w>the</w><w>command</w><w>to</w><w>run</w><w>the</w><w>application</w><w>itself</w><pc>.</pc></s><s xml:id="s_uRQkm9"><w>This</w><w>is</w><w>another</w><w>special</w><w>Shiny</w><w>command</w><w>,</w><code rend="inline"><w>shinyApp</w><w>(</w><w>)</w></code><w>,</w><w>with</w><w>the</w><w>UI</w><w>and</w><w>server</w><w>items</w><w>you</w><w>'ve</w><w>just</w><w>made</w><w>as</w><w>arguments</w><pc>.</pc></s></p><p><code rend="inline"><w>shinyApp</w><w>(</w><w>ui</w><w>,</w><w>server</w><w>)</w></code></p><p><s xml:id="s_BMRucV"><w>The</w><w>full</w><code rend="inline"><w>app.R</w></code><w>file</w><w>should</w><w>now</w><w>contain</w><w>the</w><w>following</w><w>lines</w><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_6" corresp="code_shiny-leaflet-newspaper-map-tutorial_6.txt" rend="block"/></ab></div><div type="3" n="4.5"><head><s xml:id="s_Yd1UWE"><w>Test</w><w>Your</w><w>New</w><w>Application</w></s></head><p><s xml:id="s_0JePQt"><w>Once</w><w>you</w><w>have</w><w>created</w><w>these</w><w>items</w><w>,</w><w>resave</w><w>the</w><code rend="inline"><w>app.R</w></code><w>file</w><pc>.</pc></s><s xml:id="s_ZbAzyb"><w>RStudio</w><w>will</w><w>now</w><w>recognise</w><w>it</w><w>as</w><w>a</w><w>Shiny</w><w>application</w><w>,</w><w>and</w><w>the</w><w>icons</w><w>at</w><w>the</w><w>top</w><w>of</w><w>the</w><w>panel</w><w>will</w><w>change</w><w>,</w><w>giving</w><w>a</w><w>'Run</w><w>App</w><w>'</w><w>option</w><w>(</w><w>Figure</w><w>2</w><w>)</w><pc>.</pc></s><s xml:id="s_ZIHLZR"><w>If</w><w>you</w><w>click</w><code rend="inline"><w>Run</w><w>App</w></code><w>,</w><w>it</w><w>will</w><w>run</w><w>the</w><w>application</w><w>in</w><w>a</w><w>new</w><w>window</w><w>using</w><w>RStudio</w><w>'s</w><w>in-built</w><w>browser</w><pc>.</pc></s></p><figure><desc><s xml:id="s_Kj2IOB"><w>Figure</w><w>2</w><w>:</w><w>Screenshot</w><w>of</w><w>the</w><w>control</w><w>panel</w><w>with</w><w>the</w><w>Run</w><w>App</w><w>button</w><w>highlighted</w><pc>.</pc></s></desc><figDesc><s xml:id="s_btCWFC"><w>Figure</w><w>2</w><w>:</w><w>Screenshot</w><w>of</w><w>the</w><w>control</w><w>panel</w><w>with</w><w>the</w><w>Run</w><w>App</w><w>button</w><w>highlighted</w><w>with</w><w>a</w><w>red</w><w>rectangle</w><pc>.</pc></s></figDesc><graphic url="shiny-leaflet-newspaper-map-tutorial-2.png"/></figure><p><s xml:id="s_OO6PHe"><w>You</w><w>should</w><w>see</w><w>a</w><w>mostly-blank</w><w>web</w><w>page</w><w>with</w><w>'Hello</w><w>World</w><w>'</w><w>displayed</w><w>in</w><w>the</w><w>top-left</w><w>corner</w><pc>.</pc></s><s xml:id="s_nPIBXR"><w>You</w><w>'ll</w><w>also</w><w>notice</w><w>that</w><w>while</w><w>the</w><w>app</w><w>is</w><w>running</w><w>you</w><w>ca</w><w>n't</w><w>run</w><w>any</w><w>code</w><w>in</w><w>RStudio</w><w>:</w><w>the</w><w>console</w><w>shows</w><w>up</w><w>as</w><w>'busy</w><w>'</w><pc>.</pc></s><s xml:id="s_MiWTKw"><w>To</w><w>stop</w><w>the</w><w>application</w><w>,</w><w>simply</w><w>close</w><w>the</w><w>in-built</w><w>browser</w><pc>.</pc></s><s xml:id="s_30guzZ"><w>You</w><w>can</w><w>also</w><w>use</w><w>the</w><w>'open</w><w>in</w><w>browser</w><w>'</w><w>option</w><w>to</w><w>try</w><w>out</w><w>the</w><w>app</w><w>in</w><w>your</w><w>default</w><w>web</w><w>browser</w><pc>.</pc></s></p></div></div><div type="2" n="5"><head><s xml:id="s_nNcZgO"><w>Coding</w><w>the</w><w>Application</w></s></head><div type="3" n="5.1"><head><s xml:id="s_BYoFgd"><w>Designing</w><w>the</w><w>User</w><w>Interface</w></s></head><p><s xml:id="s_PJGrpt"><w>The</w><w>Shiny</w><w>UI</w><w>utilises</w><w>the</w><ref target="https://perma.cc/BK3T-V6HP"><w>Bootstrap</w></ref><w>format</w><pc>.</pc></s><s xml:id="s_WfpCwI"><w>The</w><w>UI</w><w>is</w><w>built</w><w>around</w><w>a</w><w>grid</w><w>system</w><w>of</w><w>rows</w><w>and</w><w>columns</w><w>,</w><w>allowing</w><w>for</w><w>customisable</w><w>layouts</w><pc>.</pc></s><s xml:id="s_weAknl"><w>See</w><w>the</w><ref target="https://perma.cc/9U3B-AHF6"><w>official</w><w>documentation</w></ref><w>for</w><w>more</w><w>information</w><w>on</w><w>the</w><w>various</w><w>options</w><w>and</w><w>how</w><w>to</w><w>create</w><w>these</w><w>layouts</w><pc>.</pc></s><s xml:id="s_xGi8vu"><w>For</w><w>this</w><w>application</w><w>,</w><w>we</w><w>'ll</w><w>use</w><w>a</w><w>layout</w><w>known</w><w>as</w><w>the</w><code rend="inline"><w>sidebarLayout</w></code><w>,</w><w>which</w><w>consists</w><w>of</w><w>a</w><w>title</w><w>,</w><w>a</w><w>sidebar</w><w>column</w><w>on</w><w>the</w><w>left</w><w>of</w><w>the</w><w>page</w><w>for</w><w>user</w><w>inputs</w><w>,</w><w>and</w><w>a</w><w>main</w><w>panel</w><w>to</w><w>display</w><w>the</w><w>results</w><pc>.</pc></s><s xml:id="s_o8NThq"><w>The</w><w>following</w><w>wireframe</w><w>diagram</w><w>should</w><w>help</w><w>you</w><w>to</w><w>visualise</w><w>the</w><w>layout</w><w>:</w></s></p><figure><desc><s xml:id="s_pANAC9"><w>Figure</w><w>3</w><pc>.</pc></s><s xml:id="s_XNBeyc"><w>Wireframe</w><w>diagram</w><w>displaying</w><w>the</w><w>structure</w><w>of</w><w>the</w><w>sidebar</w><w>layout</w><pc>.</pc></s></desc><figDesc><s xml:id="s_WFmpKh"><w>Figure</w><w>3</w><pc>.</pc></s><s xml:id="s_9MARaP"><w>Wireframe</w><w>diagram</w><w>displaying</w><w>the</w><w>structure</w><w>of</w><w>the</w><w>sidebar</w><w>layout</w><pc>.</pc></s></figDesc><graphic url="shiny-leaflet-newspaper-map-tutorial-3.png"/></figure><p><s xml:id="s_XJswMv"><w>The</w><w>next</w><w>step</w><w>is</w><w>to</w><w>fill</w><w>the</w><code rend="inline"><w>ui</w></code><w>element</w><w>with</w><w>the</w><w>components</w><w>necessary</w><w>to</w><w>render</w><w>this</w><w>sidebar</w><w>layout</w><pc>.</pc></s><s xml:id="s_8cDze4"><w>First</w><w>,</w><w>use</w><w>the</w><code rend="inline"><w>titlePanel</w></code><w>element</w><w>to</w><w>give</w><w>your</w><w>application</w><w>a</w><w>title</w><w>,</w><w>and</w><w>add</w><w>the</w><w>sidebar</w><w>element</w><pc>.</pc></s><s xml:id="s_L5iQfp"><w>Within</w><w>the</w><code rend="inline"><w>fluidPage</w><w>(</w><w>)</w></code><w>object</w><w>,</w><w>delete</w><w>the</w><w>'Hello</w><w>World</w><w>'</w><w>message</w><w>and</w><w>replace</w><w>with</w><w>the</w><w>following</w><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_7" corresp="code_shiny-leaflet-newspaper-map-tutorial_7.txt" rend="block"/></ab><p><s xml:id="s_Ja9JEa"><w>Following</w><w>this</w><w>,</w><w>populate</w><w>the</w><w>layout</w><w>with</w><w>specific</w><w>parts</w><w>of</w><w>the</w><w>webpage</w><w>,</w><w>components</w><w>called</w><code rend="inline"><w>sidebarPanel</w><w>(</w><w>)</w></code><w>and</w><code rend="inline"><w>mainPanel</w><w>(</w><w>)</w></code><pc>.</pc></s><s xml:id="s_c9B4iG"><w>Do</w><w>this</w><w>by</w><w>placing</w><w>them</w><w>within</w><code rend="inline"><w>sidebarLayout</w><w>(</w><w>)</w></code><pc>.</pc></s></p><p style="alert alert-info"><s xml:id="s_7JA6Pq"><w>Because</w><w>shiny</w><w>UI</w><w>code</w><w>often</w><w>ends</w><w>up</w><w>with</w><w>lots</w><w>of</w><w>nested</w><w>parentheses</w><w>,</w><w>splitting</w><w>them</w><w>across</w><w>two</w><w>lines</w><w>(</w><w>as</w><w>in</w><w>the</w><w>code</w><w>chunk</w><w>below</w><w>)</w><w>can</w><w>make</w><w>it</w><w>easier</w><w>to</w><w>read</w><w>,</w><w>but</w><w>it</w><w>'s</w><w>not</w><w>necessary</w><w>for</w><w>the</w><w>code</w><w>to</w><w>work</w><pc>.</pc></s></p><p><s xml:id="s_sob6zs"><w>The</w><w>full</w><w>UI</w><w>element</w><w>should</w><w>now</w><w>look</w><w>like</w><w>this</w><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_8" corresp="code_shiny-leaflet-newspaper-map-tutorial_8.txt" rend="block"/></ab><p><s xml:id="s_Hlh8N4"><w>You</w><w>'ll</w><w>notice</w><w>that</w><w>these</w><w>nested</w><w>commands</w><w>correspond</w><w>to</w><w>the</w><w>layout</w><w>of</w><w>the</w><w>wireframe</w><w>diagram</w><w>in</w><w>Figure</w><w>3</w><w>above</w><pc>.</pc></s></p></div><div type="3" n="5.2"><head><s xml:id="s_HQdJLd"><w>Add</w><w>a</w><w>'Widget</w><w>'</w><w>:</w><w>the</w><w>sliderInput</w><w>Control</w></s></head><p><s xml:id="s_yU9PQf"><w>In</w><w>Shiny</w><w>,</w><w>users</w><w>update</w><w>values</w><w>using</w><w>various</w><w>interactive</w><w>,</w><w>customisable</w><w>controls</w><w>known</w><w>as</w><w>'widgets</w><w>'</w><pc>.</pc></s><s xml:id="s_43Q5kY"><w>The</w><w>full</w><w>list</w><w>can</w><w>be</w><w>found</w><w>in</w><w>the</w><ref target="https://perma.cc/GW78-FQEJ"><w>Shiny</w><w>widget</w><w>gallery</w></ref><pc>.</pc></s><s xml:id="s_xgAeFV"><w>The</w><w>widget</w><w>you</w><w>'re</w><w>going</w><w>to</w><w>use</w><w>is</w><w>called</w><code rend="inline"><w>sliderInput</w><w>(</w><w>)</w></code><pc>.</pc></s><s xml:id="s_19V1ym"><w>This</w><w>will</w><w>display</w><w>an</w><w>interactive</w><w>sliding</w><w>bar</w><w>with</w><w>a</w><w>large</w><w>number</w><w>of</w><w>options</w><w>,</w><w>such</w><w>as</w><w>the</w><w>minimum</w><w>,</w><w>maximum</w><w>and</w><w>starting</w><w>value</w><w>(</w><w>s</w><w>)</w><pc>.</pc></s><s xml:id="s_KbfbYO"><w>You</w><w>can</w><w>also</w><w>set</w><w>the</w><w>step</w><w>and</w><w>format</w><w>of</w><w>the</w><w>numbers</w><w>(</w><w>type</w><code rend="inline"><pc>?</pc><w>sliderInput</w></code><w>in</w><w>the</w><w>console</w><w>to</w><w>get</w><w>a</w><w>full</w><w>list</w><w>of</w><w>options</w><w>and</w><w>explanations</w><w>)</w><pc>.</pc></s><s xml:id="s_PT8aPx"><w>Here</w><w>you</w><w>'ll</w><w>make</w><w>one</w><w>with</w><w>a</w><w>minimum</w><w>year</w><w>of</w><w>1620</w><w>(</w><w>the</w><w>earliest</w><w>data</w><w>point</w><w>in</w><w>the</w><w>title</w><w>list</w><w>)</w><w>,</w><w>and</w><w>a</w><w>maximum</w><w>of</w><w>2019</w><w>(</w><w>the</w><w>most</w><w>recent</w><w>)</w><pc>.</pc></s></p><p><s xml:id="s_7Hv0Uk"><w>The</w><w>starting</w><w>(</w><w>default</w><w>)</w><w>value</w><w>can</w><w>be</w><w>a</w><w>single</w><w>number</w><w>,</w><w>or</w><w>a</w><w>vector</w><w>of</w><w>two</w><w>numbers</w><pc>.</pc></s><s xml:id="s_z7uSEd"><w>If</w><w>the</w><w>latter</w><w>is</w><w>used</w><w>,</w><w>the</w><w>slider</w><w>will</w><w>be</w><w>double-sided</w><w>,</w><w>with</w><w>a</w><w>first</w><w>and</w><w>second</w><w>value</w><pc>.</pc></s><s xml:id="s_SWEU01"><w>This</w><w>is</w><w>what</w><w>we</w><w>want</w><w>to</w><w>use</w><w>,</w><w>so</w><w>that</w><w>a</w><w>user</w><w>can</w><w>specify</w><w>a</w><w>range</w><w>of</w><w>years</w><pc>.</pc></s></p><p><s xml:id="s_Zst9m5"><w>The</w><w>following</w><w>code</w><w>will</w><w>create</w><w>a</w><w>slider</w><w>with</w><w>two</w><w>draggable</w><w>ends</w><w>,</w><w>set</w><w>by</w><w>default</w><w>to</w><w>1700</w><w>and</w><w>1750</w><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_9" corresp="code_shiny-leaflet-newspaper-map-tutorial_9.txt" rend="block"/></ab><p><s xml:id="s_IoLMvS"><w>Insert</w><w>this</w><w>code</w><w>between</w><w>the</w><w>parentheses</w><w>of</w><w>the</w><code rend="inline"><w>sidebarPanel</w><w>=</w><w>sidebarPanel</w><w>(</w><w>)</w></code><w>command</w><w>in</w><w>your</w><w>script</w><pc>.</pc></s><s xml:id="s_cxtN5C"><w>If</w><w>you</w><w>get</w><w>lost</w><w>or</w><w>need</w><w>to</w><w>debug</w><w>,</w><w>take</w><w>a</w><w>look</w><w>at</w><ref target="#Final-code"><w>the</w><w>finished</w><w>code</w></ref><w>provided</w><w>at</w><w>the</w><w>end</w><w>of</w><w>this</w><w>lesson</w><pc>.</pc></s></p><p><s xml:id="s_HegJtv"><w>At</w><w>this</w><w>point</w><w>,</w><w>run</w><w>the</w><w>application</w><w>to</w><w>see</w><w>how</w><w>the</w><w>slider</w><w>looks</w><pc>.</pc></s><s xml:id="s_tghya6"><w>You</w><w>should</w><w>see</w><w>a</w><w>grey</w><w>panel</w><w>on</w><w>the</w><w>left</w><w>(</w><w>the</w><w>sidebar</w><w>panel</w><w>)</w><w>,</w><w>containing</w><w>the</w><w>slider</w><w>widget</w><pc>.</pc></s><s xml:id="s_5Oyd1U"><w>If</w><w>you</w><w>hover</w><w>over</w><w>the</w><w>slider</w><w>,</w><w>you</w><w>'ll</w><w>notice</w><w>that</w><w>you</w><w>can</w><w>drag</w><w>each</w><w>end</w><w>(</w><w>to</w><w>select</w><w>a</w><w>range</w><w>size</w><w>)</w><w>and</w><w>you</w><w>can</w><w>also</w><w>drag</w><w>the</w><w>middle</w><w>(</w><w>which</w><w>will</w><w>move</w><w>the</w><w>entire</w><w>slider</w><w>over</w><w>a</w><w>window</w><w>of</w><w>the</w><w>selected</w><w>range</w><w>size</w><w>)</w><pc>.</pc></s></p><figure><desc><s xml:id="s_HeprsU"><w>Figure</w><w>4</w><pc>.</pc></s><s xml:id="s_vORHNO"><w>Animated</w><w>gif</w><w>demonstrating</w><w>the</w><w>functionality</w><w>of</w><w>the</w><w>slider</w><w>input</w><w>widget</w><pc>.</pc></s></desc><figDesc><s xml:id="s_w6aR31"><w>Figure</w><w>4</w><pc>.</pc></s><s xml:id="s_xJkJsT"><w>Animated</w><w>gif</w><w>demonstrating</w><w>the</w><w>functionality</w><w>of</w><w>the</w><w>slider</w><w>input</w><w>widget</w><pc>.</pc></s><s xml:id="s_45fBKg"><w>A</w><w>cursor</w><w>clicks</w><w>on</w><w>each</w><w>end</w><w>of</w><w>the</w><w>slider</w><w>to</w><w>resize</w><w>it</w><w>,</w><w>and</w><w>then</w><w>drags</w><w>it</w><pc>.</pc></s></figDesc><graphic url="shiny-leaflet-newspaper-map-tutorial-4.gif"/></figure></div><div type="3" n="5.3"><head><s xml:id="s_ScciJd"><w>Put</w><w>the</w><w>leafletOutput</w><w>in</w><w>the</w><w>mainPanel</w><w>Element</w></s></head><p><s xml:id="s_EBCVgk"><w>In</w><w>Shiny</w><w>,</w><w>you</w><w>need</w><w>to</w><w>let</w><w>the</w><w>UI</w><w>know</w><w>it</w><w>should</w><w>display</w><w>an</w><w>output</w><w>(</w><w>some</w><w>kind</w><w>of</w><w>R</w><w>element</w><w>,</w><w>such</w><w>as</w><w>a</w><w>table</w><w>of</w><w>data</w><w>or</w><w>a</w><w>plot</w><w>,</w><w>or</w><w>something</w><w>as</w><w>simple</w><w>as</w><w>a</w><w>line</w><w>of</w><w>text</w><w>)</w><w>created</w><w>in</w><w>the</w><w>server</w><w>code</w><pc>.</pc></s><s xml:id="s_F36OcB"><w>This</w><w>is</w><w>done</w><w>by</w><w>creating</w><w>an</w><w>element</w><w>in</w><w>the</w><w>UI</w><w>from</w><w>the</w><code rend="inline"><w>*</w><w>Output</w></code><w>family</w><w>of</w><w>commands</w><pc>.</pc></s><s xml:id="s_tLeeXq"><w>Each</w><w>R</w><w>element</w><w>you</w><w>can</w><w>display</w><w>in</w><w>Shiny</w><w>has</w><w>its</w><w>own</w><code rend="inline"><w>*</w><w>Output</w></code><w>command</w><w>:</w><w>here</w><w>,</w><w>you</w><w>'ll</w><w>use</w><code rend="inline"><w>leafletOutput</w><w>(</w><w>)</w></code><w>,</w><w>which</w><w>tells</w><w>the</w><w>UI</w><w>to</w><w>create</w><w>a</w><w>Leaflet</w><w>map</w><pc>.</pc></s><s xml:id="s_YnEdr0"><code rend="inline"><w>leafletOutput</w></code><w>has</w><w>one</w><w>required</w><w>argument</w><w>:</w><w>its</w><w>output</w><w>ID</w><pc>.</pc></s><s xml:id="s_C8mkd9"><w>This</w><w>label</w><w>will</w><w>be</w><w>used</w><w>to</w><w>match</w><w>the</w><w>UI</w><w>element</w><w>to</w><w>the</w><w>actual</w><w>map</w><w>object</w><w>you</w><w>'ll</w><w>create</w><w>in</w><w>the</w><w>server</w><w>code</w><w>later</w><pc>.</pc></s><s xml:id="s_MOjbtw"><w>Set</w><w>this</w><w>label</w><w>as</w><w>'map</w><w>'</w><pc>.</pc></s><s xml:id="s_SVhW1E"><w>Insert</w><w>the</w><w>following</w><w>code</w><emph><w>between</w><w>the</w><w>parentheses</w><w>of</w><code rend="inline"><w>mainPanel</w><w>(</w><w>)</w></code></emph><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_10" corresp="code_shiny-leaflet-newspaper-map-tutorial_10.txt" rend="block"/></ab></div></div><div type="2" n="6"><head><s xml:id="s_dXsS3V"><w>Creating</w><w>the</w><w>Server</w><w>Logic</w></s></head><p><s xml:id="s_mA19Cm"><w>Next</w><w>you</w><w>need</w><w>to</w><w>write</w><w>the</w><w>logic</w><w>to</w><w>create</w><w>an</w><w>object</w><w>which</w><w>will</w><w>be</w><w>displayed</w><w>in</w><w>the</w><w>UI</w><pc>.</pc></s><s xml:id="s_O5iUDM"><w>This</w><w>has</w><w>two</w><w>parts</w><pc>.</pc></s><s xml:id="s_JS5S2a"><w>First</w><w>,</w><w>you</w><w>'ll</w><w>create</w><w>a</w><emph><w>reactive</w><w>element</w></emph><w>,</w><w>which</w><w>,</w><w>as</w><w>explained</w><w>above</w><w>,</w><w>is</w><w>a</w><w>special</w><w>object</w><w>which</w><w>will</w><w>listen</w><w>for</w><w>changes</w><w>to</w><w>the</w><w>user</w><w>input</w><w>,</w><w>and</w><w>remake</w><w>itself</w><w>as</w><w>necessary</w><pc>.</pc></s><s xml:id="s_lGgmVT"><w>Second</w><w>,</w><w>you</w><w>'ll</w><w>create</w><w>an</w><emph><w>output</w></emph><w>which</w><w>will</w><w>contain</w><w>the</w><w>interactive</w><w>map</w><w>itself</w><pc>.</pc></s></p><div type="3" n="6.1"><head><s xml:id="s_ggh6NT"><w>Create</w><w>the</w><w>reactive</w><w>for</w><w>the</w><w>Leaflet</w><w>map</w></s></head><p><s xml:id="s_wPoANf"><w>First</w><w>,</w><w>create</w><w>the</w><w>reactive</w><w>element</w><pc>.</pc></s><s xml:id="s_piQORv"><w>In</w><w>this</w><w>case</w><w>,</w><w>it</w><w>will</w><w>be</w><w>a</w><w>special</w><w>type</w><w>of</w><w>geographic</w><w>dataset</w><w>called</w><w>a</w><emph><w>simple</w><w>features</w><w>object</w></emph><pc>.</pc></s><s xml:id="s_lk9l90"><w>This</w><w>format</w><w>has</w><w>been</w><w>covered</w><w>in</w><w>a</w><w>previous</w><emph><w>Programming</w><w>Historian</w></emph><w>lesson</w><w>,</w><ref target="/en/lessons/geospatial-data-analysis"><w>'Using</w><w>Geospatial</w><w>Data</w><w>to</w><w>Inform</w><w>Historical</w><w>Research</w><w>in</w><w>R</w><w>'</w></ref><pc>.</pc></s></p><p><s xml:id="s_NSC5xG"><w>Whenever</w><w>the</w><w>user</w><w>changes</w><w>the</w><w>variables</w><w>in</w><w>the</w><w>date</w><w>slider</w><w>in</w><w>any</w><w>way</w><w>,</w><w>your</w><w>app</w><w>will</w><w>run</w><w>through</w><w>a</w><w>set</w><w>of</w><w>commands</w><w>:</w></s></p><list type="unordered"><item><p><s xml:id="s_hcV0JH"><w>Filter</w><w>the</w><w>title</w><w>list</w><w>to</w><w>the</w><w>set</w><w>of</w><w>dates</w><w>selected</w><w>by</w><w>the</w><w>user</w></s></p></item><item><p><s xml:id="s_I6AZJ6"><w>Make</w><w>a</w><w>count</w><w>of</w><w>the</w><w>number</w><w>of</w><w>times</w><w>each</w><w>place</w><w>occurs</w><w>in</w><w>this</w><w>filtered</w><w>list</w></s></p></item><item><p><s xml:id="s_MKkWO6"><w>Match</w><w>the</w><w>places</w><w>to</w><w>a</w><w>set</w><w>of</w><w>coordinates</w><w>using</w><w>a</w><w>join</w></s></p></item><item><p><s xml:id="s_fdnfhT"><w>Convert</w><w>the</w><w>result</w><w>into</w><w>a</w><w>simple</w><w>features</w><w>object</w></s></p></item></list><p><s xml:id="s_gs3otO"><w>To</w><w>create</w><w>a</w><w>reactive</w><w>object</w><w>called</w><code rend="inline"><w>map_df</w></code><w>,</w><w>add</w><w>the</w><w>following</w><w>code</w><emph><w>within</w><w>the</w><w>curly</w><w>braces</w><w>of</w><w>the</w><w>server</w><w>component</w></emph><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_11" corresp="code_shiny-leaflet-newspaper-map-tutorial_11.txt" rend="block"/></ab><p><s xml:id="s_AFfsRT"><w>This</w><w>code</w><w>performs</w><w>the</w><w>following</w><w>functions</w><w>:</w></s></p><p><s xml:id="s_uIkGjY"><w>1</w><pc>.</pc></s><s xml:id="s_TKFetf"><w>Filter</w><w>the</w><w>newspapers</w><w>dataset</w><w>using</w><w>the</w><w>command</w><code rend="inline"><w>filter</w><w>(</w><w>)</w></code><w>,</w><w>using</w><w>the</w><w>values</w><w>from</w><w>the</w><code rend="inline"><w>sliderInput</w></code><w>widget</w><pc>.</pc></s><s xml:id="s_OQhvUw"><w>These</w><w>values</w><w>are</w><w>accessed</w><w>using</w><code rend="inline"><w>input</w><w>$</w><w>&lt;</w><w>LABELNAME</w><w>&gt;</w></code><w>,</w><w>which</w><w>in</w><w>this</w><w>case</w><w>is</w><code rend="inline"><w>input</w><w>$</w><w>years</w></code><w>,</w><w>though</w><w>there</w><w>is</w><w>a</w><w>further</w><w>complication</w><w>to</w><w>note</w><pc>.</pc></s><s xml:id="s_giXVxT"><w>Remember</w><w>you</w><w>set</w><w>the</w><w>value</w><w>of</w><w>the</w><code rend="inline"><w>sliderInput</w></code><w>to</w><w>a</w><w>vector</w><w>of</w><w>length</w><w>two</w><w>,</w><w>so</w><w>that</w><w>a</w><w>range</w><w>could</w><w>be</w><w>selected</w><pc>?</pc></s><s xml:id="s_sIGoJw"><w>The</w><w>two</w><w>numbers</w><w>of</w><w>this</w><w>range</w><w>are</w><w>stored</w><w>in</w><code rend="inline"><w>input</w><w>$</w><w>years</w><w>[</w><w>1</w><w>]</w></code><w>and</w><code rend="inline"><w>input</w><w>$</w><w>years</w><w>[</w><w>2</w><w>]</w></code><pc>.</pc></s><s xml:id="s_MSZUbN"><w>These</w><w>are</w><w>the</w><w>values</w><w>which</w><w>you</w><w>need</w><w>to</w><w>access</w><w>in</w><w>order</w><w>to</w><w>filter</w><w>the</w><w>data</w><pc>.</pc></s><s xml:id="s_GbmNsC"><w>The</w><code rend="inline"><w>filter</w></code><w>function</w><w>returns</w><w>rows</w><w>of</w><w>a</w><w>dataframe</w><w>where</w><w>a</w><w>specified</w><w>set</w><w>of</w><w>conditions</w><w>are</w><w>true</w><w>:</w><w>in</w><w>this</w><w>case</w><w>,</w><w>where</w><w>the</w><w>column</w><code rend="inline"><w>first_date_held</w></code><w>is</w><w>greater</w><w>than</w><w>the</w><w>first</w><w>value</w><w>,</w><w>and</w><w>lesser</w><w>than</w><w>the</w><w>second</w><pc>.</pc></s></p><p><s xml:id="s_fHAgcN"><w>2</w><pc>.</pc></s><s xml:id="s_Q0TdId"><code rend="inline"><w>count</w><w>(</w><w>)</w></code><w>on</w><w>this</w><w>filtered</w><w>dataset</w><w>to</w><w>produce</w><w>a</w><w>dataframe</w><w>of</w><w>each</w><w>city</w><w>and</w><w>a</w><w>tally</w><w>of</w><w>the</w><w>times</w><w>they</w><w>occur</w><pc>.</pc></s><s xml:id="s_pMW9nP"><w>Specify</w><w>the</w><w>name</w><w>of</w><w>the</w><w>new</w><w>column</w><w>containing</w><w>the</w><w>tallies</w><w>with</w><w>the</w><w>argument</w><code rend="inline"><w>name</w><w>=</w></code><pc>.</pc></s></p><p><s xml:id="s_SWubIe"><w>3</w><pc>.</pc></s><s xml:id="s_jlw9PQ"><w>Perform</w><w>a</w><w>join</w><w>(</w><w>a</w><w>type</w><w>of</w><w>merge</w><w>which</w><w>matches</w><w>two</w><w>dataframes</w><w>together</w><w>based</w><w>on</w><w>a</w><w>common</w><w>key</w><w>)</w><w>to</w><w>merge</w><w>the</w><w>coordinates</w><w>dataframe</w><w>to</w><w>the</w><w>counts</w><w>dataframe</w><w>using</w><code rend="inline"><w>left_join</w><w>(</w><w>)</w></code><pc>.</pc></s><s xml:id="s_DEcysr"><w>You</w><w>should</w><w>specify</w><w>the</w><w>key</w><w>on</w><w>which</w><w>to</w><w>join</w><w>,</w><w>which</w><w>is</w><code rend="inline"><w>coverage_city</w></code><pc>.</pc></s></p><p><s xml:id="s_efcogT"><w>4</w><pc>.</pc></s><s xml:id="s_GCP2xV"><w>There</w><w>are</w><w>a</w><w>small</w><w>number</w><w>of</w><w>newspaper</w><w>titles</w><w>without</w><w>lat/long</w><w>coordinates</w><w>,</w><w>which</w><w>would</w><w>cause</w><w>an</w><w>error</w><w>when</w><w>creating</w><w>the</w><w>geographic</w><w>object</w><pc>.</pc></s><s xml:id="s_VGFuPe"><w>Filter</w><w>these</w><w>out</w><w>with</w><code rend="inline"><w>filter</w><w>(</w><pc>!</pc><w>is.na</w><w>(</w><w>lat</w><w>)</w><w>&amp;</w><pc>!</pc><w>is.na</w><w>(</w><w>lng</w><w>)</w><w>)</w></code></s></p><p><s xml:id="s_vVDTyp"><w>5</w><pc>.</pc></s><s xml:id="s_C7n25E"><w>Finally</w><w>,</w><w>turn</w><w>it</w><w>into</w><w>a</w><w>simple</w><w>features</w><w>object</w><w>,</w><w>using</w><code rend="inline"><w>st_as_sf</w><w>(</w><w>)</w></code><pc>.</pc></s><s xml:id="s_xTMYBi"><w>To</w><w>do</w><w>this</w><w>,</w><w>specify</w><w>the</w><w>lat/long</w><w>coordinates</w><w>columns</w><w>it</w><w>should</w><w>use</w><w>using</w><code rend="inline"><w>coords</w></code><w>,</w><w>and</w><w>then</w><w>use</w><code rend="inline"><w>st_set_crs</w></code><w>to</w><w>set</w><w>a</w><w>coordinate</w><w>reference</w><w>system</w><pc>.</pc></s><ref type="footnotemark" target="#en_note_4"/></p><p><s xml:id="s_oGJxqo"><w>This</w><w>simple</w><w>features</w><w>dataframe</w><w>can</w><w>be</w><w>accessed</w><w>in</w><w>any</w><w>reactive</w><w>context</w><w>by</w><w>Shiny</w><w>using</w><code rend="inline"><w>map_df</w><w>(</w><w>)</w></code><w>and</w><w>can</w><w>be</w><w>used</w><w>by</w><w>multiple</w><w>outputs</w><w>at</w><w>once</w><w>:</w><w>for</w><w>example</w><w>you</w><w>could</w><w>build</w><w>an</w><w>app</w><w>which</w><w>displays</w><w>both</w><w>a</w><w>map</w><w>and</w><w>a</w><w>bar</w><w>chart</w><w>,</w><w>each</w><w>using</w><w>the</w><w>same</w><w>reactive</w><w>object</w><pc>.</pc></s></p></div><div type="3" n="6.2"><head><s xml:id="s_SFPb4L"><w>Create</w><w>the</w><w>Leaflet</w><w>Map</w></s></head><p><s xml:id="s_sEBmvn"><w>The</w><w>last</w><w>thing</w><w>to</w><w>do</w><w>is</w><w>to</w><w>create</w><w>the</w><w>map</w><w>itself</w><pc>.</pc></s><s xml:id="s_sGFFXw"><w>This</w><w>is</w><w>done</w><w>using</w><w>the</w><w>library</w><code rend="inline"><w>leaflet</w></code><w>,</w><w>which</w><w>allows</w><w>for</w><w>interactive</w><w>,</w><w>zoomable</w><w>maps</w><pc>.</pc></s><s xml:id="s_RfBrzv"><w>It</w><w>works</w><w>particularly</w><w>well</w><w>with</w><w>Shiny</w><pc>.</pc></s><s xml:id="s_C0BLoX"><w>Add</w><w>the</w><w>following</w><w>code</w><w>within</w><w>the</w><code rend="inline"><w>server</w><w>(</w><w>)</w></code><w>element</w><w>,</w><w>just</w><w>underneath</w><w>the</w><code rend="inline"><w>map_df</w></code><w>reactive</w><w>element</w><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_12" corresp="code_shiny-leaflet-newspaper-map-tutorial_12.txt" rend="block"/></ab><p><s xml:id="s_eU8KdJ"><w>There</w><w>are</w><w>some</w><w>quite</w><w>complex</w><w>things</w><w>going</w><w>on</w><w>here</w><w>so</w><w>it</w><w>is</w><w>important</w><w>to</w><w>go</w><w>through</w><w>the</w><w>code</w><w>in</w><w>detail</w><pc>.</pc></s><s xml:id="s_o37fae"><w>In</w><w>Shiny</w><w>,</w><w>you</w><w>create</w><w>reactivity</w><w>by</w><w>connecting</w><w>to</w><pc>.</pc></s><hi rend="bold"><s xml:id="s_TYxy7O"><w>inputs</w></s></hi><hi rend="bold"><s xml:id="s_DHm0rn"><w>outputs</w></s></hi></p><p><s xml:id="s_3gpLed"><w>,</w><w>in</w><w>this</w><w>context</w><w>,</w><w>are</w><w>the</w><w>variables</w><w>adjusted</w><w>by</w><w>the</w><w>user</w><pc>.</pc></s><hi rend="bold"><s xml:id="s_WLlZWM"><w>Inputs</w></s></hi><s xml:id="s_BqMpei"><w>Remember</w><w>the</w><code rend="inline"><w>sliderInput</w><w>(</w><w>)</w></code><w>you</w><w>created</w><w>in</w><w>the</w><w>UI</w><w>above</w><w>,</w><w>with</w><w>the</w><w>label</w><w>'years</w><w>'</w><pc>?</pc></s><s xml:id="s_ONmG30"><w>We</w><w>'ve</w><w>already</w><w>seen</w><w>that</w><w>the</w><w>value</w><w>for</w><w>it</w><w>is</w><w>stored</w><w>by</w><w>Shiny</w><w>in</w><w>the</w><w>variable</w><code rend="inline"><w>input</w><w>$</w><w>years</w></code><pc>.</pc></s></p><p><s xml:id="s_H82lkg"><w>are</w><w>the</w><w>R</w><w>expressions</w><w>which</w><w>tell</w><w>Shiny</w><w>what</w><w>to</w><w>display</w><w>in</w><w>the</w><w>UI</w><w>and</w><w>are</w><w>created</w><w>,</w><w>in</w><w>the</w><w>server</w><w>,</w><w>with</w><w>the</w><w>variable</w><w>name</w><code rend="inline"><w>output</w><w>$</w><w>*</w></code><pc>.</pc></s><hi rend="bold"><s xml:id="s_TOPgU7"><w>Outputs</w></s></hi><s xml:id="s_obue1y"><w>Outputs</w><w>need</w><w>to</w><w>be</w><w>matched</w><w>to</w><w>a</w><w>UI</w><code rend="inline"><w>*</w><w>Output</w></code><w>element</w><pc>.</pc></s><s xml:id="s_DwAtXg"><w>In</w><w>the</w><w>UI</w><w>,</w><w>you</w><w>created</w><w>a</w><code rend="inline"><w>leaflet</w></code><w>output</w><w>with</w><w>the</w><w>label</w><code rend="inline"><w>map</w></code><w>using</w><w>the</w><w>code</w><code rend="inline"><w>leafletOutput</w><w>(</w><w>'map</w><w>'</w><w>)</w></code><pc>.</pc></s><s xml:id="s_vpXoZL"><w>This</w><w>should</w><w>be</w><w>matched</w><w>to</w><w>an</w><w>output</w><w>in</w><w>the</w><w>server</w><w>named</w><code rend="inline"><w>output</w><w>$</w><w>map</w></code><pc>.</pc></s></p><p><s xml:id="s_8k1ZiR"><w>In</w><w>turn</w><w>,</w><w>this</w><code rend="inline"><w>output</w><w>$</w><w>map</w></code><w>variable</w><w>should</w><w>be</w><w>set</w><w>to</w><w>a</w><w>Shiny</w><code rend="inline"><w>render</w><w>*</w></code><w>function</w><w>,</w><w>which</w><w>tells</w><w>Shiny</w><w>what</w><w>kind</w><w>of</w><w>object</w><w>is</w><w>to</w><w>be</w><w>rendered</w><w>in</w><w>the</w><w>UI</w><pc>.</pc></s><s xml:id="s_twMZtE"><w>The</w><w>one</w><w>we</w><w>need</w><w>is</w><w>called</w><code rend="inline"><w>renderLeaflet</w></code><w>,</w><w>which</w><w>tells</w><w>the</w><w>UI</w><w>to</w><w>output</w><w>a</w><w>map</w><w>created</w><w>by</w><w>the</w><code rend="inline"><w>leaflet</w></code><w>library</w><pc>.</pc></s><s xml:id="s_ijIlIV"><w>The</w><code rend="inline"><w>renderLeaflet</w></code><w>object</w><w>has</w><w>both</w><w>parentheses</w><w>and</w><w>curly</w><w>braces</w><w>,</w><w>just</w><w>like</w><w>the</w><w>reactive</w><w>object</w><w>we</w><w>created</w><w>above</w><pc>.</pc></s></p><p><s xml:id="s_B5nNM3"><w>The</w><w>Leaflet</w><w>map</w><w>itself</w><w>will</w><w>be</w><w>created</w><w>within</w><w>this</w><pc>.</pc></s><s xml:id="s_gNZxpN"><w>First</w><w>,</w><w>add</w><w>the</w><w>function</w><code rend="inline"><w>leaflet</w><w>(</w><w>)</w></code><pc>.</pc></s><s xml:id="s_VrGsac"><w>Next</w><w>,</w><w>add</w><w>the</w><w>default</w><w>tiles</w><w>(</w><w>the</w><w>zoomable</w><w>map</w><w>images</w><w>)</w><w>using</w><code rend="inline"><w>addTiles</w><w>(</w><w>)</w></code><pc>.</pc></s><s xml:id="s_xm9nrX"><w>Next</w><w>,</w><w>set</w><w>the</w><w>default</w><w>map</w><w>position</w><w>and</w><w>zoom</w><w>to</w><w>Britain</w><w>and</w><w>Ireland</w><w>using</w><w>the</w><w>command</w><code rend="inline"><w>setView</w><w>(</w><w>lng</w><w>=</w><w>-5</w><w>,</w><w>lat</w><w>=</w><w>54</w><w>,</w><w>zoom</w><w>=</w><w>5</w><w>)</w></code><pc>.</pc></s></p></div><div type="3" n="6.3"><head><s xml:id="s_xzEm0O"><w>Draw</w><w>Points</w><w>using</w><w>the</w><w>Reactive</w><w>Dataframe</w></s></head><p><s xml:id="s_CegSzM"><w>Pause</w><w>here</w><w>and</w><w>run</w><w>the</w><w>application</w><w>again</w><pc>.</pc></s><s xml:id="s_J9FYap"><w>All</w><w>being</w><w>well</w><w>,</w><w>you</w><w>should</w><w>see</w><w>an</w><w>interactive</w><w>map</w><w>of</w><w>Britain</w><w>and</w><w>Ireland</w><w>to</w><w>the</w><w>right</w><w>of</w><w>the</w><w>slider</w><pc>.</pc></s><s xml:id="s_NFQ6ww"><w>You</w><w>can</w><w>zoom</w><w>and</w><w>scroll</w><w>it</w><w>,</w><w>though</w><w>not</w><w>much</w><w>else</w><pc>.</pc></s><s xml:id="s_fZjFcf"><w>It</w><w>needs</w><w>to</w><w>be</w><w>populated</w><w>with</w><w>points</w><w>representing</w><w>the</w><w>count</w><w>of</w><w>titles</w><w>from</w><w>each</w><w>place</w><pc>.</pc></s></p><figure><desc><s xml:id="s_MlPs91"><w>Figure</w><w>5</w><pc>.</pc></s><s xml:id="s_qacbaf"><w>Screenshot</w><w>of</w><w>the</w><w>application</w><w>with</w><w>Leaflet</w><w>map</w><w>and</w><w>slider</w><w>input</w><w>widget</w><pc>.</pc></s></desc><figDesc><s xml:id="s_pXgTSq"><w>Figure</w><w>5</w><pc>.</pc></s><s xml:id="s_E4mKFw"><w>Screenshot</w><w>of</w><w>the</w><w>application</w><w>with</w><w>Leaflet</w><w>map</w><w>and</w><w>slider</w><w>input</w><w>widget</w><pc>.</pc></s></figDesc><graphic url="shiny-leaflet-newspaper-map-tutorial-5.png"/></figure><p><s xml:id="s_3yEme9"><w>To</w><w>do</w><w>this</w><w>,</w><w>use</w><w>the</w><w>command</w><code rend="inline"><w>addCircleMarkers</w><w>(</w><w>)</w></code><w>,</w><w>which</w><w>adds</w><w>a</w><w>graphical</w><w>layer</w><w>of</w><w>circles</w><w>to</w><w>the</w><code rend="inline"><w>leaflet</w></code><w>map</w><w>,</w><w>with</w><w>coordinates</w><w>taken</w><w>from</w><w>a</w><w>geographic</w><w>data</w><w>object</w><pc>.</pc></s><s xml:id="s_YQPrxh"><w>Using</w><w>the</w><code rend="inline"><w>%</w><w>&gt;</w><w>%</w></code><w>pipe</w><w>,</w><w>add</w><w>the</w><w>following</w><w>after</w><w>the</w><code rend="inline"><w>addCircleMarkers</w><w>(</w><w>)</w></code><w>function</w><w>(</w><w>see</w><w>the</w><ref target="#Final-code"><w>final</w><w>code</w></ref><w>if</w><w>you</w><w>'re</w><w>not</w><w>sure</w><w>where</w><w>this</w><w>should</w><w>go</w><w>)</w><w>:</w></s></p><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_13" corresp="code_shiny-leaflet-newspaper-map-tutorial_13.txt" rend="block"/></ab><p><s xml:id="s_LrtRr9"><w>Here</w><w>is</w><w>the</w><w>crucial</w><w>bit</w><w>:</w><w>instead</w><w>of</w><w>a</w><w>fixed</w><w>data</w><w>source</w><w>,</w><w>the</w><w>above</w><w>specifies</w><w>that</w><code rend="inline"><w>addCircleMarkers</w></code><w>should</w><w>use</w><w>the</w><w>reactive</w><w>dataframe</w><w>we</w><w>created</w><w>earlier</w><w>,</w><w>with</w><w>the</w><w>argument</w><code rend="inline"><w>data</w><w>=</w><w>map_df</w><w>(</w><w>)</w></code><pc>.</pc></s><s xml:id="s_z4lcJP"><w>Notice</w><w>that</w><w>unlike</w><w>regular</w><w>variables</w><w>in</w><w>R</w><w>,</w><w>this</w><w>has</w><w>a</w><w>pair</w><w>of</w><w>parentheses</w><w>after</w><w>it</w><w>,</w><w>denoting</w><w>that</w><w>it</w><w>is</w><w>a</w><w>special</w><w>reactive</w><w>variable</w><pc>.</pc></s><s xml:id="s_fonUmI"><w>Each</w><w>time</w><w>the</w><w>application</w><w>notices</w><w>a</w><w>change</w><w>to</w><w>this</w><w>reactive</w><w>object</w><w>,</w><w>it</w><w>will</w><w>redraw</w><w>the</w><w>map</w><w>with</w><w>the</w><w>new</w><w>data</w><pc>.</pc></s></p><p><s xml:id="s_wFIify"><w>At</w><w>this</w><w>point</w><w>you</w><w>can</w><w>also</w><w>set</w><w>the</w><w>radius</w><w>of</w><w>the</w><w>circles</w><w>to</w><w>correspond</w><w>to</w><w>the</w><w>column</w><w>containing</w><w>the</w><w>count</w><w>of</w><w>titles</w><w>for</w><w>each</w><w>place</w><w>,</w><w>using</w><code rend="inline"><w>radius</w><w>=</w><w>~sqrt</w><w>(</w><w>titles</w><w>)</w></code><pc>.</pc></s><s xml:id="s_mixZdX"><w>We</w><w>use</w><w>the</w><w>square</w><w>root</w><w>,</w><w>because</w><w>that</w><w>makes</w><w>the</w><w>area</w><w>of</w><w>the</w><w>circles</w><w>correctly</w><w>proportional</w><w>to</w><w>the</w><w>count</w><pc>.</pc></s></p></div><div type="3" n="6.4"><head><s xml:id="s_NwvnND"><w>Test</w><w>the</w><w>Application</w></s></head><p><s xml:id="s_wUPsZM"><w>It</w><w>'s</w><w>time</w><w>to</w><w>run</w><w>the</w><w>application</w><w>again</w><pc>.</pc></s><s xml:id="s_omlPVZ"><w>Now</w><w>,</w><w>there</w><w>should</w><w>be</w><w>variously-sized</w><w>circles</w><w>dotted</w><w>across</w><w>the</w><w>map</w><pc>.</pc></s><s xml:id="s_5lhloW"><w>Try</w><w>moving</w><w>or</w><w>dragging</w><w>the</w><w>sliders</w><w>-</w><w>the</w><w>map</w><w>should</w><w>update</w><w>with</w><w>every</w><w>change</w><pc>.</pc></s><s xml:id="s_IX2IRT"><w>Congratulations</w><w>,</w><w>you</w><w>'ve</w><w>made</w><w>your</w><w>first</w><w>Shiny</w><w>app</w><pc>!</pc></s></p><figure><desc><s xml:id="s_bzwr0j"><w>Figure</w><w>6</w><pc>.</pc></s><s xml:id="s_EH958w"><w>Animated</w><w>gif</w><w>demonstrating</w><w>the</w><w>Leaflet</w><w>map</w><w>updating</w><w>as</w><w>the</w><w>values</w><w>in</w><w>the</w><w>slider</w><w>input</w><w>widget</w><w>are</w><w>changed</w><pc>.</pc></s></desc><figDesc><s xml:id="s_pbPOMp"><w>Figure</w><w>6</w><pc>.</pc></s><s xml:id="s_aaVlZX"><w>Animated</w><w>gif</w><w>demonstrating</w><w>the</w><w>Leaflet</w><w>map</w><w>updating</w><w>as</w><w>the</w><w>values</w><w>in</w><w>the</w><w>slider</w><w>input</w><w>widget</w><w>are</w><w>changed</w><pc>.</pc></s></figDesc><graphic url="shiny-leaflet-newspaper-map-tutorial-6.gif"/></figure></div></div><div type="2" n="7"><head><s xml:id="s_2YDAlV"><w>Improving</w><w>the</w><w>Application</w></s></head><p><s xml:id="s_eL6cOd"><w>To</w><w>learn</w><w>more</w><w>about</w><w>Shiny</w><w>and</w><w>Leaflet</w><w>,</w><w>you</w><w>could</w><w>try</w><w>adding</w><w>some</w><w>of</w><w>the</w><w>following</w><w>features</w><w>to</w><w>your</w><w>application</w><w>:</w></s></p><p><s xml:id="s_I16xyn"><w>First</w><w>,</w><w>add</w><w>an</w><w>additional</w><w>user</w><w>input</w><w>to</w><w>filter</w><w>the</w><w>map</w><w>data</w><pc>.</pc></s><s xml:id="s_8g33qD"><w>Using</w><w>another</w><w>widget</w><w>,</w><code rend="inline"><w>selectInput</w></code><w>,</w><w>you</w><w>could</w><w>allow</w><w>a</w><w>user</w><w>to</w><w>display</w><w>data</w><w>from</w><w>just</w><w>one</w><w>of</w><w>the</w><w>four</w><w>countries</w><w>in</w><w>the</w><w>title</w><w>list</w><pc>.</pc></s><s xml:id="s_UsnGta"><w>Type</w><code rend="inline"><pc>?</pc><w>selectInput</w></code><w>into</w><w>the</w><w>console</w><w>to</w><w>get</w><w>help</w><w>on</w><w>the</w><w>parameters</w><w>you</w><w>need</w><w>to</w><w>do</w><w>this</w><w>correctly</w><pc>.</pc></s><s xml:id="s_8HF6E9"><w>Additional</w><w>inputs</w><w>can</w><w>be</w><w>placed</w><w>under</w><w>the</w><w>existing</w><code rend="inline"><w>sliderInput</w></code><w>,</w><w>separated</w><w>by</w><w>a</w><w>comma</w><pc>.</pc></s></p><p><s xml:id="s_3R6wWI"><w>Next</w><w>,</w><w>add</w><w>some</w><w>elements</w><w>to</w><w>the</w><w>Leaflet</w><w>map</w><pc>.</pc></s><s xml:id="s_fruOcE"><w>A</w><w>full</w><w>list</w><w>of</w><w>options</w><w>can</w><w>be</w><w>found</w><w>using</w><code rend="inline"><pc>?</pc><w>circleMarkers</w></code><w>in</w><w>RStudio</w><pc>.</pc></s><s xml:id="s_K1Hmrs"><w>For</w><w>example</w><w>,</w><w>you</w><w>can</w><w>add</w><w>a</w><w>label</w><w>to</w><w>the</w><w>points</w><w>with</w><code rend="inline"><w>label</w><w>=</w><w>coverage_city</w></code><pc>.</pc></s></p><p><s xml:id="s_4zfQbF"><w>You</w><w>'ll</w><w>notice</w><w>that</w><w>every</w><w>time</w><w>you</w><w>move</w><w>the</w><w>slider</w><w>,</w><w>the</w><w>entire</w><w>map</w><w>redraws</w><w>and</w><w>resets</w><w>its</w><w>view</w><w>,</w><w>which</w><w>is</w><w>n't</w><w>very</w><w>elegant</w><pc>.</pc></s><s xml:id="s_PZayYb"><w>This</w><w>can</w><w>be</w><w>fixed</w><w>using</w><w>another</w><w>function</w><w>called</w><code rend="inline"><w>leafletProxy</w></code><pc>.</pc></s><s xml:id="s_mr6AcC"><w>In</w><w>essence</w><w>,</w><w>create</w><w>an</w><w>empty</w><w>Leaflet</w><w>map</w><w>(</w><w>without</w><w>the</w><code rend="inline"><w>circleMarkers</w></code><w>)</w><w>as</w><w>above</w><pc>.</pc></s><s xml:id="s_mZsaoG"><w>Then</w><w>in</w><w>another</w><w>reactive</w><w>context</w><w>,</w><code rend="inline"><w>observe</w></code><w>,</w><w>you</w><w>'ll</w><w>add</w><w>the</w><w>code</w><w>to</w><w>redraw</w><w>the</w><w>changing</w><w>parts</w><w>of</w><w>the</w><w>map</w><w>,</w><w>using</w><code rend="inline"><w>leafletProxy</w></code><pc>.</pc></s><s xml:id="s_TPXfaW"><w>The</w><w>instructions</w><w>for</w><w>how</w><w>to</w><w>do</w><w>this</w><w>can</w><w>be</w><w>found</w><w>on</w><ref target="https://perma.cc/CZ84-CW9F"><w>Leaflet</w><w>'s</w><w>docs</w></ref><pc>.</pc></s></p></div><div type="2" n="8"><head><s xml:id="s_39YefV"><w>Conclusion</w></s></head><p><s xml:id="s_UqAgmN"><w>Interactive</w><w>visualisations</w><w>can</w><w>help</w><w>to</w><w>bring</w><w>new</w><w>insights</w><w>to</w><w>historical</w><w>data</w><pc>.</pc></s><s xml:id="s_KUjbjC"><w>In</w><w>this</w><w>tutorial</w><w>we</w><w>made</w><w>use</w><w>of</w><w>some</w><w>powerful</w><w>R</w><w>packages</w><w>,</w><w>such</w><w>as</w><w>the</w><code rend="inline"><w>tidyverse</w></code><w>and</w><code rend="inline"><w>leaflet</w><w>,</w></code><w>and</w><w>were</w><w>able</w><w>to</w><w>use</w><w>these</w><w>in</w><w>an</w><w>interactive</w><w>environment</w><w>,</w><w>rather</w><w>than</w><w>having</w><w>to</w><w>prepare</w><w>all</w><w>the</w><w>data</w><w>in</w><w>advance</w><pc>.</pc></s><s xml:id="s_GpixdX"><w>We</w><w>learned</w><w>how</w><w>and</w><w>why</w><w>we</w><w>might</w><w>use</w><w>reactive</w><w>programming</w><w>,</w><w>which</w><w>allows</w><w>us</w><w>to</w><w>create</w><w>dynamic</w><w>R</w><w>code</w><w>where</w><w>user</w><w>inputs</w><w>take</w><w>the</w><w>place</w><w>of</w><w>fixed</w><w>variables</w><pc>.</pc></s></p><p><s xml:id="s_HyOsFY"><w>This</w><w>approach</w><w>can</w><w>be</w><w>easily</w><w>adapted</w><w>to</w><w>suit</w><w>a</w><w>range</w><w>of</w><w>different</w><w>data</w><w>formats</w><w>and</w><w>modes</w><w>of</w><w>analysis</w><pc>.</pc></s><s xml:id="s_5YY2qq"><w>The</w><w>relatively</w><w>low</w><w>barrier</w><w>to</w><w>entry</w><w>makes</w><w>it</w><w>easy</w><w>to</w><w>create</w><w>quick</w><w>applications</w><w>which</w><w>can</w><w>make</w><w>working</w><w>with</w><w>large-scale</w><w>data</w><w>less</w><w>painful</w><pc>.</pc></s><s xml:id="s_5yPkAV"><w>Shiny</w><w>applications</w><w>are</w><w>also</w><w>a</w><w>useful</w><w>way</w><w>to</w><w>share</w><w>some</w><w>of</w><w>the</w><w>benefits</w><w>of</w><w>the</w><w>programming</w><w>capabilities</w><w>of</w><w>R</w><w>with</w><w>a</w><w>non-technical</w><w>audience</w><w>or</w><w>project</w><w>team</w><w>members</w><pc>.</pc></s><s xml:id="s_6IsB2J"><w>It</w><w>'s</w><w>relatively</w><w>easy</w><w>to</w><w>create</w><w>an</w><w>application</w><w>that</w><w>will</w><w>allow</w><w>a</w><w>user</w><w>to</w><w>visualize</w><w>their</w><w>own</w><w>data</w><w>analysis</w><w>with</w><w>R</w><w>,</w><w>without</w><w>having</w><w>to</w><w>actually</w><w>code</w><w>or</w><w>use</w><w>the</w><w>command</w><w>line</w><pc>.</pc></s></p></div><div type="2" n="9"><head><s xml:id="s_ts0bRh"><w>Final</w><w>code</w></s></head><ab><code xml:id="code_shiny-leaflet-newspaper-map-tutorial_14" corresp="code_shiny-leaflet-newspaper-map-tutorial_14.txt" rend="block"/></ab></div><div type="2" n="10"><head><s xml:id="s_uuJ8Vu"><w>End</w><w>Notes</w></s></head><p><s xml:id="s_wHS61Z"><ref type="footnotemark" target="#en_note_1"/><w>:</w><w>Yann</w><w>Ryan</w><w>and</w><w>Luke</w><w>McKernan</w><w>,</w><w>``</w><w>Converting</w><w>the</w><w>British</w><w>Library</w><w>'s</w><w>Catalogue</w><w>of</w><w>British</w><w>and</w><w>Irish</w><w>Newspapers</w><w>into</w><w>a</w><w>Public</w><w>Domain</w><w>Dataset</w><w>:</w><w>Processes</w><w>and</w><w>Applications</w><w>,</w><w>''</w><w>Journal</w><w>of</w><w>Open</w><w>Humanities</w><w>Data</w><w>7</w><w>,</w><w>no</w><pc>.</pc></s><s xml:id="s_zHLlQI"><w>0</w><w>(</w><w>January</w><w>22</w><w>,</w><w>2021</w><w>)</w><w>:</w><w>1</w><w>,</w><ref target="https://doi.org/10.5334/johd.23"><w>https</w><w>:</w><w>//doi.org/10.5334/johd.23</w></ref><pc>.</pc></s></p><p><s xml:id="s_bSJ2nR"><ref type="footnotemark" target="#en_note_2"/><w>:</w><w>Legal</w><w>Deposit</w><w>was</w><w>a</w><w>mechanism</w><w>by</w><w>which</w><w>publishers</w><w>were</w><w>obliged</w><w>to</w><w>give</w><w>the</w><w>British</w><w>Museum</w><w>(</w><w>and</w><w>subsequently</w><w>the</w><w>British</w><w>Library</w><w>)</w><w>a</w><w>copy</w><w>of</w><w>any</w><w>book</w><w>produced</w><w>,</w><w>including</w><w>newspapers</w><pc>.</pc></s></p><p><s xml:id="s_XIrgW2"><ref type="footnotemark" target="#en_note_3"/><w>:</w><w>The</w><w>server</w><w>object</w><w>is</w><w>actually</w><w>an</w><w>R</w><w>list</w><w>with</w><w>all</w><w>the</w><w>inputs</w><w>stored</w><w>in</w><w>the</w><w>first</w><w>element</w><w>,</w><w>called</w><w>input</w><w>,</w><w>and</w><w>all</w><w>the</w><w>outputs</w><w>stored</w><w>in</w><w>the</w><w>second</w><w>element</w><w>,</w><w>called</w><w>output</w><pc>.</pc></s></p><p><s xml:id="s_QjjS8X"><ref type="footnotemark" target="#en_note_4"/><w>:</w><w>Because</w><w>there</w><w>are</w><w>various</w><w>ways</w><w>to</w><w>transform</w><w>a</w><w>globe</w><w>into</w><w>a</w><w>2D</w><w>representation</w><w>,</w><w>displaying</w><w>geographic</w><w>data</w><w>correctly</w><w>requires</w><w>setting</w><w>a</w><w>coordinate</w><w>reference</w><w>system</w><pc>.</pc></s><s xml:id="s_WR73Dy"><w>4326</w><w>is</w><w>a</w><w>commonly-used</w><w>one</w><w>for</w><w>worldwide</w><w>geographic</w><w>data</w><pc>.</pc></s></p></div></body>
    </text>
</TEI>
