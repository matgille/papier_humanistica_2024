<TEI xmlns="http://www.tei-c.org/ns/1.0" xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="transcribing-handwritten-text-with-python-and-azure" type="original" xml:base="../../../../home/mgl/Bureau/Travail/Communications_et_articles/home/mgl/Bureau/Travail/Communications_et_articles/humanistica_PH/data/to_tei/transcribing-handwritten-text-with-python-and-azure/transcribing-handwritten-text-with-python-and-azure.xml">
    <teiHeader>
        <fileDesc>
            <titleStmt>
                <title>Transcribing Handwritten Text with Python and Microsoft Azure Computer Vision</title>
                <author role="original_author">Jeff Blackadar</author>
                <editor role="reviewers">
                    <persName>Maria Dermentzi</persName>
                    <persName>Megan S. Kane</persName>
                </editor>
                <editor role="editors">Giulia Taurino</editor>
            </titleStmt>
            <publicationStmt>
                <distributor>Programming Historian</distributor>
                <idno type="doi">10.46430/phen0114</idno>
                <date type="published">12/06/2023</date>
            </publicationStmt>
            <sourceDesc>
                <p>Born digital, in a markdown format. This lesson is original.</p>
            </sourceDesc>
        </fileDesc>
        <profileDesc>
            <abstract>
                <p>Tools for machine transcription of handwriting are practical and labour-saving if you need to analyse or present text in digital form. This lesson will explain how to write a Python program to transcribe handwritten documents using Microsoft's Azure Cognitive Services, a commercially available service that has a cost-free option for low volumes of use.</p>
            </abstract>
            <textClass>
                <keywords>
                    <term xml:lang="en">python</term>
                    <term xml:lang="en">api</term>
                    <term xml:lang="en">data-manipulation</term>
                </keywords>
            </textClass>
        </profileDesc>
    </teiHeader>
    <text xml:lang="en">
        <body><div type="2" n="1"><head><w>Lesson</w><w>Objectives</w></head><p><w>Tools</w><w>for</w><w>machine</w><w>transcription</w><w>of</w><w>handwriting</w><w>are</w><w>practical</w><w>and</w><w>labour-saving</w><w>if</w><w>you</w><w>need</w><w>to</w><w>analyse</w><w>or</w><w>present</w><w>text</w><w>in</w><w>digital</w><w>form</w><pc>.</pc><w>This</w><w>lesson</w><w>will</w><w>explain</w><w>how</w><w>to</w><w>write</w><w>a</w><w>Python</w><w>program</w><w>to</w><w>transcribe</w><w>handwritten</w><w>documents</w><w>using</w><w>Microsoft</w><w>'s</w><w>Azure</w><w>Cognitive</w><w>Services</w><w>,</w><w>a</w><w>commercially</w><w>available</w><w>service</w><w>that</w><w>has</w><w>a</w><w>cost-free</w><w>option</w><w>for</w><w>low</w><w>volumes</w><w>of</w><w>use</w><pc>.</pc></p></div><div type="2" n="2"><head><w>Introducing</w><w>Automated</w><w>Transcription</w></head><p><w>Handwritten</w><w>documents</w><w>are</w><w>appealing</w><w>artifacts</w><w>and</w><w>a</w><w>mainstay</w><w>of</w><w>research</w><w>for</w><w>many</w><w>historians</w><pc>.</pc><w>Sources</w><w>such</w><w>as</w><w>diaries</w><w>,</w><w>letters</w><w>,</w><w>logbooks</w><w>and</w><w>reports</w><w>connect</w><w>historians</w><w>to</w><w>writers</w><w>not</w><w>only</w><w>through</w><w>the</w><w>writer</w><w>'s</w><w>words</w><w>,</w><w>but</w><w>also</w><w>through</w><w>their</w><w>individual</w><w>writing</w><w>style</w><pc>.</pc><w>However</w><w>,</w><w>research</w><w>involving</w><w>large</w><w>amounts</w><w>of</w><w>these</w><w>documents</w><w>represents</w><w>a</w><w>significant</w><w>challenge</w><w>:</w><w>transcription</w><w>of</w><w>documents</w><w>into</w><w>digital</w><w>form</w><w>makes</w><w>them</w><w>more</w><w>searchable</w><w>,</w><w>but</w><w>hand</w><w>transcription</w><w>is</w><w>very</w><w>time-consuming</w><pc>.</pc><w>While</w><w>historians</w><w>have</w><w>been</w><w>able</w><w>to</w><w>digitize</w><w>physical</w><w>typewritten</w><w>documents</w><w>using</w><ref target="https://perma.cc/JKU7-CH6Q"><w>optical</w><w>character</w><w>recognition</w></ref><w>(</w><w>OCR</w><w>)</w><w>,</w><w>handwriting</w><w>,</w><w>with</w><w>its</w><w>individual</w><w>styles</w><w>,</w><w>has</w><w>until</w><w>recently</w><w>resisted</w><w>recognition</w><w>by</w><w>computers</w><pc>.</pc></p><p><w>Digitally</w><w>transcribing</w><w>symbols</w><w>,</w><w>whether</w><w>typed</w><w>,</w><w>printed</w><w>or</w><w>written</w><w>,</w><w>is</w><w>a</w><w>form</w><w>of</w><w>pattern</w><w>matching</w><pc>.</pc><w>OCR</w><w>for</w><w>typed</w><w>characters</w><w>recognizes</w><w>the</w><w>patterns</w><w>that</w><w>make</w><w>up</w><w>a</w><w>letter</w><w>through</w><w>a</w><w>set</w><w>of</w><w>codified</w><w>rules</w><pc>.</pc><w>In</w><w>order</w><w>to</w><w>gain</w><w>the</w><w>ability</w><w>to</w><w>recognize</w><w>handwriting</w><w>using</w><w>deep</w><w>learning</w><w>,</w><w>the</w><w>computer</w><w>goes</w><w>through</w><w>a</w><w>special</w><w>training</w><w>process</w><pc>.</pc><w>It</w><w>is</w><w>fed</w><w>a</w><w>large</w><w>number</w><w>of</w><w>images</w><w>of</w><w>written</w><w>letters</w><w>–</w><w>for</w><w>example</w><w>,</w><w>the</w><w>letter</w><w>A</w><w>–</w><w>along</w><w>with</w><w>data</w><w>telling</w><w>the</w><w>computer</w><w>which</w><w>letter</w><w>it</w><w>is</w><w>being</w><w>shown</w><pc>.</pc><w>Throughout</w><w>this</w><w>training</w><w>,</w><w>the</w><w>computer</w><w>learns</w><w>to</w><w>recognize</w><w>various</w><w>similar</w><w>visual</w><w>patterns</w><w>of</w><w>a</w><w>written</w><w>A</w><w>and</w><w>differentiates</w><w>them</w><w>from</w><w>other</w><w>letters</w><pc>.</pc><w>This</w><w>training</w><w>process</w><w>requires</w><w>carefully</w><w>classifying</w><w>a</w><w>lot</w><w>of</w><w>data</w><w>and</w><w>demands</w><w>a</w><w>substantial</w><w>amount</w><w>of</w><w>computer</w><w>processing</w><pc>.</pc><w>This</w><w>is</w><w>a</w><w>specialized</w><w>and</w><w>labour-intensive</w><w>process</w><pc>.</pc><w>It</w><w>is</w><w>also</w><w>important</w><w>to</w><w>note</w><w>that</w><w>a</w><w>recognition</w><w>model</w><w>based</w><w>on</w><w>deep</w><w>learning</w><w>reflects</w><w>the</w><w>biases</w><w>both</w><w>from</w><w>the</w><w>data</w><w>it</w><w>was</w><w>trained</w><w>on</w><w>and</w><w>from</w><w>the</w><w>ways</w><w>in</w><w>which</w><w>this</w><w>data</w><w>was</w><w>selected</w><pc>.</pc></p><div type="3" n="2.1"><head><w>Commercial</w><w>Transcription</w><w>Services</w></head><p><w>While</w><w>training</w><w>a</w><w>customized</w><w>handwriting</w><w>recognition</w><w>model</w><w>is</w><w>possible</w><w>and</w><w>sometimes</w><w>required</w><w>,</w><w>it</w><w>remains</w><w>very</w><w>difficult</w><pc>.</pc><w>Fortunately</w><w>,</w><w>ready-trained</w><w>handwriting</w><w>recognition</w><w>services</w><w>are</w><w>available</w><w>commercially</w><pc>.</pc><ref target="https://perma.cc/YD7L-9CEZ"><w>Microsoft</w></ref><w>,</w><ref target="https://cloud.google.com/vision/docs/handwriting"><w>Google</w><w>Cloud</w><w>Platform</w></ref><w>and</w><ref target="https://aws.amazon.com/textract/"><w>Amazon</w><w>Web</w><w>Services</w></ref><w>are</w><w>companies</w><w>that</w><w>offer</w><w>handwriting</w><w>recognition</w><w>services</w><w>over</w><w>the</w><w>web</w><pc>.</pc><w>These</w><w>services</w><w>equip</w><w>the</w><w>historian</w><w>who</w><w>would</w><w>like</w><w>a</w><w>faster</w><w>means</w><w>to</w><w>transcribe</w><w>handwritten</w><w>documents</w><w>,</w><w>as</w><w>long</w><w>as</w><w>these</w><w>documents</w><w>are</w><w>legible</w><w>and</w><w>in</w><w>a</w><w>writing</w><w>system</w><w>that</w><w>is</w><w>recognizable</w><w>by</w><w>the</w><w>service</w><pc>.</pc></p><p><w>These</w><w>commercially</w><w>based</w><w>services</w><w>perform</w><w>more</w><w>reliably</w><w>with</w><w>legible</w><w>handwriting</w><w>in</w><w>a</w><w>standardized</w><w>presentation</w><w>,</w><w>such</w><w>as</w><w>being</w><w>written</w><w>on</w><w>straight</w><w>lines</w><pc>.</pc><w>The</w><w>services</w><w>all</w><w>recognize</w><w>the</w><w>roman</w><w>alphabet</w><w>,</w><w>and</w><w>certain</w><w>services</w><w>(</w><w>but</w><w>not</w><w>all</w><w>)</w><w>also</w><w>support</w><w>other</w><w>forms</w><w>of</w><w>writing</w><w>,</w><w>like</w><w>the</w><w>Arabic</w><w>alphabet</w><pc>.</pc><w>You</w><w>can</w><w>check</w><w>which</w><w>languages</w><w>each</w><w>service</w><w>supports</w><w>on</w><w>the</w><w>following</w><w>pages</w><w>:</w><ref target="https://perma.cc/2T5M-DT2Y"><w>Microsoft</w></ref><w>,</w><ref target="https://perma.cc/5TVV-5GP2"><w>Google</w><w>Cloud</w><w>Platform</w></ref><w>and</w><ref target="https://perma.cc/V6KN-VPL3"><w>Amazon</w><w>Web</w><w>Services</w></ref><pc>.</pc><w>Automated</w><w>transcription</w><w>will</w><w>also</w><w>struggle</w><w>to</w><w>recognize</w><w>handwriting</w><w>that</w><w>is</w><w>only</w><w>lightly</w><w>visible</w><w>,</w><w>such</w><w>as</w><w>pencil</w><w>,</w><w>or</w><w>otherwise</w><w>poorly</w><w>contrasted</w><pc>.</pc><w>Despite</w><w>these</w><w>limitations</w><w>,</w><w>however</w><w>,</w><w>handwriting</w><w>recognition</w><w>is</w><w>now</w><w>a</w><w>useful</w><w>and</w><w>practical</w><w>tool</w><w>for</w><w>historians</w><w>who</w><w>need</w><w>to</w><w>transcribe</w><w>documents</w><pc>.</pc></p></div><div type="3" n="2.2"><head><w>On</w><w>Microsoft</w><w>Azure</w><w>'s</w><w>Cognitive</w><w>Services</w></head><p><w>For</w><w>this</w><w>lesson</w><w>,</w><w>we</w><w>will</w><w>use</w><w>Microsoft</w><w>'s</w><w>Azure</w><w>Cognitive</w><w>Services</w><w>to</w><w>transcribe</w><w>handwriting</w><pc>.</pc><w>Azure</w><w>Cognitive</w><w>Services</w><w>is</w><w>accessed</w><w>only</w><w>over</w><w>the</w><w>web</w><w>–</w><w>it</w><w>is</w><w>not</w><w>a</w><w>desktop</w><w>application</w><w>on</w><w>your</w><w>computer</w><pc>.</pc><w>Your</w><w>computer</w><w>connects</w><w>to</w><w>it</w><w>and</w><w>sends</w><w>it</w><w>images</w><w>to</w><w>process</w><w>for</w><w>handwriting</w><w>recognition</w><pc>.</pc><w>Azure</w><w>Cognitive</w><w>Services</w><w>replies</w><w>with</w><w>the</w><w>text</w><w>it</w><w>detects</w><w>in</w><w>an</w><w>image</w><pc>.</pc><w>Azure</w><w>Cognitive</w><w>Services</w><w>performs</w><w>reliably</w><w>with</w><w>handwritten</w><w>documents</w><w>and</w><w>,</w><w>based</w><w>on</w><w>personal</w><w>usage</w><w>,</w><w>it</w><w>performs</w><w>as</w><w>well</w><w>as</w><w>Google</w><w>or</w><w>Amazon</w><w>Web</w><w>Services</w><w>on</w><w>documents</w><w>written</w><w>in</w><w>English</w><w>and</w><w>French</w><pc>.</pc><w>Microsoft</w><w>Azure</w><w>'s</w><w>Cognitive</w><w>Services</w><w>has</w><w>a</w><w>free</w><w>tier</w><w>of</w><w>service</w><w>available</w><pc>.</pc></p><p><w>Microsoft</w><w>'s</w><w>Azure</w><w>Cognitive</w><w>Services</w><w>can</w><w>be</w><w>harnessed</w><w>to</w><w>transcribe</w><w>typed</w><w>text</w><w>,</w><w>handwriting</w><w>,</w><w>or</w><w>a</w><w>combination</w><w>of</w><w>both</w><pc>.</pc><w>It</w><w>can</w><w>transcribe</w><w>diaries</w><w>,</w><w>letters</w><w>,</w><w>forms</w><w>,</w><w>logbooks</w><w>and</w><w>research</w><w>notes</w><pc>.</pc><w>I</w><w>have</w><w>also</w><w>used</w><w>it</w><w>to</w><w>transcribe</w><w>maps</w><w>and</w><w>diagrams</w><pc>.</pc><w>The</w><w>potential</w><w>uses</w><w>for</w><w>Digital</w><w>History</w><w>are</w><w>numerous</w><pc>!</pc></p><p><w>Transcription</w><w>with</w><w>Azure</w><w>Cognitive</w><w>Services</w><w>is</w><w>well</w><w>documented</w><w>,</w><w>but</w><w>does</w><w>require</w><w>some</w><w>programming</w><w>,</w><w>hence</w><w>this</w><w>lesson</w><pc>.</pc></p></div></div><div type="2" n="3"><head><w>Prerequisites</w></head><list type="unordered"><item><w>Knowledge</w><w>of</w><w>Python</w><w>is</w><w>not</w><w>required</w><w>,</w><w>since</w><w>all</w><w>of</w><w>the</w><w>code</w><w>is</w><w>provided</w><w>in</w><w>the</w><w>lesson</w><pc>.</pc><w>That</w><w>said</w><w>,</w><w>basic</w><w>Python</w><w>knowledge</w><w>would</w><w>be</w><w>useful</w><w>for</w><w>users</w><w>who</w><w>wish</w><w>to</w><w>understand</w><w>the</w><w>code</w><w>or</w><w>to</w><w>tweak</w><w>it</w><w>for</w><w>their</w><w>purposes</w><pc>.</pc></item><item><w>This</w><w>lesson</w><w>was</w><w>written</w><w>with</w><ref target="https://colab.research.google.com/"><w>Google</w><w>Colab</w></ref><w>,</w><w>a</w><w>web-based</w><w>virtual</w><w>Python</w><w>programming</w><w>platform</w><pc>.</pc><w>If</w><w>you</w><w>choose</w><w>to</w><w>use</w><w>Google</w><w>Colab</w><w>to</w><w>program</w><w>Python</w><w>(</w><w>which</w><w>I</w><w>recommend</w><w>)</w><w>,</w><w>you</w><w>will</w><w>need</w><w>a</w><w>Google</w><w>account</w><pc>.</pc><w>If</w><w>you</w><w>choose</w><w>to</w><w>run</w><w>the</w><w>code</w><w>in</w><w>this</w><w>tutorial</w><w>locally</w><w>on</w><w>your</w><w>own</w><w>machine</w><w>,</w><w>you</w><w>will</w><w>need</w><w>to</w><w>install</w><ref target="https://www.python.org/downloads/"><w>Python</w><w>3.x</w></ref><w>and</w><ref target="https://pypi.org/project/pip/"><w>pip</w></ref><pc>.</pc></item><item><w>An</w><w>internet</w><w>connection</w><pc>.</pc></item><item><w>A</w><w>credit</w><w>card</w><w>or</w><w>debit</w><w>card</w><pc>.</pc><w>(</w><w>Though</w><w>there</w><w>is</w><w>a</w><w>free</w><w>tier</w><w>of</w><w>service</w><w>for</w><w>Microsoft</w><w>,</w><w>you</w><w>are</w><w>required</w><w>to</w><w>put</w><w>a</w><w>credit</w><w>or</w><w>debit</w><w>card</w><w>on</w><w>file</w><pc>.</pc><w>The</w><w>card</w><w>is</w><w>not</w><w>charged</w><w>if</w><w>the</w><w>number</w><w>of</w><w>files</w><w>processed</w><w>is</w><w>below</w><w>5,000</w><w>each</w><w>month</w><pc>.</pc><w>)</w></item><item><w>A</w><w>telephone</w><w>number</w><pc>.</pc><w>(</w><w>This</w><w>is</w><w>to</w><w>verify</w><w>your</w><w>identity</w><pc>.</pc><w>)</w></item></list><p><w>For</w><w>further</w><w>information</w><w>on</w><w>transcription</w><w>,</w><w>previous</w><emph><w>Programming</w><w>Historian</w></emph><w>lessons</w><w>which</w><w>have</w><w>demonstrated</w><w>typed</w><w>text</w><w>recognition</w><w>include</w><w>:</w><w>Andrew</w><w>Akhlaghi</w><w>'s</w><ref target="/en/lessons/OCR-and-Machine-Translation"><w>OCR</w><w>and</w><w>Machine</w><w>Translation</w></ref><w>,</w><w>Moritz</w><w>Mähr</w><w>'s</w><ref target="/en/lessons/working-with-batches-of-pdf-files"><w>Working</w><w>with</w><w>batches</w><w>of</w><w>PDF</w><w>files</w></ref><w>,</w><w>Laura</w><w>Turner</w><w>O'Hara</w><w>'s</w><ref target="/en/lessons/cleaning-ocrd-text-with-regular-expressions"><w>Cleaning</w><w>OCR</w><w>’</w><w>d</w><w>text</w><w>with</w><w>Regular</w><w>Expressions</w></ref><w>and</w><w>Jon</w><w>Crump</w><w>'s</w><ref target="/en/lessons/generating-an-ordered-data-set-from-an-OCR-text-file"><w>Generating</w><w>an</w><w>Ordered</w><w>Data</w><w>Set</w><w>from</w><w>an</w><w>OCR</w><w>Text</w><w>File</w></ref><pc>.</pc><w>Recent</w><w>advances</w><w>in</w><w>artificial</w><w>intelligence</w><w>now</w><w>allow</w><w>historians</w><w>to</w><w>automatically</w><w>transcribe</w><w>handwritten</w><w>documents</w><w>,</w><w>within</w><w>the</w><w>limits</w><w>of</w><w>the</w><w>writing</w><w>systems</w><w>used</w><w>,</w><w>the</w><w>language</w><w>and</w><w>the</w><w>legibility</w><w>of</w><w>the</w><w>handwriting</w><pc>.</pc><w>Indeed</w><w>,</w><w>with</w><w>the</w><w>advent</w><w>of</w><w>computer</w><w>algorithms</w><w>referred</w><w>to</w><w>as</w><ref target="https://perma.cc/A522-65P6"><w>deep</w><w>learning</w></ref><w>,</w><w>computers</w><w>have</w><w>achieved</w><w>a</w><w>level</w><w>of</w><w>generalized</w><w>pattern</w><w>recognition</w><w>that</w><w>allows</w><w>them</w><w>to</w><w>recognize</w><w>handwritten</w><w>characters</w><w>,</w><w>even</w><w>across</w><w>various</w><w>writers</w><w>'</w><w>handwriting</w><w>styles</w><pc>.</pc><w>Another</w><w>lesson</w><w>to</w><w>refer</w><w>to</w><w>is</w><w>Isabelle</w><w>Gribomont</w><w>'s</w><ref target="/en/lessons/ocr-with-google-vision-and-tesseract"><w>OCR</w><w>with</w><w>Google</w><w>Vision</w><w>API</w><w>and</w><w>Tesseract</w></ref><w>:</w><w>it</w><w>provides</w><w>a</w><w>method</w><w>to</w><w>combine</w><w>Google</w><w>Cloud</w><w>Platform</w><w>’</w><w>s</w><w>character</w><w>recognition</w><w>with</w><w>Tesseract</w><w>’</w><w>s</w><w>layout</w><w>detection</w><pc>.</pc><w>Tesseract</w><w>’</w><w>s</w><w>layout</w><w>detection</w><w>capability</w><w>could</w><w>possibly</w><w>be</w><w>combined</w><w>with</w><w>Microsoft</w><w>Azure</w><w>'s</w><w>Cognitive</w><w>Services</w><w>'</w><w>handwriting</w><w>recognition</w><w>,</w><w>to</w><w>improve</w><w>the</w><w>structure</w><w>of</w><w>the</w><w>transcribed</w><w>text</w><pc>.</pc></p></div><div type="2" n="4"><head><w>Setting</w><w>up</w><w>Azure</w><w>Computer</w><w>Vision</w></head><div type="3" n="4.1"><head><w>Step</w><w>1</w><pc>.</pc><w>Registering</w><w>for</w><w>a</w><w>personal</w><w>Microsoft</w><w>account</w></head><p><w>To</w><w>use</w><w>Azure</w><w>Computer</w><w>Vision</w><w>,</w><w>you</w><w>need</w><w>to</w><w>log</w><w>in</w><w>with</w><w>a</w><w>Microsoft</w><w>account</w><pc>.</pc><w>If</w><w>you</w><w>already</w><w>have</w><w>a</w><w>personal</w><w>Microsoft</w><w>or</w><w>Github</w><w>account</w><w>,</w><w>skip</w><w>this</w><w>section</w><w>and</w><w>start</w><w>from</w><w>Step</w><w>2</w><pc>.</pc><w>If</w><w>you</w><w>already</w><w>have</w><w>a</w><w>Microsoft</w><w>account</w><w>for</w><w>work</w><w>or</w><w>school</w><w>,</w><w>you</w><w>may</w><w>not</w><w>be</w><w>able</w><w>to</w><w>access</w><w>Azure</w><w>Cognitive</w><w>Services</w><w>from</w><w>that</w><w>account</w><pc>.</pc><w>If</w><w>so</w><w>,</w><w>just</w><w>register</w><w>for</w><w>a</w><w>separate</w><w>personal</w><w>account</w><w>using</w><w>a</w><w>different</w><w>e-mail</w><w>address</w><pc>.</pc></p><p><w>a</w><w>)</w><w>Go</w><w>to</w><ref target="https://portal.azure.com/"><w>https</w><w>:</w><w>//portal.azure.com/</w></ref><pc>.</pc></p><p><w>b</w><w>)</w><w>If</w><w>you</w><w>do</w><w>n't</w><w>have</w><w>an</w><w>account</w><w>,</w><w>register</w><w>by</w><w>clicking</w><emph><w>No</w><w>account</w><pc>?</pc><w>Create</w><w>one</w><pc>!</pc></emph><pc>.</pc></p><p><w>c</w><w>)</w><w>Input</w><w>your</w><w>e-mail</w><w>address</w><w>and</w><w>follow</w><w>the</w><w>prompts</w><pc>.</pc></p><p><w>d</w><w>)</w><w>Check</w><w>your</w><w>e-mail</w><w>inbox</w><w>for</w><w>a</w><w>verification</w><w>code</w><w>and</w><w>input</w><w>this</w><w>into</w><w>the</w><w>web</w><w>browser</w><pc>.</pc></p></div><div type="3" n="4.2"><head><w>Step</w><w>2</w><pc>.</pc><w>Creating</w><w>a</w><w>``</w><w>Computer</w><w>Vision</w><w>''</w><w>Resource</w><w>in</w><w>Azure</w></head><p><w>Azure</w><w>Computer</w><w>Vision</w><w>uses</w><w>a</w><w>virtual</w><w>computer</w><w>resource</w><w>to</w><w>process</w><w>the</w><w>images</w><w>you</w><w>send</w><w>it</w><pc>.</pc><w>In</w><w>this</w><w>step</w><w>,</w><w>we</w><w>will</w><w>create</w><w>that</w><w>resource</w><pc>.</pc></p><p><w>a</w><w>)</w><w>Go</w><w>to</w><ref target="https://portal.azure.com/"><w>https</w><w>:</w><w>//portal.azure.com/</w></ref><pc>.</pc></p><p><w>b</w><w>)</w><w>Click</w><emph><w>+</w><w>Create</w><w>a</w><w>resource</w></emph><pc>.</pc><w>You</w><w>will</w><w>need</w><w>to</w><w>do</w><w>this</w><w>twice</w><pc>.</pc><w>The</w><w>first</w><w>time</w><w>is</w><w>to</w><w>set</w><w>up</w><w>your</w><w>payment</w><w>method</w><w>as</w><w>noted</w><w>below</w><pc>.</pc></p><figure><desc><w>Figure</w><w>1</w><pc>.</pc><w>+</w><w>Create</w><w>a</w><w>resource</w><pc>.</pc></desc><figDesc><w>Picture</w><w>of</w><w>the</w><w>Create</w><w>a</w><w>resource</w><w>+</w><w>icon</w><w>and</w><w>link</w><pc>.</pc></figDesc><graphic url="en-or-transcribing-handwritten-text-with-python-and-azure-01.png"/></figure><p><w>c</w><w>)</w><w>In</w><w>the</w><hi rend="bold"><w>Search</w><w>Services</w><w>and</w><w>Marketplace</w></hi><w>box</w><w>,</w><w>type</w><w>``</w><w>Computer</w><w>Vision</w><w>''</w><w>and</w><w>press</w><emph><w>Enter</w></emph><pc>.</pc><w>When</w><w>the</w><w>search</w><w>results</w><w>open</w><w>,</w><w>click</w><emph><w>Create</w></emph><w>under</w><w>the</w><w>heading</w><hi rend="bold"><w>Computer</w><w>Vision</w></hi><pc>.</pc></p><p><w>d</w><w>)</w><w>Click</w><emph><w>Start</w><w>with</w><w>an</w><w>Azure</w><w>free</w><w>trial</w></emph><pc>.</pc><w>(</w><w>If</w><w>your</w><w>account</w><w>is</w><w>not</w><w>eligible</w><w>for</w><w>an</w><w>Azure</w><w>free</w><w>trial</w><w>,</w><w>you</w><w>will</w><w>have</w><w>to</w><w>use</w><w>pay-as-you-go</w><w>pricing</w><pc>.</pc><w>You</w><w>will</w><w>still</w><w>have</w><w>a</w><w>free</w><w>level</w><w>of</w><w>consumption</w><w>,</w><w>if</w><w>you</w><w>have</w><w>not</w><w>spent</w><w>it</w><w>already</w><pc>.</pc><w>)</w></p><p><w>e</w><w>)</w><w>Input</w><w>a</w><w>telephone</w><w>number</w><w>to</w><w>verify</w><w>your</w><w>identity</w><pc>.</pc></p><p><w>f</w><w>)</w><w>Input</w><w>your</w><w>contact</w><w>information</w><w>and</w><w>credit</w><w>card</w><w>number</w><pc>.</pc><w>Microsoft</w><w>will</w><w>verify</w><w>the</w><w>information</w><pc>.</pc><w>Once</w><w>this</w><w>is</w><w>done</w><w>,</w><w>return</w><w>to</w><w>the</w><ref target="https://portal.azure.com/"><w>Azure</w><w>portal</w></ref><pc>.</pc><w>You</w><w>can</w><w>do</w><w>this</w><w>by</w><w>clicking</w><w>the</w><emph><w>Go</w><w>to</w><w>Azure</w><w>portal</w></emph><w>button</w><w>and</w><w>then</w><w>clicking</w><w>the</w><emph><w>Home</w></emph><w>link</w><pc>.</pc></p><p><w>g</w><w>)</w><w>Click</w><emph><w>+</w><w>Create</w><w>a</w><w>resource</w></emph><w>for</w><w>the</w><w>second</w><w>time</w><w>(</w><w>see</w><w>Figure</w><w>1</w><w>above</w><w>)</w><pc>.</pc><w>This</w><w>will</w><w>create</w><w>the</w><w>instance</w><w>of</w><w>Computer</w><w>Vision</w><w>which</w><w>you</w><w>will</w><w>use</w><pc>.</pc></p><p><w>h</w><w>)</w><w>In</w><w>the</w><hi rend="bold"><w>Search</w><w>Services</w><w>and</w><w>Marketplace</w></hi><w>box</w><w>,</w><w>type</w><w>``</w><w>Computer</w><w>Vision</w><w>''</w><w>and</w><w>press</w><emph><w>Enter</w></emph><pc>.</pc><w>When</w><w>the</w><w>search</w><w>results</w><w>open</w><w>,</w><w>click</w><emph><w>Create</w></emph><w>under</w><w>the</w><w>heading</w><hi rend="bold"><w>Computer</w><w>Vision</w></hi><pc>.</pc></p><p><w>i</w><w>)</w><w>In</w><w>the</w><hi rend="bold"><w>Create</w><w>Computer</w><w>Vision</w></hi><w>screen</w><w>,</w><hi rend="bold"><w>Basics</w></hi><w>tab</w><w>,</w><hi rend="bold"><w>Project</w><w>Details</w></hi><w>section</w><w>,</w><w>set</w><w>the</w><hi rend="bold"><w>Subscription</w></hi><w>field</w><w>to</w><w>an</w><w>available</w><w>choice</w><w>,</w><w>such</w><w>as</w><w>``</w><w>Free</w><w>Trial</w><w>''</w><pc>.</pc><w>For</w><hi rend="bold"><w>Resource</w><w>group</w></hi><w>,</w><w>click</w><emph><w>Create</w><w>new</w></emph><w>and</w><w>name</w><w>it</w><code rend="inline"><w>resource_group_transcription</w></code><pc>.</pc><w>Click</w><emph><w>OK</w></emph><pc>.</pc></p><figure><desc><w>Figure</w><w>2</w><pc>.</pc><w>+</w><w>Resource</w><w>group</w><w>\|</w><w>Create</w><w>new</w><pc>.</pc></desc><figDesc><w>Picture</w><w>of</w><w>the</w><w>Create</w><w>Computer</w><w>Vision</w><w>window</w><pc>.</pc></figDesc><graphic url="en-or-transcribing-handwritten-text-with-python-and-azure-02.png"/></figure><p><w>j</w><w>)</w><w>In</w><w>the</w><hi rend="bold"><w>Instance</w><w>Details</w></hi><w>section</w><w>,</w><w>select</w><w>a</w><w>region</w><w>,</w><w>input</w><w>a</w><w>unique</w><w>name</w><w>and</w><w>set</w><hi rend="bold"><w>Pricing</w><w>tier</w></hi><w>to</w><w>``</w><w>Free</w><w>F0</w><w>''</w><pc>.</pc></p><p><w>k</w><w>)</w><w>Read</w><w>the</w><emph><w>Responsible</w><w>AI</w><w>Notice</w></emph><w>and</w><w>check</w><w>the</w><w>box</w><pc>.</pc><w>The</w><hi rend="bold"><w>Identity</w></hi><w>and</w><hi rend="bold"><w>Tags</w></hi><w>tabs</w><w>can</w><w>be</w><w>left</w><w>with</w><w>default</w><w>values</w><pc>.</pc><w>They</w><w>are</w><w>relevant</w><w>only</w><w>if</w><w>you</w><w>are</w><w>using</w><w>this</w><w>in</w><w>combination</w><w>with</w><w>other</w><w>Microsoft</w><w>Azure</w><w>services</w><pc>.</pc></p><p><w>l</w><w>)</w><w>Click</w><emph><w>Review</w><w>+</w><w>create</w></emph><w>,</w><w>then</w><w>click</w><emph><w>Create</w></emph><pc>.</pc></p><p><w>m</w><w>)</w><w>When</w><w>you</w><w>see</w><w>the</w><w>message</w><w>``</w><w>Your</w><w>deployment</w><w>is</w><w>complete</w><w>''</w><w>,</w><w>you</w><w>can</w><w>click</w><emph><w>Go</w><w>to</w><w>resource</w></emph><w>and</w><w>start</w><w>on</w><w>Step</w><w>3</w><pc>.</pc></p></div><div type="3" n="4.3"><head><w>Step</w><w>3</w><pc>.</pc><w>Creating</w><w>and</w><w>storing</w><w>a</w><w>secret</w><w>key</w><w>and</w><w>endpoint</w><w>to</w><w>access</w><w>Computer</w><w>Vision</w></head><p><w>To</w><w>use</w><w>the</w><w>service</w><w>,</w><w>your</w><w>computer</w><w>program</w><w>must</w><w>send</w><w>a</w><w>password</w><w>key</w><w>to</w><w>an</w><w>endpoint</w><w>URL</w><w>at</w><w>Microsoft</w><w>Azure</w><pc>.</pc><w>The</w><w>use</w><w>of</w><w>a</w><w>URL</w><w>to</w><w>send</w><w>and</w><w>receive</w><w>data</w><w>is</w><w>a</w><w>standard</w><w>method</w><w>for</w><w>using</w><w>cloud-based</w><w>services</w><w>like</w><w>Microsoft</w><w>Azuew</w><pc>.</pc><w>Secret</w><w>keys</w><w>are</w><w>a</w><w>commonly</w><w>used</w><w>mechanism</w><w>to</w><w>protect</w><w>cloud-based</w><w>services</w><w>from</w><w>unauthorized</w><w>users</w><pc>.</pc><w>As</w><w>it</w><w>says</w><w>on</w><w>Azure</w><w>:</w><w>``</w><w>Do</w><w>not</w><w>share</w><w>your</w><w>keys</w><pc>.</pc><w>Store</w><w>them</w><w>securely</w><w>...</w><w>''</w><pc>.</pc><w>Keeping</w><w>your</w><w>keys</w><w>secure</w><w>reduces</w><w>the</w><w>risk</w><w>of</w><w>someone</w><w>else</w><w>improperly</w><w>using</w><w>your</w><w>credits</w><w>to</w><w>transcribe</w><w>documents</w><pc>.</pc></p><p><w>To</w><w>reduce</w><w>the</w><w>risk</w><w>of</w><w>inadvertently</w><w>sharing</w><w>your</w><w>secret</w><w>key</w><w>,</w><w>store</w><w>it</w><w>in</w><w>a</w><w>separate</w><w>file</w><w>,</w><w>in</w><w>a</w><w>different</w><w>folder</w><w>from</w><w>the</w><w>program</w><w>you</w><w>are</w><w>writing</w><pc>.</pc><w>This</w><w>protects</w><w>your</w><w>key</w><w>better</w><w>than</w><w>including</w><w>it</w><w>inside</w><w>code</w><w>you</w><w>may</w><w>share</w><pc>.</pc></p><p><w>a</w><w>)</w><w>In</w><w>the</w><w>Azure</w><w>Portal</w><w>,</w><w>open</w><w>the</w><hi rend="bold"><w>Keys</w><w>and</w><w>Endpoint</w></hi><w>page</w><w>of</w><w>your</w><w>resource</w><pc>.</pc></p><figure><desc><w>Figure</w><w>3</w><pc>.</pc><w>Keys</w><w>and</w><w>Endpoint</w><pc>.</pc></desc><figDesc><w>Screen</w><w>capture</w><w>of</w><w>the</w><w>Keys</w><w>and</w><w>Endpoint</w><w>tab</w><w>in</w><w>the</w><w>Azure</w><w>Portal</w></figDesc><graphic url="en-or-transcribing-handwritten-text-with-python-and-azure-03.png"/></figure><p><w>b</w><w>)</w><w>Copy</w><code rend="inline"><w>KEY</w><w>1</w></code><w>and</w><w>paste</w><w>it</w><w>into</w><w>a</w><w>separate</w><w>text</w><w>file</w><w>you</w><w>can</w><w>refer</w><w>to</w><pc>.</pc><w>The</w><w>key</w><w>will</w><w>look</w><w>a</w><w>bit</w><w>like</w><w>this</w><code rend="inline"><w>b-f-9-7-0-8-4-8-b-7-a-6-6-8-1-9-</w></code><pc>.</pc><w>There</w><w>are</w><w>two</w><w>keys</w><w>,</w><w>but</w><w>you</w><w>only</w><w>need</w><w>to</w><w>use</w><w>one</w><w>of</w><w>them</w><w>for</w><w>this</w><w>lesson</w><pc>.</pc></p><p><w>c</w><w>)</w><w>Copy</w><w>the</w><w>endpoint</w><w>URL</w><w>and</w><w>paste</w><w>it</w><w>in</w><w>your</w><w>file</w><w>for</w><w>reference</w><pc>.</pc><w>The</w><w>endpoint</w><w>contains</w><w>your</w><w>unique</w><w>resource</w><w>name</w><w>and</w><w>will</w><w>be</w><w>similar</w><w>to</w><w>this</w><code rend="inline"><w>https</w><w>:</w><w>//computer-vision-transcription-jhb.cognitiveservices.azure.com/</w></code><pc>.</pc><w>This</w><w>is</w><w>the</w><w>URL</w><w>your</w><w>Python</w><w>program</w><w>will</w><w>use</w><w>to</w><w>communicate</w><w>with</w><w>Microsoft</w><w>Azure</w><w>Cognitive</w><w>Services</w><pc>.</pc></p><p><w>Regenerating</w><w>your</w><w>keys</w><w>using</w><w>the</w><w>button</w><w>on</w><w>the</w><hi rend="bold"><w>Keys</w><w>and</w><w>Endpoint</w></hi><w>page</w><w>is</w><w>a</w><w>good</w><w>way</w><w>to</w><w>keep</w><w>keys</w><w>secure</w><pc>.</pc><w>When</w><w>your</w><w>key</w><w>changes</w><w>,</w><w>just</w><w>copy</w><w>and</w><w>paste</w><w>it</w><w>to</w><w>where</w><w>you</w><w>store</w><w>your</w><w>key</w><pc>.</pc><w>If</w><w>you</w><w>are</w><w>using</w><w>this</w><w>service</w><w>constantly</w><w>,</w><w>logic</w><w>can</w><w>be</w><w>added</w><w>to</w><w>your</w><w>program</w><w>to</w><w>use</w><w>the</w><w>second</w><w>key</w><w>while</w><w>the</w><w>first</w><w>key</w><w>is</w><w>being</w><w>regenerated</w><w>,</w><w>which</w><w>helps</w><w>avoid</w><w>any</w><w>errors</w><pc>.</pc></p></div><div type="3" n="4.4"><head><w>Step</w><w>4</w><pc>.</pc><w>Creating</w><w>a</w><w>Python</w><w>notebook</w></head><p><w>In</w><w>this</w><w>step</w><w>,</w><w>we</w><w>will</w><w>create</w><w>a</w><w>Python</w><w>notebook</w><w>in</w><w>which</w><w>we</w><w>will</w><w>write</w><w>our</w><w>program</w><pc>.</pc><w>We</w><w>will</w><w>use</w><w>Google</w><w>Colab</w><w>,</w><w>a</w><w>cloud-based</w><w>environment</w><w>to</w><w>program</w><w>Python</w><w>notebooks</w><pc>.</pc><w>However</w><w>,</w><w>these</w><w>programs</w><w>may</w><w>instead</w><w>be</w><w>written</w><w>in</w><w>another</w><w>Python</w><w>environment</w><w>of</w><w>your</w><w>choice</w><pc>.</pc></p><p><w>a</w><w>)</w><w>Go</w><w>to</w><w>:</w><ref target="https://colab.research.google.com/"><w>https</w><w>:</w><w>//colab.research.google.com/</w></ref><w>(</w><w>Google</w><w>Colab</w><w>is</w><w>recommended</w><w>for</w><w>this</w><w>lesson</w><w>,</w><w>but</w><w>you</w><w>can</w><w>use</w><w>another</w><w>Python</w><w>environment</w><w>of</w><w>your</w><w>choice</w><w>,</w><w>such</w><w>as</w><w>Anaconda</w><pc>.</pc><w>See</w><w>the</w><w>lesson</w><w>by</w><w>Quinn</w><w>Dombrowski</w><w>,</w><w>Tassie</w><w>Gniady</w><w>,</w><w>and</w><w>David</w><w>Kloster</w><w>,</w><ref target="/en/lessons/jupyter-notebooks"><w>Introduction</w><w>to</w><w>Jupyter</w><w>Notebooks</w></ref><pc>.</pc><w>)</w></p><p><w>b</w><w>)</w><w>Click</w><hi rend="bold"><w>New</w><w>Notebook</w></hi><w>in</w><w>the</w><w>dialog</w><w>box</w><w>that</w><w>opens</w><pc>.</pc><w>Clicking</w><hi rend="bold"><w>File</w></hi><w>&gt;</w><hi rend="bold"><w>New</w><w>Notebook</w></hi><w>in</w><w>the</w><w>menu</w><w>will</w><w>do</w><w>the</w><w>same</w><w>thing</w><pc>.</pc></p><p><w>c</w><w>)</w><w>When</w><w>the</w><w>notebook</w><w>opens</w><w>,</w><w>give</w><w>it</w><w>a</w><w>new</w><w>title</w><w>at</w><w>the</w><w>top</w><w>:</w><code rend="inline"><w>Transcribe</w><w>handwriting</w><w>and</w><w>text</w><w>with</w><w>Microsoft</w><w>Azure</w><w>Cognitive</w><w>Services.ipynb</w></code><pc>.</pc></p><p><w>d</w><w>)</w><w>The</w><w>code</w><w>below</w><w>will</w><w>store</w><w>your</w><w>key</w><w>and</w><w>endpoint</w><w>in</w><w>an</w><w>environment</w><w>variable</w><w>which</w><w>will</w><w>make</w><w>it</w><w>accessible</w><w>by</w><w>the</w><w>program</w><pc>.</pc><w>In</w><w>Google</w><w>Colab</w><w>,</w><w>you</w><w>should</w><w>be</w><w>able</w><w>to</w><w>see</w><w>an</w><w>empty</w><w>text</w><w>box</w><w>or</w><w>``</w><w>cell</w><w>''</w><w>in</w><w>which</w><w>to</w><w>write</w><w>code</w><pc>.</pc><w>If</w><w>not</w><w>,</w><w>click</w><w>the</w><emph><w>+</w><w>Code</w></emph><w>button</w><w>to</w><w>add</w><w>a</w><w>new</w><w>code</w><w>cell</w><pc>.</pc><w>Copy</w><w>the</w><w>code</w><w>below</w><w>into</w><w>a</w><w>cell</w><w>in</w><w>your</w><w>notebook</w><pc>.</pc><w>Change</w><code rend="inline"><w>https</w><w>:</w><w>//computer-vision-transcription-jhb.cognitiveservices.azure.com/</w></code><w>to</w><w>the</w><w>endpoint</w><w>URL</w><w>you</w><w>created</w><w>in</w><w>Step</w><w>3</w><pc>.</pc></p><ab><code xml:id="code_transcribing-handwritten-text-with-python-and-azure_0" corresp="code_transcribing-handwritten-text-with-python-and-azure_0.txt" rend="block"/></ab><figure><desc><w>Figure</w><w>4</w><pc>.</pc><w>Create</w><w>a</w><w>Python</w><w>notebook</w><w>in</w><w>Google</w><w>Colab</w><pc>.</pc></desc><figDesc><w>Google</w><w>Colab</w><w>notebook</w></figDesc><graphic url="en-or-transcribing-handwritten-text-with-python-and-azure-04.png"/></figure><p><w>e</w><w>)</w><w>Run</w><w>this</w><w>cell</w><w>by</w><w>clicking</w><w>the</w><w>triangular</w><w>``</w><w>play</w><w>''</w><w>button</w><pc>.</pc><w>In</w><w>the</w><w>menu</w><w>,</w><hi rend="bold"><w>Runtime</w></hi><w>&gt;</w><hi rend="bold"><w>Run</w><w>the</w><w>focused</w><w>cell</w></hi><w>will</w><w>do</w><w>the</w><w>same</w><w>thing</w><pc>.</pc><w>Input</w><w>your</w><w>key</w><w>in</w><w>the</w><w>prompt</w><w>below</w><w>the</w><w>cell</w><w>,</w><w>then</w><w>press</w><emph><w>Enter</w></emph><pc>.</pc></p><figure><desc><w>Figure</w><w>5</w><pc>.</pc><w>Entering</w><w>the</w><w>Key</w><w>when</w><w>prompted</w><pc>.</pc></desc><figDesc><w>A</w><w>prompt</w><w>to</w><w>enter</w><w>the</w><w>Key</w><pc>.</pc></figDesc><graphic url="en-or-transcribing-handwritten-text-with-python-and-azure-05.png"/></figure><p><w>Running</w><w>the</w><w>cell</w><w>will</w><w>store</w><w>the</w><w>key</w><w>and</w><w>endpoint</w><w>URL</w><w>as</w><w>environment</w><w>variables</w><w>in</w><w>memory</w><w>using</w><w>Python</w><w>'s</w><code rend="inline"><w>os</w></code><w>library</w><w>,</w><w>which</w><w>will</w><w>allow</w><w>Python</w><w>to</w><w>use</w><w>these</w><w>values</w><w>to</w><w>communicate</w><w>with</w><w>Azure</w><pc>.</pc><w>The</w><w>expected</w><w>printed</w><w>result</w><w>is</w><w>this</w><w>:</w></p><ab><code xml:id="code_transcribing-handwritten-text-with-python-and-azure_1" corresp="code_transcribing-handwritten-text-with-python-and-azure_1.txt" rend="block"/></ab><p><w>f</w><w>)</w><w>Click</w><w>``</w><w>x</w><w>''</w><w>in</w><w>the</w><w>notebook</w><w>output</w><w>to</w><w>delete</w><w>the</w><w>text</w><w>of</w><w>your</w><w>key</w><pc>.</pc><w>If</w><w>you</w><w>see</w><w>an</w><w>error</w><w>message</w><w>,</w><w>check</w><w>that</w><w>you</w><w>copied</w><w>and</w><w>input</w><w>the</w><w>key</w><w>correctly</w><pc>.</pc></p><figure><desc><w>Figure</w><w>6</w><pc>.</pc><w>Clear</w><w>output</w><w>below</w><w>a</w><w>cell</w><w>in</w><w>a</w><w>Google</w><w>Colab</w><w>notebook</w><pc>.</pc></desc><figDesc><w>The</w><w>clear</w><w>output</w><w>button</w><w>for</w><w>a</w><w>cell</w><w>in</w><w>a</w><w>Google</w><w>Colab</w><w>notebook</w><pc>.</pc></figDesc><graphic url="en-or-transcribing-handwritten-text-with-python-and-azure-06.png"/></figure></div><div type="3" n="4.5"><head><w>Step</w><w>5</w><pc>.</pc><w>Installing</w><w>Azure</w><w>Computer</w><w>Vision</w><w>in</w><w>your</w><w>Python</w><w>environment</w><pc>.</pc></head><p><w>In</w><w>this</w><w>step</w><w>,</w><w>we</w><w>will</w><w>install</w><w>the</w><w>required</w><w>program</w><w>libraries</w><w>your</w><w>program</w><w>will</w><w>use</w><w>to</w><w>communicate</w><w>with</w><w>Azure</w><w>Computer</w><w>Vision</w><pc>.</pc></p><p><ref target="https://perma.cc/FQ4Z-J9JU"><w>This</w><w>documentation</w></ref><w>by</w><w>Microsoft</w><w>is</w><w>a</w><w>helpful</w><w>resource</w><w>for</w><w>this</w><w>step</w><pc>.</pc></p><p><w>a</w><w>)</w><w>Create</w><w>a</w><w>new</w><w>cell</w><w>in</w><w>your</w><w>notebook</w><w>,</w><w>paste</w><w>in</w><w>the</w><w>code</w><w>below</w><w>and</w><w>run</w><w>it</w><pc>.</pc><w>It</w><w>will</w><w>install</w><w>the</w><w>Python</w><w>library</w><w>required</w><w>to</w><w>connect</w><w>to</w><w>Azure</w><w>Cognitive</w><w>Services</w><w>Computer</w><w>Vision</w><pc>.</pc><w>If</w><w>you</w><w>are</w><w>using</w><w>Google</w><w>Colab</w><w>,</w><w>you</w><w>will</w><w>need</w><w>to</w><w>do</w><w>this</w><w>once</w><w>per</w><w>session</w><pc>.</pc><w>If</w><w>you</w><w>are</w><w>using</w><w>a</w><w>local</w><w>Python</w><w>environment</w><w>on</w><w>your</w><w>computer</w><w>instead</w><w>of</w><w>Google</w><w>Colab</w><w>,</w><w>you</w><w>only</w><w>need</w><w>to</w><w>do</w><w>this</w><w>once</w><w>,</w><w>but</w><w>you</w><w>may</w><w>need</w><w>to</w><w>remove</w><w>the</w><w>exclamation</w><w>mark</w><w>to</w><w>run</w><w>the</w><code rend="inline"><w>pip</w><w>install</w></code><w>command</w><pc>.</pc></p><ab><code xml:id="code_transcribing-handwritten-text-with-python-and-azure_2" corresp="code_transcribing-handwritten-text-with-python-and-azure_2.txt" rend="block"/></ab><p><w>b</w><w>)</w><w>Create</w><w>another</w><w>new</w><w>cell</w><w>in</w><w>your</w><w>notebook</w><w>,</w><w>paste</w><w>in</w><w>the</w><w>code</w><w>below</w><w>and</w><w>run</w><w>it</w><pc>.</pc><w>It</w><w>will</w><w>:</w></p><list type="unordered"><item><w>Import</w><w>the</w><w>required</w><w>libraries</w><pc>.</pc></item><item><w>Get</w><w>your</w><w>Computer</w><w>Vision</w><w>subscription</w><w>key</w><w>from</w><w>your</w><w>environment</w><w>variable</w><pc>.</pc></item><item><w>Get</w><w>your</w><w>Computer</w><w>Vision</w><w>endpoint</w><w>from</w><w>your</w><w>environment</w><w>variable</w><pc>.</pc></item><item><w>Authenticate</w><w>with</w><w>Azure</w><w>Cognitive</w><w>Services</w><pc>.</pc></item></list><ab><code xml:id="code_transcribing-handwritten-text-with-python-and-azure_3" corresp="code_transcribing-handwritten-text-with-python-and-azure_3.txt" rend="block"/></ab></div></div><div type="2" n="5"><head><w>Trying</w><w>out</w><w>various</w><w>transcription</w><w>projects</w></head><div type="3" n="5.1"><head><w>Image</w><w>requirements</w></head><quote><p><w>Acceptable</w><w>formats</w><w>include</w><code rend="inline"><w>jpeg</w></code><w>,</w><code rend="inline"><w>png</w></code><w>,</w><code rend="inline"><w>gif</w></code><w>,</w><w>or</w><code rend="inline"><w>bmp</w></code><pc>.</pc><w>Images</w><w>must</w><w>have</w><w>a</w><w>minimum</w><w>size</w><w>of</w><w>50</w><w>x</w><w>50</w><w>pixels</w><w>,</w><w>and</w><w>a</w><w>maximum</w><w>size</w><w>of</w><w>4</w><w>MB</w><pc>.</pc><w>Images</w><w>with</w><w>higher</w><w>contrast</w><w>and</w><w>clear</w><w>handwriting</w><w>work</w><w>better</w><w>than</w><w>images</w><w>that</w><w>are</w><w>difficult</w><w>to</w><w>read</w><w>or</w><w>contain</w><w>fragments</w><w>of</w><w>letters</w><pc>.</pc></p><p><w>Try</w><w>a</w><w>sample</w><w>of</w><w>images</w><w>before</w><w>starting</w><w>a</w><w>large</w><w>transcription</w><w>project</w><pc>.</pc><w>Azure</w><w>Cognitive</w><w>services</w><w>will</w><w>send</w><w>the</w><w>image</w><w>to</w><w>Microsoft</w><w>for</w><w>processing</w><w>,</w><w>so</w><w>remember</w><w>to</w><w>respect</w><w>any</w><w>restrictions</w><w>on</w><w>use</w><w>or</w><w>transmission</w><w>when</w><w>working</w><w>with</w><w>images</w><w>or</w><w>text</w><pc>.</pc></p></quote></div><div type="3" n="5.2"><head><w>Project</w><w>1</w><w>:</w><w>Working</w><w>with</w><w>an</w><w>image</w><w>found</w><w>online</w></head><p><w>This</w><w>section</w><w>will</w><w>allow</w><w>you</w><w>to</w><w>transcribe</w><w>handwriting</w><w>from</w><w>an</w><w>image</w><w>found</w><w>online</w><w>,</w><w>which</w><w>requires</w><w>the</w><w>image</w><w>'s</w><w>URL</w><pc>.</pc><w>For</w><w>this</w><w>example</w><w>,</w><w>we</w><w>'ll</w><w>use</w><ref target="/assets/transcribing-handwritten-text-with-python-and-azure/td_00044_b2.jpeg"><code rend="inline"><w>https</w><w>:</w><w>//github.com/programminghistorian/ph-submissions/blob/gh-pages/assets/transcribing-handwritten-text-with-python-and-azure/td_00044_b2.jpeg</w></code></ref><pc>.</pc><w>This</w><w>is</w><w>an</w><w>image</w><w>from</w><w>the</w><w>1917</w><w>wartime</w><w>diary</w><w>of</w><ref target="https://perma.cc/AU2P-GBCA"><w>Captain</w><w>William</w><w>Andrew</w><w>White</w></ref><w>photographed</w><w>during</w><w>research</w><pc>.</pc><w>This</w><w>research</w><w>involved</w><w>text</w><w>analysis</w><w>with</w><w>natural</w><w>language</w><w>processing</w><w>to</w><w>extract</w><w>,</w><w>catalog</w><w>and</w><w>relate</w><w>the</w><w>names</w><w>of</w><w>the</w><w>people</w><w>,</w><w>locations</w><w>and</w><w>organizations</w><w>that</w><w>appeared</w><w>in</w><w>the</w><w>diary</w><w>,</w><w>for</w><w>which</w><w>it</w><w>was</w><w>necessary</w><w>to</w><w>transcribe</w><w>the</w><w>writing</w><w>into</w><w>digital</w><w>form</w><pc>.</pc></p><figure><desc><w>Figure</w><w>7</w><pc>.</pc><w>A</w><w>page</w><w>from</w><w>Captain</w><w>White</w><w>'s</w><w>diary</w></desc><figDesc><w>Picture</w><w>of</w><w>a</w><w>handwritten</w><w>diary</w><w>entry</w></figDesc><graphic url="en-or-transcribing-handwritten-text-with-python-and-azure-07.png"/></figure><p><w>Create</w><w>another</w><w>new</w><w>cell</w><w>in</w><w>your</w><w>notebook</w><w>,</w><w>paste</w><w>in</w><w>the</w><w>code</w><w>below</w><w>and</w><w>run</w><w>it</w><pc>.</pc><w>It</w><w>will</w><w>:</w></p><list type="unordered"><item><w>Set</w><w>the</w><w>URL</w><w>of</w><w>the</w><w>image</w><w>to</w><w>transcribe</w><pc>.</pc><w>To</w><w>transcribe</w><w>a</w><w>different</w><w>image</w><w>found</w><w>online</w><w>(</w><w>which</w><w>you</w><w>have</w><w>permission</w><w>to</w><w>use</w><w>)</w><w>,</w><w>change</w><w>the</w><w>URL</w><w>inside</w><w>the</w><code rend="inline"><w>``</w><w>``</w></code><w>to</w><w>the</w><w>URL</w><w>of</w><w>that</w><w>image</w><pc>.</pc></item><item><w>Call</w><w>Azure</w><w>using</w><code rend="inline"><w>computervision_client</w></code><w>with</w><w>the</w><w>URL</w><w>of</w><w>the</w><w>image</w><pc>.</pc><w>The</w><w>URL</w><w>is</w><w>passed</w><w>to</w><w>Azure</w><w>'s</w><w>Application</w><w>Programming</w><w>Interface</w><w>(</w><w>API</w><w>)</w><w>to</w><w>tell</w><w>Azure</w><w>to</w><w>download</w><w>the</w><w>image</w><w>and</w><w>process</w><w>it</w><w>for</w><w>handwriting</w><w>recognition</w><pc>.</pc></item><item><w>Read</w><w>the</w><w>results</w><w>line</w><w>by</w><w>line</w><pc>.</pc></item><item><w>If</w><w>successful</w><w>,</w><w>print</w><w>the</w><w>text</w><w>of</w><w>each</w><w>line</w><w>,</w><w>as</w><w>well</w><w>as</w><w>the</w><w>coordinates</w><w>for</w><w>the</w><w>box</w><w>in</w><w>which</w><w>the</w><w>text</w><w>is</w><w>located</w><w>in</w><w>the</w><w>image</w><pc>.</pc></item></list><ab><code xml:id="code_transcribing-handwritten-text-with-python-and-azure_4" corresp="code_transcribing-handwritten-text-with-python-and-azure_4.txt" rend="block"/></ab><p><w>When</w><w>you</w><w>run</w><w>the</w><w>cell</w><w>,</w><w>you</w><w>should</w><w>see</w><w>lines</w><w>of</w><w>recognized</w><w>text</w><w>printed</w><w>along</w><w>with</w><w>their</w><w>pixel</w><w>coordinates</w><w>in</w><w>the</w><w>image</w><w>,</w><w>as</w><w>shown</w><w>below</w><pc>.</pc></p><ab><code xml:id="code_transcribing-handwritten-text-with-python-and-azure_5" corresp="code_transcribing-handwritten-text-with-python-and-azure_5.txt" rend="block"/></ab><p><w>The</w><w>comparison</w><w>of</w><w>the</w><w>recognized</w><w>text</w><w>with</w><w>the</w><w>image</w><w>above</w><w>indicates</w><w>where</w><w>the</w><w>handwriting</w><w>was</w><w>transcribed</w><w>correctly</w><w>,</w><w>and</w><w>where</w><w>errors</w><w>occurred</w><pc>.</pc><w>For</w><w>example</w><w>,</w><w>in</w><w>the</w><w>third</w><w>line</w><w>from</w><w>the</w><w>bottom</w><w>,</w><w>the</w><w>program</w><w>has</w><w>transcribed</w><w>``</w><w>prote</w><w>Inier</w><w>''</w><w>instead</w><w>of</w><w>``</w><w>wrote</w><w>Izie</w><w>''</w><pc>.</pc><w>A</w><w>blot</w><w>of</w><w>ink</w><w>may</w><w>have</w><w>affected</w><w>the</w><w>recognition</w><w>process</w><pc>.</pc></p><p><w>When</w><w>planning</w><w>a</w><w>handwriting</w><w>transcription</w><w>project</w><w>,</w><w>start</w><w>with</w><w>a</w><w>sample</w><w>to</w><w>determine</w><w>if</w><w>the</w><w>results</w><w>are</w><w>accurate</w><w>enough</w><w>for</w><w>your</w><w>purposes</w><pc>.</pc><w>For</w><w>the</w><w>transcription</w><w>of</w><w>Captain</w><w>White</w><w>'s</w><w>diary</w><w>used</w><w>here</w><w>,</w><w>using</w><w>handwriting</w><w>recognition</w><w>saved</w><w>time</w><w>compared</w><w>to</w><w>retyping</w><w>the</w><w>text</w><w>,</w><w>but</w><w>it</w><w>still</w><w>required</w><w>some</w><w>editing</w><w>to</w><w>fix</w><w>the</w><w>errors</w><w>made</w><w>by</w><w>Azure</w><pc>.</pc></p></div><div type="3" n="5.3"><head><w>Project</w><w>2</w><w>:</w><w>Working</w><w>with</w><w>an</w><w>image</w><w>stored</w><w>in</w><w>your</w><w>Python</w><w>environment</w></head><p><w>This</w><w>section</w><w>will</w><w>allow</w><w>you</w><w>to</w><w>transcribe</w><w>handwriting</w><w>in</w><w>an</w><w>image</w><w>stored</w><w>in</w><w>your</w><w>Python</w><w>environment</w><pc>.</pc><w>It</w><w>'s</w><w>a</w><w>lot</w><w>like</w><w>working</w><w>with</w><w>an</w><w>image</w><w>found</w><w>online</w><w>but</w><w>,</w><w>this</w><w>time</w><w>,</w><w>you</w><w>must</w><w>have</w><w>an</w><w>image</w><w>saved</w><w>on</w><w>the</w><w>same</w><w>computer</w><w>you</w><w>are</w><w>running</w><w>Python</w><w>from</w><pc>.</pc><w>For</w><w>Google</w><w>Colab</w><w>,</w><w>we</w><w>are</w><w>using</w><w>a</w><w>virtual</w><w>computer</w><pc>.</pc><w>For</w><w>this</w><w>example</w><w>,</w><w>you</w><w>can</w><w>download</w><w>an</w><w>image</w><w>and</w><w>save</w><w>it</w><pc>.</pc><w>Here</w><w>is</w><w>an</w><ref target="/assets/transcribing-handwritten-text-with-python-and-azure/td_00044_b2.jpeg"><w>example</w><w>image</w><w>to</w><w>download</w></ref><pc>.</pc></p><p><w>a</w><w>)</w><w>Select</w><w>or</w><w>create</w><w>a</w><w>directory</w><w>for</w><w>your</w><w>image</w><pc>.</pc><w>If</w><w>you</w><w>are</w><w>working</w><w>on</w><w>Google</w><w>Colab</w><w>,</w><w>you</w><w>may</w><w>use</w><w>the</w><w>working</w><w>directory</w><code rend="inline"><w>/content/</w></code><pc>.</pc></p><p><w>b</w><w>)</w><w>Download</w><w>an</w><w>example</w><w>image</w><w>and</w><w>move</w><w>it</w><w>to</w><w>your</w><w>directory</w><pc>.</pc><w>In</w><w>Google</w><w>Colab</w><w>,</w><w>open</w><w>the</w><hi rend="bold"><w>Files</w></hi><w>pane</w><w>by</w><w>clicking</w><w>the</w><hi rend="bold"><w>Files</w></hi><w>icon</w><w>on</w><w>the</w><w>left</w><w>of</w><w>the</w><w>window</w><pc>.</pc><w>Click</w><w>the</w><emph><w>Upload</w><w>to</w><w>session</w><w>storage</w></emph><w>button</w><w>to</w><w>upload</w><w>the</w><w>file</w><w>:</w></p><figure><desc><w>Figure</w><w>8</w><pc>.</pc><w>The</w><w>Files</w><w>pane</w><w>in</w><w>Google</w><w>Colab</w><w>with</w><w>(</w><w>1</w><w>)</w><w>The</w><w>Files</w><w>icon</w><w>to</w><w>open</w><w>it</w><w>,</w><w>(</w><w>2</w><w>)</w><w>The</w><w>'Upload</w><w>to</w><w>session</w><w>storage</w><w>'</w><w>button</w><w>used</w><w>to</w><w>upload</w><w>the</w><w>file</w><w>and</w><w>(</w><w>3</w><w>)</w><w>The</w><w>uploaded</w><w>file</w><pc>.</pc></desc><figDesc><w>The</w><w>Files</w><w>pane</w><w>in</w><w>Google</w><w>Colab</w><w>with</w><w>the</w><w>Upload</w><w>to</w><w>session</w><w>storage</w><w>button</w><pc>.</pc></figDesc><graphic url="en-or-transcribing-handwritten-text-with-python-and-azure-08.png"/></figure><p><w>c</w><w>)</w><w>Create</w><w>another</w><w>new</w><w>cell</w><w>in</w><w>your</w><w>notebook</w><w>and</w><w>paste</w><w>in</w><w>the</w><w>code</w><w>below</w><pc>.</pc><w>You</w><w>may</w><w>have</w><w>to</w><w>edit</w><w>the</w><w>code</w><w>to</w><w>work</w><w>with</w><w>the</w><w>folder</w><w>or</w><w>filenames</w><w>you</w><w>are</w><w>using</w><pc>.</pc><w>The</w><w>code</w><w>will</w><w>:</w></p><list type="unordered"><item><w>Set</w><w>the</w><w>path</w><w>to</w><w>the</w><w>folder</w><w>this</w><w>image</w><w>is</w><w>in</w><pc>.</pc><w>The</w><code rend="inline"><w>/content/</w></code><w>folder</w><w>is</w><w>the</w><w>default</w><w>folder</w><w>in</w><w>Google</w><w>Colab</w><pc>.</pc><w>If</w><w>you</w><w>are</w><w>using</w><w>a</w><w>different</w><w>folder</w><w>,</w><w>change</w><w>this</w><w>in</w><w>the</w><w>line</w><pc>.</pc></item><item><w>Set</w><w>the</w><w>filename</w><w>for</w><w>the</w><w>image</w><w>to</w><w>be</w><w>read</w><pc>.</pc><w>You</w><w>can</w><w>change</w><w>this</w><w>as</w><w>needed</w><pc>.</pc></item><item><w>Open</w><w>the</w><w>image</w><w>to</w><w>be</w><w>read</w><pc>.</pc></item><item><w>Call</w><w>Azure</w><w>using</w><code rend="inline"><w>computervision_client</w></code><pc>.</pc></item><item><w>Read</w><w>the</w><w>results</w><w>line</w><w>by</w><w>line</w><pc>.</pc></item><item><w>If</w><w>successful</w><w>,</w><w>print</w><w>the</w><w>text</w><w>of</w><w>each</w><w>line</w><w>as</w><w>well</w><w>as</w><w>the</w><w>coordinates</w><w>for</w><w>the</w><w>box</w><w>in</w><w>which</w><w>the</w><w>text</w><w>is</w><w>found</w><w>on</w><w>the</w><w>image</w><pc>.</pc></item></list><ab><code xml:id="code_transcribing-handwritten-text-with-python-and-azure_6" corresp="code_transcribing-handwritten-text-with-python-and-azure_6.txt" rend="block"/></ab><p><w>d</w><w>)</w><w>Run</w><w>the</w><w>cell</w><w>to</w><w>read</w><w>the</w><w>handwriting</w><w>in</w><w>the</w><w>image</w><pc>.</pc><w>You</w><w>should</w><w>see</w><w>the</w><w>lines</w><w>of</w><w>recognized</w><w>text</w><w>printed</w><w>along</w><w>with</w><w>their</w><w>location</w><w>coordinates</w><pc>.</pc></p><ab><code xml:id="code_transcribing-handwritten-text-with-python-and-azure_7" corresp="code_transcribing-handwritten-text-with-python-and-azure_7.txt" rend="block"/></ab></div><div type="3" n="5.4"><head><w>Project</w><w>3</w><w>:</w><w>Creating</w><w>a</w><w>function</w><w>to</w><w>transcribe</w><w>multiple</w><w>images</w><w>stored</w><w>in</w><w>your</w><w>Python</w><w>environment</w></head><p><w>This</w><w>section</w><w>will</w><w>allow</w><w>you</w><w>to</w><w>transcribe</w><w>handwriting</w><w>of</w><w>an</w><w>image</w><w>stored</w><w>in</w><w>your</w><w>Python</w><w>environment</w><w>in</w><w>the</w><w>same</w><w>way</w><w>as</w><w>in</w><w>Project</w><w>2</w><pc>.</pc><w>You</w><w>must</w><w>have</w><w>an</w><w>image</w><w>saved</w><w>on</w><w>the</w><w>computer</w><w>you</w><w>are</w><w>running</w><w>Python</w><w>from</w><pc>.</pc><w>If</w><w>you</w><w>do</w><w>not</w><w>,</w><w>complete</w><w>a</w><w>)</w><w>and</w><w>b</w><w>)</w><w>of</w><w>Project</w><w>2</w><w>to</w><w>store</w><w>an</w><w>image</w><w>in</w><w>your</w><w>Python</w><w>environment</w><pc>.</pc></p><p><w>The</w><w>purpose</w><w>of</w><w>this</w><w>section</w><w>is</w><w>to</w><w>reorganize</w><w>the</w><w>code</w><w>used</w><w>in</w><w>Project</w><w>2</w><w>into</w><w>a</w><w>function</w><pc>.</pc><w>A</w><w>function</w><w>is</w><w>a</w><w>block</w><w>of</w><w>code</w><w>that</w><w>can</w><w>be</w><w>called</w><w>repeatedly</w><w>,</w><w>which</w><w>becomes</w><w>useful</w><w>when</w><w>processing</w><w>multiple</w><w>images</w><pc>.</pc><w>This</w><w>function</w><w>requires</w><w>the</w><w>path</w><w>to</w><w>the</w><w>image</w><w>as</w><w>input</w><w>,</w><w>and</w><w>it</w><w>returns</w><w>the</w><w>text</w><w>of</w><w>the</w><w>image</w><w>as</w><w>output</w><pc>.</pc></p><p><w>a</w><w>)</w><w>Create</w><w>another</w><w>new</w><w>cell</w><w>in</w><w>your</w><w>notebook</w><w>,</w><w>paste</w><w>in</w><w>the</w><w>code</w><w>for</w><w>the</w><w>function</w><w>below</w><pc>.</pc><w>The</w><w>code</w><w>will</w><w>:</w></p><list type="unordered"><item><w>Define</w><w>the</w><w>name</w><w>of</w><w>the</w><w>function</w><w>and</w><w>the</w><w>path</w><w>it</w><w>uses</w><w>as</w><w>input</w><pc>.</pc></item><item><w>Check</w><w>the</w><w>image</w><w>path</w><w>exists</w><pc>.</pc></item><item><w>Open</w><w>the</w><w>image</w><w>to</w><w>be</w><w>read</w><pc>.</pc></item><item><w>Call</w><w>Azure</w><w>using</w><code rend="inline"><w>computervision_client</w></code><w>with</w><w>the</w><w>image</w><pc>.</pc></item><item><w>Read</w><w>the</w><w>results</w><w>line</w><w>by</w><w>line</w><pc>.</pc></item><item><w>If</w><w>successful</w><w>,</w><w>store</w><w>each</w><w>line</w><w>of</w><w>text</w><w>in</w><w>the</w><w>variable</w><code rend="inline"><w>text_in_image</w></code><pc>.</pc></item><item><w>The</w><w>last</w><w>line</w><w>returns</w><w>the</w><w>value</w><w>of</w><code rend="inline"><w>text_in_image</w></code><w>to</w><w>the</w><w>program</w><w>which</w><w>called</w><w>the</w><w>function</w><pc>.</pc></item></list><ab><code xml:id="code_transcribing-handwritten-text-with-python-and-azure_8" corresp="code_transcribing-handwritten-text-with-python-and-azure_8.txt" rend="block"/></ab><p><w>b</w><w>)</w><w>Run</w><w>the</w><w>cell</w><w>to</w><w>load</w><w>the</w><w>function</w><pc>.</pc><w>Nothing</w><w>else</w><w>will</w><w>happen</w><w>until</w><w>the</w><w>function</w><w>is</w><w>called</w><w>in</w><w>the</w><w>step</w><w>c</w><w>)</w><pc>.</pc></p><p><w>c</w><w>)</w><w>Create</w><w>another</w><w>new</w><w>cell</w><w>in</w><w>your</w><w>notebook</w><w>and</w><w>paste</w><w>in</w><w>the</w><w>code</w><w>below</w><w>to</w><w>call</w><w>the</w><w>function</w><pc>.</pc><w>The</w><w>code</w><w>will</w><w>:</w></p><list type="unordered"><item><w>Set</w><w>the</w><w>path</w><w>to</w><w>the</w><w>folder</w><w>this</w><w>image</w><w>is</w><w>in</w><pc>.</pc><w>The</w><code rend="inline"><w>/content/</w></code><w>folder</w><w>is</w><w>the</w><w>default</w><w>folder</w><w>in</w><w>Google</w><w>Colab</w><pc>.</pc><w>If</w><w>you</w><w>are</w><w>using</w><w>a</w><w>different</w><w>folder</w><w>,</w><w>change</w><w>this</w><w>in</w><w>the</w><w>line</w><pc>.</pc></item><item><w>Set</w><w>the</w><w>filename</w><w>of</w><w>the</w><w>image</w><w>to</w><w>be</w><w>read</w><pc>.</pc><w>You</w><w>can</w><w>change</w><w>this</w><w>as</w><w>needed</w><pc>.</pc></item><item><w>Call</w><w>the</w><code rend="inline"><w>read_handwriting_in_stored_image</w></code><w>function</w><w>defined</w><w>in</w><w>a</w><w>)</w><pc>.</pc></item></list><ab><code xml:id="code_transcribing-handwritten-text-with-python-and-azure_9" corresp="code_transcribing-handwritten-text-with-python-and-azure_9.txt" rend="block"/></ab><p><w>d</w><w>)</w><w>Run</w><w>the</w><w>cell</w><w>to</w><w>call</w><w>the</w><w>function</w><pc>.</pc><w>You</w><w>should</w><w>see</w><w>lines</w><w>of</w><w>recognized</w><w>text</w><w>printed</w><w>similar</w><w>to</w><w>those</w><w>in</w><w>Project</w><w>2</w><w>above</w><pc>.</pc><w>Now</w><w>that</w><w>we</w><w>have</w><w>a</w><w>working</w><w>function</w><w>,</w><w>we</w><w>can</w><w>use</w><w>it</w><w>for</w><w>multiple</w><w>purposes</w><pc>.</pc></p></div><div type="3" n="5.5"><head><w>Project</w><w>4</w><w>:</w><w>Transcribing</w><w>all</w><w>the</w><w>images</w><w>of</w><w>a</w><w>folder</w><w>and</w><w>saving</w><w>the</w><w>text</w><w>in</w><w>a</w><w>file</w></head><p><w>This</w><w>section</w><w>will</w><w>allow</w><w>you</w><w>to</w><w>transcribe</w><w>handwriting</w><w>found</w><w>in</w><w>all</w><w>the</w><w>images</w><w>in</w><w>a</w><w>single</w><w>folder</w><pc>.</pc><w>You</w><w>must</w><w>have</w><w>a</w><w>folder</w><w>containing</w><w>images</w><w>saved</w><w>on</w><w>the</w><w>same</w><w>computer</w><w>you</w><w>are</w><w>running</w><w>Python</w><w>from</w><pc>.</pc><w>For</w><w>Google</w><w>Colab</w><w>,</w><w>we</w><w>are</w><w>using</w><w>a</w><w>virtual</w><w>computer</w><pc>.</pc><w>For</w><w>this</w><w>example</w><w>,</w><w>you</w><w>can</w><ref target="/assets/transcribing-handwritten-text-with-python-and-azure/sample-images.zip"><w>download</w><w>these</w><w>images</w><w>and</w><w>save</w><w>them</w></ref><pc>.</pc></p><p><w>a</w><w>)</w><w>Download</w><w>the</w><w>example</w><w>images</w><w>and</w><w>move</w><w>them</w><w>to</w><w>your</w><w>directory</w><pc>.</pc><w>In</w><w>Google</w><w>Colab</w><w>,</w><w>open</w><w>the</w><hi rend="bold"><w>Files</w></hi><w>pane</w><w>by</w><w>clicking</w><w>the</w><hi rend="bold"><w>Files</w></hi><w>icon</w><w>on</w><w>the</w><w>left</w><w>of</w><w>the</w><w>window</w><pc>.</pc><w>Click</w><w>the</w><emph><w>Upload</w><w>to</w><w>session</w><w>storage</w></emph><w>button</w><w>to</w><w>upload</w><w>the</w><w>file</w><pc>.</pc><w>(</w><w>See</w><w>Figure</w><w>8</w><w>above</w><pc>.</pc><w>)</w></p><p><w>b</w><w>)</w><w>Create</w><w>another</w><w>new</w><w>cell</w><w>in</w><w>your</w><w>notebook</w><w>and</w><w>paste</w><w>in</w><w>the</w><w>code</w><w>below</w><pc>.</pc><w>You</w><w>may</w><w>have</w><w>to</w><w>edit</w><w>the</w><w>code</w><w>to</w><w>work</w><w>with</w><w>the</w><w>folder</w><w>or</w><w>filenames</w><w>you</w><w>are</w><w>using</w><pc>.</pc><w>The</w><w>code</w><w>will</w><w>:</w></p><list type="unordered"><item><w>Set</w><w>the</w><w>path</w><w>to</w><w>the</w><w>folder</w><w>this</w><w>image</w><w>is</w><w>in</w><pc>.</pc><w>The</w><code rend="inline"><w>/content/</w></code><w>folder</w><w>is</w><w>the</w><w>default</w><w>folder</w><w>in</w><w>Google</w><w>Colab</w><pc>.</pc><w>If</w><w>you</w><w>are</w><w>using</w><w>a</w><w>different</w><w>folder</w><w>,</w><w>change</w><w>this</w><w>in</w><w>the</w><w>line</w><pc>.</pc></item><item><w>Open</w><w>a</w><w>text</w><w>file</w><w>to</w><w>write</w><w>to</w><w>it</w><pc>.</pc></item><item><w>Loop</w><w>through</w><w>the</w><w>files</w><w>in</w><w>the</w><w>folder</w><pc>.</pc></item><item><w>Check</w><w>that</w><w>the</w><w>file</w><w>has</w><w>an</w><w>image</w><w>extension</w><pc>.</pc></item><item><w>Call</w><w>the</w><code rend="inline"><w>read_handwriting_in_stored_image</w></code><w>function</w><pc>.</pc></item><item><w>Write</w><w>the</w><w>text</w><w>returned</w><w>from</w><w>the</w><w>function</w><w>to</w><w>the</w><w>text</w><w>file</w><pc>.</pc></item><item><w>Wait</w><w>10</w><w>seconds</w><w>before</w><w>processing</w><w>the</w><w>next</w><w>file</w><w>,</w><w>to</w><w>avoid</w><w>causing</w><w>an</w><w>error</w><w>by</w><w>sending</w><w>too</w><w>many</w><w>requests</w><w>at</w><w>once</w><pc>.</pc></item><item><w>Close</w><w>the</w><w>text</w><w>file</w><pc>.</pc></item></list><ab><code xml:id="code_transcribing-handwritten-text-with-python-and-azure_10" corresp="code_transcribing-handwritten-text-with-python-and-azure_10.txt" rend="block"/></ab><p><w>c</w><w>)</w><w>Run</w><w>the</w><w>cell</w><pc>.</pc><w>This</w><w>will</w><w>take</w><w>a</w><w>few</w><w>minutes</w><w>to</w><w>complete</w><pc>.</pc><w>During</w><w>this</w><w>time</w><w>,</w><w>you</w><w>should</w><w>see</w><w>the</w><w>name</w><w>of</w><w>each</w><w>file</w><w>printed</w><w>as</w><w>it</w><w>is</w><w>processed</w><pc>.</pc><w>When</w><w>the</w><w>program</w><w>is</w><w>finished</w><w>,</w><w>look</w><w>in</w><w>the</w><w>folder</w><w>,</w><w>click</w><w>the</w><emph><w>Refresh</w></emph><w>button</w><w>and</w><w>double-click</w><w>on</w><w>the</w><w>file</w><w>named</w><code rend="inline"><w>a_text_file.txt</w></code><w>to</w><w>view</w><w>it</w><pc>.</pc><w>You</w><w>should</w><w>see</w><w>the</w><w>text</w><w>from</w><w>all</w><w>the</w><w>images</w><pc>.</pc></p></div></div><div type="2" n="6"><head><w>Summary</w></head><p><w>You</w><w>have</w><w>connected</w><w>to</w><w>Azure</w><w>Cognitive</w><w>Services</w><w>Computer</w><w>Vision</w><w>and</w><w>transcribed</w><w>the</w><w>text</w><w>from</w><w>both</w><w>an</w><w>image</w><w>found</w><w>online</w><w>and</w><w>an</w><w>image</w><w>stored</w><w>on</w><w>your</w><w>computer</w><pc>.</pc><w>In</w><w>Projects</w><w>3</w><w>and</w><w>4</w><w>,</w><w>you</w><w>added</w><w>steps</w><w>to</w><w>process</w><w>multiple</w><w>images</w><w>and</w><w>store</w><w>the</w><w>transcribed</w><w>text</w><w>in</w><w>a</w><w>file</w><pc>.</pc><w>With</w><w>Python</w><w>,</w><w>you</w><w>can</w><w>use</w><w>a</w><w>loop</w><w>to</w><w>transcribe</w><w>all</w><w>the</w><w>images</w><w>in</w><w>a</w><w>directory</w><w>or</w><w>on</w><w>a</w><w>series</w><w>of</w><w>web</w><w>pages</w><pc>.</pc><w>You</w><w>have</w><w>also</w><w>learned</w><w>to</w><w>use</w><w>a</w><w>function</w><w>in</w><w>Python</w><w>to</w><w>better</w><w>organize</w><w>your</w><w>code</w><pc>.</pc><w>With</w><w>what</w><w>you</w><w>have</w><w>learned</w><w>here</w><w>,</w><w>you</w><w>are</w><w>able</w><w>to</w><w>transcribe</w><w>a</w><w>collection</w><w>of</w><w>images</w><w>of</w><w>handwriting</w><w>into</w><w>digital</w><w>text</w><pc>.</pc><w>Automated</w><w>handwriting</w><w>transcription</w><w>makes</w><w>possible</w><w>further</w><w>digital</w><w>text</w><w>analysis</w><w>of</w><w>documents</w><w>such</w><w>as</w><w>letters</w><w>,</w><w>diaries</w><w>,</w><w>logbooks</w><w>and</w><w>reports</w><w>,</w><w>when</w><w>manual</w><w>transcription</w><w>would</w><w>be</w><w>too</w><w>time</w><w>consuming</w><pc>.</pc></p><p><w>The</w><w>coordinate</w><w>positions</w><w>of</w><w>the</w><w>transcribed</w><w>text</w><w>returned</w><w>by</w><w>Azure</w><w>Cognitive</w><w>Services</w><w>allow</w><w>you</w><w>to</w><w>further</w><w>explore</w><w>the</w><w>use</w><w>of</w><w>handwriting</w><w>transcription</w><w>by</w><w>transcribing</w><w>written</w><w>forms</w><w>,</w><w>lists</w><w>or</w><w>logs</w><w>into</w><w>structured</w><w>data</w><w>,</w><w>like</w><w>a</w><w>spreadsheet</w><w>or</w><w>database</w><pc>.</pc><w>It</w><w>is</w><w>even</w><w>possible</w><w>to</w><w>translate</w><w>these</w><w>coordinates</w><w>into</w><w>geographic</w><w>coordinates</w><w>,</w><w>when</w><w>the</w><w>text</w><w>is</w><w>found</w><w>on</w><w>a</w><w>map</w><pc>.</pc></p><p><w>As</w><w>capabilities</w><w>grow</w><w>,</w><w>so</w><w>the</w><w>potential</w><w>uses</w><w>of</w><w>this</w><w>type</w><w>of</w><w>transcription</w><w>for</w><w>Digital</w><w>History</w><w>will</w><w>continue</w><w>to</w><w>grow</w><w>as</w><w>well</w><pc>.</pc><w>Additional</w><w>documentation</w><w>about</w><w>Azure</w><w>Cognitive</w><w>Services</w><w>is</w><w>available</w><w>on</w><w>the</w><ref target="https://perma.cc/4MVY-P7QE"><w>Microsoft</w><w>Learn</w><w>website</w></ref><pc>.</pc></p></div><div type="2" n="7"><head><w>Bibliography</w></head><p><w>Cahill</w><w>,</w><w>Barry</w><pc>.</pc><w>``</w><w>White</w><w>,</w><w>William</w><w>Andrew</w><w>,</w><w>''</w><w>in</w><w>Dictionary</w><w>of</w><w>Canadian</w><w>Biography</w><w>,</w><w>vol</w><pc>.</pc><w>16</w><w>,</w><w>University</w><w>of</w><w>Toronto/Université</w><w>Laval</w><w>,</w><w>2003–</w><w>,</w><ref target="https://perma.cc/AU2P-GBCA"><w>http</w><w>:</w><w>//www.biographi.ca/en/bio/white_william_andrew_16E.html</w></ref><pc>.</pc><w>Accessed</w><w>August</w><w>18</w><w>,</w><w>2023</w><pc>.</pc></p><p><w>Dombrowski</w><w>,</w><w>Quinn</w><w>,</w><w>Tassie</w><w>Gniady</w><w>,</w><w>and</w><w>David</w><w>Kloster</w><w>,</w><w>``</w><w>Introduction</w><w>to</w><w>Jupyter</w><w>Notebooks</w><w>,</w><w>''</w><emph><w>Programming</w><w>Historian</w></emph><w>8</w><w>(</w><w>2019</w><w>)</w><w>,</w><ref target="https://doi.org/10.46430/phen0087"><w>https</w><w>:</w><w>//doi.org/10.46430/phen0087</w></ref><pc>.</pc></p><p><w>Graham</w><w>,</w><w>Shawn</w><pc>.</pc><w>Detecting</w><w>and</w><w>Extracting</w><w>Hand-written</w><w>text</w><pc>.</pc><w>Jan</w><w>28</w><w>,</w><w>2020</w><pc>.</pc><ref target="https://perma.cc/J7BV-V6ME"><w>https</w><w>:</w><w>//shawngraham.github.io/dhmuse/detecting-handwriting/</w></ref><pc>.</pc><w>Accessed</w><w>25</w><w>December</w><w>,</w><w>2021</w><pc>.</pc></p><p><w>White</w><w>,</w><w>William</w><pc>.</pc><w>1917</w><pc>.</pc><w>William</w><w>Andrew</w><w>White</w><w>fonds</w><w>,</w><w>R15535-0-8-E</w><w>,</w><w>``</w><w>1917</w><w>Diary</w><w>''</w><w>,</w><w>Item</w><w>ID</w><w>number</w><w>4818067</w><pc>.</pc><w>Library</w><w>and</w><w>Archives</w><w>Canada</w><pc>.</pc><ref target="https://perma.cc/9LQJ-XBEW"><w>http</w><w>:</w><w>//central.bac-lac.gc.ca/.redirect</w><pc>?</pc><w>app=fonandcol</w><w>&amp;</w><w>id=4818067</w><w>&amp;</w><w>lang=eng</w></ref><pc>.</pc><w>Accessed</w><w>August</w><w>18</w><w>,</w><w>2023</w><pc>.</pc></p><p><w>Cognitive-services-quickstart-code</w><w>,</w><w>June</w><w>22</w><w>,</w><w>2021</w><w>,</w><ref target="https://perma.cc/FQ4Z-J9JU"><w>https</w><w>:</w><w>//docs.microsoft.com/en-us/azure/cognitive-services/computer-vision/quickstarts-sdk/python-sdk</w></ref><pc>.</pc><w>Accessed</w><w>25</w><w>December</w><w>,</w><w>2021</w><pc>.</pc></p></div></body>
    </text>
</TEI>
