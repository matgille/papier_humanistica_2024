Due to recent changes in security policies of web browser , which can no longer execute XSL code from local sources , the original approach of this lesson has had to be rethought .þDebido a cambios recientes en las políticas de seguridad de los navegadores web , los cuales ya no pueden ejecutar código XSL de archivos locales , la aproximación original de esta lección ha tenido que ser replanteada .
This lesson was updated in March 2022 by Nicolás Vaughan .þEsta lección fue actualizada en marzo de 2022 por Nicolás Vaughan .
IntroductionþIntroducción
The day before your colleague is due to give a seminar on Slave Rebellions in the New World , he phones you to say he is ill and needs you to cover his sessions .þImagina que , con un día de antelación , un compañero de trabajo te llama por teléfono pidiéndote que lo sustituyas en un seminario centrado en Relaciones de esclavos en el Nuevo Mundo .
You decide to compile a selection of primary sources to work through in class . You find some websites and readers with good sources , but scanning or cutting-and-pasting them into a new document is time consuming ; the formatting and citations are inconsistent and you begin to wonder if the ones you have chosen work well together .þDecides recopilar una selección de fuentes primarias para trabajar en clase , encuentras algunas páginas web y algunos libros con buenos materiales , pero escanearlo todo o copiar y pegar la información en un documento nuevo conlleva demasiado tiempo ; además , el estilo de la bibliografía difiere y las citas son inconsistentes , así que empiezas a preguntarte si reunir todo este material tiene sentido .
One site allows you to download an XML version of all its sources , but there are so many records , and so much metadata , that you can not find the material you want quickly .þUna página web te permite descargar una versión XML de todo el material , pero son tantos los registros y hay tantos metadatos que no es fácil encontrar rápidamente la información que deseas .
Or perhaps ... You find an old copy of Inscriptions of Roman Tripolitania ( 1952 ) and wish that you could run a statistical analysis on the appearance of certain phrases in certain locations .þO quizás ... has encontrado una edición antigua de Inscriptions of Roman Tripolitania ( 1952 ) y te gustaría hacer un análisis estadístico de la aparición de ciertas frases en determinados contextos .
Fortunately , King 's College London has produced an extensive e-version of the text with images , translations and location information .þPor suerte , King 's College London ha publicado una versión digital del texto con imágenes , traducciones e información sobre la localización de las inscripciones .
You can search through the material manually using the full-text search on the site , but curating the information you want , in the format you need to run an analysis , will take time . Then again ...þPuedes explorar el material con la función `` Buscar en la página '' en tu navegador , pero editar la información en el formato necesario para el análisis requiere tiempo .
You are starting a new project analysing book auction catalogues from the early seventeenth century . You start recording the publication details and auction listings into a series of Word documents and Excel spreadsheets .þImagina ahora que estás empezando un proyecto nuevo consistente en el estudio de un catálogo de subastas de libros del siglo XVII ; empiezas registrando los detalles de publicación y la lista de subastas en un documento Word o Excel .
A month into the project , you are invited to present your research to the Pro-Vice Chancellor .þUn mes más tarde el vicerrector de tu universidad te invita a dar una charla .
Your head of department suggests that you create a 'snazzy ' set of slides and handouts to help her understand your project .þEl decano de tu facultad sugiere que hagas unas diapositivas o notas para facilitar la comprensión del proyecto .
You have some preliminary conclusions about the material , but the data is scattered in several places and formatting it properly will take more time than you have .þTienes ya algunas conclusiones preliminares , pero los datos están dispersos en varios lugares y unificar el formato de la información precisa más tiempo del que dispones .
In all three of these situations , a basic understanding of XML , and its sister-language XSL , could have saved you time and aggravation .þEn las tres situaciones descritas , conocer cómo funciona XML y XSL te habría ahorrado tiempo y esfuerzo .
This tutorial will provide you with the ability to convert or transform historical data from an XML database ( whether a single file or several linked documents ) into a variety of different presentations -- -condensed tables , exhaustive lists or paragraphed narratives -- -and file formats .þEn este tutorial aprenderás a convertir un conjunto de datos históricos procedentes de una base de datos XML ( ya sea un solo documento o varios documentos interconectados ) en otros formatos más adecuados para presentar ( tablas , listas ) o exponer información ( párrafos ) .
Whether filtering a large database or adding formatting such as headings and pagination , XSL offers digital researchers the ability to reshape databases to support their changing research or publication needs .þTanto si quieres filtrar información contenida en una base de datos como si quieres añadir encabezados o paginación , XSL ofrece a los historiadores la posibilidad de reconfigurar datos a fin de acomodarlos a los cambios de la investigación o a las necesidades de la publicación . Este tutorial cubre los siguientes aspectos :
þEditores : herramientas necesarias para crear hojas de estilo XSL
þEditores
þProcesadores : herramientas necesarias para aplicar las instrucciones de la hoja de estilo XSL a los archivos XML
þProcesadores
What is XML ?þElección y preparación de datos XML : cómo conectar la base de datos con las instrucciones de transformación XSL Elección y preparación de datos XML
þEl tutorial también sirve como guía para crear las transformaciones más comunes :
þImprimir valores : cómo imprimir o presentar los datos
þImprimir valores
þrepeticiones for-each ( en bucle ) : cómo presentar datos concretos en cada uno de los objetos o registros existentes
þrepeticiones for-each ( en bucle )
þOrdenar resultados : cómo presentar los datos en un determinado orden
þOrdenar resultados
þFiltrar resultados : cómo seleccionar qué objetos o registros se quieren presentar
þFiltrar resultados
The eXtensible Markup Language ( XML ) is a highly flexible method for encoding or structuring your data .þ¿Qué es XML ? El Lenguaje de Marco Extensible ( eXtensible Markup Language , abreviado generalmente como `` XML '' ) es un método muy flexible de codificación y estructuración de datos .
Unlike Hypertext Markup Language ( HTML ) , which has a set vocabulary , XML is extensible ; it can be expanded to include whatever sections , sub-sections , and sub-sub-sections you need in order to store your data in the way you wish .þAl contrario que el Lenguaje de Marcado de Hipertexto ( Hypertext Markup Language , abreviado como `` HTML '' ) , que tiene un vocabulario predeterminado , XML es extensible ; es decir , puede expandirse para incluir las etiquetas necesarias para , por ejemplo , identificar tantas secciones y subsecciones como quieras .
A database can be made up of one or more XML files and each file has the same basic structure .þUna base de datos puede componerse de uno o más documentos XML con una estructura básica .
Each section , or layer , of the file is surrounded by a set of elements . An element is , essentially , a category or name for the type of data you are providing .þCada sección del archivo está contenida en un elemento , es decir , una categoría o nombre con el que se identifica el tipo de datos manejados .
Like Russian Nesting Dolls , each level of elements exists entirely within another one .þAsí pues , como si fueran Matrioshkas , cada nivel de elementos está contenido en otro .
The encloses the entire database .þEl elemento < raíz > es precisamente eso : la raíz del documento , es decir , el elemento que contiene al resto de elementos y entidades ; y cada uno de estos otros elementos contenidos en él se considera un hijo ( child ) suyo .
top-level element Each element within the top-level element is a of that element .þAnálogamente , el elemento que contiene un elemento hijo se llama elemento padre ( parent ) .
childþPor ejemplo : ( Nota que estos nombres — raíz , padre y hijo — son completamente arbitrarios .
Likewise , the element surrounding a child element is called the element .þPudimos haberlos llamado de cualquier otro modo . Lo importante aquí son las relaciones de continencia .
parentþ)
Depending on the rules of your database , every element can have a value ( textual or numerical ) as well as any number of child elements .þSegún las reglas de nuestra base de datos , los elementos pueden tener valores ( textuales o numéricos ) o bien un número determinado de elementos hijos .
They can also have attributes , which can be thought of as metadata for the element .þTambién pueden tener atributos , algo así como los metadatos del elemento .
Attributes can , for example , help you distinguish between different types of values without having to create a new type of element .þLos atributos ayudan a distinguir , por ejemplo , entre distintos tipos de valores sin tener que crear un nuevo tipo de elemento . Por ejemplo :
Once you are given an XML database , or have stored your own data within one , you can use XSL to sort , filter and display this information in ( almost ) any way you wish .þSi tienes acceso a una base de datos XML , o si quieres almacenar datos en una , puedes utilizar XSL para ordenar , filtrar y presentar la información en ( casi ) todas las maneras imaginables .
You can even break open OpenXML files , such as Word ( .docx ) or Excel ( .xslx ) files , and see or remove any additional information that Microsoft has inserted into your documents , such as tags identifying geographical locations .þPor ejemplo , podrías abrir un archivo XML como Word ( .docx ) o Excel ( .xslx ) , inspeccionarlo y , a continuación , eliminar la información añadida por Microsoft por defecto como la localización geográfica del creador del documento .
A more detailed discussion of XML , its structure , and its use in the humanities , is available from the Text Encoding Initative .þSi quieres saber más sobre XML , te recomendamos leer una explicación más detallada sobre su estructura y uso en las humanidades en la página web de la Text Encoding Initiative .
What is XSL ?þ¿Qué es XSL ?
eXtensible Stylesheet Language ( XSL ) is the natural complement to XML .þEl Lenguaje de Hojas de Estilo Extensibles ( eXtensible Stylesheet Language , abreviado como `` XSL '' ) es el complemento natural de XML .
At its most basic level , it provides layout and formatting instructions in much the same way as Cascading Stylesheets ( CSS ) do for HTML files .þEn términos generales , proporciona instrucciones de procesamiento ; en cierto modo , podríamos decir que XSL es análogo a las Hojas de Estilos en Cascada ( Cascading Stylesheets , abreviado `` CSS '' ) necesarias para presentar archivos HTML .
This allows you to transform your plain-text data into richly formatted text , as well as dictate its layout on a screen or in print , without altering your original data files .þAmbos lenguajes permiten transformar el texto plano en un formato de texto enriquecido , así como determinar su diseño y apariencia tanto en pantalla como impreso , sin tener que alterar los archivos originales .
At a more advanced level , it also allows you to sort or filter your records based on particular critera , or create and display compound or derived values based on your original dataset .þEn un nivel más avanzado , también permiten ordenar y filtrar la información según un criterio concreto y crear o visualizar otros datos derivados a partir del archivo original .
By keeping your data ( XML ) and formatting instructions ( XSL ) separate , you are able to refine and alter your layout without the risk of compromising the structure of your data .þAl separar los datos ( XML ) de las instrucciones de procesamiento ( XSL ) , es posible refinar y modificar la presentación sin correr el riesgo de corromper la estructura de los archivos .
You are also able to create a number of different styles , each serving a different purpose , and apply them as necessary to a single data set .þAsimismo , podemos crear más de una hoja de estilo , de tal modo que se utilicen en función del objetivo para transformar un solo archivo fuente .
In practice , this means only having to update your data in one place , even if you export it to many different documents . The following tutorial will therefore explain :þEn la práctica , esto significa que solo hay que actualizar los datos en un solo lugar y luego exportar distintos documentos .
editors : the tools needed to create XSL transformation filesþ
editorsþ
transformers : the tools needed to apply your XSL transformation instructions to your XML documentsþ
transformersþ
choosing and preparing XML data : how to connect your XML data to your XSL transformation instructionsþ
choosing and preparing XML dataþ
It will walk you through the creation of some of the most common transformations intructions as well , including :þ
printing values : how to print or display your dataþ
printing valuesþ
for-each loops : how to display particular data for each recordþ
for-each loopsþ
sorting results : how to display your data in a particular orderþ
sorting resultsþ
filtering results : how to select which records you displayþ
filtering resultsþ
Necessary and Helpful Software PackagesþAlgunos programas necesarios o recomendados
EditorsþEditores de texto
One of the advantages of storing data in a plain-text format is the ease of obtaining appropriate software for viewing and manipulating it .þUna de las ventajas de guardar datos en formato de texto plano es la facilidad de encontrar programas para visualizarlos y manipularlos .
For the purposes of this tutorial , we recommend that you install the open-source editor Visual Studio Code ( `` VSCode '' , for short ) , although any other programming editor can be used for this tutorial ( Notepad++ , Atom , Emacs , Vim , etc. ) .þPara los propósitos de este tutorial , recomendamos utilizar el editor Visual Studio Code ( que abreviaremos aquí como `` VSCode '' ) , aunque cualquier otro editor para programación puede servir para este tutorial ( Notepad++ , Atom , Emacs , Vim , etc. ) . VSCode es un editor gratuito y de código abierto .
VSCode handles and conserves the plain-text format of your data while providing you with different colour schemes ( such as green-on-black or brown-on-beige ) as well the ability to collapse ( hide ) sections or easily comment-out ( temporarily disable ) sections of your code .þMantiene el formato de texto plano , pero ofrece esquemas de colores distintos ( verde sobre negro o marrón sobre beige ) , así como la función de esconder secciones o de comentar trozos de código para desactivarlo de manera temporal .
When you become more comfortable with XML and XSL , and are ready to tackle more complicated transformations , you may want to consider using a dedicated XML editor , such as OxygenXML , although it is neither free nor open-source .þPara los usuarios más avanzados , que precisen realizar transformaciones de naturaleza compleja , se recomienda el uso del Oxygen XML Editor , si bien no es ni gratuito ni de código abierto .
XSL ProcessorsþProcesadores de XSL
Once you have installed VSCode on your system , you will need to install an . XSL processorþTras instalar VSCode en el sistema , hace falta instalar un procesador de XSL .
There are several ways to use XSL stylesheets to transform your XML data :þHay tres maneras de utilizar una hoja de estilo para transformar documentos XML :
via the web browser , using an embedded simple XSL processorþmediante un navegador web , que incluye un procesador XSL básico ;
via an XSL processor included in an XML program or editorþmediante un procesador XSL incluido en un editor de XML ; o
via a standalone XSL processor from the command line ( or as a binding within another programming language )þmediante un procesador XSL independiente , que se corre desde la línea de comandos ( o como un binding desde otro lenguaje de programación ) .
Until recently , the first option would have been the most comfortable way to learn how to work with XSL .þHasta hace poco , la primera opción habría sido la más cómoda para aprender a trabajar con XSL .
However , web browsers have introduced security restrictions that make it more difficult to natively transform local XML documents .þSin embargo , los navegadores web han introducido restricciones de seguridad que hacen más difícil la transformación y el procesamiento de documentos XML locales .
In order to avoid this problem , you could install add-ons in Chrome or Firefox , or modify their security policies directly , to allow transformations to run .þA fin de evitar este problema , podrías instalar complementos ( addons ) en Google Chrome o en Mozilla Firefox , o modificar directamente sus políticas de seguridad , para permitir que se corran las transformaciones .
However , this has the disadvantage of making the web browser vulnerable to certain kinds of cyber attacks .þSin embargo , esto tiene el inconveniente de hacer vulnerable el navegador a ciertos tipos de ataque informático .
For this reason , we will avoid taking this route .þPor esta razón , evitaremos tomar este camino .
The second option requires the installation of a specialised editor such as Oxygen XML Editor or Altova XMLSpy .þLa segunda opción requiere la instalación de un editor especializado como Oxygen XML Editor o Altova XMLSpy .
However , since these are neither free nor open source editors , we will not take this route either .þSin embargo , puesto que no son editores gratuitos ni de código abierto , tampoco tomaremos este camino aquí .
We are left with the third option .þNos queda la tercera opción .
We will use a free and open source XSL processor called Saxon-HE , developed by Michael Kay , one of the most renowned specialists in the field of XML , XSLT , XPath , XQuery , and related technologies .þUtilizaremos un procesador XSL gratuito y de código abierto llamado Saxon-HE , desarrollada por Michael Kay , uno de los especialistas más renombrados en el campo de XML , XSL , XPath , XQuery y tecnologías relacionadas .
The `` HE '' in `` Saxon-HE '' stands for `` Home Edition '' .þSaxon-HE es la versión `` casera '' ( Home Edition ) del procesador XSL Saxon .
Saxonica , Michael Kay 's software house , also has much more powerful editions of the Saxon processor for sale , suitable for larger projects and higher technical requirements .þSaxonica , la casa de software de Michael Kay , también tiene para la venta ediciones del procesador Saxon mucho más potentes , adecuadas para proyectos gran envergadura y requisitos técnicos .
However , for our purposes —and indeed for most projects requiring XML transformation via XSLT— the Saxon-HE edition is more than sufficient .þSin embargo , para nuestros fines —y de hecho para la gran mayoría de proyectos que requieren transformación de XML por medio de XSLT— , la edición Saxon-HE es más que suficiente .
Saxon-HE InstallationþInstalación de Saxon-HE
Saxon-HE is a Java application ( in fact , its full technical name is `` SaxonJ-HE '' ) .þSaxon-HE es una aplicación de Java ( de hecho , su nombre técnico completo es `` SaxonJ-HE '' ) .
Accordingly , our system must have a Java Virtual Machine ( Java VM ) installed in order to run this edition of Saxon .þEso significa que tu sistema operativo debe tener instalada una máquina virtual de Java ( Java Virtual Machine o Java VM ) para poder ejecutar Saxon-HE .
Saxon-HE version 11 , the latest version to date , requires at least Java SE 8 ( JDK 1.8 ) .þLa versión 11 de Saxon-HE , a la fecha la última , requiere por lo menos la versión Java SE 8 ( JDK 1.8 ) .
We must make sure that it is installed on our system .þDebes asegurarte de que esté instalada en tu sistema .
If it is not , we must install it ourselves .þSi no lo está , deberás instalarla tú mismo .
To check if it is , we will use the command line of our operating system .þPara verificar si ya lo está , deberás usar la línea de comandos de tu sistema operativo .
In order to do that , let us open our terminal emulator ( hereinafter , the `` terminal '' ) .þPara ello , abre tu emulador de terminal ( en adelante , el `` terminal '' ) .
If you are on Microsoft Windows , it is advisable to use either PowerShell or Git Bash .þSi estás en Microsoft Windows , puedes usar para ello o bien PowerShell o bien Git Bash .
If you are on Mac OS , you can use the application Terminal.app ( included by default in the system ) .þSi estás en Mac OS , puedes usar la aplicación Terminal.app ( incluida por defecto en el sistema ) .
Finally , on Linux you can use any terminal application .þY si estás en Linux , puedes usar cualquiera de los terminales instalados por defecto .
If you are on Windows , type the following command and press enter :þSi estás en Windows , escribe ahora el siguiente comando en tu terminal :
On MacOS and Linux you must type the following :þEn MacOS y Linux deberás escribir lo siguiente :
( note the double hyphen -- ) .þ( fíjate en el doble guión -- ) .
If Java is not installed , you will get an error message like this one :þSi Java no está instalado , verás un mensaje de error como el siguiente :
But if it is installed , you will get something like this :þPero si Java sí está instalado , obtendrás algo como esto :
Now , if the Java version is less than 1.8 , or if it is simply not installed , you must download and install the latest version .þAhora bien , si la versión de Java es inferior a 1.8 , o si simplemente no está instalado , deberás bajar e instalar la versión más reciente .
To do this , go to the official Java download page , https : //www.java.com/en/download/ , and download the appropriate version for your operating system .þPara ello , ve a la página oficial de descargas de Java , https : //www.java.com/es/download/ , y baja la versión apropiada a nuestro sistema operativo .
After installing it , you must reboot your system so that the global variables , which inform the system where the Java executable is , are applied .þLuego de instalarla , deberás reiniciar tu computador a fin de que las variables globales , que le informan al sistema dónde está el ejecutable de Java , hayan sido correctamente aplicadas .
Once this is done , check the Java version again at the command line .þHecho esto , verifica de nuevo en la línea de comandos la versión de Java .
þ( Si ya has instalado la versión más reciente y con todo te aparece un mensaje de error indicando que no está instalada , deberás ajustar manualmente la variable PATH en tu sistema .
þPara ello , revisa esta explicación .
Next you will need to download and install Saxon .þ) A continuación deberás descargar e instalar Saxon-HE .
Do this from the Saxonica SourceForge repository at this address : https : //sourceforge.net/projects/saxon/files/Saxon-HE/11/Java/ Look for the most recent version in the list , which as of today is 11.2 .þPuede bajarlo del repositorio de SourceForge de Saxonica en esta dirección : https : //sourceforge.net/projects/saxon/files/Saxon-HE/11/Java/ Busca en la lista la versión más reciente . ( A la fecha de hoy esta es la versión 11.2 .
Now download the SaxonHE11-2J.zip file ( or the most recent one ) and unzip it inside some folder on your computer .þ) Descarga entonces el archivo SaxonHE11-2J.zip ( o el más reciente ) y descomprímelo en alguna carpeta de tu equipo .
Next open the terminal in that exact folder and run the following command ( bear in mind that the executable — saxon-he-11.2.jar — may be named differently in your case ) :þ( No olvides dónde quedó . ) Ahora abre el terminal ahí mismo y ejecuta el siguiente comando ( ten en cuenta que el nombre del ejecutable — saxon-he-11.2.jar — puede ser diferente para ti ) :
( the -t option tells Saxon to display its version , as well as other useful information ) .þ( el parámetro -t le dice a Saxon que muestre su versión , así como otra información útil ) .
For example , on Windows you will get :þPor ejemplo , en Windows obtendrás :
Now , since you have unzipped Saxon into a random folder ( in C : \Users\user\Downloads , in our example ) , you will only be able to run Saxon from there .þAhora bien , dado que hemos descomprimido Saxon en una carpeta cualquiera ( en C : \Users\usuario\Downloads , en nuestro ejemplo ) , solo podremos correr Saxon desde ahí .
This means that if you are in another location on your system , you wo n't be able to simply run the java -jar saxon-he-11.2.jar command to get started , since the saxon-he-11.2.jar executable wo n't be available there .þEsto quiere decir que si estamos en otra carpeta en nuestro sistema , no podremos correr simplemente la instrucción java -jar saxon-he-11.2.jar para empezar a trabajar , puesto que el ejecutable saxon-he-11.2.jar no estará disponible ahí .
This is not really a problem .þEsto no es necesariamente un problema .
You just need to make sure that the XML and XSL documents you want to use in your transformations are always as your Saxon executable . in the same folderþTan solo debes asegurarte de que los documentos XML y XSL que vayas a utilizar en tus transformaciones se encuentren siempre en la misma carpeta del ejecutable de Saxon .
The command line code examples we will show here will assume that this is the case .þLos ejemplos de código de línea de comandos que mostraremos aquí presupondrán que tal es el caso .
Choosing and Preparing XML DataþCómo elegir y preparar datos en XML
In order to begin transforming XML , you will need to obtain a well-formed dataset .þPara empezar a transformar un documento XML , primero es necesario obtener un archivo bien formado .
Many online historical databases are built upon XML and provide their data freely .þMuchas bases de datos históricas disponibles en línea están modeladas en XML y , a veces , ofrecen sus datos en abierto .
This tutorial will make use of the Scissors and Paste Database .þPara realizar este tutorial utilizaremos la base de datos Scissors and Paste .
The Scissors and Paste Database is a collaborative and growing collection of articles from British and imperial newspapers in the 18th and 19th centuries .þLa base de datos Scissors and Paste es una colección colaborativa , en continuo crecimiento , que contiene noticias procedentes de periódicos británicos e imperiales de los siglos XVIII y XIX .
Its original purpose was to allow for careful comparisons of reprints ( copies ) that appeared in multiple newspapers as well as to detect similarly themed articles across different English-language publications .þLos dos objetivos originales del proyecto eran facilitar la comparación de reediciones aparecidas en distintos periódicos y detectar temas similares en distintas publicaciones inglesas .
Like many XML databases , Scissors and Paste contains both data ( the article 's text ) , formatting information ( such as italics and justification ) , and metadata .þComo muchas bases de datos XML , Scissors and Paste contiene datos ( el texto ) , información sobre el formato ( como las cursivas o las justificación de los párrafos ) y metadatos .
This metadata includes documentation about the particular article , such as its pagination and printing date , information about the newspaper in which it was published , and the themes , individuals or locations mentioned in the text .þLos metadatos recogen la paginación de la noticia , la fecha de impresión , algunos detalles adicionales sobre el periódico , los temas principales y una lista con las personas y lugares mencionados .
As of 2015 , the database contained over 350 individual articles , each with attached metadata .þEn 2015 , la base de datos alcanzó las 350 noticias con metadatos .
Although some researchers may need all of this information , most will only be interested in a subsection of the data -- -a particular year , theme or publication .þAunque quizás algunos investigadores quieran acceder a toda la información , la mayoría están interesados en una porción de los datos como el año de publicación o el tema principal de la noticia .
By using XSL , these researchers can quickly filter out the information they do not need or re-arrange the material in the way that is most helpful for their project .þGracias al uso de XSL , es posible filtrar la información innecesaria u ordenar el material de un modo que sea más útil para investigar .
For example , the module tutor in our introduction or a researcher who wants a simple table of the dates , publications and page numbers of humorous articles within the database .þPor ejemplo , como imaginábamos en la introducción , quizás nos sería de utilidad preparar una lista de publicaciones o bien una tabla con las fechas , los títulos y la paginación de las noticias humorísticas contenidas en la base de datos .
Both can be quickly created using XSL .þEn ambos casos , podemos obtener los resultados sin muchos problemas utilizando hojas de estilo XSL .
To begin work with the Scissors and Paste Database , download the following ZIP archive : master.zip .þPara empezar a trabajar con la base de datos Scissors and Paste , descarga el archivo master.zip .
Open the ZIP file and you will find a folder named . scissorsandpaste-masterþDescomprime el archivo ZIP para obtener la carpeta llamada scissorsandpaste-master .
Extract this folder by either using the extract button of your unzipping programme or by dragging and dropping the folder onto your desktop .þPuedes descomprimirlo haciendo doble clic desde el explorador de archivos ( en Windows , MacOS o Linux ) o usando un programa especial para ello .
This data package has three main items :þLa carpeta contiene tres ítems principales :
TEISAP.XML : The central XML databaseþel archivo TEISAP.XML : la base de datos XML
Transformers : A collection of XSL stylesheetsþla carpeta Transformers : una colección de hojas de estilo XSL
Outputs : Outputs derived from the database using the XSL stylesheetsþla carpeta Outputs : archivos derivados de la base de datos mediante las hojas de estilo XSL
The package also includes :þTambién encontrarás ahí los siguientes documentos :
a Template , for anyone wishing to contribute to the databaseþel archivo Template_TEISAP.xml , una plantilla para los investigadores que quieran contribuir con más noticias
a README file , providing information about the databaseþel archivo README.md con información sobre la base de datos
a Cite file , explaining the preferred way to cite the databaseþel archivo cite.md que explica cómo citar la base de datos
a License file , explaining the terms of useþel archivo license.md con los términos de uso
Once you have completed the tutorial , you can explore the different XSL stylesheets ( transformers ) included here , and their associated outputs , to discover additional possibilities for your own datasets .þAl finalizar este tutorial , te recomendamos explorar las otras hojas de estilo XSL contenidas en la carpeta Transformers y los archivos generados con ellas ; de esta manera podrás descubrir otras posibilidades y crear archivos adaptados a tus necesidades .
The main TEISAP.XML database has been encoded to Text-Encoding Initiative ( TEI ) standards and includes a significant amount of metadata .þLa información contenida en el archivo TEISAP.XML ha sido codificada según las recomendaciones de la Text-Encoding Initiative ( TEI ) , gran parte de la cual corresponde a los metadatos .
For the purposes of this tutorial , however , we will be using a simplified version of the database that focuses on some of the core historical data .þSin embargo , en este tutorial utilizaremos una versión simplificada que cubre los datos históricos más importantes .
Open the outputs folder and continue into the XML folder . Here you will find a folder entitled Simplified .þDeberás descargar el archivo SAPsimple_es.xml .
Next , copy the SimplifiedSAP.xml file to the same folder you previously unzipped the Saxon executable into .þHaz una copia de él en la misma carpeta donde antes habías descomprimido el ejecutable de Saxon .
Open the SimplifiedSAP.xml file in VSCode and examine it now .þAhora ábrelo en el editor VSCode y examina su contenido .
Figure 1 : Viewing the XMLþFigura 1 : Una primera mirada a un documento XML
The first line of the XML database is :þLa primera línea del archivo XML es la siguiente :
which indicates the version of XML used ( 1.0 ) and the encoding method of the text ( UTF-8 ) .þEsta línea indica la versión de XML utilizada ( 1.0 ) y el método de codificación del texto ( UTF-8 ) .
The second line is < root > , which has a matching line , < /root > , at the end of the file .þEn la segunda línea se encuentra la etiqueta de apertura < raíz > y , al final , la etiqueta de cierre < /raíz > .
< root > is the top-level element of this database and surrounds all the records within it .þEsto quiere decir que < raíz > , como su nombre lo indica , es el elemento raíz que contiene todos los artículos de periódicos , cada uno etiquetado con un elemento < registro > .
Each individual record , containing the information for one historical newspaper article , is opened by the element < record > and closed with the element < /record > .þAntes de continuar , ubica la etiqueta de cierre < /registro > .
Within these records there are a number of different child elements .þDentro de cada registro hay varios elementos hijos .
The Text-Encoding Initiative allows for hundreds of different sub-elements to fit a very wide range of data .þLa Text Encoding Initiative permite anidar centenares de elementos para modelar datos de muy distinta naturaleza .
Moreover , the beauty of XML is that you can name your elements anything you like ( with a few small exceptions ) .þAdemás , la gracia de XML es que puedes dar nombre a tus elementos nuevos con bastante libertad .
In the Scissors and Paste Database , each record has the following elements :þEn la base de datos Scissors and Paste cada registro contiene los siguientes elementos :
< id > : The ID number of the recordþ< identificador > : número de identificación del registro
< title > : The title of the newspaperþ< título > : título del periódico
< city > : The city of the newspaperþ< ciudad > : ciudad del periódico
< province > : The province or administrative region of the newspaperþ< provincia > : provincia o región del periódico
< country > : The country of the newspaperþ< país > : país del periódico
< date > : The full ISO date of the articleþ< fecha > : fecha del artículo en formato ISO
< year > : The year of publicationþ< año > : año de la publicación
< month > : The month of publicationþ< mes > : mes de la publicación
< day > : The day of publicationþ< día > : día de la publicación
< keywords > : The section containing keywords describing the articleþ< secciónPalabrasClave > : sección que contiene las palabras claves
< keyword > : An individual keyword describing the articleþ< palabraClave > : palabra clave que describe el artículo
< headline > : The headline of the article . This may be blank .þ< titular > : titular del artículo ( opcional )
< text > : The section containing the text of the articleþ< texto > : sección que contiene el artículo
< p > : An individual paragraph within the text .þ< p > : párrafo de texto
These are the different types of data that you will be able to use in creating your outputs .þTal es , pues , la tipología de datos que utilizaremos para crear otros archivos derivados .
Creating and Testing Your XSL FileþCómo crear y probar tus hojas de estilo XSL
It is now time to create your XSL file .þHa llegado la hora de crear una archivo XSL para transformar el documento XML .
To do this , open VSCode , create a new blank file and save it as mystyle.xsl .þPara ello , abre el editor VSCode , crea un archivo nuevo en blanco y guárdalo con el nombre miestilo.xsl .
Once again , make sure the file is saved in the same directory that contains both the SimplifiedSAP.xml file and the Saxon executable .þDe nuevo , asegúrate de que el archivo se haya guardado en el mismo directorio que contiene tanto el archivo SAPsimple_es.xml como el ejecutable de Saxon .
The first three lines of your XSL file should be the following :þLa primeras tres líneas de tu archivo XSL serán las siguientes :
The first line documents that this is an XML document encoded as UTF-8 .þLa primera línea declara que este es un documento XML versión 1.0 , codificado como UTF-8 . ( ¡Nota que un documento XSL es en últimas un tipo especial de documento XML !
The second line states that the document is an XSL document version 1.0 and the standards ( or namespace ) established by the World Wide Web Consortium , whose web address you have listed . ( Note that an XSL document is ultimately an XML document !þ) La segunda línea declara que se trata de la versión 1.0 de XSL y que el uso del espacio de nombres ( namespace , en inglés ) es el estándar establecido por el Consorcio World Wide Web , cuya URI ( Uniform Resource Identifier ) figura en la instrucción .
) Finally , the third line tells your transformer what sort of output you would like to create . In this case , you are indicating that you will be creating a plain-text file .þFinalmente , la tercera línea le indica al procesador XSL que queremos generar un archivo de texto plano .
( You could also have written xml or html , instead of text , in order to produce an XML or and HTML document , respectively .þ( También podrías haber puesto xml o html , en lugar de text , para generar un documento XML o uno HTML , respectivamente .
)þ)
Every time you open an element < element > you will need to close it < /element > ( or however the element is named ) ; otherwise you will receive an syntax error as the document is not well-formed .þCada vez que se abre un < elemento > , es necesario cerrarlo con la etiqueta < /elemento > ( comoquiera que se llame ) . De lo contrario , se producirá un error de sintaxis y el archivo no será bien formado .
Close your stylesheet by adding the following as the final line of your file :þPor lo tanto , añade ahora la siguiente línea al final de tu hoja de estilos XSL :
The next part of your XSL stylesheet will be the main template , or formatting instructions , for your output .þLa siguiente parte de tu hoja de estilo XSL será la plantilla principal —las instrucciones de formato— para tu output .
On a new line , directly underneath < xsl : output method= '' text '' / > typeþEn una línea nueva , inmediatamente después de < xsl : output method= '' text '' / > , escribe
It is between these two elements that you will put all your layout instructions .þDentro de estas dos etiquetas pondrás todas las instrucciones relativas al formato deseado .
You have written / in your match attribute to indicate that you will be referring to everything within the XML file .þEl valor del atributo match ( que puede traducirse como `` hacer coincidir '' o `` emparejar '' ) contiene una barra / , porque queremos que la instrucción se aplique a todo el contenido del documento XML .
You could have also used root , which would have indicated that you were only using data within the < root > element .þPodríamos haber escrito en su lugar raíz para indicar que solo queremos utilizar los datos contenidos en el elemento < raíz > .
However , using root may cause unexpected later on , so it is best practice to use / for your main template .þSin embargo , esto podría crear algunos problemas , así que es mejor que usemos la barra / en la instrucción principal .
Your file should now look like this :þTras esto , tu archivo miestilo.xsl debería tener este aspecto :
Save your file .þGuarda tu archivo .
For the remainder of the tutorial , remember to save your file after each change you make .þEn lo que sigue , asegúrate de guardarlo antes de correr cualquier transformación nueva .
In between your template elements , type < xsl : value-of select= '' root '' / > You do not need to do so on a new line , nor to indent it to the right , but doing so will make your stylesheet more readable .þDentro de la instrucción que acabamos de crear , escribe < xsl : value-of select= '' raíz '' / > . No es necesario introducir una línea nueva , ni tampoco sangrarla a la derecha ; pero si lo haces , será más fácil de leer .
You 'll notice that I did n't include a closing < /xsl : value-of > tag . This is because < xsl : value-of select= '' root '' / > is self-closing ; the / at the end of the element closes it immediately .þTe habrás dado cuenta de que no hemos incluido una etiqueta de cierre < /xsl : value-of > ; esto se debe a que la instrucción < xsl : value-of select= '' raíz '' / > no tiene contenido y ya está `` auto-cerrada '' gracias a la barra / situada al final .
Your mystyle.xsl file should look like this :þTu archivo miestilo.xsl deberá verse así :
Next , you will transform the contents of the SimplifiedSAP.xml document into plain text , by means of the XSL stylesheet you have just created .þAhora vamos a transformar nuestro documento XML SAPsimple_es.xml en texto plano , utilizando el la hoja de estilos XSL que acabamos de crear .
To do this , go to the command line and run the following :þPara ello , ubícate en la línea de comandos y ejecuta esto :
When you run this command , you will see a huge amount of text displayed in the terminal , so much so that it is not easy to read it right there .þAl ejecutar este comando , verás una gran cantidad de texto desplegarse en el terminal , tanto que no es fácil leerlo ahí mismo .
The -xsl : option provides the name of the XSL stylesheet that Saxon will use to transform the XML document , while the -s : option ( from source ) provides the name of that very document .þEl parámetro -xsl : proporciona el nombre de la hoja de estilos XSL que será utilizada para transformar el documento XML , cuyo nombre es proporcionado por el parámetro -s : ( de source , `` fuente '' ) .
If you want to save the text given by Saxon as its output , you must use the -o : option ( from output ) , followed by a filename , for example like so :þSi quieres guardar el texto que Saxon ha arrojado , debes usar el parámetro -o : ( de output , `` salida '' ) , seguido de un nombre de archivo , por ejemplo así :
( This will always be the command you must run in the terminal to transform an XML document via an XSLT stylesheet .þ( Ese será siempre el comando que debes correr en el terminal para transformar un XML por medio de una hoja de estilos XSLT .
You must run it every time you want to perform a transformation .þDeberás ejecutarlo cada vez que quieras realizar una transformación .
In other words , you ca n't just make changes to your stylesheet to make the transformation happen ; you must always run Saxon to do it .þEn otras palabras , no bastará con que hagas cambios en tu hoja de estilos para que se produzca la transformación ; siempre deberás ejecutar Saxon para llevarla a cabo .
)þ)
Now you can open the output.txt file in VSCode to inspect it .þAhora puedes abrir el archivo salida.txt en VSCode para inspeccionarlo .
The result should be the text with the existing line breaks , but without the XML elements , as seen in the following image :þEl resultado debería ser el texto con los saltos de línea existentes , pero sin los elementos XML , tal como se percibe en la siguiente imagen :
Figure 2 : Initial text outputþFigura 2 : Salida del texto inicial
Populating Your OutputsþCómo poblar los resultados de tus transformaciones
Your single line of code < xsl : value-of select= '' root '' / > selected ( and printed ) the entire database in plain-text format .þLa línea de código < xsl : value-of select= '' raíz '' / > selecciona e imprime la base de datos entera en formato de texto plano y la arroja como salida de la transformación .
If you look at the components of this line , you can see why :þSi examinas los componentes de la línea , sabrás por qué :
xsl : value-of : an instruction for selecting the value of an element ; that is , the text between the opening and closing tag of an element within the XML file .þxsl : value-of : sirve para seleccionar e imprimir el valor de un elemento , es decir , el texto contenido entre la etiqueta de inicio y de cierre .
select= '' root '' : an instruction that explains which element it should select the value of .þselect= '' raíz '' : indica el nombre del elemento que debería seleccionarse e imprimirse ; en este caso , este elemento la raíz del documento XML , que incidentalmente se llama aquí < raíz > ( aunque pudo haberse llamado de cualquier otro modo ) .
Unless you instruct it otherwise , pointing to a parent ( outside ) element will also tell the transformer to select the values of any child ( inside ) elements as well .þA menos que declares lo contrario , si apuntas hacia un elemento padre , el procesador también seleccionará el contenido de los todos elementos que estén en él .
Thus , pointing to element < root > also selects elements < id > , < title > and so on , which are contained in it . ( Technically speaking select is an attribute of the < xsl : value-of > element , and the value of that attribute is root here .þPor lo tanto , al apuntar al elemento < raíz > , obtenemos el texto contenido en los elementos < identificador > , < título > , etc. ( Técnicamente hablando select es un atributo del elemento < xsl : value-of > , y el valor de ese atributo es raíz aquí .
)þ)
Selecting and Printing ValuesþCómo seleccionar e imprimir valores
In order to select and print the value of a particular element , you simply need to replace root with its name .þSi quieres seleccionar e imprimir el valor de un cierto elemento , sustituye el nombre raíz por el del elemento que quieras .
Let 's try it .þIntentémoslo .
In your XSL stylesheet , replace root with title in the proper line :þEn la hoja de estilos XSL , reemplaza raíz por título en la línea apropiada , así :
Save your file , run the transformation command in the terminal once again , and examine the result in VSCode .þGuarda el archivo , ejecuta de nuevo el comando de transformación en el terminal y examina el resultado en VSCode .
( VSCode with automatically refresh the window whenever it detects the output file has changed .þ( VSCode automáticamente refrescará la ventana cada vez que detecta que un archivo ha sido actualizado .
)þ)
It did n't work ?þ¿No funcionó ?
That is because the XSL processor did n't know where to find the < title > elements .þEso es porque el procesador XSL no sabe dónde ubicar los elementos < título > .
Let 's see why .þVeamos por qué .
Parents and ChildrenþPadres e hijos
< title > is not the top-level element , so we must explain to the XSL processor how to get to the element we mean .þEl elemento < título > no está situado en el nivel más alto de la jerarquía , así que debemos explicarle al procesador cómo llegar hasta el elemento que queremos .
This more specific direction is known as the XPATH of the element , and works in a similar way to the file paths on your computer .þEl lenguaje con que se hace esto se conoce como XPATH y funciona de una manera similar al modo como se estructuran las rutas de las carpetas en un computador .
Replace title with root/record/title , like so ;þSustituye título por raíz/registro/título .
Save the file , execute Saxon to run the transformation again , and examine the result in VSCode .þLa hoja de estilos XSL quería entonces así : Guárdala , corre la transformación y examina el resultado en VSCode de nuevo .
The editor should now display Caledonian Mercury , the title of the first register in our database .þAhora deberías obtener `` Caledonian Mercury '' , es decir , el título del primer registro en el documento XML . Sin embargo , tenemos más de 300 elementos título .
Where are the rest ?þ¿Qué ha ocurrido ?
Although , we have over 300 title values in the database , we did not specify which we wanted the XSL processor to select and print , so it assumed we meant the first one , and only the first one .þEs muy sencillo : como no hemos especificado cuál título queríamos imprimir , el procesador ha asumido que solo nos interesaba el primero .
When the XSL processor selects and prints it , it stops .þUna vez lo selecciona y lo imprime , se detiene .
For LoopsþBucles con for-each
To a human being , it may seem natural that we wanted all the titles , but the XSL processor does not know this by default .þPara un ser humano quizás parezca normal querer el contenido de todos los elementos < título > en la base de datos XML , pero el procesador no sabe esto por defecto .
Instead , we must create a for loop , which , besides selecting and printing them , affords us a great deal of control on the way it does so .þPara remediar la situación , debemos repetir la operación una y otra vez por medio de un bucle for . Además de seleccionar todos y cada uno de los elementos , los bucles for nos permiten controlar con mucha precisión cómo hacer esto .
In XSL , a for loop tells the transformer that for a certain condition , it should loop through the entire database and follow the instructions each time the data meets certain criteria .þEl bucle le indica al procesador XSL que debe procesar todo el documento XML y llevar a cabo la transformación indicada cada vez que una cierta condición sea se cumpla .
Create a new line after < xsl : template match= '' / '' > and insert < xsl : for-each select= '' root/record '' > .þAsí pues , crea una nueva línea después de < xsl : template match= '' / '' > e inserta < xsl : for-each select= '' raíz/registro '' > .
This tells the transformer that for each record within the root element , it should take some action .þEsta instrucción le indica al procesador que para cada elemento < registro > situado dentro del elemento < raíz > debe realizar una determinada acción .
Remove root/record from your < xsl : value-of > element .þA continuación , elimina raíz/registro del valor del atributo @ select en el elemento < xsl : value-of > y deja solo título .
It should now simply say title , because we are now already within a root/record context . After your < xsl : value-of > , add a new line that closes the < xsl : for-each > element , < /xsl : for-each >þLa razón de esto es que ya estamos adentro del contexto raíz/registro ( cuando lo seleccionamos con el elemento < xsl : for-each select= '' raíz/registro '' > ) Tras < xsl : value-of > , hay que terminar la operación con la etiqueta de cierre < /xsl : for-each > .
Your file should look like this now :þEl archivo resultante será el siguiente :
Here you can see that your < xsl : template > contains three lines of code :þAhora el elemento < xsl : template > contiene tres líneas de código :
an opening tag for your loopþuna etiqueta de inicio para el bucle
an instruction for selecting one < title > and printing its contentsþuna instrucción para seleccionar un < título > e imprimir su contenido
a closing tag for your loopþuna etiqueta de cierre para el bucle
Save your file , run the transformation , and examine the output in VSCode again .þGuarda la hoja de estilos XLS , corre la transformación en el terminar y examina el resultado en VSCode .
You should now have a very messy line of text , listing the value of every title element in the database .þDeberías obtener una única línea larguísima de texto con el valor de cada uno de los elementos < título > .
You can organise this data by instructing the transformer to add a new line after each entry .þPuedes mejorar la forma como se imprime indicándole al procesador que añada un salto de línea tras cada entrada .
Just below the < xsl : value-of select= '' title '' / > line , type < xsl : text > & # xA ; < /xsl : text > to add a line break .þPara ello , justo después de la línea < xsl : value-of select= '' título '' / > en tu archivo XSL , añade < xsl : text > & # xA ; < /xsl : text > para crear un salto de línea .
& # xA ; is the ISO 10646 hex code for a new line .þ& # xA ; es el código hexadecimal ISO 10646 con el que se representa un salto de línea .
The < xsl : text > element tells the transformer to print the value as plain text .þCon el elemento < xsl : text > especificamos que queremos imprimir el contenido como texto plano .
Depending on the type of outputs you are using ( with the < xsl : output > element ) , some special characters , particularly multiple spaces or line breaks , may not render correctly if entered on their own .þDependiendo del tipo de output que se haya escogido ( con el elemento < xsl : output > ) , algunos caracteres especiales , específicamente los espacios múltiples o los saltos de línea , pueden no visualizarse correctamente si se introducen por sí solos .
Using < xsl : text > elements ensures that your text renders exactly the way you intend it to .þEl uso de elementos < xsl : text > garantiza que tu texto se visualizará exactamente como lo deseas .
The complete code of your XSL file is therefore the following :þEl código completo de nuestra hoja de estilos XSL será entonces este :
Save the file , execute Saxon to run the transformation again , and examine the result in VSCode .þGuarda el archivo , ejecuta de nuevo el comando de transformación en el terminal y examina el resultado en VSCode .
Using this information , you should now be able to print the value of any element for each record in the database .þAhora deberías ver impreso el valor de los títulos de todos los registros contenidos en el documento .
Exercise A :þEjercicio A
Note : Possible solutions for the following exercises are located at the end of the tutorial .þNota : algunas soluciones posibles para estos ejercicios se encuentran al final del tutorial .
Print an inventory of the records in database , displaying the id , title and date of each record .þImprime un inventario de los registros que contenga el identificador , el título y la fecha de cada registro .
A solution to this and the following exercises is available at the end of the tutorial .þ
Exercise B :þEjercicio B
Print the text of all the articles in the database , displaying the id in square brackets ( [ ] ) at the start of each article .þImprime el texto de todos los artículos , precedido por el identificador entre corchetes cuadrados ( [ ] ) .
AttributesþAtributos
In an element , not all data is stored as its content ( i.e. , what is found between its opening and closing tags ) .þEn un elemento , no siempre se almacena la información dentro su contenido ( esto es , aquello que va entre sus etiquetas de apertura y de cierre ) .
Some data can be stored as the value of an attribute of that element .þAlgunos datos pueden almacenar como valores de atributos de ese elemento .
For example the < date > element has an attribute called when with the value of the date of the article :þPor ejemplo , el elemento < fecha > tiene un atributo llamado cuándo que contiene el valor de la fecha del artículo , así :
To print the value of when you will need to reference the attribute using @ when ( note the @ before it ) :þAhora bien , para obtener el valor contenido en el atributo cuándo hay que hacer referencia a este atributo utilizando el valor @ cuándo ( nota la arroba @ que precede su nombre ) , así
which means : select and print the value when of element < date > .þlo que significa : selecciona e imprime el valor del atributo cuándo del elemento < fecha > .
Exercise CþEjercicio C
Create an inventory of records in the database , listing the title of the newspaper followed by the date of publication .þCrea un inventario de registros en el que se liste el título del periódico seguido de la fecha de publicación .
Sorting ResultsþCómo ordenar resultados
This XML database was compiled as data was collected , rather than by date or title .þEsta base de datos XML fue escrita según se iba recolectando la información , sin organizar los registros por fecha o título .
To re-sort it , you can add a < xsl : sort > element to the top of any for loop , immediately following the < xsl : for-each > element .þA fin de organizarlos , podemos añadir un elemento < xsl : sort > ( literalmente , ordena o clasifica ) al principio de la repetición en bucle , es decir , inmediatamente después del elemento < xsl : for-each > .
This instruction has several optional attributes that will dictate how your data is sorted :þEste elemento tiene varios atributos opcionales que modifican cómo los datos se ordenan en el documento resultante :
select : contains the name of the element to sort the data byþselect : contiene el nombre del elemento que sirve como criterio para ordenar los datos
order : informs the XSL processor if the data should be sorted in an ascending or descending orderþorder : define si los datos se ordenan de manera ascendiente ( con el valor ascending ) o descendiente ( con el valor descending )
data-type : informs the transformer if the data is text or a numberþdata-type : informa al procesador XSL si los datos son de texto ( con el valor textual ) o numéricos ( con number )
It must be attributed in this order . For example , to sort the element < id > , whose content is numerical , in reverse order , use :þPor ejemplo , podemos escribir la siguiente instrucción para ordenar los datos a partir del elemento < identificador > en orden descendiente , es decir de mayor a menor :
You can sort by an element even if you do not print that element in your output .þVale aclarar que es posible ordenar los resultados utilizando un cierto elemento , incluso si no se lo desea imprimir .
Exercise DþEjercicio D
Print the text of all the articles in the database , sorting from earliest to latest .þImprime el texto de todos los artículos , ordenados de más a menos recientes .
For the purposes of the < xsl : sort > element , treat dates as text .þPara ello , utiliza el elemento < xsl : sort > y trata las fechas como si fueran texto ( text ) .
Filtering ResultsþCómo filtrar resultados
So far , you have selected and printed all the records contained in the database .þHasta el momento hemos impreso todos los registros contenidos en el documento XML .
If you only want a selection of records , you will need to filter the results using an .þAhora bien , si solo queremos seleccionar unos cuantos , necesitaremos filtrar los resultados mediante condiciones .
if statement An < xsl : if > element has one attribute , which is a test condition .þEsto se consigue utilizando el elemento < xsl : if > ( literalmente , si ) y añadiendo la condición deseada en el atributo test .
If the condition is true , the XSL processor will follow the instructions within the < xsl : if > element .þSi se cumple la condición , el procesador llevará a cabo la instrucción contenida en < xsl : if > .
If not , it will ignore these statements and move onto the next part of the template .þSi no la cumple , lo ignorará y seguirá adelante .
For example , to print the id numbers of all the records from 1789 , you would type :þAsí , para imprimir los identificadores de los registros del año 1789 , podemos usar el siguiente código :
If you want to exclude year 1789 , use date/year ! ='1789 ' instead . ( ! = means not equal to .þSi queremos excluir el año 1789 , en cambio , utilizaremos la expresión fecha/año ! =1789 ' ( donde ! = significa : no igual a ) .
) Exercise EþEjercicio E
Using all you have learned so far , create a list of records from 1789 , starting with the most recent , listing the id , title , and date of each record . Separate the data elements with commas and place each record on its own line .þA modo de recapitulación , crea una lista de registros fechados a partir de 1789 ordenada del más reciente al más antiguo y que contenga el identificador , el título y la fecha separados por comas ; cada registro deberá mostrarse tras un salto de línea .
If you wish , you can specify the output file to be a Comma Separated Values ( CSV ) file , which can be opened and manipulated as a spreadsheet with Microsoft Excel or LibreOffice Calc .þSi lo deseas , puedes especificar que el archivo de salida sea un archivo de Valores separados por comas ( CSV ) , que puede abrirse y manipularse como una hoja de cálculo con Microsoft Excel o LibreOffice Calc .
To do this , simply specify it on the command line when you perform the transformation :þPara hacer eso , tan solo especifícalo en la línea de comandos cuando realices la transformación :
ConclusionþConclusión
You now know the basics of XSL stylesheet creation .þEsta lección ha cubierto el funcionamiento principal de XSL .
With this information you can create a range of outputs including plain text , comma-separated , tab-separated and markdown files .þCon la información proporcionada , resulta fácil generar varios outputs en distintos formatos : texto plano , valores separados por coma o por tabulaciones , o Markdown .
You can also create web pages by changing your < xsl : output > method to html and wrapping your < xsl : value-of > commands in the appropriate HTML tags .þTambién sería posible crear páginas web cambiando valor el atributo method en el elemento < xsl : output > de text a html , y envolviendo las instrucciones < xsl : value-of > con los elementos HTML pertinentes .
There are many more transformation commands that you can use to further customise your outputs .þExisten muchas más instrucciones con las que transformar documentos XML a otros formatos y estructuras .
Some of these require the use of a 2.0 or 3.0 XSL processor , but the above should cover most of your day-to-day transformation needs .þAunque algunas transformaciones más avanzadas requieren un procesador XSL 2.0 o 3.0 , las explicaciones de este tutorial satisfacen las necesidades más comunes de los historiadores .
Once you are comfortable using the commands listed here , explore the Transformers folder of the Scissors and Paste Database to see further examples of how to transform XML structured data .þPara los usuarios más experimentados , recomendamos explorar el directorio Transformers de la base de datos Scissors and Paste a fin de ver más ejemplos de cómo transformar datos estructurados con lenguaje XML .
Possible Solutions to the ExercisesþPosibles soluciones a los ejercicios
Introduction ( Primary Source Reader )þIntroducción ( fuentes primarias )
The dot ( . ) in the XSL element < xsl : value-of select= '' . `` / > is a shorthand for the name of the current element in context .þEl punto ( . ) en el elemento XSL < xsl : value-of select= '' . `` / > es la forma de referirnos al elemento actual en el contexto .
In this case it is the element selected with the < xsl : for-each select= '' text/p '' > statement , i.e . the < p > child of < text > .þEn este caso nos referimos al elemento seleccionado con la instrucción < xsl : for-each select= '' texto/p '' > , es decir , el elemento < p > hijo de < texto > .
If we had used p instead , we would not select anything , as there is no text/p/p .þSi en su lugar tuviéramos p , no seleccionaríamos nada , pues no existe ningún texto/p/p .
Exercise AþEjercicio A
Exercise BþEjercicio B
To remove the indentation preceding the ID number between brackets , you will need to take more direct control of your whitespace by using line-breaks before each ID number and paragraph , as seen below :þPara eliminar la sangría del texto que precede al identificador entre corchetes , necesitarás hacerte cargo directo del espaciado introduciendo saltos de línea tras el identificador y cada párrafo , así :
Exercise CþEjercicio C
You 'll notice I used & # 32 ; in between my two values .þ
This is the HEX code for a space .þ& # 32 ; es el código HEX equivalente a un espacio .
You could have also used a literal space , but this is may not render correctly in all cases .þAunque es posible añadir un espacio en la instrucción , es mejor utilizar el código hexadecimal para asegurarnos que se mantendrá en el documento generado .
You could have also used a comma or any other divider .þTambién es posible utilizar una coma o cualquier otro separador .
Exercise DþEjercicio D
Exercise EþEjercicio E
Further ReadingþBibliografía recomendada
Hunter , David et al .þHunter , David et al .
Beginning XML , 4th ed. Indianapolis , IN : Wiley , 2007 .þBeginning XML , 4a ed. Indianapolis , IN : Wiley , 2007 . Impreso .
Kay , Michael , XSLT 2.0 and XPATH 2.0 : Programmer 's Reference .þKay , Michael , XSLT 2.0 and XPATH 2.0 : Programmer 's Reference .
Indianapolis , IN : Wiley , 2011 .þIndianapolis , IN : Wiley , 2011 . Impreso .
Kelly , David J .þKelly , David J .
XSLT Jumpstarter : Level the Learning Curve and Put Your XML to Work .þXSLT Jumpstarter : Level the Learning Curve and Put Your XML to Work .
Raleigh , NC : Peloria Press , May 2015 .þRaleigh , NC : Peloria Press , May 2015 . Impreso .
Mangano , Sal .þMangano , Sal .
XSLT Cookbook , 2nd ed. Sebstopol , CA : O'Reilly , 2006 .þXSLT Cookbook , 2a ed. Sebstopol , CA : O'Reilly , 2006 . Impreso .
Riley , Jenn .þRiley , Jenn .
Understanding Metadata : What is Metadata , and What is For ? NISO , 2017 .þUnderstanding Metadata : What is Metadata , and What is For ? NISO , 2017 . Web
Tennison , Jeni .þTennison , Jeni .
Beginning XSLT 2.0 . From Novice to Professional .þBeginning XSLT 2.0 . From Novice to Professional .
New York : Apress , 2005 .þNueva York : Apress , 2005 . Impreso .
Tidwell , Doug .þTidwell , Doug .
XSLT , 2nd ed. Sebstopol , CA : O'Reilly , 2008 .þXSLT , 2a ed. Sebstopol , CA : O'Reilly , 2008 . Impreso
NotesþNotas
þ: Nota del traductor : Según Wikipedia , una base de datos XML es un programa `` que da persistencia a datos almacenados en formato XML .
þEstos datos pueden ser interrogados , exportados y serializados '' .
: The XSL language has two branches : ( 1 ) XSL Formatting Objects ( XSL : FO ) , which contains formatting instructions for producing a PDF document from an XML document ; and ( 2 ) Extensible Stylesheet Language Transformations ( XSLT ) , which contains instructions for transforming an XML document into other documents ( XML , HTML , XHTML and plain text ) .þPueden distinguirse dos tipos : bases de datos habilitadas ( por ejemplo , una basee de datos relacional clásica que acepta XML como formato de entrada y salida ) y bases de datos nativas ( es decir , que utilizan documentos XML como unidad de almacenamiento ) como eXist o BaseX . En este tutorial , sin embargo , la autora , a menudo , no distingue entre el continente ( el programario ) y el contenido de la base de datos XML ( los documentos ) .
þ: Nota del traductor : La Text Encoding Initiative considera que un documento XML está bien formado cuando cumple tres reglas : ( 1 ) un solo elemento ( o elemento raíz ) contiene todo el documento ; ( 2 ) todos los elementos están contenidos en el elemento raíz ; y ( 3 ) las etiquetas de apertura y cierre marcan , respectivamente , el inicio y el fin de todos los elementos .
þPara más detalles sobre el funcionamiento de XML , aconsejamos consultar Hunter et al .
In this tutorial only the second one is discussed .þ( 2007 ) . : Nota del traductor : La National Information Standards Organization ( NISO ) , nacida en Estados Unidos en 1983 en el ámbito de las bibliotecas , define los metadatos como `` la información creada , almacenada y compartida para describir objetos y que nos permite interactuar con éstos a fin de obtener conocimiento '' ( Riley , 2017 ) .
: If you have already installed the latest version and still get an error message that it is not installed , you will have to manually adjust the PATH variable on your system .þ: Nota del traductor : En la versión española de este tutorial , hemos traducido al español los nombres de los elementos ( pero no su contenido ) y hemos adaptado las instrucciones XSL para que coincidan con los utilizados en el archivo fuente ( input ) . En adelante , daremos por sentado que estás utilizando el archivo XML SAPsimple_es.xml .
See this explanation for more details .þ: Nota del traductor : Más información en Wikipedia y en la página web de International Organization for Standardization . ISO es una organización internacional fundada en 1947 y establecida en Ginebra que tiene por misión la creación y mantenimiento de estándares .
þEl lenguaje XSL tiene dos ramas : ( 1 ) XSL Formatting Objects ( XSL : FO ) , que contiene instrucciones de formato para producir un documento PDF a partir de un documento XML ; y ( 2 ) Extensible Stylesheet Language Transformations ( XSLT ) , es contiene instrucciones para transformar un documento XML en otros documentos ( XML , HTML , XHTML y texto plano ) .
: An alternative solution is to place the Saxon executable in a folder that is already included in the PATH global system variable ( or to change that variable to include the folder we have chosen for Saxon ) .þEn este tutorial solo se discute la segunda . Otra posibilidad es que ubiquemos el ejecutable de Saxon en una carpeta que ya esté incluida en la variable global de sistema PATH ( o que cambiemos dicha variable para que incluya la carpeta que hemos escogido para Saxon ) .
However , such technical details are beyond the scope of this tutorial .þ
( For those interested , see these pages on how to do this on Windows , MacOS and Linux . )þQuienes tengan interés pueden consultar estas páginas que explican cómo hacerlo en Windows , MacOS y Linux .
: As of XSLT version 2.0 , the < xsl : value-of > statement selects all occurrences of the expression in the XML document .þDesde la versión 2.0 de XSLT , la instrucción < xsl : value-of > selecciona todas las ocurrencias de la expresión en el documento XML .
( On this , see here .þ( Al respecto , véase aquí .
) If the reader wishes to try this , they should change the value of the @ version attribute from 1.0 to 2.0 ( or 3.0 ) in the < xsl : stylesheet version= '' 1.0 '' xmlns : xsl= '' http : //www.w3.org/1999/XSL/Transform '' > line of the XSL stylesheet .þ) Si quieres intentarlo , debes cambiar el valor del atributo @ version de 1.0 a 2.0 ( o a 3.0 ) en la línea < xsl : stylesheet version= '' 1.0 '' xmlns : xsl= '' http : //www.w3.org/1999/XSL/Transform '' > de la hoja de estilos XSL . xml < xsl : text > < /xsl : text > ( Fíjate en la línea en blanco como contenido del elemento < xsl : text > .
: Alternatively , you can replace that line with this code :þEn lugar de usar la entidad & # xA ; , puedes reemplazar la línea con este código :
